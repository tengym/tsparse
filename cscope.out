cscope 15 /work/parse_ts/test -q 0000002038 0000404195
	@app/main.c

7 
	~"TsEº‹Check_Api.h
"

8 
	~"TsEº‹Check_Log.h
"

10 
	~"TsEº‹Check_O√Levñ.h
"

11 
	~"TsEº‹Check_TwoLevñ.h
"

12 
	~"TsEº‹Check_ThªeLevñ.h
"

14 
	~"°©ic£¨ch.h
"

15 
	~"°©icfûe.h
"

16 
	~"ts_b™d.h
"

18 
	$maö
(
¨gc
, *
¨gv
[])

20 
fûï©h
[256] = "149.ts";

22 if(
¨gc
 > 1)

24 
	`°r˝y
(
fûï©h
, 
¨gv
[1]);

27 
	`tsb™d_öô
();

29 
	`TsEº‹Check_Api_Inô
();

31 #i‡
STATIC_SEARCH_USE


32 
	`Sètic_Sórch_ProgSórch_Inô
(
fûï©h
);

35 
	`tsb™d_¸óâhªad_showªsu…
(500);

37 
	`°©icfûe_ªad_tsfûe
(
fûï©h
);

39 
	`ts_b™d_show_pidöfo
(0);

43 
	`¶ìp
(10);

47 
	}
}

	@bandwidth/include/ts_band.h

8 #ifde‡
__˝lu•lus


9 #i‡
__˝lu•lus


14 #i‚de‡
__TS_BAND_H__


15 
	#__TS_BAND_H__


	)

17 
	~<°dio.h
>

18 
	~<°dlib.h
>

19 
	~<°rög.h
>

20 
	~<uni°d.h
>

22 
	~"TsEº‹Check_Comm⁄.h
"

24 
	#TSBAND_CHANNEL_MAX
 2

	)

25 
	#TSBAND_PROG_PES_MAX
 8

	)

26 
	#TSBAND_PID_MAX
 256

	)

31 
tŸÆ_b™dwidth
;

32 
tŸÆ_∑ckës
;

35 
nuŒ_∑ckës
;

36 
nuŒ_b™dwidth
;

37 
nuŒ_≥r˚¡
;

40 
∑ylﬂd_∑ckës
;

41 
∑ylﬂd_b™dwidth
;

42 
∑ylﬂd_≥r˚¡
;

45 
psisi_∑ckës
;

46 
psisi_b™dwidth
;

47 
psisi_≥r˚¡
;

48 }
	tTSBAND_PACKAGE_INFO
;

53 
	maudio_pid
;

54 
	maudio_∑ckës
;

56 
	maudio_b™dwidth
;

57 
	maudio_≥r˚¡
;

58 }
	tTSBAND_PES_AUDIO_INFO
;

63 
	mpmt_pid
;

64 
	m£rvi˚ID
;

65 
	mvideo_pid
;

68 
	mnb_audio
;;

69 
TSBAND_PES_AUDIO_INFO
 
	maudio_öfo
[
TSBAND_PROG_PES_MAX
];

72 
	m£rvi˚_∑ckës
;

73 
	mvideo_∑ckës
;

76 
	m£rvi˚_b™dwidth
;

77 
	mvideo_b™dwidth
;

80 
	mvideo_≥r˚¡
;

81 
	m£rvi˚_≥r˚¡
;

83 }
	tPES_BANDWIDTH_INFO
;

87 
	mnb_¥og
;

88 
PES_BANDWIDTH_INFO
 
	m°¥og
[
SEARCH_PROG_NUM_MAX
];

89 }
	tTSBAND_PES_INFO
;

94 
	mu£d
;

96 
	m∑ckës
;

97 
	mpid
;

98 
	mb™dwidth
;

99 
	m≥r˚¡
;

100 }
	tPID_BANDWIDTH_INFO
;

104 
	mnb_pid
;

105 
PID_BANDWIDTH_INFO
 
	mpid_öfo
[
TSBAND_PID_MAX
];

106 }
	tTSBAND_PID_INFO
;

108 
tsb™d_£t_¥ogöfo
(
ch™ID
, 
SEARCH_INFO_S
 *
p£¨ch_öfo
);

109 
tsb™d_£t_bôøã
(
ch™ID
, 
bôøã
);

111 
tsb™d_°©i°ics_pid∑ckë
(
ch™ID
, 
pid
);

112 
tsb™d_°©i°ics_≥•ackë
(
ch™ID
, 
pid
);

113 
tsb™d_°©i°ics_tŸÆ∑ckë
(
ch™ID
);

114 
tsb™d_°©i°ics_∑ckagïackë
(
ch™ID
, 
pid
);

116 
tsb™d_gë_∑ckageöfo
(
ch™ID
, 
TSBAND_PACKAGE_INFO
 *
∑ckage_öfo
);

117 
tsb™d_gë_≥söfo
(
ch™ID
, 
TSBAND_PES_INFO
 *
≥s_öfo
);

118 
tsb™d_gë_pidöfo
(
ch™ID
, 
TSBAND_PID_INFO
 *
pid_öfo
);

120 
ts_b™d_show_pidöfo
(
ch™ID
);

121 
tsb™d_¸óâhªad_showªsu…
(
time
);

123 
tsb™d_öô
();

124 
tsb™d_deöô
();

128 #ifde‡
__˝lu•lus


129 #i‡
__˝lu•lus


	@bandwidth/src/ts_band.c

8 
	~"ts_b™d.h
"

11 
	#NULL_PID_BAND
 0x1FFF

	)

14 
	#PAT_PID_BAND
 0x0000

	)

15 
	#CAT_PID_BAND
 0x0001

	)

16 
	#NIT_PID_BAND
 0x0010

	)

19 
	#TSDT_PID_BAND
 0x0002

	)

20 
	#BAT_SDT_PID_BAND
 0x0011

	)

21 
	#EIT_PID_BAND
 0x0012

	)

22 
	#RST_PID_BAND
 0x0013

	)

23 
	#TDT_TOT_PID_BAND
 0x0014

	)

24 
	#DIT_PID_BAND
 0x001E

	)

25 
	#SIT_PID_BAND
 0x001F

	)

27 
±hªad_t
 
	gtsb™d_showªsu…_h™dÀ
 = 0;

29 
TSBAND_PACKAGE_INFO
 
	gg°_b™d_∑ckageöfo
[
TSBAND_CHANNEL_MAX
];

30 
TSBAND_PES_INFO
 
	gg°_b™d_≥söfo
[
TSBAND_CHANNEL_MAX
];

31 
TSBAND_PID_INFO
 
	gg°_b™d_pidöfo
[
TSBAND_CHANNEL_MAX
];

34 
	$tsb™d_£rvi˚_£t_¥ogöfo
(
ch™ID
, 
SEARCH_INFO_S
 *
p£¨ch_öfo
)

36 if((
ch™ID
 >
TSBAND_CHANNEL_MAX
Ë|| (
p£¨ch_öfo
 =
GOSTSR_NULL
))

41 
i
 = 0, 
j
 = 0;

42 
ödex_video
 = 0, 
ödex_audio
 = 0;

44 
i
 = 0; i < 
p£¨ch_öfo
->
u16NbProg
;i++)

46 
g°_b™d_≥söfo
[
ch™ID
].
°¥og
[
ödex_video
].
pmt_pid
 = 
p£¨ch_öfo
->
°ProgInfo
[
i
].
PmtPid
;

47 
g°_b™d_≥söfo
[
ch™ID
].
°¥og
[
ödex_video
].
£rvi˚ID
 = 
p£¨ch_öfo
->
°ProgInfo
[
i
].
°£rvi˚öfo
.serviceID;

48 
g°_b™d_≥söfo
[
ch™ID
].
°¥og
[
ödex_video
].
video_pid
 = 
p£¨ch_öfo
->
°ProgInfo
[
i
].
°£rvi˚öfo
.video_pid;

50 
ödex_audio
 = 0;

51 
j
 = 0; j < 
p£¨ch_öfo
->
°ProgInfo
[
i
].
°£rvi˚öfo
.
u8Nbaudio
; j++)

53 
g°_b™d_≥söfo
[
ch™ID
].
°¥og
[
ödex_video
].
audio_öfo
[
ödex_audio
].
audio_pid
 = 
p£¨ch_öfo
->
°ProgInfo
[
i
].
°£rvi˚öfo
.audio_pid[
j
];

54 
ödex_audio
++;

57 
g°_b™d_≥söfo
[
ch™ID
].
°¥og
[
ödex_video
].
nb_audio
 = 
ödex_audio
;

58 
ödex_video
++;

60 
g°_b™d_≥söfo
[
ch™ID
].
nb_¥og
 = 
ödex_video
;

62 
	`¥ötf
("ts_b™d, Nb_¥og = %d\n", 
ödex_video
);

65 
	}
}

68 
	$tsb™d_£t_bôøã
(
ch™ID
, 
bôøã
)

70 if((
bôøã
 =0)||(
ch™ID
 >
TSBAND_CHANNEL_MAX
))

74 
g°_b™d_∑ckageöfo
[
ch™ID
].
tŸÆ_b™dwidth
 = 
bôøã
;

77 
	}
}

80 
	$tsb™d_°©i°ics_pid∑ckë
(
ch™ID
, 
pid
)

82 if((
ch™ID
 >
TSBAND_CHANNEL_MAX
))

86 
i
 = 0;

88 
i
 = 0; i < 
g°_b™d_pidöfo
[
ch™ID
].
nb_pid
; i++)

90 if(
pid
 =
g°_b™d_pidöfo
[
ch™ID
].
pid_öfo
[
i
].pid)

92 
g°_b™d_pidöfo
[
ch™ID
].
pid_öfo
[
i
].
∑ckës
++;

97 
i
 = 0; i < 
TSBAND_PID_MAX
; i++)

99 if(0 =
g°_b™d_pidöfo
[
ch™ID
].
pid_öfo
[
i
].
u£d
)

105 if(
TSBAND_PID_MAX
 =
i
)

107 
	`¥ötf
("NO SpaceÅo Store PID Packet\n");

111 
g°_b™d_pidöfo
[
ch™ID
].
pid_öfo
[
i
].
pid
 =Öid;

112 
g°_b™d_pidöfo
[
ch™ID
].
pid_öfo
[
i
].
u£d
 = 1;

113 
g°_b™d_pidöfo
[
ch™ID
].
nb_pid
++;

116 
	}
}

119 
	$tsb™d_°©i°ics_≥•ackë
(
ch™ID
, 
pid
)

121 if((
ch™ID
 >
TSBAND_CHANNEL_MAX
))

126 
i
 = 0, 
j
 = 0;

128 
i
 = 0; i < 
g°_b™d_≥söfo
[
ch™ID
].
nb_¥og
;i++)

130 if(
pid
 =
g°_b™d_≥söfo
[
ch™ID
].
°¥og
[
i
].
video_pid
)

132 
g°_b™d_≥söfo
[
ch™ID
].
°¥og
[
i
].
video_∑ckës
++;

133 
g°_b™d_≥söfo
[
ch™ID
].
°¥og
[
i
].
£rvi˚_∑ckës
++;

136 
j
 = 0; j < 
g°_b™d_≥söfo
[
ch™ID
].
°¥og
[
i
].
nb_audio
; j++)

138 if(
pid
 =
g°_b™d_≥söfo
[
ch™ID
].
°¥og
[
i
].
audio_öfo
[
j
].
audio_pid
)

140 
g°_b™d_≥söfo
[
ch™ID
].
°¥og
[
i
].
audio_öfo
[
j
].
audio_∑ckës
++;

141 
g°_b™d_≥söfo
[
ch™ID
].
°¥og
[
i
].
£rvi˚_∑ckës
++;

147 
	}
}

150 
	$tsb™d_°©i°ics_tŸÆ∑ckë
(
ch™ID
)

152 if((
ch™ID
 >
TSBAND_CHANNEL_MAX
))

156 
g°_b™d_∑ckageöfo
[
ch™ID
].
tŸÆ_∑ckës
++;

159 
	}
}

162 
	$tsb™d_°©i°ics_∑ckagïackë
(
ch™ID
, 
pid
)

164 if((
ch™ID
 >
TSBAND_CHANNEL_MAX
))

168 
i
 = 0;

171 if(
NULL_PID_BAND
 =
pid
)

173 
g°_b™d_∑ckageöfo
[
ch™ID
].
nuŒ_∑ckës
++;

178 if((
PAT_PID_BAND
 =
pid
Ë|| (
CAT_PID_BAND
 =pidË|| (
NIT_PID_BAND
 ==Öid))

180 
g°_b™d_∑ckageöfo
[
ch™ID
].
psisi_∑ckës
++;

185 if((
BAT_SDT_PID_BAND
 =
pid
Ë|| (
EIT_PID_BAND
 =pidË|| (
RST_PID_BAND
 =pidË|| (
TDT_TOT_PID_BAND
 ==Öid) \

186 || (
TSDT_PID_BAND
 =
pid
Ë|| (
DIT_PID_BAND
 =pidË|| (
SIT_PID_BAND
 ==Öid))

188 
g°_b™d_∑ckageöfo
[
ch™ID
].
psisi_∑ckës
++;

193 
i
 = 0; i < 
g°_b™d_≥söfo
[
ch™ID
].
nb_¥og
; i++)

195 if(
pid
 =
g°_b™d_≥söfo
[
ch™ID
].
°¥og
[
i
].
pmt_pid
)

197 
g°_b™d_∑ckageöfo
[
ch™ID
].
psisi_∑ckës
++;

203 
	}
}

206 
	$tsb™d_gë_∑ckageöfo
(
ch™ID
, 
TSBAND_PACKAGE_INFO
 *
∑ckage_öfo
)

208 if((
NULL
 =
∑ckage_öfo
Ë|| (
ch™ID
 >
TSBAND_CHANNEL_MAX
))

213 
i
 = 0;

215 
bôøã
 = 
g°_b™d_∑ckageöfo
[
ch™ID
].
tŸÆ_b™dwidth
;

216 
tŸÆ∑ckë
 = 
g°_b™d_∑ckageöfo
[
ch™ID
].
tŸÆ_∑ckës
;

217 if((
tŸÆ∑ckë
 == 0))

219 
	`¥ötf
("totalÖacket is 0\n");

223 
g°_b™d_∑ckageöfo
[
ch™ID
].
∑ylﬂd_∑ckës
 = g°_b™d_∑ckageöfo[ch™ID].
tŸÆ_∑ckës
 - g°_b™d_∑ckageöfo[ch™ID].
nuŒ_∑ckës
 \

224 - 
g°_b™d_∑ckageöfo
[
ch™ID
].
psisi_∑ckës
;

227 
g°_b™d_∑ckageöfo
[
ch™ID
].
nuŒ_b™dwidth
 = ()g°_b™d_∑ckageöfo[ch™ID].
nuŒ_∑ckës
 / 
tŸÆ∑ckë
 * 
bôøã
;

228 
g°_b™d_∑ckageöfo
[
ch™ID
].
nuŒ_≥r˚¡
 = ()g°_b™d_∑ckageöfo[ch™ID].
nuŒ_∑ckës
 / 
tŸÆ∑ckë
;

231 
g°_b™d_∑ckageöfo
[
ch™ID
].
∑ylﬂd_b™dwidth
 = ()g°_b™d_∑ckageöfo[ch™ID].
∑ylﬂd_∑ckës
 / 
tŸÆ∑ckë
 * 
bôøã
;

232 
g°_b™d_∑ckageöfo
[
ch™ID
].
∑ylﬂd_≥r˚¡
 = ()g°_b™d_∑ckageöfo[ch™ID].
∑ylﬂd_∑ckës
 / 
tŸÆ∑ckë
;

235 
g°_b™d_∑ckageöfo
[
ch™ID
].
psisi_b™dwidth
 = ()g°_b™d_∑ckageöfo[ch™ID].
psisi_∑ckës
 / 
tŸÆ∑ckë
 * 
bôøã
;

236 
g°_b™d_∑ckageöfo
[
ch™ID
].
psisi_≥r˚¡
 = ()g°_b™d_∑ckageöfo[ch™ID].
psisi_∑ckës
 / 
tŸÆ∑ckë
;

239 
	`mem£t
(
∑ckage_öfo
, 0, (
TSBAND_PACKAGE_INFO
));

240 
	`mem˝y
(
∑ckage_öfo
, &
g°_b™d_∑ckageöfo
[
ch™ID
], (
TSBAND_PACKAGE_INFO
));

243 
	}
}

246 
	$tsb™d_gë_≥söfo
(
ch™ID
, 
TSBAND_PES_INFO
 *
≥s_öfo
)

248 if((
NULL
 =
≥s_öfo
Ë|| (
ch™ID
 >
TSBAND_CHANNEL_MAX
))

250 
	`¥ötf
("NULL\n");

254 
i
 = 0, 
j
 = 0;

255 
video_∑ckë
 = 0;

256 
audio_∑ckë
 = 0;

257 
£rvi˚_∑ckë
 = 0;

259 
bôøã
 = 
g°_b™d_∑ckageöfo
[
ch™ID
].
tŸÆ_b™dwidth
;

260 
tŸÆ∑ckë
 = 
g°_b™d_∑ckageöfo
[
ch™ID
].
tŸÆ_∑ckës
;

261 if((
tŸÆ∑ckë
 == 0))

263 
	`¥ötf
("totalÖacket is 0\n");

267 
i
 = 0; i < 
g°_b™d_≥söfo
[
ch™ID
].
nb_¥og
; i++)

270 
£rvi˚_∑ckë
 = 
g°_b™d_≥söfo
[
ch™ID
].
°¥og
[
i
].
£rvi˚_∑ckës
;

271 
g°_b™d_≥söfo
[
ch™ID
].
°¥og
[
i
].
£rvi˚_b™dwidth
 = ()
£rvi˚_∑ckë
/
tŸÆ∑ckë
*
bôøã
;

272 
g°_b™d_≥söfo
[
ch™ID
].
°¥og
[
i
].
£rvi˚_≥r˚¡
 = ()
£rvi˚_∑ckë
/
tŸÆ∑ckë
;

275 
video_∑ckë
 = 
g°_b™d_≥söfo
[
ch™ID
].
°¥og
[
i
].
video_∑ckës
;

276 
g°_b™d_≥söfo
[
ch™ID
].
°¥og
[
i
].
video_b™dwidth
 = ()
video_∑ckë
/
tŸÆ∑ckë
*
bôøã
;

277 
g°_b™d_≥söfo
[
ch™ID
].
°¥og
[
i
].
video_≥r˚¡
 = ()
video_∑ckë
/
tŸÆ∑ckë
;

280 
j
 = 0; j < 
g°_b™d_≥söfo
[
ch™ID
].
°¥og
[
i
].
nb_audio
; j++)

282 
audio_∑ckë
 = 
g°_b™d_≥söfo
[
ch™ID
].
°¥og
[
i
].
audio_öfo
[
j
].
audio_∑ckës
;

284 
g°_b™d_≥söfo
[
ch™ID
].
°¥og
[
i
].
audio_öfo
[
j
].
audio_b™dwidth
 = ()
audio_∑ckë
/
tŸÆ∑ckë
*
bôøã
;

285 
g°_b™d_≥söfo
[
ch™ID
].
°¥og
[
i
].
audio_öfo
[
j
].
audio_≥r˚¡
 = ()
audio_∑ckë
/
tŸÆ∑ckë
;

289 
	`mem£t
(
≥s_öfo
, 0, (
TSBAND_PES_INFO
));

290 
	`mem˝y
(
≥s_öfo
, &
g°_b™d_≥söfo
[
ch™ID
], (
TSBAND_PES_INFO
));

293 
	}
}

295 
	$tsb™d_gë_pidöfo
(
ch™ID
, 
TSBAND_PID_INFO
 *
pid_öfo
)

297 if((
NULL
 =
pid_öfo
Ë|| (
ch™ID
 >
TSBAND_CHANNEL_MAX
))

302 
i
 = 0;

303 
j
 = 0;

304 
tmp_∑ckë
 = 0;

306 
bôøã
 = 
g°_b™d_∑ckageöfo
[
ch™ID
].
tŸÆ_b™dwidth
;

307 
tŸÆ∑ckë
 = 
g°_b™d_∑ckageöfo
[
ch™ID
].
tŸÆ_∑ckës
;

308 if((
tŸÆ∑ckë
 == 0))

310 
	`¥ötf
("totalÖacket is 0\n");

313 
i
 = 0; i < 
g°_b™d_pidöfo
[
ch™ID
].
nb_pid
; i++)

315 
tmp_∑ckë
 = 
g°_b™d_pidöfo
[
ch™ID
].
pid_öfo
[
i
].
∑ckës
;

316 
g°_b™d_pidöfo
[
ch™ID
].
pid_öfo
[
i
].
b™dwidth
 = ()
tmp_∑ckë
 / 
tŸÆ∑ckë
 * 
bôøã
;

317 
g°_b™d_pidöfo
[
ch™ID
].
pid_öfo
[
i
].
≥r˚¡
 = ()
tmp_∑ckë
 / 
tŸÆ∑ckë
;

320 
PID_BANDWIDTH_INFO
 
tmp_pid_öfo
;

321 
	`mem£t
(&
tmp_pid_öfo
, 0, (
PID_BANDWIDTH_INFO
));

323 
i
 = 0; i < 
g°_b™d_pidöfo
[
ch™ID
].
nb_pid
 - 1; i++)

325 
j
 = 
i
; j < 
g°_b™d_pidöfo
[
ch™ID
].
nb_pid
; j++)

327 if(
g°_b™d_pidöfo
[
ch™ID
].
pid_öfo
[
i
].
pid
 > g°_b™d_pidöfo[ch™ID].pid_öfo[
j
].pid)

329 
	`mem˝y
(&
tmp_pid_öfo
, &
g°_b™d_pidöfo
[
ch™ID
].
pid_öfo
[
i
], (
PID_BANDWIDTH_INFO
));

330 
	`mem˝y
(&
g°_b™d_pidöfo
[
ch™ID
].
pid_öfo
[
i
], &g°_b™d_pidöfo[ch™ID].pid_öfo[
j
], (
PID_BANDWIDTH_INFO
));

331 
	`mem˝y
(&
g°_b™d_pidöfo
[
ch™ID
].
pid_öfo
[
j
], &
tmp_pid_öfo
, (
PID_BANDWIDTH_INFO
));

336 
	`mem£t
(
pid_öfo
, 0, (
TSBAND_PID_INFO
));

337 
	`mem˝y
(
pid_öfo
, &
g°_b™d_pidöfo
[
ch™ID
], (
TSBAND_PID_INFO
));

340 
	}
}

342 
	$ts_b™d_show_pidöfo
(
ch™ID
)

344 if(
ch™ID
 >
TSBAND_CHANNEL_MAX
)

349 
i
 = 0;

350 
ªt
 = 0;

353 
TSBAND_PID_INFO
 
pid_öfo
;

354 
	`mem£t
(&
pid_öfo
, 0, (
TSBAND_PID_INFO
));

355 
ªt
 = 
	`tsb™d_gë_pidöfo
(
ch™ID
, &
pid_öfo
);

356 if(0 !
ªt
)

361 
	`¥ötf
("\n=================================PID========================================\n");

362 
i
 = 0; i < 
pid_öfo
.
nb_pid
; i++)

364 
	`¥ötf
("pid: %#6x---b™dwidth = %.2fkbps----≥r˚¡ = %.3f%%\n",
pid_öfo
.pid_öfo[
i
].
pid
, (Ìid_öfo.pid_öfo[i].
b™dwidth
/1000, (Ìid_öfo.pid_öfo[i].
≥r˚¡
*100);

367 
	`¥ötf
("\n=================================PID========================================\n");

370 
	}
}

372 
	$ts_b™d_show_≥söfo
(
ch™ID
)

374 
i
 = 0, 
j
 = 0;

375 
ªt
 = -1;

377 
TSBAND_PES_INFO
 
≥s_öfo
;

378 
	`mem£t
(&
≥s_öfo
, 0, (
TSBAND_PES_INFO
));

379 
ªt
 = 
	`tsb™d_gë_≥söfo
(
ch™ID
, &
≥s_öfo
);

380 if(0 !
ªt
)

385 
i
 = 0; i < 
≥s_öfo
.
nb_¥og
; i++)

387 
	`¥ötf
("£rvi˚ID: %d---b™dwidth = %.2fkbps----≥r˚¡ = %.3f%%\n",
≥s_öfo
.
°¥og
[
i
].
£rvi˚ID
, (Ìes_öfo.°¥og[i].
£rvi˚_b™dwidth
/1000, (Ìes_öfo.°¥og[i].
£rvi˚_≥r˚¡
*100);

388 
	`¥ötf
("video: %#x---™dwidth = %.2fkbps----≥r˚¡ = %.3f%%\n",
≥s_öfo
.
°¥og
[
i
].
video_pid
, (Ìes_öfo.°¥og[i].
video_b™dwidth
/1000, (Ìes_öfo.°¥og[i].
video_≥r˚¡
*100);

390 
j
 = 0; j < 
≥s_öfo
.
°¥og
[
i
].
nb_audio
; j++)

392 
	`¥ötf
("audio[%d]: %#x---b™dwidth = %.2fkbps----≥r˚¡ = %.3f%%\n", 
j
, 
≥s_öfo
.
°¥og
[
i
].
audio_öfo
[j].
audio_pid
, (Ìes_öfo.°¥og[i].audio_öfo[j].
audio_b™dwidth
/1000, (Ìes_öfo.°¥og[i].audio_öfo[j].
audio_≥r˚¡
*100);

394 
	`¥ötf
("\n");

397 
	}
}

399 
	$ts_b™d_show_∑ckageöfo
(
ch™ID
)

401 
i
 = 0;

402 
ªt
 = -1;

404 
TSBAND_PACKAGE_INFO
 
∑ckage_öfo
;

405 
ªt
 = 
	`tsb™d_gë_∑ckageöfo
(
ch™ID
, &
∑ckage_öfo
);

406 if(0 !
ªt
)

411 
	`¥ötf
("ÅŸÆ_b™deidth = %.4fMbps\n\n", ()
∑ckage_öfo
.
tŸÆ_b™dwidth
/1000/1000);

412 
	`¥ötf
("ÇuŒ_∑ckë:---b™dwidth = %.2fkbps----≥r˚¡ = %.3f%%\n", ()
∑ckage_öfo
.
nuŒ_b™dwidth
/1000, (Ìackage_öfo.
nuŒ_≥r˚¡
*100);

413 
	`¥ötf
("∑ylﬂd_∑ckë:---b™dwidth = %.2fkbps----≥r˚¡ = %.3f%%\n", ()
∑ckage_öfo
.
∑ylﬂd_b™dwidth
/1000, (Ìackage_öfo.
∑ylﬂd_≥r˚¡
*100);

414 
	`¥ötf
("Ösisi_∑ckë:---b™dwidth = %.2fkbps----≥r˚¡ = %.3f%%\n\n", ()
∑ckage_öfo
.
psisi_b™dwidth
/1000, (Ìackage_öfo.
psisi_≥r˚¡
*100);

417 
	}
}

419 *
	$ts_b™d_showªsu…_èsk
(*
¨gv
)

421 
ch™ID
 = 0;

422 
cou¡
 = 0;

425 if(
g°_b™d_∑ckageöfo
[
ch™ID
].
tŸÆ_b™dwidth
 == 0)

429 
	`¥ötf
("=================================cou¡:%d========================================\n", 
cou¡
++);

431 
	`ts_b™d_show_∑ckageöfo
(
ch™ID
);

432 
	`ts_b™d_show_≥söfo
(
ch™ID
);

434 
	`¥ötf
("\≈idÇum: %d\n", 
g°_b™d_pidöfo
[
ch™ID
].
nb_pid
);

435 
	`¥ötf
("================================================================================\n\n");

436 
	`u¶ìp
(500 * 1000);

438  
NULL
;

439 
	}
}

442 
	$tsb™d_¸óâhªad_showªsu…
(
time
)

444 
	`±hªad_¸óã
(&
tsb™d_showªsu…_h™dÀ
 ,
NULL
, 
ts_b™d_showªsu…_èsk
, NULL);

446 
	}
}

448 
	$tsb™d_öô
()

450 
	`mem£t
(
g°_b™d_pidöfo
, 0, (gst_band_pidinfo));

452 
	}
}

454 
	$tsb™d_deöô
()

457 
	}
}

	@staticfile/include/staticfile.h

8 #ifde‡
__˝lu•lus


9 #i‡
__˝lu•lus


14 #i‚de‡
__STATICFILE_H__


15 
	#__STATICFILE_H__


	)

17 
	~<°dio.h
>

18 
	~<°dlib.h
>

19 
	~<°rög.h
>

20 
	~<uni°d.h
>

23 
	~"TsEº‹Check_Comm⁄.h
"

25 
GOSTSR_S32
 
°©icfûe_ªad_tsfûe
(
GOSTSR_U8
 *
fûeP©h
);

29 #ifde‡
__˝lu•lus


30 #i‡
__˝lu•lus


	@staticfile/include/staticsearch.h

1 #i‚de‡
__STATICSEARCH_H__


2 
	#__STATICSEARCH_H__


	)

4 
	~"TsEº‹Check_Comm⁄.h
"

6 
	#STATIC_SEARCH_PROG_NUM_MAX
 32

	)

7 
	#STATIC_SEARCH_CA_NUM_MAX
 10

	)

8 
	#STATIC_SEARCH_PROG_PES_MAX
 8

	)

12 
	m£rvi˚Name
[256];

13 
GOSTSR_U8
 
	mu8Nbaudio
;

14 
GOSTSR_U16
 
	maudio_pid
[
STATIC_SEARCH_PROG_PES_MAX
];

15 
GOSTSR_U16
 
	mvideo_pid
;

16 
GOSTSR_U16
 
	m£rvi˚ID
;

17 }
	tSTATIC_SERVICE_INFO_S
;

21 
GOSTSR_BOOL
 
	mbU£d
;

23 
GOSTSR_U16
 
	mPmtPid
;

24 
GOSTSR_U16
 
	mP¸Pid
;

25 
GOSTSR_U8
 
	mu8NbPes
;

26 
GOSTSR_U16
 
	mPesPid
[
STATIC_SEARCH_PROG_PES_MAX
];

28 
STATIC_SERVICE_INFO_S
 
	m°£rvi˚öfo
;

29 }
	tSTATIC_SEARCH_PROG_INFO_S
;

33 
GOSTSR_U16
 
	mCaPid
;

34 }
	tSTATIC_SEARCH_CA_INFO_S
;

38 
GOSTSR_U16
 
	mu16NbProg
;

39 
STATIC_SEARCH_PROG_INFO_S
 
	m°ProgInfo
[
STATIC_SEARCH_PROG_NUM_MAX
];

41 
GOSTSR_U8
 
	mu16NbCa
;

42 
STATIC_SEARCH_CA_INFO_S
 
	m°CaInfo
[
STATIC_SEARCH_CA_NUM_MAX
];

43 }
	tSTATIC_SEARCH_INFO_S
;

45 
GOSTSR_S32
 
Sètic_Sórch_gëProgInfo
(
STATIC_SEARCH_INFO_S
 *
p°ProgInfo
);

47 
GOSTSR_S32
 
Sètic_Sórch_ProgSórch_Inô
(
GOSTSR_U8
 *
fûeP©h
);

48 
GOSTSR_S32
 
Sètic_Sórch_ProgSórch_DeInô
();

	@staticfile/src/staticfile.c

7 
	~"TsEº‹Check_Api.h
"

8 
	~"°©icfûe.h
"

10 
	#TWOLEVEL_BYTEPOS_MAX
 0xffffffff

	)

11 
	#SYNC_BYTE
 0x47

	)

12 
	#TS_LENGTH_188
 188

	)

13 
	#TS_LENGTH_204
 204

	)

15 
GOSTSR_U64
 
	ggPackëNumbî
 = 0;

18 
GOSTSR_S32
 
	$°©icfûe_∑r£_∑ckëty≥
(
GOSTSR_U32
 *
pu32PackëLí
, 
GOSTSR_U8
 *
fûeP©h
)

20 
FILE
 *
sFp
 = 
GOSTSR_NULL
;

21 
GOSTSR_U64
 
fûeLí
 = 0;

22 
GOSTSR_U8
 
chr
 = '\0';

23 
GOSTSR_BOOL
 
checkFœg
 = 
GOSTSR_FALSE
;

24 
GOSTSR_U64
 
off£t
 = 0;

25 
GOSTSR_U64
 
ãmpOff£t
 = 0;

26 
GOSTSR_U32
 
ªtLí
 = 0;

27 
GOSTSR_U32
 
∑ckageLí
 = 0;

28 
GOSTSR_U8
 *
tsD©a
 = 
GOSTSR_NULL
;

30 i‡(
NULL
 =
fûeP©h
)

32  
GOSTSR_FAILURE
;

35 
sFp
 = 
	`f›í
(
fûeP©h
, "rb");

36 i‡(
NULL
 =
sFp
)

38  
GOSTSR_FAILURE
;

41 
	`f£ek
(
sFp
, 0, 
SEEK_END
);

42 
fûeLí
 = 
	`·ñl
(
sFp
);

43 
	`f£ek
(
sFp
, 0, 
SEEK_SET
);

46 
chr
 = 
	`fgëc
(
sFp
);

47 
off£t
++;

49 i‡((
chr
 =
EOF
Ë&& (
off£t
 >
fûeLí
))

54 i‡(
chr
 =
SYNC_BYTE
)

56 i‡(
ãmpOff£t
 == 0)

58 
ãmpOff£t
 = 
off£t
;

62 i‡(((
off£t
 - 
ãmpOff£t
Ë=
TS_LENGTH_188
Ë|| ((off£à-ÅempOff£tË=
TS_LENGTH_204
))

64 
off£t
 = 
ãmpOff£t
;

65 
checkFœg
 = 
GOSTSR_TRUE
;

69 
ãmpOff£t
 = 
off£t
;

74 }!
checkFœg
);

76 i‡(
chr
 =
EOF
)

78 
	`f˛o£
(
sFp
);

79 
sFp
 = 
GOSTSR_NULL
;

80  
GOSTSR_FAILURE
;

83 
off£t
 = offset - 1;

84 
	`f£ek
(
sFp
, 
off£t
, 
SEEK_SET
);

87 
tsD©a
 = (
GOSTSR_U8
 *)
	`mÆloc
(
TS_LENGTH_204
 + 1);

88 i‡(
GOSTSR_NULL
 =
tsD©a
)

90 
	`f˛o£
(
sFp
);

91 
sFp
 = 
GOSTSR_NULL
;

92  
GOSTSR_FAILURE
;

94 
	`mem£t
(
tsD©a
, 0x00, 
TS_LENGTH_204
 + 1);

95 
ªtLí
 = 
	`‰ód
(
tsD©a
, 1, 
TS_LENGTH_204
 + 1, 
sFp
);

96 i‡(
ªtLí
 !
TS_LENGTH_204
 + 1)

98 
	`f˛o£
(
sFp
);

99 
sFp
 = 
GOSTSR_NULL
;

100 i‡(
GOSTSR_NULL
 !
tsD©a
)

102 
	`‰ì
(
tsD©a
);

103 
tsD©a
 = 
GOSTSR_NULL
;

105  
GOSTSR_FAILURE
;

108 if((
tsD©a
[0] =
SYNC_BYTE
) && (tsData[188] == SYNC_BYTE))

111 
∑ckageLí
 = 
TS_LENGTH_188
;

113 if((
tsD©a
[0] =
SYNC_BYTE
) && (tsData[188] != SYNC_BYTE) && \

114 (
tsD©a
[204] =
SYNC_BYTE
))

117 
∑ckageLí
 = 
TS_LENGTH_204
;

121 
	`f˛o£
(
sFp
);

122 
sFp
 = 
GOSTSR_NULL
;

123 i‡(
GOSTSR_NULL
 !
tsD©a
)

125 
	`‰ì
(
tsD©a
);

126 
tsD©a
 = 
GOSTSR_NULL
;

128  
GOSTSR_FAILURE
;

131 i‡(
GOSTSR_NULL
 !
tsD©a
)

133 
	`‰ì
(
tsD©a
);

134 
tsD©a
 = 
GOSTSR_NULL
;

137 *
pu32PackëLí
 = 
∑ckageLí
;

139  
GOSTSR_SUCCESS
;

140 
	}
}

142 
GOSTSR_S32
 
	$°©icfûe_ªad_tsfûe
(
GOSTSR_U8
 *
fûeP©h
)

144 
FILE
 *
sFp
 = 
GOSTSR_NULL
;

145 
GOSTSR_U32
 
fûeLí
 = 0;

146 
GOSTSR_U32
 
u32ByãPos
 = 0;

147 
GOSTSR_U32
 
i
 = 0;

148 
GOSTSR_U32
 
off£tPos
 = 0;

149 
GOSTSR_U32
 
∑ckageLí
 = 0;

150 
GOSTSR_U8
 
off£tPos_C¨ry
 = 0;

151 
GOSTSR_U8
 
chr
 = '\0';

152 
GOSTSR_U8
 *
tsD©a
 = 
GOSTSR_NULL
;

153 
GOSTSR_BOOL
 
ídSèã
 = 
GOSTSR_TRUE
;

154 
GOSTSR_U32
 
curSyncOff£t
 = 0;

155 
GOSTSR_U32
 
outSyncOff£t
 = 0;

156 
GOSTSR_U32
 
tmpSyncOff£t
 = 0;

157 
GOSTSR_U32
 
tmpSyncOff£tbak
 = 0;

158 
GOSTSR_BOOL
 
bC¨ryFœg
 = 
GOSTSR_FALSE
;

160 i‡(
GOSTSR_NULL
 =
fûeP©h
)

162 
	`¥ötf
("Ñëu∫ faûuª %d \n", 
__LINE__
);

163  
GOSTSR_FAILURE
;

166 if(
GOSTSR_FAILURE
 =
	`°©icfûe_∑r£_∑ckëty≥
(&
∑ckageLí
,
fûeP©h
))

168 
	`¥ötf
("Ñëu∫ faûuª %d \n", 
__LINE__
);

169  
GOSTSR_FAILURE
;

171 
	`¥ötf
("∑ckageLí = %d\n",
∑ckageLí
);

172 
sFp
 = 
	`f›í
(
fûeP©h
, "rb");

173 i‡(
GOSTSR_NULL
 =
sFp
)

175 
	`¥ötf
("Ñëu∫ faûuª %d \n", 
__LINE__
);

176  
GOSTSR_FAILURE
;

179 
tsD©a
 = (
GOSTSR_U8
 *)
	`mÆloc
(
∑ckageLí
);

180 i‡(
GOSTSR_NULL
 =
tsD©a
)

182 
	`f˛o£
(
sFp
);

183 
sFp
 = 
GOSTSR_NULL
;

184 
	`¥ötf
("Ñëu∫ faûuª %d \n", 
__LINE__
);

185  
GOSTSR_FAILURE
;

188 
	`f£ek
(
sFp
, 0, 
SEEK_END
);

189 
fûeLí
 = 
	`·ñl
(
sFp
);

190 
	`f£ek
(
sFp
, 0, 
SEEK_SET
);

191 
	`¥ötf
("______ TS Fûêsizê%dM_____\n\n",
fûeLí
 / 1024 /1024);

193 
ídSèã
)

195 
off£tPos
 = 
	`·ñl
(
sFp
);

198 
	`f£ek
(
sFp
, 
off£tPos
, 
SEEK_SET
);

199 
chr
 = 
	`fgëc
(
sFp
);

200 
off£tPos
++;

201 if(
off£tPos
 >
TWOLEVEL_BYTEPOS_MAX
)

203 
off£tPos_C¨ry
++;

204 
off£tPos
 = 0;

205 
bC¨ryFœg
 = 
GOSTSR_TRUE
;

208 i‡(
off£tPos_C¨ry
*
TWOLEVEL_BYTEPOS_MAX
+
off£tPos
 >(
fûeLí
 - 1))

210 
ídSèã
 = 
GOSTSR_FALSE
;

213 }
chr
 !
SYNC_BYTE
);

215 i‡(
chr
 =
SYNC_BYTE
)

217 
off£tPos
 = offsetPos - 1;

218 
curSyncOff£t
 = 
off£tPos
;

219 
	`f£ek
(
sFp
, 
off£tPos
, 
SEEK_SET
);

221 
i
 = 0;i < 5;i++)

223 if(
	`‰ód
(
tsD©a
, 1, 
∑ckageLí
, 
sFp
) <ÖackageLen)

225 
ídSèã
 = 
GOSTSR_FALSE
;

229 if(
tsD©a
[0] !
SYNC_BYTE
)

235 if(
i
 != 5)

237 
	`f£ek
(
sFp
, 
curSyncOff£t
 + 1, 
SEEK_SET
);

242 if((
curSyncOff£t
 > 
outSyncOff£t
) && outSyncOffset != 0)

244 
tmpSyncOff£t
 = 
outSyncOff£t
;

245 if((
curSyncOff£t
 - 
outSyncOff£t
Ë> 
∑ckageLí
)

247 
tmpSyncOff£t
 <
curSyncOff£t
)

251 
	`f£ek
(
sFp
, 
tmpSyncOff£t
, 
SEEK_SET
);

252 
chr
 = 
	`fgëc
(
sFp
);

253 
tmpSyncOff£t
++;

255 if(
tmpSyncOff£t
 > 
curSyncOff£t
)

257 }
chr
 !
SYNC_BYTE
);

259 if(
chr
 =
SYNC_BYTE
)

261 
tmpSyncOff£t
 -= 1;

262 if(
tmpSyncOff£t
 + 
∑ckageLí
 < 
curSyncOff£t
)

264 
	`f£ek
(
sFp
, 
tmpSyncOff£t
 + 
∑ckageLí
, 
SEEK_SET
);

265 
chr
 = 
	`fgëc
(
sFp
);

266 if(
chr
 =
SYNC_BYTE
)

268 
tmpSyncOff£tbak
 = 
tmpSyncOff£t
;

269 
tmpSyncOff£t
 +
∑ckageLí
;

273 
tmpSyncOff£t
++;

285 
	`f£ek
(
sFp
, 
curSyncOff£t
, 
SEEK_SET
);

288 
off£tPos
 = 
	`·ñl
(
sFp
);

289 if(
	`‰ód
(
tsD©a
, 1, 
∑ckageLí
, 
sFp
) <ÖackageLen)

291 
ídSèã
 = 
GOSTSR_FALSE
;

294 if(
tsD©a
[0] =
SYNC_BYTE
)

296 
u32ByãPos
 = 
off£tPos
;

299 
	`TsEº‹Check_Api_A«lysisPackë
(0, 
bC¨ryFœg
, 
u32ByãPos
, 
tsD©a
, 
∑ckageLí
);

300 if(
bC¨ryFœg
)

302 
bC¨ryFœg
 = 
GOSTSR_FALSE
;

304 
gPackëNumbî
++;

305 if(
gPackëNumbî
 >
TWOLEVEL_BYTEPOS_MAX
)

307 
gPackëNumbî
 = 0;

312 
outSyncOff£t
 = 
off£tPos
;

313 
	`f£ek
(
sFp
, 
outSyncOff£t
, 
SEEK_SET
);

321 
LOOP_FILE_END
:

322 
	`‰ì
(
tsD©a
);

323 
tsD©a
 = 
GOSTSR_NULL
;

325 i‡(
GOSTSR_SUCCESS
 !
	`f˛o£
(
sFp
))

327  
GOSTSR_FAILURE
;

329 
sFp
 = 
GOSTSR_NULL
;

331  
GOSTSR_SUCCESS
;

332 
	}
}

	@staticfile/src/staticsearch.c

1 
	~"°©ic£¨ch.h
"

3 
	~"GosT§_A«lysisD©a.h
"

4 
	~"GosT§_Des¸ùt‹.h
"

6 
	~"TsEº‹Check_O√Levñ.h
"

7 
	~"TsEº‹Check_TwoLevñ.h
"

8 
	~"TsEº‹Check_ThªeLevñ.h
"

10 
	~"ts_b™d.h
"

12 
TS_PACKAGE_INFO
 *
	gSórchPackageHód
[
TABLE_NUMBER
] = {
GOSTSR_NULL
};

13 
GOSTSR_PSISI_PAT_S
 
	gg°SórchP©Info
;

14 
STATIC_SEARCH_INFO_S
 
	gg°SórchProgInfo
;

17 
GOSTSR_BOOL
 
	gbHadSórched
 = 
GOSTSR_FALSE
;

18 
GOSTSR_U16
 
	ggu16SórchCou¡
 = 0;

21 
GOSTSR_S32
 
	$Sètic_Sórch_TsEº‹Check_£tPid
(
STATIC_SEARCH_INFO_S
 *
p£¨ch_öfo
)

23 if((
GOSTSR_NULL
 =
p£¨ch_öfo
))

25  
GOSTSR_FAILURE
;

28 
	`TsEº‹Check_O√Levñ_£tPid
(
p£¨ch_öfo
);

29 
	`TsEº‹Check_TwoLevñ_£tPid
(
p£¨ch_öfo
);

30 
	`TsEº‹Check_ThªeLevñ_£tPid
(
p£¨ch_öfo
);

33 
	`tsb™d_£rvi˚_£t_¥ogöfo
(0, (
SEARCH_INFO_S
 *)
p£¨ch_öfo
);

35  
GOSTSR_SUCCESS
;

36 
	}
}

38 
GOSTSR_U8
 
	$Sètic_Sórch_Pes_gëSåómTy≥
(
GOSTSR_U32
 
u32EsTy≥
)

40 
GOSTSR_U8
 
u8SåómTy≥
 = 0;

41 
u32EsTy≥
)

43 
STREAM_TYPE_VIDEO_MPEG2
:

44 
STREAM_TYPE_VIDEO_MPEG4
:

45 
STREAM_TYPE_VIDEO_H264
:

46 
STREAM_TYPE_VIDEO_DIRAC
:

47 
u8SåómTy≥
 = 0;

49 
STREAM_TYPE_AUDIO_MPEG1
:

50 
STREAM_TYPE_AUDIO_MPEG2
:

51 
STREAM_TYPE_AUDIO_AAC
:

52 
STREAM_TYPE_AUDIO_AC3
:

53 
u8SåómTy≥
 = 1;

56 
u8SåómTy≥
 = 0;

59  
u8SåómTy≥
;

60 
	}
}

62 
GOSTSR_S32
 
	$Sètic_Sórch_St‹eProg_byP©
(
GOSTSR_PSISI_PAT_S
 *
∑tInfo
)

64 
GOSTSR_S32
 
i
 = 0;

65 
GOSTSR_U32
 
ödex
 = 0;

67 if((
GOSTSR_NULL
 =
∑tInfo
))

69  
GOSTSR_FAILURE
;

72 
i
 = 0; i < 
∑tInfo
->
u16NbEÀmíts
; i++)

74 if((
NIT_PID
 =
∑tInfo
->
a°EÀmít
[
i
].
u16Pid
) || (patInfo->astElement[i].u16Pid == 0))

78 
g°SórchProgInfo
.
°ProgInfo
[
ödex
++].
PmtPid
 = 
∑tInfo
->
a°EÀmít
[
i
].
u16Pid
;

80 
g°SórchProgInfo
.
u16NbProg
 = 
ödex
;

82  
GOSTSR_SUCCESS
;

83 
	}
}

85 
GOSTSR_S32
 
	$Sètic_Sórch_St‹eProg_byPmt
(
GOSTSR_U16
 
Pmt_pid
, 
GOSTSR_PSISI_PMT_S
 *
pmtInfo
)

87 
GOSTSR_S32
 
i
 = 0, 
j
 = 0;

89 if((
GOSTSR_NULL
 =
pmtInfo
))

91  
GOSTSR_FAILURE
;

94 
i
 = 0; i < 
g°SórchProgInfo
.
u16NbProg
; i++)

96 if((
g°SórchProgInfo
.
°ProgInfo
[
i
].
PmtPid
 =
Pmt_pid
Ë&& (g°SórchProgInfo.°ProgInfo[i].
bU£d
))

100 if((
g°SórchProgInfo
.
°ProgInfo
[
i
].
PmtPid
 =
Pmt_pid
Ë&& (!g°SórchProgInfo.°ProgInfo[i].
bU£d
))

102 
g°SórchProgInfo
.
°ProgInfo
[
i
].
°£rvi˚öfo
.
£rvi˚ID
 = 
pmtInfo
->
u16ProgømNumbî
;

104 
g°SórchProgInfo
.
°ProgInfo
[
i
].
bU£d
 = 
GOSTSR_TRUE
;

105 
g°SórchProgInfo
.
°ProgInfo
[
i
].
P¸Pid
 = 
pmtInfo
->
u16P¸Pid
;

106 
g°SórchProgInfo
.
°ProgInfo
[
i
].
u8NbPes
 = 
pmtInfo
->
u16NbEÀmíts
;

108 
j
 = 0; j < 
pmtInfo
->
u16NbEÀmíts
; j++)

110 if(0 =
	`Sètic_Sórch_Pes_gëSåómTy≥
(
pmtInfo
->
a°EÀmít
[
j
].
eTy≥
))

112 
g°SórchProgInfo
.
°ProgInfo
[
i
].
°£rvi˚öfo
.
video_pid
 = 
pmtInfo
->
a°EÀmít
[
j
].
u16Pid
;

117 
audio_num
 = 
g°SórchProgInfo
.
°ProgInfo
[
i
].
°£rvi˚öfo
.
u8Nbaudio
;

118 
g°SórchProgInfo
.
°ProgInfo
[
i
].
°£rvi˚öfo
.
audio_pid
[
audio_num
] = 
pmtInfo
->
a°EÀmít
[
j
].
u16Pid
;

119 
g°SórchProgInfo
.
°ProgInfo
[
i
].
°£rvi˚öfo
.
u8Nbaudio
++;

122 
g°SórchProgInfo
.
°ProgInfo
[
i
].
PesPid
[
j
] = 
pmtInfo
->
a°EÀmít
[j].
u16Pid
;

124 
gu16SórchCou¡
++;

125 if(
gu16SórchCou¡
 =
g°SórchProgInfo
.
u16NbProg
)

127 
	`¥ötf
("Sórch ProgÇum = %d\n",
gu16SórchCou¡
);

129 
	`Sètic_Sórch_TsEº‹Check_£tPid
(&
g°SórchProgInfo
);

130 
bHadSórched
 = 
GOSTSR_TRUE
;

136  
GOSTSR_SUCCESS
;

137 
	}
}

139 
GOSTSR_S32
 
	$Sètic_Sórch_St‹eProg_byC©
(
GOSTSR_PSISI_CAT_S
 *
ˇtInfo
)

141 
GOSTSR_S32
 
i
 = 0;

142 
GOSTSR_U8
 
ödex
 = 0;

143 
GOS_DESC_CA_S
 
ˇDesInfo
;

145 if((
GOSTSR_NULL
 =
ˇtInfo
))

147  
GOSTSR_FAILURE
;

150 
i
 = 0;ò< 
ˇtInfo
->
u16NbDes¸ùt‹s
; i++)

152 i‡(
GOSTSR_SUCCESS
 =
	`GosT§_Des¸ùt‹_CA
(&
ˇtInfo
->
a°Des¸ùt‹
[
i
], &
ˇDesInfo
))

154 
g°SórchProgInfo
.
°CaInfo
[
ödex
++].
CaPid
 = 
ˇDesInfo
.
u16CaPId
;

157 
g°SórchProgInfo
.
u16NbCa
 = 
ödex
;

159  
GOSTSR_SUCCESS
;

160 
	}
}

162 
GOSTSR_S32
 
	$Sètic_Sórch_P¨£Se˘i⁄
(
GOSTSR_U8
 
èbÀID
,
TS_SECTION_INFO
 *
curSe˘i⁄Info
)

164 if((
GOSTSR_NULL
 =
curSe˘i⁄Info
))

166  
GOSTSR_FAILURE
;

168 
èbÀID
)

170 
PAT_TABLE_ID
:

172 
GOSTSR_PSISI_PAT_S
 
∑tInfo
;

173 
	`GosT§_A«lysisD©a_PAT
(
curSe˘i⁄Info
, &
∑tInfo
);

174 
	`mem˝y
(&
g°SórchP©Info
, &
∑tInfo
, (
GOSTSR_PSISI_PAT_S
));

175 
	`Sètic_Sórch_St‹eProg_byP©
(&
∑tInfo
);

178 
PMT_TABLE_ID
:

180 
GOSTSR_PSISI_PMT_S
 
pmtInfo
;

181 
	`GosT§_A«lysisD©a_PMT
(
curSe˘i⁄Info
, &
pmtInfo
);

182 
	`Sètic_Sórch_St‹eProg_byPmt
(
curSe˘i⁄Info
->
PID
,&
pmtInfo
);

185 
CAT_TABLE_ID
:

187 
GOSTSR_PSISI_CAT_S
 
ˇtInfo
;

188 
	`GosT§_A«lysisD©a_CAT
(
curSe˘i⁄Info
, &
ˇtInfo
);

189 
	`Sètic_Sórch_St‹eProg_byC©
(&
ˇtInfo
);

195  
GOSTSR_SUCCESS
;

196 
	}
}

198 
GOSTSR_S32
 
	$Sètic_Sórch_LökPackage
(
GOSTSR_U8
 
èbÀID
, 
TS_PACKAGE_INFO
 *
PackageHód_Temp
, GOSTSR_U8 
œ°D©aLí
, GOSTSR_U8 *
œ°D©a
)

200 
GOSTSR_U8
 *
pSe˘i⁄D©a
 = 
GOSTSR_NULL
;

201 
GOSTSR_U16
 
curSe˘i⁄Lígth
 = 0;

202 
GOSTSR_U16
 
ÆlSe˘i⁄Lígth
 = 0;

203 
TS_SECTION_INFO
 *
curSe˘i⁄Info
 = 
GOSTSR_NULL
;

204 
TS_PACKAGE_INFO
 *
pCurPackage
 = 
GOSTSR_NULL
;

206 if((
GOSTSR_NULL
 =
PackageHód_Temp
Ë|| (GOSTSR_NULL =
œ°D©a
))

208  
GOSTSR_FAILURE
;

211 
pCurPackage
 = 
PackageHód_Temp
;

212 
GOSTSR_NULL
 !
pCurPackage
)

214 
ÆlSe˘i⁄Lígth
 +
pCurPackage
->
∑ckageLí
;

215 
pCurPackage
 =ÖCurPackage->
√xt
;

218 
curSe˘i⁄Lígth
 = 
ÆlSe˘i⁄Lígth
;

219 
curSe˘i⁄Lígth
 +
œ°D©aLí
;

221 
curSe˘i⁄Info
 = (
TS_SECTION_INFO
 *)
	`mÆloc
((TS_SECTION_INFO));

222 if(
GOSTSR_NULL
 =
curSe˘i⁄Info
)

224  
GOSTSR_FAILURE
;

226 
	`mem£t
(
curSe˘i⁄Info
, 0, (
TS_SECTION_INFO
));

227 
curSe˘i⁄Info
->
£˘i⁄Lígth
 = 
curSe˘i⁄Lígth
;

228 
curSe˘i⁄Info
->
PID
 = 
PackageHód_Temp
->PID;

229 
curSe˘i⁄Info
->
èbÀID
 = 
PackageHód_Temp
->tableID;

230 
	`mem˝y
(&
curSe˘i⁄Info
->
°Eº‹Info
,&
PackageHód_Temp
->°Eº‹Info,(
TR101290_ERROR_S
));

231 
curSe˘i⁄Info
->
£˘i⁄D©a
 = (
GOSTSR_U8
 *)
	`mÆloc
(
curSe˘i⁄Lígth
);

232 if(
GOSTSR_NULL
 =
curSe˘i⁄Info
->
£˘i⁄D©a
)

234  
GOSTSR_FAILURE
;

237 
	`mem£t
(
curSe˘i⁄Info
->
£˘i⁄D©a
, 0x00, 
curSe˘i⁄Lígth
);

238 
pSe˘i⁄D©a
 = 
curSe˘i⁄Info
->
£˘i⁄D©a
;

239 
pCurPackage
 = 
PackageHód_Temp
;

241 
GOSTSR_NULL
 !
pCurPackage
)

243 
	`mem˝y
(
pSe˘i⁄D©a
, 
pCurPackage
->
∑ckageD©a
,ÖCurPackage->
∑ckageLí
);

244 
pSe˘i⁄D©a
 +
pCurPackage
->
∑ckageLí
;

245 
pCurPackage
 =ÖCurPackage->
√xt
;

247 
	`mem˝y
(
pSe˘i⁄D©a
, 
œ°D©a
, 
œ°D©aLí
);

249 
GOSTSR_U16
 
curPos
 = 
curSe˘i⁄Info
->
£˘i⁄Lígth
 - 4;

250 
GOSTSR_U8
 *
pD©a
 = &(
curSe˘i⁄Info
->
£˘i⁄D©a
[
curPos
]);

251 
GOSTSR_U32
 
¸c32
 = (
pD©a
[0]<<24) + (pData[1]<<16) + (pData[2]<<8) +ÖData[3];

252 
GOSTSR_U32
 
ˇlCrc32
 = 0;

254 
ˇlCrc32
 = 
	`GosT§_A«lysisD©a_CRCCheck
(
curSe˘i⁄Info
->
£˘i⁄D©a
, curSe˘i⁄Info->
£˘i⁄Lígth
 - 4);

255 i‡((
¸c32
 =
ˇlCrc32
Ë|| (
TDT_TABLE_ID
 =
èbÀID
))

257 
	`Sètic_Sórch_P¨£Se˘i⁄
(
èbÀID
,
curSe˘i⁄Info
);

260 i‡(
GOSTSR_NULL
 !
curSe˘i⁄Info
)

262 i‡(
GOSTSR_NULL
 !
curSe˘i⁄Info
->
£˘i⁄D©a
)

264 
	`‰ì
(
curSe˘i⁄Info
->
£˘i⁄D©a
);

265 
curSe˘i⁄Info
->
£˘i⁄D©a
 = 
GOSTSR_NULL
;

267 
	`‰ì
(
curSe˘i⁄Info
);

268 
curSe˘i⁄Info
 = 
GOSTSR_NULL
;

271  
GOSTSR_SUCCESS
;

272 
	}
}

274 
GOSTSR_S32
 
	$Sètic_Sórch_BuûdSe˘i⁄
(
GOSTSR_U8
 
èbÀID
,c⁄° *
d©a
, 
TS_HEAD_INFO
 
tsHódInfo
)

276 
GOSTSR_U8
 
£˘i⁄Fœg
 = 
GOSTSR_FALSE
;

277 
GOSTSR_U16
 
i
 = 0, 
j
 = 0;

278 
GOSTSR_U8
 *
pcurD©a
 = 
GOSTSR_NULL
;

279 
GOSTSR_U8
 
ad≠tLígth
 = 0;

280 
GOSTSR_U8
 
poötFõldLígth
 = 0;

281 
GOSTSR_U8
 
‰⁄tSe˘i⁄D©a
[256] = {0,};

282 
GOSTSR_U8
 
curTabÀID
 = 
BULT_TABLE_ID
;

283 
GOSTSR_U16
 
curTempD©a
 = 0;

284 
GOSTSR_U16
 
curSe˘i⁄Lígth
 = 0;

285 
GOSTSR_U16
 
ªmaöLí
 = 0;

286 
TS_SECTION_INFO
 *
curSe˘i⁄Info
 = 
GOSTSR_NULL
;

287 
TS_PACKAGE_INFO
 *
pCurPackage
 = 
GOSTSR_NULL
;

288 
TS_PACKAGE_INFO
 *
¥ePackage
 = 
GOSTSR_NULL
;

289 
GOSTSR_U16
 
∑ckageAŒLí
 = 0;

290 
GOSTSR_U8
 *
pSe˘i⁄D©a
 = 
GOSTSR_NULL
;

291 
GOSTSR_U16
 
ÆlSe˘i⁄Lígth
 = 0;

293 i‡(
GOSTSR_NULL
 =
d©a
)

295  
GOSTSR_FAILURE
;

298 
pcurD©a
 = (
GOSTSR_U8
 *)
d©a
;

299 
pcurD©a
 +
TS_HEAD_LENGTH
;

302 i‡(
tsHódInfo
.
ad≠ãr_c⁄åﬁ
 & 
BIT2
)

305 
ad≠tLígth
 = 
pcurD©a
[0];

306 
pcurD©a
 += 1;

309 
pcurD©a
 +
ad≠tLígth
;

313 i‡(
tsHódInfo
.
lﬂd_ödiˇãr
 =
BIT1
)

316 
poötFõldLígth
 = 
pcurD©a
[0];

317 
pcurD©a
 += 1;

320 
	`mem£t
(
‰⁄tSe˘i⁄D©a
, 0x00, (frontSectionData));

321 
	`mem˝y
(
‰⁄tSe˘i⁄D©a
, 
pcurD©a
, 
poötFõldLígth
);

322 
pcurD©a
 +
poötFõldLígth
;

325 
curTabÀID
 = 
pcurD©a
[0];

326 
pcurD©a
 += 1;

328 i‡(
curTabÀID
 !
èbÀID
)

330  
GOSTSR_FAILURE
;

334 
i
 = 0; i < 
TABLE_NUMBER
; i++)

336 i‡(
SórchPackageHód
[
i
] =
GOSTSR_NULL
)

341 i‡(
SórchPackageHód
[
i
]->
PID
 =
tsHódInfo
.
ts_pid
)

343 
ÆlSe˘i⁄Lígth
 = 0;

345 
pCurPackage
 = 
SórchPackageHód
[
i
];

346 
GOSTSR_NULL
 !
pCurPackage
)

348 
ÆlSe˘i⁄Lígth
 +
pCurPackage
->
∑ckageLí
;

349 
pCurPackage
 =ÖCurPackage->
√xt
;

352 if((
ÆlSe˘i⁄Lígth
 + 
poötFõldLígth
Ë>
SórchPackageHód
[
i
]->
£˘i⁄Lí
)

354 
	`Sètic_Sórch_LökPackage
(
èbÀID
,
SórchPackageHód
[
i
],
poötFõldLígth
,
‰⁄tSe˘i⁄D©a
);

357 
pCurPackage
 = 
SórchPackageHód
[
i
];

358 
pCurPackage
 !
GOSTSR_NULL
)

360 
¥ePackage
 = 
pCurPackage
;

361 
pCurPackage
 =ÖCurPackage->
√xt
;

362 
	`‰ì
(
¥ePackage
);

363 
¥ePackage
 = 
GOSTSR_NULL
;

366 
SórchPackageHód
[
i
] = 
GOSTSR_NULL
;

371 
curTempD©a
 = 
pcurD©a
[0]*256 +ÖcurData[1];

372 
curSe˘i⁄Lígth
 = 
curTempD©a
 & (~((
BIT8
 | 
BIT7
 | 
BIT6
 | 
BIT5
) * 256));

373 
pcurD©a
 += 2;

376 
pcurD©a
 -= 3;

377 
curSe˘i⁄Lígth
 += 3;

380 i‡(
tsHódInfo
.
ad≠ãr_c⁄åﬁ
 & 
BIT2
)

382 i‡(
tsHódInfo
.
∑ckageTy≥
 =
PACKAGE_188
)

384 
ªmaöLí
 = (
TS_LENGTH_188
 - 
TS_HEAD_LENGTH
 - 1 - 
ad≠tLígth
 - 1 - 
poötFõldLígth
);

388 
ªmaöLí
 = (
TS_LENGTH_204
 - 
TS_HEAD_LENGTH
 - 1 - 
ad≠tLígth
 - 1 - 
poötFõldLígth
);

393 i‡(
tsHódInfo
.
∑ckageTy≥
 =
PACKAGE_188
)

395 
ªmaöLí
 = (
TS_LENGTH_188
 - 
TS_HEAD_LENGTH
 - 1 - 
poötFõldLígth
);

399 
ªmaöLí
 = (
TS_LENGTH_204
 - 
TS_HEAD_LENGTH
 - 1 - 
poötFõldLígth
);

404 i‡(
curSe˘i⁄Lígth
 <
ªmaöLí
)

406 
curSe˘i⁄Info
 = (
TS_SECTION_INFO
 *)
	`mÆloc
((TS_SECTION_INFO));

407 if(
GOSTSR_NULL
 =
curSe˘i⁄Info
)

411 
	`mem£t
(
curSe˘i⁄Info
, 0, (
TS_SECTION_INFO
));

412 
curSe˘i⁄Info
->
£˘i⁄Lígth
 = 
curSe˘i⁄Lígth
;

413 
curSe˘i⁄Info
->
èbÀID
 =ÅableID;

414 
curSe˘i⁄Info
->
PID
 = 
tsHódInfo
.
ts_pid
;

415 
curSe˘i⁄Info
->
£˘i⁄D©a
 = (
GOSTSR_U8
 *)
	`mÆloc
(
curSe˘i⁄Lígth
);

416 if(
GOSTSR_NULL
 =
curSe˘i⁄Info
->
£˘i⁄D©a
)

420 
	`mem£t
(
curSe˘i⁄Info
->
£˘i⁄D©a
, 0x00, 
curSe˘i⁄Lígth
);

421 
	`mem˝y
(
curSe˘i⁄Info
->
£˘i⁄D©a
, 
pcurD©a
, 
curSe˘i⁄Lígth
);

424 
£˘i⁄Fœg
 = 
GOSTSR_TRUE
;

429 
i
 = 0; i < 
TABLE_NUMBER
; i++)

431 i‡(
SórchPackageHód
[
i
] =
GOSTSR_NULL
)

437 i‡(
TABLE_NUMBER
 !
i
)

439 
SórchPackageHód
[
i
] = (
TS_PACKAGE_INFO
*)
	`mÆloc
((TS_PACKAGE_INFO));

440 if(
GOSTSR_NULL
 =
SórchPackageHód
[
i
])

444 
	`mem£t
(
SórchPackageHód
[
i
], 0, (
TS_PACKAGE_INFO
));

445 
SórchPackageHód
[
i
]->
√xt
 = 
GOSTSR_NULL
;

446 
SórchPackageHód
[
i
]->
∑ckageLí
 = 
ªmaöLí
;

447 
	`mem£t
(
SórchPackageHód
[
i
]->
∑ckageD©a
, 0x00, (SearchPackageHead[i]->packageData));

448 
	`mem˝y
(
SórchPackageHód
[
i
]->
∑ckageD©a
, 
pcurD©a
, 
ªmaöLí
);

449 
SórchPackageHód
[
i
]->
PID
 = 
tsHódInfo
.
ts_pid
;

450 
SórchPackageHód
[
i
]->
numbî
 = 
tsHódInfo
.
cou¡î
;

451 
SórchPackageHód
[
i
]->
£˘i⁄Lí
 = 
curSe˘i⁄Lígth
;

452 
SórchPackageHód
[
i
]->
èbÀID
 =ÅableID;

453 
	`mem˝y
(&
SórchPackageHód
[
i
]->
°Eº‹Info
,&
tsHódInfo
.°Eº‹Info,(
TR101290_ERROR_S
));

460 
i
 = 0; i < 
TABLE_NUMBER
; i++)

462 i‡(
SórchPackageHód
[
i
] =
GOSTSR_NULL
)

467 i‡(
SórchPackageHód
[
i
]->
PID
 =
tsHódInfo
.
ts_pid
)

474 i‡(
i
 =
TABLE_NUMBER
)

476  
GOSTSR_FAILURE
;

480 
∑ckageAŒLí
 = 0;

481 
pCurPackage
 = 
SórchPackageHód
[
i
];

482 
¥ePackage
 = 
SórchPackageHód
[
i
];

483 
pCurPackage
 !
GOSTSR_NULL
)

485 
∑ckageAŒLí
 +
pCurPackage
->
∑ckageLí
;

486 
¥ePackage
 = 
pCurPackage
;

487 
pCurPackage
 =ÖCurPackage->
√xt
;

491 
pCurPackage
 = (
TS_PACKAGE_INFO
*)
	`mÆloc
((TS_PACKAGE_INFO));

492 i‡(
GOSTSR_NULL
 =
pCurPackage
)

494  
GOSTSR_FAILURE
;

497 
¥ePackage
->
√xt
 = 
pCurPackage
;

498 
pCurPackage
->
√xt
 = 
GOSTSR_NULL
;

499 i‡(
tsHódInfo
.
ad≠ãr_c⁄åﬁ
 & 
BIT2
)

501 i‡(
tsHódInfo
.
∑ckageTy≥
 =
PACKAGE_188
)

503 
pCurPackage
->
∑ckageLí
 = (
TS_LENGTH_188
 - 
TS_HEAD_LENGTH
 - 1 - 
ad≠tLígth
);

507 
pCurPackage
->
∑ckageLí
 = (
TS_LENGTH_204
 - 
TS_HEAD_LENGTH
 - 1 - 
ad≠tLígth
);

512 i‡(
tsHódInfo
.
∑ckageTy≥
 =
PACKAGE_188
)

514 
pCurPackage
->
∑ckageLí
 = (
TS_LENGTH_188
 - 
TS_HEAD_LENGTH
);

518 
pCurPackage
->
∑ckageLí
 = (
TS_LENGTH_204
 - 
TS_HEAD_LENGTH
);

521 
	`mem£t
(
pCurPackage
->
∑ckageD©a
, 0x00, (pCurPackage->packageData));

522 
	`mem˝y
(
pCurPackage
->
∑ckageD©a
, 
pcurD©a
,ÖCurPackage->
∑ckageLí
);

523 
pCurPackage
->
PID
 = 
tsHódInfo
.
ts_pid
;

524 
pCurPackage
->
numbî
 = 
tsHódInfo
.
cou¡î
;

525 
pCurPackage
->
£˘i⁄Lí
 = 
SórchPackageHód
[
i
]->sectionLen;

526 
pCurPackage
->
èbÀID
 = 
SórchPackageHód
[
i
]->tableID;

529 
∑ckageAŒLí
 +
pCurPackage
->
∑ckageLí
;

531 i‡(
∑ckageAŒLí
 >
SórchPackageHód
[
i
]->
£˘i⁄Lí
)

533 
∑ckageAŒLí
 = 0;

534 
j
 = 
SórchPackageHód
[
i
]->
numbî
;

537 
∑ckageAŒLí
 < 
SórchPackageHód
[
i
]->
£˘i⁄Lí
)

539 
pCurPackage
 = 
SórchPackageHód
[
i
];

540 
pCurPackage
 !
GOSTSR_NULL
)

542 if(
pCurPackage
->
numbî
 =
j
)

544 
∑ckageAŒLí
 +
pCurPackage
->
∑ckageLí
;

545 
j
++;

547 i‡(
j
 == 16)

549 
j
 = 0;

553 
pCurPackage
 =ÖCurPackage->
√xt
;

556 i‡(
GOSTSR_NULL
 =
pCurPackage
)

563 i‡(
GOSTSR_NULL
 =
pCurPackage
)

569 
èbÀID
 = 
SórchPackageHód
[
i
]->tableID;

570 
curSe˘i⁄Lígth
 = 
SórchPackageHód
[
i
]->
£˘i⁄Lí
;

571 
curSe˘i⁄Info
 = (
TS_SECTION_INFO
 *)
	`mÆloc
((TS_SECTION_INFO));

572 if(
GOSTSR_NULL
 =
curSe˘i⁄Info
)

576 
	`mem£t
(
curSe˘i⁄Info
, 0, (
TS_SECTION_INFO
));

577 
curSe˘i⁄Info
->
£˘i⁄Lígth
 = 
curSe˘i⁄Lígth
;

578 
curSe˘i⁄Info
->
PID
 = 
tsHódInfo
.
ts_pid
;

579 
curSe˘i⁄Info
->
èbÀID
 =ÅableID;

580 
curSe˘i⁄Info
->
£˘i⁄D©a
 = (
GOSTSR_U8
 *)
	`mÆloc
(
curSe˘i⁄Lígth
);

581 if(
GOSTSR_NULL
 =
curSe˘i⁄Info
->
£˘i⁄D©a
)

585 
	`mem£t
(
curSe˘i⁄Info
->
£˘i⁄D©a
, 0x00, 
curSe˘i⁄Lígth
);

586 
pSe˘i⁄D©a
 = 
curSe˘i⁄Info
->
£˘i⁄D©a
;

588 
∑ckageAŒLí
 = 0;

589 
∑ckageAŒLí
 < 
curSe˘i⁄Lígth
)

592 
pCurPackage
 = 
SórchPackageHód
[
i
];

593 
¥ePackage
 = 
SórchPackageHód
[
i
];

594 
j
 = 
SórchPackageHód
[
i
]->
numbî
;

596 
pCurPackage
 !
GOSTSR_NULL
)

598 if(
pCurPackage
->
numbî
 =
j
)

600 
j
++;

602 i‡(
j
 == 16)

604 
j
 = 0;

608 
¥ePackage
 = 
pCurPackage
;

609 
pCurPackage
 =ÖCurPackage->
√xt
;

612 i‡(
GOSTSR_NULL
 !
pCurPackage
)

615 i‡((
∑ckageAŒLí
 + 
pCurPackage
->
∑ckageLí
Ë> 
curSe˘i⁄Lígth
)

617 
ªmaöLí
 = 
curSe˘i⁄Lígth
 - 
∑ckageAŒLí
;

621 
ªmaöLí
 = 
pCurPackage
->
∑ckageLí
;

624 
	`mem˝y
(
pSe˘i⁄D©a
, 
pCurPackage
->
∑ckageD©a
, 
ªmaöLí
);

626 
pSe˘i⁄D©a
 +
ªmaöLí
;

627 
∑ckageAŒLí
 +
pCurPackage
->
∑ckageLí
;

630 i‡(
¥ePackage
 =
SórchPackageHód
[
i
])

632 
SórchPackageHód
[
i
] = 
¥ePackage
->
√xt
;

633 
	`‰ì
(
¥ePackage
);

634 
¥ePackage
 = 
GOSTSR_NULL
;

638 
¥ePackage
->
√xt
 = 
pCurPackage
->next;

639 
	`‰ì
(
pCurPackage
);

640 
pCurPackage
 = 
GOSTSR_NULL
;

647 
pCurPackage
 = 
SórchPackageHód
[
i
];

648 
pCurPackage
 !
GOSTSR_NULL
)

650 
¥ePackage
 = 
pCurPackage
;

651 
pCurPackage
 =ÖCurPackage->
√xt
;

652 
	`‰ì
(
¥ePackage
);

653 
¥ePackage
 = 
GOSTSR_NULL
;

655 
SórchPackageHód
[
i
] = 
GOSTSR_NULL
;

658 
£˘i⁄Fœg
 = 
GOSTSR_TRUE
;

663 i‡(
GOSTSR_TRUE
 =
£˘i⁄Fœg
)

666 
GOSTSR_U16
 
curPos
 = 
curSe˘i⁄Info
->
£˘i⁄Lígth
 - 4;

667 
GOSTSR_U8
 *
pD©a
 = &(
curSe˘i⁄Info
->
£˘i⁄D©a
[
curPos
]);

668 
GOSTSR_U32
 
¸c32
 = (
pD©a
[0]<<24) + (pData[1]<<16) + (pData[2]<<8) +ÖData[3];

669 
GOSTSR_U32
 
ˇlCrc32
 = 0;

670 
ˇlCrc32
 = 
	`GosT§_A«lysisD©a_CRCCheck
(
curSe˘i⁄Info
->
£˘i⁄D©a
, curSe˘i⁄Info->
£˘i⁄Lígth
 - 4);

672 i‡((
¸c32
 =
ˇlCrc32
Ë|| (
TDT_TABLE_ID
 =
èbÀID
))

674 
	`Sètic_Sórch_P¨£Se˘i⁄
(
èbÀID
,
curSe˘i⁄Info
);

679 i‡(
GOSTSR_NULL
 !
curSe˘i⁄Info
)

681 i‡(
GOSTSR_NULL
 !
curSe˘i⁄Info
->
£˘i⁄D©a
)

683 
	`‰ì
(
curSe˘i⁄Info
->
£˘i⁄D©a
);

684 
curSe˘i⁄Info
->
£˘i⁄D©a
 = 
GOSTSR_NULL
;

686 
	`‰ì
(
curSe˘i⁄Info
);

687 
curSe˘i⁄Info
 = 
GOSTSR_NULL
;

689  
GOSTSR_SUCCESS
;

690 
	}
}

692 
GOSTSR_S32
 
	$Sètic_Sórch_TSHódInfo
(c⁄° *
§cD©a
, 
TS_HEAD_INFO
 *
desD©a
)

694 
GOSTSR_U8
 *
curD©a
 = 
GOSTSR_NULL
;

695 
GOSTSR_U16
 
ãmpD©a
 = 0;

697 i‡((
GOSTSR_NULL
 =
§cD©a
Ë|| (GOSTSR_NULL =
desD©a
))

699  
GOSTSR_FAILURE
;

702 
curD©a
 = (
GOSTSR_U8
 *)
§cD©a
;

705 i‡(
SYNC_BYTE
 !
curD©a
[0])

707  
GOSTSR_FAILURE
;

710 
curD©a
++;

712 
desD©a
->
îr‹_ödiˇãr
 = (
curD©a
[0] & 
BIT8
) / BIT8;

715 
desD©a
->
lﬂd_ödiˇãr
 = (
curD©a
[0] & 
BIT7
) / BIT7;

720 
ãmpD©a
 = 
curD©a
[0]*256 + curData[1];

721 
desD©a
->
ts_pid
 = 
ãmpD©a
 & (~((
BIT8
 | 
BIT7
 | 
BIT6
) * 256));

723 
curD©a
 += 2;

725 
desD©a
->
s¸ambÀ_c⁄åﬁ
 = (
curD©a
[0] & (
BIT8
 | 
BIT7
)) / BIT7;

728 
desD©a
->
ad≠ãr_c⁄åﬁ
 = (
curD©a
[0] & (
BIT6
 | 
BIT5
)) / BIT5;

731 
desD©a
->
cou¡î
 = 
curD©a
[0] & (
BIT4
 | 
BIT3
 | 
BIT2
 | 
BIT1
);

733  
GOSTSR_SUCCESS
;

734 
	}
}

736 
GOSTSR_S32
 
	$Sètic_Sórch_A«lysisPackë
(
GOSTSR_U8
 *
pPackëD©a
, 
GOSTSR_U32
 
u32D©aLí
)

738 
GOSTSR_S32
 
s32Rë
 = 0;

739 
GOSTSR_S32
 
i
 = 0;

740 
TS_HEAD_INFO
 
tsHódInfo
 = {0x00};

741 
GOSTSR_U8
 *
pD©a
 = 
pPackëD©a
;

743 if(
pPackëD©a
 =
GOSTSR_NULL
)

745  
GOSTSR_FAILURE
;

748 
	`mem£t
(&
tsHódInfo
,0,(
TS_HEAD_INFO
));

749 
s32Rë
 = 
	`Sètic_Sórch_TSHódInfo
(
pD©a
,&
tsHódInfo
);

750 if(
s32Rë
 !
GOSTSR_SUCCESS
)

752  
GOSTSR_FAILURE
;

755 
tsHódInfo
.
ts_pid
)

757 
PAT_PID
:

758 
	`Sètic_Sórch_BuûdSe˘i⁄
(
PAT_TABLE_ID
, 
pD©a
, 
tsHódInfo
);

761 
CAT_PID
:

762 
	`Sètic_Sórch_BuûdSe˘i⁄
(
CAT_TABLE_ID
, 
pD©a
, 
tsHódInfo
);

767 
i
 = 0; i < 
g°SórchP©Info
.
u16NbEÀmíts
; i++)

769 if(
g°SórchP©Info
.
a°EÀmít
[
i
].
u16Pid
 =
tsHódInfo
.
ts_pid
)

771 
	`Sètic_Sórch_BuûdSe˘i⁄
(
PMT_TABLE_ID
, 
pD©a
, 
tsHódInfo
);

778  
GOSTSR_SUCCESS
;

779 
	}
}

781 
GOSTSR_S32
 
	$°©ic_Sórch__∑r£_∑ckëty≥
(
GOSTSR_U32
 *
pu32PackëLí
, 
GOSTSR_U8
 *
fûeP©h
)

783 
FILE
 *
sFp
 = 
GOSTSR_NULL
;

784 
GOSTSR_U64
 
fûeLí
 = 0;

785 
GOSTSR_U8
 
chr
 = '\0';

786 
GOSTSR_BOOL
 
checkFœg
 = 
GOSTSR_FALSE
;

787 
GOSTSR_U64
 
off£t
 = 0;

788 
GOSTSR_U64
 
ãmpOff£t
 = 0;

789 
GOSTSR_U32
 
ªtLí
 = 0;

790 
GOSTSR_U32
 
∑ckageLí
 = 0;

791 
GOSTSR_U8
 *
tsD©a
 = 
GOSTSR_NULL
;

793 i‡(
NULL
 =
fûeP©h
)

795  
GOSTSR_FAILURE
;

798 
sFp
 = 
	`f›í
(
fûeP©h
, "rb");

799 i‡(
NULL
 =
sFp
)

801  
GOSTSR_FAILURE
;

804 
	`f£ek
(
sFp
, 0, 
SEEK_END
);

805 
fûeLí
 = 
	`·ñl
(
sFp
);

806 
	`f£ek
(
sFp
, 0, 
SEEK_SET
);

809 
chr
 = 
	`fgëc
(
sFp
);

810 
off£t
++;

812 i‡((
chr
 =
EOF
Ë&& (
off£t
 >
fûeLí
))

817 i‡(
chr
 =
SYNC_BYTE
)

819 i‡(
ãmpOff£t
 == 0)

821 
ãmpOff£t
 = 
off£t
;

825 i‡(((
off£t
 - 
ãmpOff£t
Ë=
TS_LENGTH_188
Ë|| ((off£à-ÅempOff£tË=
TS_LENGTH_204
))

827 
off£t
 = 
ãmpOff£t
;

828 
checkFœg
 = 
GOSTSR_TRUE
;

832 
ãmpOff£t
 = 
off£t
;

837 }!
checkFœg
);

839 i‡(
chr
 =
EOF
)

841 
	`f˛o£
(
sFp
);

842 
sFp
 = 
GOSTSR_NULL
;

843  
GOSTSR_FAILURE
;

846 
off£t
 = offset - 1;

847 
	`f£ek
(
sFp
, 
off£t
, 
SEEK_SET
);

850 
tsD©a
 = (
GOSTSR_U8
 *)
	`mÆloc
(
TS_LENGTH_204
 + 1);

851 i‡(
GOSTSR_NULL
 =
tsD©a
)

853 
	`f˛o£
(
sFp
);

854 
sFp
 = 
GOSTSR_NULL
;

855  
GOSTSR_FAILURE
;

857 
	`mem£t
(
tsD©a
, 0x00, 
TS_LENGTH_204
 + 1);

858 
ªtLí
 = 
	`‰ód
(
tsD©a
, 1, 
TS_LENGTH_204
 + 1, 
sFp
);

859 i‡(
ªtLí
 !
TS_LENGTH_204
 + 1)

861 
	`f˛o£
(
sFp
);

862 
sFp
 = 
GOSTSR_NULL
;

863 i‡(
GOSTSR_NULL
 !
tsD©a
)

865 
	`‰ì
(
tsD©a
);

866 
tsD©a
 = 
GOSTSR_NULL
;

868  
GOSTSR_FAILURE
;

871 if((
tsD©a
[0] =
SYNC_BYTE
) && (tsData[188] == SYNC_BYTE))

874 
∑ckageLí
 = 
TS_LENGTH_188
;

876 if((
tsD©a
[0] =
SYNC_BYTE
) && (tsData[188] != SYNC_BYTE) && \

877 (
tsD©a
[204] =
SYNC_BYTE
))

880 
∑ckageLí
 = 
TS_LENGTH_204
;

884 
	`f˛o£
(
sFp
);

885 
sFp
 = 
GOSTSR_NULL
;

886 i‡(
GOSTSR_NULL
 !
tsD©a
)

888 
	`‰ì
(
tsD©a
);

889 
tsD©a
 = 
GOSTSR_NULL
;

891  
GOSTSR_FAILURE
;

894 i‡(
GOSTSR_NULL
 !
tsD©a
)

896 
	`‰ì
(
tsD©a
);

897 
tsD©a
 = 
GOSTSR_NULL
;

900 *
pu32PackëLí
 = 
∑ckageLí
;

902  
GOSTSR_SUCCESS
;

903 
	}
}

905 
GOSTSR_S32
 
	$Sètic_Sórch_RódSèticTs
(
GOSTSR_U8
 *
fûeP©h
)

907 
FILE
 *
sFp
 = 
GOSTSR_NULL
;

908 
GOSTSR_BOOL
 
checkFœg
 = 
GOSTSR_FALSE
;

909 
GOSTSR_U64
 
fûeLí
 = 0;

910 
GOSTSR_U64
 
off£t
 = 0;

911 
GOSTSR_U64
 
off£t_Bak
 = 0;

912 
GOSTSR_U64
 
ãmpOff£t
 = 0;

913 
GOSTSR_U32
 
ªtLí
 = 0;

914 
GOSTSR_U32
 
∑ckageLí
 = 0;

915 
GOSTSR_U8
 
chr
 = '\0';

916 
GOSTSR_U8
 *
tsD©a
 = 
GOSTSR_NULL
;

917 
GOSTSR_U8
 *
tsD©a_Bak
 = 
GOSTSR_NULL
;

919 i‡(
GOSTSR_NULL
 =
fûeP©h
)

921  
GOSTSR_FAILURE
;

924 if(
GOSTSR_FAILURE
 =
	`°©ic_Sórch__∑r£_∑ckëty≥
(&
∑ckageLí
,
fûeP©h
))

926  
GOSTSR_FAILURE
;

928 
sFp
 = 
	`f›í
(
fûeP©h
, "rb");

929 i‡(
GOSTSR_NULL
 =
sFp
)

931  
GOSTSR_FAILURE
;

934 
tsD©a
 = (
GOSTSR_U8
 *)
	`mÆloc
(
∑ckageLí
);

935 i‡(
GOSTSR_NULL
 =
tsD©a
)

937 
	`f˛o£
(
sFp
);

938 
sFp
 = 
GOSTSR_NULL
;

939  
GOSTSR_FAILURE
;

941 
tsD©a_Bak
 = (
GOSTSR_U8
 *)
	`mÆloc
(
∑ckageLí
+1);

942 i‡(
GOSTSR_NULL
 =
tsD©a_Bak
)

944 
	`f˛o£
(
sFp
);

945 
sFp
 = 
GOSTSR_NULL
;

946  
GOSTSR_FAILURE
;

949 
	`f£ek
(
sFp
, 0, 
SEEK_END
);

950 
fûeLí
 = 
	`·ñl
(
sFp
);

952 
	`f£ek
(
sFp
, 0, 
SEEK_SET
);

955 if(
bHadSórched
)

958 
off£t
 = 
	`·ñl
(
sFp
);

961 
chr
 = 
	`fgëc
(
sFp
);

962 
off£t
++;

964 i‡(
off£t
 >
fûeLí
 - 1)

969 }
chr
 !
SYNC_BYTE
);

970 i‡(
off£t
 >
fûeLí
 - 1)

974 i‡(
chr
 =
SYNC_BYTE
)

976 
off£t
 = offset - 1;

977 
	`f£ek
(
sFp
, 
off£t
, 
SEEK_SET
);

979 
	`mem£t
(
tsD©a_Bak
, 0x00, 
∑ckageLí
+1);

980 
	`‰ód
(
tsD©a_Bak
, 1, 
∑ckageLí
+1, 
sFp
);

981 if(
tsD©a_Bak
[
∑ckageLí
] !
SYNC_BYTE
)

983 
off£t
 = offset + 1;

984 
	`f£ek
(
sFp
, 
off£t
, 
SEEK_SET
);

987 
off£t
 +
∑ckageLí
;

988 
	`f£ek
(
sFp
, 
off£t
, 
SEEK_SET
);

990 
	`mem£t
(
tsD©a
, 0x00, 
∑ckageLí
);

991 
	`mem˝y
(
tsD©a
, 
tsD©a_Bak
, 
∑ckageLí
);

993 
	`Sètic_Sórch_A«lysisPackë
(
tsD©a
, 
∑ckageLí
);

996 
	`‰ì
(
tsD©a
);

997 
tsD©a
 = 
GOSTSR_NULL
;

998 
	`f˛o£
(
sFp
);

999 
sFp
 = 
GOSTSR_NULL
;

1002  
GOSTSR_SUCCESS
;

1003 
	}
}

1005 
GOSTSR_S32
 
	$Sètic_Sórch_gëProgInfo
(
STATIC_SEARCH_INFO_S
 *
p°ProgInfo
)

1007 if((
GOSTSR_NULL
 =
p°ProgInfo
))

1009  
GOSTSR_FAILURE
;

1011 
	`mem˝y
(
p°ProgInfo
, &
g°SórchProgInfo
, (
STATIC_SEARCH_INFO_S
));

1013  
GOSTSR_SUCCESS
;

1014 
	}
}

1016 
GOSTSR_S32
 
	$Sètic_Sórch_ProgSórch_Inô
(
GOSTSR_U8
 *
fûeP©h
)

1018 if((
GOSTSR_NULL
 =
fûeP©h
))

1020  
GOSTSR_FAILURE
;

1023 
	`mem£t
(&
g°SórchProgInfo
,0,(
STATIC_SEARCH_INFO_S
));

1024 
	`mem£t
(&
g°SórchP©Info
,0,(
GOSTSR_PSISI_PAT_S
));

1025 
bHadSórched
 = 
GOSTSR_FALSE
;

1026 
gu16SórchCou¡
 = 0;

1028 
	`Sètic_Sórch_RódSèticTs
(
fûeP©h
);

1030  
GOSTSR_SUCCESS
;

1031 
	}
}

1033 
GOSTSR_S32
 
	$Sètic_Sórch_ProgSórch_DeInô
()

1035 
	`mem£t
(&
g°SórchProgInfo
,0,(
STATIC_SEARCH_INFO_S
));

1036 
	`mem£t
(&
g°SórchP©Info
,0,(
GOSTSR_PSISI_PAT_S
));

1037 
bHadSórched
 = 
GOSTSR_FALSE
;

1038 
gu16SórchCou¡
 = 0;

1040  
GOSTSR_SUCCESS
;

1041 
	}
}

	@tscheck/include/GosTsr_AnalysisData.h

1 #ifde‡
__˝lu•lus


2 #i‡
__˝lu•lus


7 
	~"GosT§_Comm⁄.h
"

8 
	~"GosT§_Crc.h
"

10 #i‚de‡
__GOSTSR_ANALYSISDATA_H__


11 
	#__GOSTSR_ANALYSISDATA_H__


	)

14 
	#SYNC_BYTE
 0x47

	)

15 
	#TS_LENGTH_188
 188

	)

16 
	#TS_LENGTH_204
 204

	)

17 
	#TS_HEAD_LENGTH
 4

	)

18 
	#TS_MAX_SECTIONLEN
 (4*1024Ë

	)

19 
	#TS_MAX_SECTIONNUM
 (256Ë

	)

20 
	#TS_MAX_SERVICEIDNUM
 (500Ë

	)

23 
	#PAT_PID
 0x0000

	)

24 
	#PMT_PID_MIN
 0x0020

	)

25 
	#PMT_PID_MAX
 0x1FFE

	)

26 
	#CAT_PID
 0x0001

	)

27 
	#NIT_PID
 0x0010

	)

30 
	#BAT_SDT_PID
 0x0011

	)

31 
	#EIT_PID
 0x0012

	)

32 
	#RST_PID
 0x0013

	)

33 
	#TDT_TOT_PID
 0x0014

	)

34 
	#SI_PID_MIN
 0x0010

	)

35 
	#SI_PID_MAX
 0x0014

	)

38 
	#PAT_TABLE_ID
 0x00

	)

39 
	#PMT_TABLE_ID
 0x02

	)

40 
	#CAT_TABLE_ID
 0x01

	)

41 
	#NIT_TABLE_ID_ACTUAL
 0x40

	)

42 
	#NIT_TABLE_ID_OTHER
 0x41

	)

45 
	#BAT_TABLE_ID
 0x4A

	)

46 
	#SDT_TABLE_ID_ACTUAL
 0x42

	)

47 
	#SDT_TABLE_ID_OTEHR
 0x46

	)

48 
	#EIT_TABLE_ID_ACTUAL
 0x4E

	)

49 
	#EIT_TABLE_ID_ACTUAL_SHEDULE
 0x50

	)

50 
	#EIT_TABLE_ID_OTHER
 0x4F

	)

51 
	#EIT_TABLE_ID_OTHER_SHEDULE
 0x60

	)

52 
	#RST_TABLE_ID
 0x71

	)

53 
	#TDT_TABLE_ID
 0x70

	)

54 
	#TOT_TABLE_ID
 0x73

	)

55 
	#SI_TABLE_ID
 0x72

	)

56 
	#BULT_TABLE_ID
 0xFF

	)

59 
	#TABLE_NUMBER
 15

	)

62 
	#INVALID_VERSION_NUM
 0xff

	)

64 
	#GOS_MAX_SERVICE_NUM
 500

	)

65 
	#GOS_MAX_CAT_DESCRIPTOR
 256

	)

66 
	#GOS_MAX_NIT_DESCIP_LOOP
 (256)

	)

67 
	#GOS_MAX_NIT_ELEMENT
 (100Ë

	)

68 
	#GOS_MAX_NIT_ELEMENT_DESCRIPTOR
 (256Ë

	)

69 
	#GOS_MAX_PMT_ELEMENT_DESCRIPTOR
 (256Ë

	)

70 
	#GOS_MAX_PMT_DESCIP_LOOP1
 (256)

	)

71 
	#GOS_MAX_PMT_ELEMENT
 (20Ë

	)

72 
	#GOS_MAX_SDT_ELEMENT_DESCRIPTOR
 (256Ë

	)

73 
	#GOS_MAX_SDT_ELEMENT
 (100Ë

	)

74 
	#GOS_MAX_BAT_ELEMENT_DESCRIPTOR
 (256Ë

	)

75 
	#GOS_MAX_BAT_DESCIP_LOOP1
 (256)

	)

76 
	#GOS_MAX_BAT_ELEMENT
 (100Ë

	)

77 
	#GOS_MAX_EIT_ELEMENT_DESCRIPTOR
 (256Ë

	)

78 
	#GOS_MAX_EIT_ELEMENT
 (256Ë

	)

79 
	#GOS_MAX_TOT_DESCRIPTOR
 (256Ë

	)

80 
	#GOS_MAX_RTT_ELEMENT
 (100Ë

	)

81 
	#GOS_MAX_SIT_ELEMENT_DESCRIPTOR
 (256Ë

	)

82 
	#GOS_MAX_SIT_DESCIP_LOOP1
 (256)

	)

83 
	#GOS_MAX_SIT_ELEMENT
 (100Ë

	)

88 
GOS_PSISI_DESCRIPTOR_VIDEO_STREAM
 = 0x02,

89 
GOS_PSISI_DESCRIPTOR_AUDIO_STREAM
 = 0x03,

90 
GOS_PSISI_DESCRIPTOR_HIERARCHY
 = 0x04,

91 
GOS_PSISI_DESCRIPTOR_REGISTRATION
 = 0x05,

92 
GOS_PSISI_DESCRIPTOR_DATA_STREAM_ALIGNMENT
 = 0x06,

93 
GOS_PSISI_DESCRIPTOR_TARGET_BACKGROUND_GRID
 = 0x07,

94 
GOS_PSISI_DESCRIPTOR_VIDEO_WINDOW
 = 0x08,

95 
GOS_PSISI_DESCRIPTOR_CA
 = 0x09,

96 
GOS_PSISI_DESCRIPTOR_LANGUAGE_NAME
 = 0x0A,

97 
GOS_PSISI_DESCRIPTOR_SYSTEM_CLOCK
 = 0x0B,

98 
GOS_PSISI_DESCRIPTOR_MULTIPLEX_BUFFER
 = 0x0C,

99 
GOS_PSISI_DESCRIPTOR_COPYRIGHT
 = 0x0D,

100 
GOS_PSISI_DESCRIPTOR_MAX_BITRATE
 = 0x0E,

101 
GOS_PSISI_DESCRIPTOR_PRIVATE_DATA_INDICATOR
 = 0x0F,

102 
GOS_PSISI_DESCRIPTOR_SMOOTHING_BUFFER
 = 0x10,

103 
GOS_PSISI_DESCRIPTOR_STD
 = 0x11,

104 
GOS_PSISI_DESCRIPTOR_IBP
 = 0x12,

105 
GOS_PSISI_DESCRIPTOR_CAROUSEL_IDENTIFIER
 = 0x13,

106 
GOS_PSISI_DESCRIPTOR_ASSOCIATION_TAG
 = 0x14,

107 
GOS_PSISI_DESCRIPTOR_DEFERRED_ASSOCIATION_TAG
 = 0x15,

108 
GOS_PSISI_DESCRIPTOR_RESERVED_16
 = 0x16,

109 
GOS_PSISI_DESCRIPTOR_NPT_REFERENCE
 = 0x17,

110 
GOS_PSISI_DESCRIPTOR_NPT_ENDPOINT
 = 0x18,

111 
GOS_PSISI_DESCRIPTOR_STREAM_MODE
 = 0x19,

112 
GOS_PSISI_DESCRIPTOR_STREAM_EVENT
 = 0x1A,

113 
GOS_PSISI_DESCRIPTOR_MPEG4_VIDEO
 = 0x1B,

114 
GOS_PSISI_DESCRIPTOR_MPEG4_AUDIO
 = 0x1C,

115 
GOS_PSISI_DESCRIPTOR_MPEG4_IOD
 = 0x1D,

116 
GOS_PSISI_DESCRIPTOR_MPEG4_SL
 = 0x1E,

117 
GOS_PSISI_DESCRIPTOR_MPEG4_FMC
 = 0x1F,

118 
GOS_PSISI_DESCRIPTOR_MPEG4_MUX_CODE
 = 0x21,

119 
GOS_PSISI_DESCRIPTOR_MPEG4_FMX_BUFFER_SIZE
 = 0x22,

120 
GOS_PSISI_DESCRIPTOR_MPEG4_MULTIPLEX_BUFFER
 = 0x23,

121 
GOS_PSISI_DESCRIPTOR_MPEG4_CONTENT_LABELING
 = 0x24,

122 
GOS_PSISI_DESCRIPTOR_TVA_METADATA_POINTER
 = 0x25,

123 
GOS_PSISI_DESCRIPTOR_TVA_METADATA
 = 0x26,

124 
GOS_PSISI_DESCRIPTOR_TVA_METADATA_STD
 = 0x27,

125 
GOS_PSISI_DESCRIPTOR_AVC_VIDEO
 = 0x28,

126 
GOS_PSISI_DESCRIPTOR_AVC_IPMP
 = 0x29,

127 
GOS_PSISI_DESCRIPTOR_AVC_TIMING_AND_HRD
 = 0x2A,

128 
GOS_PSISI_DESCRIPTOR_NETWORK_NAME
 = 0x40,

129 
GOS_PSISI_DESCRIPTOR_SERVICE_LIST
 = 0x41,

130 
GOS_PSISI_DESCRIPTOR_STUFFING
 = 0x42,

131 
GOS_PSISI_DESCRIPTOR_SATELLITE_DELIVERY_SYSTEM
 = 0x43,

132 
GOS_PSISI_DESCRIPTOR_CABLE_DELIVERY_SYSTEM
 = 0x44,

133 
GOS_PSISI_DESCRIPTOR_VBI_DATA
 = 0x45,

134 
GOS_PSISI_DESCRIPTOR_VBI_TELETEXT
 = 0x46,

135 
GOS_PSISI_DESCRIPTOR_BOUQUET_NAME
 = 0x47,

136 
GOS_PSISI_DESCRIPTOR_SERVICE
 = 0x48,

137 
GOS_PSISI_DESCRIPTOR_COUNTRY_AVAIBILITY
 = 0x49,

138 
GOS_PSISI_DESCRIPTOR_LINKAGE
 = 0x4A,

139 
GOS_PSISI_DESCRIPTOR_NVOD_REFERENCE
 = 0x4B,

140 
GOS_PSISI_DESCRIPTOR_TIME_SHIFTEDSERVICE
 = 0x4C,

141 
GOS_PSISI_DESCRIPTOR_SHORT_EVENT
 = 0x4D,

142 
GOS_PSISI_DESCRIPTOR_EXTENDED_EVENT
 = 0x4E,

143 
GOS_PSISI_DESCRIPTOR_TIME_SHIFTED_EVENT
 = 0x4F,

144 
GOS_PSISI_DESCRIPTOR_COMPONENT
 = 0x50,

145 
GOS_PSISI_DESCRIPTOR_MOSAIC
 = 0x51,

146 
GOS_PSISI_DESCRIPTOR_STREAM_IDENTIFIER
 = 0x52,

147 
GOS_PSISI_DESCRIPTOR_CA_IDENTIFIER
 = 0x53,

148 
GOS_PSISI_DESCRIPTOR_CONTENT
 = 0x54,

149 
GOS_PSISI_DESCRIPTOR_PARENTAL_RATING
 = 0x55,

150 
GOS_PSISI_DESCRIPTOR_TELETEXT
 = 0x56,

151 
GOS_PSISI_DESCRIPTOR_TELEPHONE
 = 0x57,

152 
GOS_PSISI_DESCRIPTOR_LOCAL_TIME_OFFSET
 = 0x58,

153 
GOS_PSISI_DESCRIPTOR_SUBTITLING
 = 0x59,

154 
GOS_PSISI_DESCRIPTOR_TERRESTRIAL_DELIVERY_SYSTEM
 = 0x5A,

155 
GOS_PSISI_DESCRIPTOR_MULTILINGUAL_NETWORK_NAME
 = 0x5B,

156 
GOS_PSISI_DESCRIPTOR_MULTILINGUAL_BOUQUET_NAME
 = 0x5C,

157 
GOS_PSISI_DESCRIPTOR_MULTILINGUAL_SERVICE_NAME
 = 0x5D,

158 
GOS_PSISI_DESCRIPTOR_COMPONENT_SERVICE_NAME
 = 0x5E,

159 
GOS_PSISI_DESCRIPTOR_PRIVATE_DATA_SPECIFIER
 = 0x5F,

160 
GOS_PSISI_DESCRIPTOR_SERVICE_MOVE
 = 0x60,

161 
GOS_PSISI_DESCRIPTOR_SHORT_SMOOTHING_BUFFER
 = 0x61,

162 
GOS_PSISI_DESCRIPTOR_FREQUENCY_LIST
 = 0x62,

163 
GOS_PSISI_DESCRIPTOR_PARTIAL_TRANSPORT_STREAM
 = 0x63,

164 
GOS_PSISI_DESCRIPTOR_DATA_BROADCAST
 = 0x64,

165 
GOS_PSISI_DESCRIPTOR_CA_SYSTEM
 = 0x65,

166 
GOS_PSISI_DESCRIPTOR_DATA_BROADCAST_ID
 = 0x66,

167 
GOS_PSISI_DESCRIPTOR_TRANSPORT_STREAM
 = 0x67,

168 
GOS_PSISI_DESCRIPTOR_DSNG
 = 0x68,

169 
GOS_PSISI_DESCRIPTOR_PDC
 = 0x69,

170 
GOS_PSISI_DESCRIPTOR_AC3
 = 0x6A,

171 
GOS_PSISI_DESCRIPTOR_ANCILLARY_DATA
 = 0x6B,

172 
GOS_PSISI_DESCRIPTOR_CELL_LIST
 = 0x6C,

173 
GOS_PSISI_DESCRIPTOR_CELL_FREQUENCY_LINK
 = 0x6D,

174 
GOS_PSISI_DESCRIPTOR_ANNOUNCEMENT_SUPPORT
 = 0x6E,

175 
GOS_PSISI_DESCRIPTOR_APPLICATION_SIGNALLING
 = 0x6F,

176 
GOS_PSISI_DESCRIPTOR_ADAPTATION_FIELD_DATA
 = 0x70,

177 
GOS_PSISI_DESCRIPTOR_SERVICE_IDENTIFIER
 = 0x71,

178 
GOS_PSISI_DESCRIPTOR_SERVICE_AVAILABILITY
 = 0x72,

179 
GOS_PSISI_DESCRIPTOR_TVA_DEFAULT_AUTHORITY
 = 0x73,

180 
GOS_PSISI_DESCRIPTOR_TVA_RELATED_CONTENT
 = 0x74,

181 
GOS_PSISI_DESCRIPTOR_TVA_ID
 = 0x75,

182 
GOS_PSISI_DESCRIPTOR_TVA_CONTENT_IDENTIFIER
 = 0x76,

183 
GOS_PSISI_DESCRIPTOR_TIMESLICING_FEC_IDENTIFIER
 = 0x77,

184 
GOS_PSISI_DESCRIPTOR_ECM_REPETITION_RATE
 = 0x78,

185 
GOS_PSISI_DESCRIPTOR_S2_SATELLITE_DELIVERY_SYSTEM
= 0x79,

186 
GOS_PSISI_DESCRIPTOR_ENHANCED_AC3
 = 0x7A,

187 
GOS_PSISI_DESCRIPTOR_DTS
 = 0x7B,

188 
GOS_PSISI_DESCRIPTOR_AAC
 = 0x7C,

189 
GOS_PSISI_DESCRIPTOR_0X7D
 = 0x7D,

190 
GOS_PSISI_DESCRIPTOR_0X7E
 = 0x7E,

191 
GOS_PSISI_DESCRIPTOR_0X7F
 = 0x7F,

192 
GOS_PSISI_DESCRIPTOR_0X80
 = 0x80,

193 
GOS_PSISI_DESCRIPTOR_0X81
 = 0x81,

194 
GOS_PSISI_DESCRIPTOR_0X82
 = 0x82,

195 
GOS_PSISI_DESCRIPTOR_LCN_0X83
 = 0x83,

196 
GOS_PSISI_DESCRIPTOR_0X84
 = 0x84,

197 
GOS_PSISI_DESCRIPTOR_0X85
 = 0x85,

198 
GOS_PSISI_DESCRIPTOR_0X86
 = 0x86,

199 
GOS_PSISI_DESCRIPTOR_LCN_0X87
 = 0x87,

200 
GOS_PSISI_DESCRIPTOR_0X88
 = 0x88,

201 
GOS_PSISI_DESCRIPTOR_0X89
 = 0x89,

202 
GOS_PSISI_DESCRIPTOR_GOSCA_AREA_CONTROL
 = 0x8A,

204 
GOS_PSISI_DESCRIPTOR_SERVICE_3D
 = 0x90,

206 
GOS_PSISI_DESCRIPTOR_BUFF


207 } 
	tGOS_PSISI_DESCRIPTORTYPE_E
;

212 
GOS_PSISI_STREAM_RESERVED
 = 0x00,

213 
GOS_PSISI_STREAM_VIDEO_MPEG1
 = 0x01,

214 
GOS_PSISI_STREAM_VIDEO_MPEG2
 = 0x02,

215 
GOS_PSISI_STREAM_AUDIO_MPEG1
 = 0x03,

216 
GOS_PSISI_STREAM_AUDIO_MPEG2
 = 0x04,

217 
GOS_PSISI_STREAM_PRIVATE_SECTIONS
 = 0x05,

218 
GOS_PSISI_STREAM_PRIVATE_PES
 = 0x06,

219 
GOS_PSISI_STREAM_MHEG
 = 0x07,

220 
GOS_PSISI_STREAM_DSM_CC
 = 0x08,

221 
GOS_PSISI_STREAM_TYPE_H2221
 = 0x09,

222 
GOS_PSISI_STREAM_DSM_CC_TYPE_A
 = 0x0A,

223 
GOS_PSISI_STREAM_DSM_CC_TYPE_B
 = 0x0B,

224 
GOS_PSISI_STREAM_DSM_CC_TYPE_C
 = 0x0C,

225 
GOS_PSISI_STREAM_DSM_CC_TYPE_D
 = 0x0D,

226 
GOS_PSISI_STREAM_TYPE_AUX
 = 0x0E,

227 
GOS_PSISI_STREAM_AUDIO_AAC_ADTS
 = 0x0F,

228 
GOS_PSISI_STREAM_VIDEO_MPEG4
 = 0x10,

229 
GOS_PSISI_STREAM_AUDIO_AAC_LATM
 = 0x11,

230 
GOS_PSISI_STREAM_AUDIO_AAC_RAW
 = 0x12,

231 
GOS_PSISI_STREAM_MPEG4_SECTION
 = 0x13,

232 
GOS_PSISI_STREAM_DSM_CC_SDP
 = 0x14,

233 
GOS_PSISI_STREAM_METADATA_PES
 = 0x15,

234 
GOS_PSISI_STREAM_METADATA_SECTION
 = 0x16,

235 
GOS_PSISI_STREAM_METADATA_DC
 = 0x17,

236 
GOS_PSISI_STREAM_METADATA_OC
 = 0x18,

237 
GOS_PSISI_STREAM_METADATA_SDP
 = 0x19,

238 
GOS_PSISI_STREAM_IPMP_STREAM_MPEG2
= 0x1A,

239 
GOS_PSISI_STREAM_VIDEO_H264
 = 0x1B,

241 
GOS_PSISI_STREAM_VIDEO_AVS
 = 0x42,

242 
GOS_PSISI_STREAM_AUDIO_AVS
 = 0x43,

243 
GOS_PSISI_STREAM_VIDEO_WM9
 = 0xEA,

244 
GOS_PSISI_STREAM_AUDIO_WM9
 = 0xE6,

245 
GOS_PSISI_STREAM_IPMP_STREAM
 = 0x7F,

246 
GOS_PSISI_STREAM_VIDEO_USR
 = 0x80,

247 
GOS_PSISI_STREAM_AUDIO_AC3
 = 0x81,

248 
GOS_PSISI_STREAM_SCTE_SUBT
 = 0x82,

249 
GOS_PSISI_STREAM_AUDIO_DTS
 = 0x85,

251 
GOS_PSISI_STREAM_TELETEXT
 = 0xB0,

252 
GOS_PSISI_STREAM_SUBTITLE
 = 0xB1,

253 
GOS_PSISI_STREAM_CC
 = 0xB2,

254 
GOS_PSISI_STREAM_UNKNOWN
 = 0xB3,

256 
GOS_PSISI_STREAM_BUTT
 = 0x100

257 } 
	tGOS_PSISI_STREAMTYPE_E
;

261 
VIDEO_STREAM
 = 0x00,

262 
AUDIO_STREAM
 = 0x01,

263 
SCTE_SUBTITLE_STREAM
 = 0x02,

264 
PRIVATE_PES_STREAM
 = 0x03,

265 
BULT_STREAM


266 }
	tGOS_STREAMTYPE
;

271 
GOS_PSISI_TABLE_UNDEFINED
 = 0,

272 
GOS_PSISI_TABLE_NOT_RUNNING
 = 1,

273 
GOS_PSISI_TABLE_START_IN_FEW_SECONDS
 = 2,

274 
GOS_PSISI_TABLE_PAUSING
 = 3,

275 
GOS_PSISI_TABLE_RUNNING
 = 4,

276 
GOS_PSISI_TABLE_RESERVED_5
 = 5,

277 
GOS_PSISI_TABLE_RESERVED_6
 = 6,

278 
GOS_PSISI_TABLE_RESERVED_7
 = 7

279 } 
	tGOS_PSISI_TABLE_STATUS_E
;

284 
PACKAGE_188
 = 0x00,

285 
PACKAGE_204
 = 0x01,

286 
PACKAGE_BULT


287 }
	tGOS_TSPACKAGE_TYPE
;

293 
TR101290_ERROR_S
 
°Eº‹Info
;

294 
GOSTSR_U32
 
numbî
;

295 
GOSTSR_U16
 
ts_pid
;

296 
GOSTSR_U8
 
îr‹_ödiˇãr
;

297 
GOSTSR_U8
 
lﬂd_ödiˇãr
;

298 
GOSTSR_U8
 
s¸ambÀ_c⁄åﬁ
;

299 
GOSTSR_U8
 
ad≠ãr_c⁄åﬁ
;

300 
GOSTSR_U8
 
cou¡î
;

301 
GOS_TSPACKAGE_TYPE
 
∑ckageTy≥
;

302 }
	tTS_HEAD_INFO
;

307 
GOSTSR_U64
 
pgClockRfBa£
;

308 
GOSTSR_U16
 
pgClockRfExãn
;

309 }
	tTS_PCR_INFO
;

314 
GOSTSR_U8
 
¥iD©aLí
;

315 
GOSTSR_U8
 
¥iD©a
[256];

316 }
	tTS_PRIVATEDATA_INFO
;

321 
GOSTSR_U32
 
ad≠tExãnLí
;

322 
GOSTSR_U8
 
…wFœg
;

323 
GOSTSR_U8
 
põ˚wi£R©eFœg
;

324 
GOSTSR_U8
 
£amÀssS∂i˚Fœg
;

325 
GOSTSR_U8
 
…wVÆidFœg
;

326 
GOSTSR_U16
 
…wOff£t
;

327 
GOSTSR_U32
 
põ˚wi£R©e
;

328 
GOSTSR_U8
 
•li˚Ty≥
;

329 
GOSTSR_U64
 
DTSNextAU
;

330 }
	tTS_ADAPTEXTEN_INFO
;

335 
GOSTSR_U32
 
ad≠tLí
;

336 
GOSTSR_U8
 
disC⁄töuôyIndiˇt‹
;

337 
GOSTSR_U8
 
øndomAc˚ssIndiˇt‹
;

338 
GOSTSR_U8
 
esPri‹ôyIndiˇt‹
;

339 
GOSTSR_U8
 
p¸Fœg
;

340 
GOSTSR_U8
 
›¸Fœg
;

341 
GOSTSR_U8
 
•licögPoötFœg
;

342 
GOSTSR_U8
 
tsPriv©eFœg
;

343 
GOSTSR_U8
 
ad≠tFõldExãnFœg
;

344 
TS_PCR_INFO
 
p¸Info
;

345 
TS_PCR_INFO
 
›¸Info
;

346 
GOSTSR_U8
 
•li˚Cou¡Down
;

347 
TS_PRIVATEDATA_INFO
 
¥iv©eInfo
;

348 
TS_ADAPTEXTEN_INFO
 
exãnsi⁄Info
;

349 }
	tTS_ADAPT_INFO
;

354 
PROGRAM_STREAM_MAP
 = 0xbc,

355 
PRIVATE_STREAM_ONE
 = 0xbd,

356 
PADDING_STREAM
 = 0xbe,

357 
PRIVATE_STREAM_TWO
 = 0xbf,

358 
AUDIO_STREAM_NUM
 = 0xc0,

359 
VIDEO_STREAM_NUM
 = 0xe0,

360 
ECM_STREAM
 = 0xf0,

361 
EMM_STREAM
 = 0xf1,

362 
DSM_CC_STREAM
 = 0xf2,

363 
ISOIEC_13522_STREAM
 = 0xf3,

364 
RESERVED_STREAM
 = 0xf4,

365 
PROGRAM_STREAM_DIR
 = 0xff

366 }
	tTS_STREAM_ID
;

371 
GOSTSR_U8
 
PESPriv©eD©aFœg
;

372 
GOSTSR_U8
 
∑ckHódîFõldFœg
;

373 
GOSTSR_U8
 
¥ogømPackëSequí˚Cou¡îFœg
;

374 
GOSTSR_U8
 
PSTDBuf„rFœg
;

375 
GOSTSR_U8
 
PESExãnsi⁄Fœg2
;

376 
GOSTSR_U8
 
∑ckFõldLí
;

377 
GOSTSR_U8
 
¥ogømPackëSequí˚Cou¡î
;

378 
GOSTSR_U8
 
MPEG1MPEG2Idítifõr
;

379 
GOSTSR_U8
 
‹igöÆStuffLí
;

380 
GOSTSR_U8
 
PSTDBuf„rSˇÀ
;

381 
GOSTSR_U16
 
PSTDBuf„rSize
;

382 
GOSTSR_U8
 
PESExãnsi⁄FõldLí
;

383 }
	tTS_PESEXTENSION_INFO
;

388 
GOSTSR_U32
 
ps˝
;

389 
GOSTSR_U8
 
°ªamId
;

390 
GOSTSR_U16
 
≥sPackëLí
;

391 
GOSTSR_U8
 
≥sS¸ambÀCå
;

392 
GOSTSR_U8
 
≥sPri‹ty
;

393 
GOSTSR_U8
 
d©aAlignmítIndiˇt‹
;

394 
GOSTSR_U8
 
c›yright
;

395 
GOSTSR_U8
 
‹igöÆOrC›y
;

396 
GOSTSR_U8
 
PTSDTSFœg
;

397 
GOSTSR_U8
 
ESCRFœg
;

398 
GOSTSR_U8
 
EsR©eFœg
;

399 
GOSTSR_U8
 
DSMTrickModeFœg
;

400 
GOSTSR_U8
 
addôi⁄ÆC›yInfoFœg
;

401 
GOSTSR_U8
 
PESCRCFœg
;

402 
GOSTSR_U8
 
PESExãnsi⁄Fœg
;

403 
GOSTSR_U8
 
PESHódîD©aLí
;

404 
GOSTSR_U64
 
PTS
;

405 
GOSTSR_U64
 
DTS
;

406 
GOSTSR_U64
 
ESCRBa£
;

407 
GOSTSR_U16
 
ESCRExãn
;

408 
GOSTSR_U32
 
ESR©e
;

409 
GOSTSR_U8
 
åickModeCå
;

410 
GOSTSR_U8
 
fõldId
;

411 
GOSTSR_U8
 
öåaSli˚Re‰esh
;

412 
GOSTSR_U8
 
‰equícyTrunˇti⁄
;

413 
GOSTSR_U8
 
fõldRïC¡æ
;

414 
GOSTSR_U8
 
addôi⁄ÆC›yInfo
;

415 
GOSTSR_U16
 
¥eviousPESPackëCRC
;

416 
TS_PESEXTENSION_INFO
 
≥sExãnsi⁄Info
;

417 }
	tTS_PES_INFO
;

420 
	sSECTION_INFO


422 
TR101290_ERROR_S
 
°Eº‹Info
;

423 
GOSTSR_U16
 
£˘i⁄Lígth
;

424 
GOSTSR_U16
 
PID
;

425 
GOSTSR_U8
 
èbÀID
;

426 
GOSTSR_U8
 *
£˘i⁄D©a
;

428 
SECTION_INFO
 
	tTS_SECTION_INFO
;

431 
	sPACKAGE_INFO


433 
TR101290_ERROR_S
 
°Eº‹Info
;

434 
GOSTSR_U16
 
£˘i⁄Lí
;

435 
GOSTSR_U16
 
∑ckageLí
;

436 
GOSTSR_U16
 
PID
;

437 
GOSTSR_U8
 
∑ckageD©a
[256];

438 
GOSTSR_U8
 
numbî
;

439 
GOSTSR_U8
 
èbÀID
;

440 
PACKAGE_INFO
 *
√xt
;

442 
PACKAGE_INFO
 
	tTS_PACKAGE_INFO
;

447 
GOS_PSISI_DESCRIPTORTYPE_E
 
Tag
;

448 
GOSTSR_U16
 
u16Size
;

449 
GOSTSR_U8
 *
D©a
;

450 } 
	tGOS_PSISI_Des¸ùt‹_S
;

455 
GOSTSR_U16
 
u16ProgømNumbî
;

456 
GOSTSR_U16
 
u16Pid
;

457 } 
	tGOS_PSISI_PAT_EÀmít_S
;

461 
GOSTSR_U32
 
u32CrcVÆue
;

462 
GOSTSR_U16
 
u16NbEÀmíts
;

463 
GOS_PSISI_PAT_EÀmít_S
 
a°EÀmít
[
GOS_MAX_SERVICE_NUM
];

464 
GOSTSR_U16
 
u16Tøn•‹tSåómId
;

465 
GOSTSR_U8
 
u8TabÀId
;

466 
GOSTSR_U8
 
u8Vîsi⁄
;

467 
GOSTSR_U8
 
u8Se˘i⁄Num
;

468 
GOSTSR_U8
 
u8La°Se˘i⁄Num
;

470 } 
	tGOSTSR_PSISI_PAT_S
;

475 
GOSTSR_U32
 
u32CrcVÆue
;

476 
GOSTSR_U16
 
u16NbDes¸ùt‹s
;

477 
GOS_PSISI_Des¸ùt‹_S
 
a°Des¸ùt‹
[
GOS_MAX_CAT_DESCRIPTOR
];

478 
GOSTSR_U8
 
u8TabÀId
;

479 
GOSTSR_U8
 
u8Vîsi⁄
;

480 
GOSTSR_U8
 
u8Se˘i⁄Num
;

481 
GOSTSR_U8
 
u8La°Se˘i⁄Num
;

482 } 
	tGOSTSR_PSISI_CAT_S
;

487 
GOSTSR_U16
 
u16Tøn•‹tSåómId
;

488 
GOSTSR_U16
 
u16OrigöÆNëW‹kId
;

489 
GOSTSR_U16
 
u16NbDes¸ùt‹s
;

490 
GOS_PSISI_Des¸ùt‹_S
 
a°Des¸ùt‹
[
GOS_MAX_NIT_ELEMENT_DESCRIPTOR
];

491 } 
	tGOS_PSISI_NIT_EÀmít_S
;

495 
GOSTSR_U32
 
u32CrcVÆue
;

496 
GOSTSR_U16
 
u16NëW‹kId
;

497 
GOSTSR_U16
 
u16NbDes¸ùt‹s
;

498 
GOS_PSISI_Des¸ùt‹_S
 
a°Des¸ùt‹
[
GOS_MAX_NIT_DESCIP_LOOP
];

499 
GOSTSR_U16
 
u16NbEÀmíts
;

500 
GOS_PSISI_NIT_EÀmít_S
 
a°EÀmít
[
GOS_MAX_NIT_ELEMENT
];

501 
GOSTSR_U8
 
u8TabÀId
;

502 
GOSTSR_U8
 
u8Vîsi⁄
;

503 
GOSTSR_U8
 
u8Se˘i⁄Num
;

504 
GOSTSR_U8
 
u8La°Se˘i⁄Num
;

505 } 
	tGOSTSR_PSISI_NIT_S
;

510 
GOSTSR_U16
 
u16Pid
;

511 
GOSTSR_U16
 
u16NbDes¸ùt‹s
;

512 
GOS_PSISI_STREAMTYPE_E
 
eTy≥
;

513 
GOS_PSISI_Des¸ùt‹_S
 
a°Des¸ùt‹
[
GOS_MAX_PMT_ELEMENT_DESCRIPTOR
];

514 } 
	tGOS_PSISI_PMT_EÀmít_S
;

518 
GOSTSR_U32
 
u32CrcVÆue
;

519 
GOSTSR_U16
 
u16P¸Pid
;

520 
GOSTSR_U16
 
u16ProgømNumbî
;

521 
GOSTSR_U16
 
u16NbDes¸ùt‹s
;

522 
GOS_PSISI_Des¸ùt‹_S
 
a°Des¸ùt‹
[
GOS_MAX_PMT_DESCIP_LOOP1
];

523 
GOSTSR_U16
 
u16NbEÀmíts
;

524 
GOS_PSISI_PMT_EÀmít_S
 
a°EÀmít
[
GOS_MAX_PMT_ELEMENT
];

525 
GOSTSR_U16
 
bS¸ambÀd
;

526 
GOSTSR_U8
 
u8TabÀId
;

527 
GOSTSR_U8
 
u8Vîsi⁄
;

528 
GOSTSR_U8
 
u8Se˘i⁄Num
;

529 
GOSTSR_U8
 
u8La°Se˘i⁄Num
;

530 } 
	tGOSTSR_PSISI_PMT_S
;

535 
GOSTSR_U16
 
u16NbDes¸ùt‹s
;

536 
GOS_PSISI_Des¸ùt‹_S
 
a°Des¸ùt‹
[
GOS_MAX_SDT_ELEMENT_DESCRIPTOR
];

537 
GOSTSR_U16
 
u16Sîvi˚Id
;

538 
GOSTSR_U8
 
bEITScheduÀFœg
;

539 
GOSTSR_U8
 
bEITPª£¡FﬁlowögFœg
;

540 
GOS_PSISI_TABLE_STATUS_E
 
eSètus
;

541 
GOSTSR_U8
 
bS¸ambÀd
;

542 } 
	tGOS_PSISI_SDT_EÀmít_S
;

546 
GOSTSR_U32
 
u32CrcVÆue
;

547 
GOSTSR_U16
 
u16Tøn•‹tSåómId
;

548 
GOSTSR_U16
 
u16OrigöÆNëW‹kdId
;

549 
GOSTSR_U16
 
u16NbEÀmíts
;

550 
GOSTSR_U8
 
u8TabÀId
;

551 
GOSTSR_U8
 
u8Vîsi⁄
;

552 
GOSTSR_U8
 
u8Se˘i⁄Num
;

553 
GOSTSR_U8
 
u8La°Se˘i⁄Num
;

554 
GOS_PSISI_SDT_EÀmít_S
 
a°EÀmít
[
GOS_MAX_SDT_ELEMENT
];

555 } 
	tGOSTSR_PSISI_SDT_S
;

560 
GOSTSR_U16
 
u16Tøn•‹tSåómId
;

561 
GOSTSR_U16
 
u16OrigöÆNëw‹kId
;

562 
GOSTSR_U16
 
u16NbDes¸ùt‹s
;

563 
GOS_PSISI_Des¸ùt‹_S
 
a°Des¸ùt‹
[
GOS_MAX_BAT_ELEMENT_DESCRIPTOR
];

564 } 
	tGOS_PSISI_BAT_EÀmít_S
;

568 
GOSTSR_U32
 
u32CrcVÆue
;

569 
GOSTSR_U16
 
u16Bouquë_id
;

570 
GOSTSR_U16
 
u16NbDes¸ùt‹s
;

571 
GOS_PSISI_Des¸ùt‹_S
 
a°Des¸ùt‹
[
GOS_MAX_BAT_DESCIP_LOOP1
];

572 
GOSTSR_U16
 
u16NbEÀmíts
;

573 
GOS_PSISI_BAT_EÀmít_S
 
a°EÀmít
[
GOS_MAX_BAT_ELEMENT
];

574 
GOSTSR_U8
 
u8TabÀId
;

575 
GOSTSR_U8
 
u8Vîsi⁄
;

576 
GOSTSR_U8
 
u8Se˘i⁄Num
;

577 
GOSTSR_U8
 
u8La°Se˘i⁄Num
;

578 } 
	tGOSTSR_PSISI_BAT_S
;

583 
GOSTSR_U32
 
u32Mjd
;

584 
GOSTSR_U32
 
u32SèπTimeW‹d
[2];

585 
GOSTSR_U32
 
u32Duøti⁄TimeW‹d
;

586 
GOSTSR_U16
 
u16EvítId
;

587 
GOSTSR_U16
 
u16NbDes¸ùt‹s
;

588 
GOS_PSISI_Des¸ùt‹_S
 
a°Des¸ùt‹
[
GOS_MAX_EIT_ELEMENT_DESCRIPTOR
];

589 
GOS_PSISI_TABLE_STATUS_E
 
eSètus
;

590 
GOSTSR_U8
 
bS¸ambÀd
;

591 } 
	tGOS_PSISI_EIT_EÀmít_S
;

595 
GOSTSR_U32
 
u32CrcVÆue
;

596 
GOSTSR_U16
 
u16Sîvi˚Id
;

597 
GOSTSR_U16
 
u16Tøn•‹tSåómId
;

598 
GOSTSR_U16
 
u16OrigöÆNëW‹kdId
;

599 
GOSTSR_U16
 
u16NbEÀmíts
;

600 
GOSTSR_U8
 
u8TabÀId
;

601 
GOSTSR_U8
 
u8Vîsi⁄
;

602 
GOSTSR_U8
 
u8Se˘i⁄Num
;

603 
GOSTSR_U8
 
u8La°Se˘i⁄Num
;

604 
GOSTSR_U8
 
u8SegLa°Se˘i⁄Num
;

605 
GOSTSR_U8
 
u8La°TabeId
;

606 
GOS_PSISI_EIT_EÀmít_S
 
a°EÀmít
[
GOS_MAX_EIT_ELEMENT
];

607 } 
	tGOSTSR_PSISI_EIT_S
;

612 
GOSTSR_U8
 
u8Hour
;

613 
GOSTSR_U8
 
u8Möuã
;

614 
GOSTSR_U8
 
u8Sec⁄d
;

615 } 
	tUTCtime
;

619 
GOSTSR_U32
 
u32UTCtimeDW‹d
;

620 
GOSTSR_U16
 
u16MJDtime
;

621 
UTCtime
 
utcTime
;

622 } 
	tGOSTSR_PSISI_TDT_S
;

627 
GOSTSR_U32
 
u32CrcVÆue
;

628 
GOSTSR_U32
 
u32UTCtimeDW‹d
;

629 
GOSTSR_U16
 
u16MJDtime
;

630 
GOSTSR_U16
 
u16NbDes¸ùt‹s
;

631 
GOS_PSISI_Des¸ùt‹_S
 
°LoˇlTimeOffDesc
[
GOS_MAX_TOT_DESCRIPTOR
];

632 } 
	tGOSTSR_PSISI_TOT_S
;

637 
GOSTSR_U16
 
u16Tøn•‹tSåómId
;

638 
GOSTSR_U16
 
u16OrigöÆNëW‹kdId
;

639 
GOSTSR_U16
 
u16Sîvi˚Id
;

640 
GOSTSR_U16
 
u16EvítId
;

641 
GOSTSR_U8
 
u8RunSètus
;

642 }
	tGOS_PSISI_RST_EÀmít_S
;

646 
GOSTSR_U16
 
u16NbEÀmíts
;

647 
GOS_PSISI_RST_EÀmít_S
 
a°EÀmít
[
GOS_MAX_RTT_ELEMENT
];

648 }
	tGOSTSR_PSISI_RST_S
;

653 
GOSTSR_U16
 
u8TabÀId
;

654 }
	tGOSTSR_PSISI_ST_S
;

659 
GOSTSR_U16
 
u8TabÀId
;

660 
GOSTSR_U16
 
u8Tønsôi⁄Fœg
;

661 }
	tGOSTSR_PSISI_DIT_S
;

666 
GOSTSR_U16
 
u16Sîvi˚Id
;

667 
GOSTSR_U16
 
u8RunSètus
;

668 
GOSTSR_U16
 
u16NbDes¸ùt‹s
;

669 
GOS_PSISI_Des¸ùt‹_S
 
a°Des¸ùt‹
[
GOS_MAX_SIT_ELEMENT_DESCRIPTOR
];

670 } 
	tGOS_PSISI_SIT_EÀmít_S
;

674 
GOSTSR_U16
 
u16NbDes¸ùt‹s
;

675 
GOSTSR_U16
 
u16NbEÀmíts
;

676 
GOSTSR_U8
 
u8TabÀId
;

677 
GOSTSR_U8
 
u8Vîsi⁄Num
;

678 
GOSTSR_U8
 
u8Se˘i⁄Num
;

679 
GOSTSR_U8
 
u8La°Se˘i⁄Num
;

680 
GOS_PSISI_Des¸ùt‹_S
 
a°Des¸ùt‹
[
GOS_MAX_SIT_DESCIP_LOOP1
];

681 
GOS_PSISI_SIT_EÀmít_S
 
a°EÀmít
[
GOS_MAX_SIT_ELEMENT
];

682 }
	tGOSTSR_PSISI_SIT_S
;

687 
GOSTSR_U16
 
u16yór
;

688 
GOSTSR_U8
 
u8m⁄th
;

689 
GOSTSR_U8
 
u8day
;

690 }
	tGOSTSR_DATE_S
;

695 
GOSTSR_U8
 
u8hour
;

696 
GOSTSR_U8
 
u8möuã
;

697 
GOSTSR_U8
 
u8£c⁄d
;

698 }
	tGOSTSR_TIME_S
;

703 
GOSTSR_U32
 
u32OUI
;

704 
GOSTSR_U32
 
u32Fªquícy
;

705 
GOSTSR_U16
 
u16OADPid
;

706 
GOSTSR_U16
 
u16Symbﬁøã
;

707 
GOSTSR_U8
 
u8DscLí
;

708 
GOSTSR_U8
 
u8Sñe˘‹Lígth
;

709 
GOSTSR_U8
 
u8Sñe˘‹
[12];

710 
GOSTSR_U8
 
u8So·Vî
 ;

711 
GOSTSR_U8
 
u8Upd©eMode
 ;

712 
GOSTSR_U8
 
u8So·Mode
 ;

713 
GOSTSR_U8
 
u8B™dWidth
 ;

714 
GOSTSR_U8
 
u8Qam
;

715 
GOSTSR_U8
 
u8Pﬁ¨ôy
;

716 }
	tGOSTSR_PSISI_OTAINFO
;

721 
FRIST_ISO8859_5
 = 0x01,

722 
FRIST_ISO8859_6
 = 0x02,

723 
FRIST_ISO8859_7
 = 0x03,

724 
FRIST_ISO8859_8
 = 0x04,

725 
FRIST_ISO8859_9
 = 0x05,

726 
FRIST_ISO8859_10
 = 0x06,

727 
FRIST_ISO8859_11
 = 0x07,

728 
FRIST_ISO8859_13
 = 0x09,

729 
FRIST_ISO8859_14
 = 0x0A,

730 
FRIST_ISO8859_15
 = 0x0B,

731 
FRIST_ISO8859
 = 0x10,

732 
FRIST_ISO10646
 = 0x11,

733 
FRIST_KSX1001
 = 0x12,

734 
FRIST_GB2312
 = 0x13,

735 
FRIST_ISO10646_TC
 = 0x14,

736 
FRIST_ISO10646_UTF8
 = 0x15,

737 
FRIST_ENCODE_TYPEID
 = 0x1f,

738 
FRIST_BULT


739 }
	tEPGHEAD_FRISTBYTE
;

743 
SECOND_ISO8859
 = 0x00,

744 
SECOND_BULT


745 }
	tEPGHEAD_SECONDBYTE
;

749 
THIRD_ISO8859_1
 = 0x01,

750 
THIRD_ISO8859_2
 = 0x02,

751 
THIRD_ISO8859_3
 = 0x03,

752 
THIRD_ISO8859_4
 = 0x04,

753 
THIRD_ISO8859_5
 = 0x05,

754 
THIRD_ISO8859_6
 = 0x06,

755 
THIRD_ISO8859_7
 = 0x07,

756 
THIRD_ISO8859_8
 = 0x08,

757 
THIRD_ISO8859_9
 = 0x09,

758 
THIRD_ISO8859_10
 = 0x0A,

759 
THIRD_ISO8859_11
 = 0x0B,

760 
THIRD_ISO8859_13
 = 0x0D,

761 
THIRD_ISO8859_14
 = 0x0E,

762 
THIRD_ISO8859_15
 = 0x0F,

763 
THIRD_BULT


764 }
	tEPGHEAD_THIRDBYTE
;

768 
ENCODE_ASCII
 = 0x00,

769 
ENCODE_UNICODE
,

770 
ENCODE_ISO8859_1
,

771 
ENCODE_ISO8859_2
,

772 
ENCODE_ISO8859_3
,

773 
ENCODE_ISO8859_4
,

774 
ENCODE_ISO8859_5
,

775 
ENCODE_ISO8859_6
,

776 
ENCODE_ISO8859_7
,

777 
ENCODE_ISO8859_8
,

778 
ENCODE_ISO8859_9
,

779 
ENCODE_ISO8859_10
,

780 
ENCODE_ISO8859_11
,

781 
ENCODE_ISO8859_13
,

782 
ENCODE_ISO8859_14
,

783 
ENCODE_ISO8859_15
,

784 
ENCODE_ISO8859_16
,

785 
ENCODE_GB2312
,

786 
ENCODE_UTF8
,

787 
ENCODE_BULT


788 }
	tENCODE_TYPE
;

791 
	#ANALYSIS_CALLBACKFUNCTION_NUM
 0x10

	)

792 (*
A«lysisD©a_FUN
)(
	tGOSTSR_U8
 
	tch™ID
,
	tTS_SECTION_INFO
 *
	ttsSe˘i⁄Info
);

793 
GOSTSR_S32
 
GosT§_A«lysisD©a_TSHódInfo
(c⁄° *
§cD©a
, 
TS_HEAD_INFO
 *
desD©a
);

794 
GOSTSR_S32
 
GosT§_A«lysisD©a_Ad≠èti⁄Info
(
TS_HEAD_INFO
 *
desD©a
, c⁄° *
d©a
, 
TS_ADAPT_INFO
 *
ad≠tInfo
);

795 
GOSTSR_S32
 
GosT§_A«lysisD©a_PESInfo
(
TS_HEAD_INFO
 *
desD©a
,c⁄° *
d©a
, 
TS_PES_INFO
 *
≥sInfo
);

796 
GOSTSR_S32
 
GosT§_A«lysisD©a_CheckTsHódInfo
(
TS_HEAD_INFO
 *
tsHódInfo
);

797 
GOSTSR_S32
 
GosT§_A«lysisD©a_PSI
(c⁄° *
d©a
, 
TS_HEAD_INFO
 *
tsHódInfo
);

798 
GOSTSR_S32
 
GosT§_A«lysisD©a_SI
(c⁄° *
d©a
, 
TS_HEAD_INFO
 *
tsHódInfo
);

799 
GOSTSR_S32
 
GosT§_A«lysisD©a_GëPMTID
(
GOSTSR_PSISI_PAT_S
 *
∑tInfo
);

800 
GOSTSR_S32
 
GosT§_A«lysisD©a_Re£tPMTID
();

801 
GOSTSR_S32
 
GosT§_A«lysisD©a_TsEnvInô
();

802 
GOSTSR_S32
 
GosT§_A«lysisD©a_TsEnvDeInô
();

803 
GOSTSR_S32
 
GosT§_A«lysisD©a_TsEnvReInô
(
GOSTSR_U8
 
ch™ID
);

804 
GOSTSR_S32
 
GosT§_A«lysisD©a_Regi°îCÆlBack
(
A«lysisD©a_FUN
 
fun˘i⁄
, 
GOSTSR_U8
 *
ödex
);

805 
GOSTSR_S32
 
GosT§_A«lysisD©a_UnRegi°îCÆlBack
(
GOSTSR_U8
 
ödex
);

806 
GOSTSR_S32
 
GosT§_A«lysisD©a_CÆlBack
(
GOSTSR_U8
 
ch™ID
,
TS_SECTION_INFO
 *
tsSe˘i⁄Info
);

807 
GOSTSR_S32
 
GosT§_A«lysisD©a_PackëTy≥
(
GOSTSR_U32
 *
pu32PackëLí
, GOSTSR_U32 
u32D©©Lí
,
GOSTSR_U8
 *
pD©a
);

810 
GOSTSR_S32
 
GosT§_A«lysisD©a_PAT
(
TS_SECTION_INFO
 *
£˘i⁄D©a
, 
GOSTSR_PSISI_PAT_S
 * 
∑tInfo
);

811 
GOSTSR_S32
 
GosT§_A«lysisD©a_CAT
(
TS_SECTION_INFO
 *
£˘i⁄D©a
, 
GOSTSR_PSISI_CAT_S
 * 
∑tInfo
);

812 
GOSTSR_S32
 
GosT§_A«lysisD©a_NIT
(
TS_SECTION_INFO
 *
£˘i⁄D©a
, 
GOSTSR_PSISI_NIT_S
 * 
∑tInfo
);

813 
GOSTSR_S32
 
GosT§_A«lysisD©a_PMT
(
TS_SECTION_INFO
 *
£˘i⁄D©a
, 
GOSTSR_PSISI_PMT_S
 * 
∑tInfo
);

814 
GOSTSR_S32
 
GosT§_A«lysisD©a_BAT
(
TS_SECTION_INFO
 *
£˘i⁄D©a
, 
GOSTSR_PSISI_BAT_S
 * 
∑tInfo
);

815 
GOSTSR_S32
 
GosT§_A«lysisD©a_SDT
(
TS_SECTION_INFO
 *
£˘i⁄D©a
, 
GOSTSR_PSISI_SDT_S
 * 
∑tInfo
);

816 
GOSTSR_S32
 
GosT§_A«lysisD©a_EIT
(
TS_SECTION_INFO
 *
£˘i⁄D©a
, 
GOSTSR_PSISI_EIT_S
 * 
∑tInfo
);

817 
GOSTSR_S32
 
GosT§_A«lysisD©a_TDT
(
TS_SECTION_INFO
 *
£˘i⁄D©a
, 
GOSTSR_PSISI_TDT_S
 * 
∑tInfo
);

818 
GOSTSR_S32
 
GosT§_A«lysisD©a_TOT
(
TS_SECTION_INFO
 *
£˘i⁄D©a
, 
GOSTSR_PSISI_TOT_S
 * 
∑tInfo
);

819 
GOSTSR_S32
 
GosT§_A«lysisD©a_RST
(
TS_SECTION_INFO
 *
£˘i⁄Info
, 
GOSTSR_PSISI_RST_S
 * 
r°Info
);

820 
GOSTSR_S32
 
GosT§_A«lysisD©a_ST
 (
TS_SECTION_INFO
 *
£˘i⁄D©a
, 
GOSTSR_PSISI_ST_S
 * 
°Info
);

821 
GOSTSR_S32
 
GosT§_A«lysisD©a_DIT
(
TS_SECTION_INFO
 *
£˘i⁄D©a
, 
GOSTSR_PSISI_DIT_S
 * 
dôInfo
);

822 
GOSTSR_S32
 
GosT§_A«lysisD©a_SIT
(
TS_SECTION_INFO
 *
£˘i⁄D©a
, 
GOSTSR_PSISI_SIT_S
 * 
sôInfo
);

823 
GOSTSR_S32
 
GosT§_A«lysisD©a_PAT_Fªe
(
GOSTSR_PSISI_PAT_S
 *
∑tInfo
);

824 
GOSTSR_S32
 
GosT§_A«lysisD©a_CAT_Fªe
(
GOSTSR_PSISI_CAT_S
 *
ˇtInfo
);

825 
GOSTSR_S32
 
GosT§_A«lysisD©a_PMT_Fªe
(
GOSTSR_PSISI_PMT_S
 *
pmtInfo
);

826 
GOSTSR_S32
 
GosT§_A«lysisD©a_gëSîvi˚Name
(*
£rvi˚«me
, 
GOSTSR_U16
 *
£rvi˚ID
, 
TS_SECTION_INFO
 *
pSe˘i⁄Info
);

829 
GOSTSR_DATE_S
 
GosT§_TIME_MJDtoYMD
(
GOSTSR_U16
 
mjd
);

830 
GOSTSR_TIME_S
 
GosT§_TIME_UTCtoHMS
(
GOSTSR_U32
 
utc
);

831 
GOS_STREAMTYPE
 
GosT§_A«lysisD©a_SåómTy≥
(
GOS_PSISI_STREAMTYPE_E
 
SåómD©a
);

832 
GOSTSR_S32
 
GosT§_A«lysisD©a_OTAPriv©e
(
GOSTSR_U8
 *
¥iv©eD©a
, 
GOSTSR_PSISI_OTAINFO
 *
ŸaInfo
);

835 
GOSTSR_S32
 
GosT§_UnicodeSåög_to_UTF8Såög
(
GOSTSR_U8
 *
sour_°rög
, 
GOSTSR_U16
 
sour_Àn
, GOSTSR_U8 *
des_°rög
, GOSTSR_U16 *
des_Àn
);

836 
GOSTSR_S32
 
GosT§_ISO8859_1Såög_to_UnicodeSåög
(
GOSTSR_U8
 *
sour_°rög
, 
GOSTSR_U16
 
sour_Àn
, GOSTSR_U8 *
des_°rög
, GOSTSR_U16 *
des_Àn
);

837 
GOSTSR_S32
 
GosT§_ISO8859_2Såög_to_UnicodeSåög
(
GOSTSR_U8
 *
sour_°rög
, 
GOSTSR_U16
 
sour_Àn
, GOSTSR_U8 *
des_°rög
, GOSTSR_U16 *
des_Àn
);

838 
GOSTSR_S32
 
GosT§_ISO8859_3Såög_to_UnicodeSåög
(
GOSTSR_U8
 *
sour_°rög
, 
GOSTSR_U16
 
sour_Àn
, GOSTSR_U8 *
des_°rög
, GOSTSR_U16 *
des_Àn
);

839 
GOSTSR_S32
 
GosT§_ISO8859_4Såög_to_UnicodeSåög
(
GOSTSR_U8
 *
sour_°rög
, 
GOSTSR_U16
 
sour_Àn
, GOSTSR_U8 *
des_°rög
, GOSTSR_U16 *
des_Àn
);

840 
GOSTSR_S32
 
GosT§_ISO8859_5Såög_to_UnicodeSåög
(
GOSTSR_U8
 *
sour_°rög
, 
GOSTSR_U16
 
sour_Àn
, GOSTSR_U8 *
des_°rög
, GOSTSR_U16 *
des_Àn
);

841 
GOSTSR_S32
 
GosT§_ISO8859_6Såög_to_UnicodeSåög
(
GOSTSR_U8
 *
sour_°rög
, 
GOSTSR_U16
 
sour_Àn
, GOSTSR_U8 *
des_°rög
, GOSTSR_U16 *
des_Àn
);

842 
GOSTSR_S32
 
GosT§_ISO8859_7Såög_to_UnicodeSåög
(
GOSTSR_U8
 *
sour_°rög
, 
GOSTSR_U16
 
sour_Àn
, GOSTSR_U8 *
des_°rög
, GOSTSR_U16 *
des_Àn
);

843 
GOSTSR_S32
 
GosT§_ISO8859_8Såög_to_UnicodeSåög
(
GOSTSR_U8
 *
sour_°rög
, 
GOSTSR_U16
 
sour_Àn
, GOSTSR_U8 *
des_°rög
, GOSTSR_U16 *
des_Àn
);

844 
GOSTSR_S32
 
GosT§_ISO8859_9Såög_to_UnicodeSåög
(
GOSTSR_U8
 *
sour_°rög
, 
GOSTSR_U16
 
sour_Àn
, GOSTSR_U8 *
des_°rög
, GOSTSR_U16 *
des_Àn
);

845 
GOSTSR_S32
 
GosT§_ISO8859_10Såög_to_UnicodeSåög
(
GOSTSR_U8
 *
sour_°rög
, 
GOSTSR_U16
 
sour_Àn
, GOSTSR_U8 *
des_°rög
, GOSTSR_U16 *
des_Àn
);

846 
GOSTSR_S32
 
GosT§_ISO8859_11Såög_to_UnicodeSåög
(
GOSTSR_U8
 *
sour_°rög
, 
GOSTSR_U16
 
sour_Àn
, GOSTSR_U8 *
des_°rög
, GOSTSR_U16 *
des_Àn
);

847 
GOSTSR_S32
 
GosT§_ISO8859_13Såög_to_UnicodeSåög
(
GOSTSR_U8
 *
sour_°rög
, 
GOSTSR_U16
 
sour_Àn
, GOSTSR_U8 *
des_°rög
, GOSTSR_U16 *
des_Àn
);

848 
GOSTSR_S32
 
GosT§_ISO8859_14Såög_to_UnicodeSåög
(
GOSTSR_U8
 *
sour_°rög
, 
GOSTSR_U16
 
sour_Àn
, GOSTSR_U8 *
des_°rög
, GOSTSR_U16 *
des_Àn
);

849 
GOSTSR_S32
 
GosT§_ISO8859_15Såög_to_UnicodeSåög
(
GOSTSR_U8
 *
sour_°rög
, 
GOSTSR_U16
 
sour_Àn
, GOSTSR_U8 *
des_°rög
, GOSTSR_U16 *
des_Àn
);

850 
GOSTSR_S32
 
GosT§_ISO8859_16Såög_to_UnicodeSåög
(
GOSTSR_U8
 *
sour_°rög
, 
GOSTSR_U16
 
sour_Àn
, GOSTSR_U8 *
des_°rög
, GOSTSR_U16 *
des_Àn
);

851 
ENCODE_TYPE
 
GosT§_CheckL™guageHódCode
(
GOSTSR_U8
 
hódCode
, GOSTSR_U8 
£c⁄dCode
, GOSTSR_U8 
thridCode
);

852 
GOSTSR_S32
 
GosT§_Sour˚Såög_to_UTF8Såög
(
GOSTSR_U8
 *
sour_°rög
, 
GOSTSR_U16
 
sour_Àn
, GOSTSR_U8 *
des_°rög
, GOSTSR_U16 *
des_Àn
);

856 #ifde‡
__˝lu•lus


857 #i‡
__˝lu•lus


	@tscheck/include/GosTsr_Common.h

1 #ifde‡
__˝lu•lus


2 #i‡
__˝lu•lus


7 #i‚de‡
__GOSTSR_COMMON_H__


8 
	#__GOSTSR_COMMON_H__


	)

10 
	~<°dio.h
>

11 
	~<°dlib.h
>

12 
	~<°rög.h
>

13 
	~<uni°d.h
>

14 
	~<±hªad.h
>

15 
	~<sys/msg.h
>

16 
	~<£m≠h‹e.h
>

19 #i‚de‡
GOSTSR_U8


20 
	#GOSTSR_U8
 

	)

22 #i‚de‡
GOSTSR_U16


23 
	#GOSTSR_U16
 

	)

25 #i‚de‡
GOSTSR_U32


26 
	#GOSTSR_U32
 

	)

28 #i‚de‡
GOSTSR_U64


29 
	#GOSTSR_U64
 

	)

33 #i‚de‡
GOSTSR_S8


34 
	#GOSTSR_S8
 sig√d 

	)

36 #i‚de‡
GOSTSR_S16


37 
	#GOSTSR_S16
 sig√d 

	)

39 #i‚de‡
GOSTSR_S32


40 
	#GOSTSR_S32
 sig√d 

	)

42 #i‚de‡
GOSTSR_S64


43 
	#GOSTSR_S64
 sig√d 

	)

46 #i‚de‡
GOSTSR_D64


47 
	#GOSTSR_D64
 

	)

49 #i‚de‡
GOSTSR_F32


50 
	#GOSTSR_F32
 

	)

54 #i‚de‡
GOSTSR_SUCCESS


55 
	#GOSTSR_SUCCESS
 0

	)

57 #i‚de‡
GOSTSR_FAILURE


58 
	#GOSTSR_FAILURE
 -1

	)

62 #i‚de‡
GOSTSR_NULL


63 
	#GOSTSR_NULL
 (0L)

	)

66 #i‚de‡
GOSTSR_BOOL


67 
	#GOSTSR_BOOL
 sig√d 

	)

70 #i‚de‡
GOSTSR_FALSE


71 
	#GOSTSR_FALSE
 0

	)

73 #i‚de‡
GOSTSR_TRUE


74 
	#GOSTSR_TRUE
 1

	)

78 #i‚de‡
BIT0


79 
	#BIT0
 0x00

	)

80 
	#BIT1
 0x01

	)

81 
	#BIT2
 0x02

	)

82 
	#BIT3
 0x04

	)

83 
	#BIT4
 0x08

	)

84 
	#BIT5
 0x10

	)

85 
	#BIT6
 0x20

	)

86 
	#BIT7
 0x40

	)

87 
	#BIT8
 0x80

	)

90 
£m_t
 
	tOS_Packë_Sem≠h‹e_t
;

91 
	#OS_Packë_AŒocMem‹y
(
size
Ë
	`ˇŒoc
(1, size)

92 
	#OS_Packë_FªeMem‹y
(
±r
Ëdo{i‡’å){
	`‰ì
’å);Öå = 
GOSTSR_NULL
;}}0)

	)

94 
	#PRINT_DEBUG
(
°r
,
pos
Ë
	`¥ötf
("%-30s\tByãPo†%-20d\tPkà%d\n",°r,pos,pos/188);

	)

95 
	#ERROR_DEBUG
(
°r
Ë
	`¥ötf
("Fûe:%s-->Func:%s-->Löe:%d--->%†Eº‹\n",
__FILE__
,
__FUNCTION__
,
__LINE__
,°r);

	)

98 
	#TSERROR_PVR_TSCHECk
 1

99 
	#TSERROR_CHECK
 1

100 
	#TSERROR_ONE_LEVEL
 1

101 
	#TSERROR_TWO_LEVEL
 1

102 
	#TSERROR_THREE_LEVEL
 1

103 
	#TSERROR_ANALYSIS_PACKET
 1

104 
	#TSERROR_ANALYSIS_TABLE
 1

105 

	)

106 
	#STATIC_SEARCH_USE
 1

107 
	#TSBAND_BANDWIDTH
 1

108 

	)

110 
	#TSERROR_LOG_DEBUG
 0

	)

111 
	#TSERROR_LOG_EXPORT
 0

	)

114 
	#TSERROR_CHANNELID_MAX
 2

	)

118 
	mCHANNEL_ID_0
 = 0x00,

119 
	mCHANNEL_ID_1
 = 0x01,

120 
	mCHANNEL_BULT


125 
GOSTSR_U8
 
	mch™ID
;

126 
GOSTSR_BOOL
 
	mbisM©ched
;

127 
GOSTSR_BOOL
 
	mbC¨ryFœg
;

128 
GOSTSR_U32
 
	mbyãPos
;

129 
GOSTSR_U32
 
	m°¨tTime
;

130 
GOSTSR_U32
 
	mídTime
;

132 }
	tTR101290_ERROR_S
;

136 
	mTYPE_ERROR_ONE
 = 0x01,

137 
	mTYPE_ERROR_TWO
 = 0x02,

138 
	mTYPE_ERROR_THREE
 = 0x04,

140 
	mTR101290_ERROR_MAX


141 }
	tTR101290_TYPE_ERROR_E
;

146 
	mTR101290_ONE_ERROR_SYNCLOSS
 = 0x000001,

147 
	mTR101290_ONE_ERROR_SYNCBYTE
 = 0x000002,

148 
	mTR101290_ONE_ERROR_PAT
 = 0x000004,

149 
	mTR101290_ONE_ERROR_PMT
 = 0x000008,

150 
	mTR101290_ONE_ERROR_CONTINUTYCOUNT
 = 0x000010,

151 
	mTR101290_ONE_ERROR_PID
 = 0x000020,

154 
	mTR101290_TWO_ERROR_TRANSPORT
 = 0x000040,

155 
	mTR101290_TWO_ERROR_CRC
 = 0x000080,

156 
	mTR101290_TWO_ERROR_PCRDISCONT
 = 0x000100,

157 
	mTR101290_TWO_ERROR_ACCURACY
 = 0x000200,

158 
	mTR101290_TWO_ERROR_PTS
 = 0x000400,

159 
	mTR101290_TWO_ERROR_CAT
 = 0x000800,

162 
	mTR101290_THREE_ERROR_NITACTUAL
 = 0x001000,

163 
	mTR101290_THREE_ERROR_NITOTHER
 = 0x002000,

164 
	mTR101290_THREE_ERROR_SIREPETITION
 = 0x004000,

165 
	mTR101290_THREE_ERROR_UNREFERENCEPID
 = 0x008000,

166 
	mTR101290_THREE_ERROR_SDTACTUAL
 = 0x010000,

167 
	mTR101290_THREE_ERROR_SDTOTHER
 = 0x020000,

168 
	mTR101290_THREE_ERROR_EITACTUAL
 = 0x040000,

169 
	mTR101290_THREE_ERROR_EITOTHER
 = 0x080000,

170 
	mTR101290_THREE_ERROR_EITPF
 = 0x100000,

171 
	mTR101290_THREE_ERROR_RST
 = 0x200000,

172 
	mTR101290_THREE_ERROR_TDT
 = 0x400000,

174 
	mTR101290_THREE_ERROR_MAX


175 }
	tTR101290_ERROR_LEVEL_E
;

179 #ifde‡
__˝lu•lus


180 #i‡
__˝lu•lus


	@tscheck/include/GosTsr_Crc.h

1 #ifde‡
__˝lu•lus


2 #i‡
__˝lu•lus


7 #i‚de‡
GOSTSR_CRC_H


8 
	#GOSTSR_CRC_H


	)

10 
	~"GosT§_Comm⁄.h
"

12 
	#CRC32_MAX_COEFFICIENTS
 256

	)

13 
	#CRC32_POLYNOMIAL
 0x04C11DB7

	)

16 
GOSTSR_S32
 
GosT§_A«lysisD©a_CRCInô
();

17 
GOSTSR_U32
 
GosT§_A«lysisD©a_CRCCheck
(c⁄° 
GOSTSR_U8
 *
buf
, GOSTSR_U32 
Àn
);

21 #ifde‡
__˝lu•lus


22 #i‡
__˝lu•lus


	@tscheck/include/GosTsr_Descriptor.h

1 #ifde‡
__˝lu•lus


2 #i‡
__˝lu•lus


7 
	~"GosT§_Comm⁄.h
"

8 
	~"GosT§_A«lysisD©a.h
"

10 #i‚de‡
__GOSTSR_DESCRIPTOR_H__


11 
	#__GOSTSR_DESCRIPTOR_H__


	)

13 
	#GOS_CODE_RATIO
 (2)

	)

14 
	#GOS_MAX_BOUQUET_NAME_LEN
 (32 * 
GOS_CODE_RATIO
)

	)

15 
	#GOS_MAX_CA_NUM
 (8)

	)

16 
	#GOS_MAX_CONTENT_NUM
 (10)

	)

17 
	#GOS_MAX_COUNTRY_NUM
 (16)

	)

18 
	#GOS_MAX_EXTENDEDEVENT_ITEMDES_LEN
 (128 * 
GOS_CODE_RATIO
)

	)

19 
	#GOS_MAX_EXTENDEDEVENT_ITEMCHAR_LEN
 (128 * 
GOS_CODE_RATIO
)

	)

20 
	#GOS_MAX_EXTENDEDEVENT_ITEM_NUM
 (20)

	)

21 
	#GOS_MAX_EXTENDEDEVENT_TXT_LEN
 (256 * 
GOS_CODE_RATIO
)

	)

22 
	#GOS_MAX_FREQUENCY_NUM
 (100)

	)

23 
	#GOS_MAX_LOCALTIME_ELENUM
 (32)

	)

24 
	#GOS_MAX_MOSAIC_ElE_CELL_NUM
 (6*6)

	)

25 
	#GOS_MAX_BOUQUET_NAME_NUM
 (64)

	)

26 
	#GOS_MAX_COMPONENT_NUM
 (32)

	)

27 
	#GOS_MAX_NETWORK_NAME_NUM
 (32)

	)

28 
	#GOS_MAX_SERVICE_NAME_NUM
 (32)

	)

29 
	#GOS_MAX_NVODSERVICE_NUM
 (100)

	)

30 
	#GOS_MAX_PARENTALRATING_NUM
 (32)

	)

31 
	#GOS_MAX_EVENTNAME_LEN
 (64 * 
GOS_CODE_RATIO
)

	)

32 
	#GOS_MAX_EVENTSHORTEXTDES_LEN
 (256 * 
GOS_CODE_RATIO
)

	)

33 
	#GOS_MAX_STUFFING_LEN
 (256 * 
GOS_CODE_RATIO
)

	)

34 
	#GOS_MAX_SUBTITLE_ELENUM
 (16)

	)

35 
	#GOS_MAX_TELETEXT_NUM
 (16)

	)

36 
	#GOS_MAX_LANGUAGECODE_NUM
 (64)

	)

37 
	#GOS_MAX_ADDCOPYRIGHTINFO_NUM
 (256)

	)

38 
	#GOS_MAX_AVCVIDEO_NUM
 (256)

	)

39 
	#GOS_MAX_RESERVED_NUM
 (256)

	)

40 
	#GOS_MAX_VBIDATA_DES_NUM
 (256)

	)

41 
	#GOS_MAX_VBIDATA_NUM
 (32)

	)

42 
	#GOS_MAX_DSNG_NUM
 (32)

	)

43 
	#GOS_MAX_TPSTREAM_NUM
 (32)

	)

44 
	#GOS_MAX_VBITELETEXT_NUM
 (32)

	)

45 
	#GOS_MAX_LINKAGEDATA_NUM
 (256)

	)

46 
	#GOS_MAX_LCNSREVICE_NUM
 (256)

	)

47 
	#GOS_MAX_CHANNELLIST_NUM
 (256)

	)

48 
	#GOS_MAX_SUBTITLE_NUM
 (16)

	)

50 
	#GOS_MAX_MOSAIC_LOGIC_CELL_NUM
 
GOS_MAX_MOSAIC_ElE_CELL_NUM


	)

55 
GOSTSR_U8
 
u8NameLí
;

56 
GOSTSR_U8
 
au8Nëw‹kName
[
GOS_MAX_BOUQUET_NAME_LEN
];

57 } 
	tGOS_DESC_NETWORKNAME_S
;

62 
GOSTSR_U16
 
U16Sîvi˚Id
;

63 
GOSTSR_U8
 
U8Sîvi˚Ty≥
;

64 }
	tGOS_DESC_SERVLISTSERV_S
;

68 
GOSTSR_U16
 
u16NbSîvi˚
;

69 
GOS_DESC_SERVLISTSERV_S
 
a°Sîvi˚Li°
[
GOS_MAX_SERVICE_NUM
];

70 } 
	tGOS_DESC_SERVLIST_S
;

75 
GOSTSR_U32
 
u32Fªq
;

76 
GOSTSR_U32
 
u32Symbﬁ_R©e
;

77 
GOSTSR_U8
 
u8Moduœti⁄
;

78 
GOSTSR_U8
 
u8FEC_Ouãr
;

79 
GOSTSR_U8
 
u8FEC_I¬î
;

80 }
	tGOS_DESC_CABDELIVSYS_S
;

85 
GOSTSR_U32
 
u32Fªq
;

86 
GOSTSR_U32
 
u32Symbﬁ_R©e
;

87 
GOSTSR_U16
 
u160rbôÆ_Posôi⁄
;

88 
GOSTSR_U8
 
u8Moduœti⁄
;

89 
GOSTSR_U8
 
u8We°_Ea°_Fœg
;

90 
GOSTSR_U8
 
u8FEC_I¬î
;

91 
GOSTSR_U8
 
u8Pﬁ¨iz©i⁄
;

92 }
	tGOS_DESC_SATDELIVSYS_S
;

97 
GOSTSR_U32
 
u32Cíåe_Fªq
;

98 
GOSTSR_U8
 
u8B™dWidth
;

99 
GOSTSR_U8
 
u8C⁄°ñœti⁄
;

100 
GOSTSR_U8
 
u8Hõørchy_Inf‹
;

101 
GOSTSR_U8
 
u8Code_øã_HP_°ªam
;

102 
GOSTSR_U8
 
u8Code_øã_LP_°ªam
;

103 
GOSTSR_U8
 
u8Gu¨d_I¡îvÆ
;

104 
GOSTSR_U8
 
u8Tøns_Mode
 ;

105 
GOSTSR_U8
 
u8Othî_Fªq_Fœg
;

106 }
	tGOS_DESC_TERDELIVSYS_S
;

111 
GOSTSR_U8
 
u8NameLí
;

112 
GOSTSR_U8
 
au8BouqName
[
GOS_MAX_BOUQUET_NAME_LEN
];

113 } 
	tGOS_DESC_BOUQUETNAME_S
;

118 
GOSTSR_U16
 
au16CA_Sys_ID
[
GOS_MAX_CA_NUM
];

119 
GOSTSR_U8
 
u8CANum
;

120 } 
	tGOS_DESC_CAIDF_S
;

125 
GOSTSR_U8
 
u8SåómC⁄ã¡
;

126 
GOSTSR_U8
 
u8Comp⁄ítTy≥
;

127 
GOSTSR_U8
 
u8Comp⁄ítTag
;

128 
GOSTSR_U8
 
au8ISO639_L™guage_Code
[3];

129 
GOSTSR_U8
 
acTextCh¨
[256];

130 } 
	tGOS_DESC_COMPONENT_S
;

136 } 
GOS_DESC_COMPONENT_SERVICE_NAME_S
;

141 
GOSTSR_U8
 
u8NibbÀLevñ1
;

142 
GOSTSR_U8
 
u8NibbÀLevñ2
;

143 
GOSTSR_U8
 
u8U£rNibbÀ1
;

144 
GOSTSR_U8
 
u8U£rNibbÀ2
;

145 }
	tGOS_DESC_CONTENTDETAIL_S
;

149 
GOSTSR_U16
 
u16NbC⁄ã¡
;

150 
GOS_DESC_CONTENTDETAIL_S
 
a°DëaûLi°
[
GOS_MAX_CONTENT_NUM
];

151 }
	tGOS_DESC_CONTENT_S
;

156 
GOSTSR_U32
 
u32Cou¡ryNum
;

157 
GOSTSR_U32
 
au32Cou¡ryCode
[
GOS_MAX_COUNTRY_NUM
];

158 
GOSTSR_U8
 
u8Cou¡ry_Avaûabûôy_Fœg
;

159 } 
	tGOS_DESC_COUNTRY_AVAILABILITY_S
;

164 
GOSTSR_U16
 
u16D©aBrﬂdˇ°Id
;

165 
GOSTSR_U8
 
u8Comp⁄ítTag
;

166 
GOSTSR_U8
 
u8Sñe˘‹Lígth
;

167 
GOSTSR_U8
 
au8Sñe˘‹Byã
[256];

168 
GOSTSR_U8
 
au8ISO639_L™guage_Code
[3];

169 
GOSTSR_U8
 
u8TextLígth
;

170 
GOSTSR_U8
 
au8TextCh¨
[256];

171 } 
	tGOS_DESC_DATA_BROADCAST_S
;

176 
GOSTSR_U16
 
u16D©aBrﬂdˇ°Id
;

177 
GOSTSR_U8
 
au8IdSñe˘‹Byã
[256];

178 } 
	tGOS_DESC_DATA_BROADCAST_ID_S
;

183 
GOSTSR_U32
 
u8IãmDescLí
;

184 
GOSTSR_U32
 
u8IãmCh¨Lí
;

185 
GOSTSR_U8
 
IãmDesc
[
GOS_MAX_EXTENDEDEVENT_ITEMDES_LEN
];

186 
GOSTSR_U8
 
IãmCh¨
[
GOS_MAX_EXTENDEDEVENT_ITEMCHAR_LEN
];

187 } 
	tGOS_DESC_EXTEVTELE_S
;

191 
GOSTSR_U32
 
u32Lag_Code
;

192 
GOSTSR_U32
 
u32Txt_Lígth
;

193 
GOSTSR_U8
 
u8Desc_Num
;

194 
GOSTSR_U8
 
u8La°_Desc_Num
;

195 
GOSTSR_U8
 
u8IãmNum
;

196 
GOS_DESC_EXTEVTELE_S
 
a°IãmEÀ
[
GOS_MAX_EXTENDEDEVENT_ITEM_NUM
];

197 
GOSTSR_U8
 
acTxt_Ch¨
[
GOS_MAX_EXTENDEDEVENT_TXT_LEN
];

198 } 
	tGOS_DESC_EXTEVT_S
;

203 
GOSTSR_U32
 
u32FªNum
;

204 
GOSTSR_U32
 
au32FªquícyVÆue
[
GOS_MAX_FREQUENCY_NUM
];

205 
GOSTSR_U8
 
u8Codög_Ty≥
;

206 } 
	tGOS_DESC_FREQLST_S
;

211 
GOSTSR_U16
 
u16Orid
;

212 
GOSTSR_U16
 
u16TsId
;

213 
GOSTSR_U16
 
u16Sîvi˚Id
;

214 
GOSTSR_U16
 
u16Nëw‹kID
;

215 
GOSTSR_U16
 
u16InôSîID
;

216 
GOSTSR_U16
 
u16T¨gëEvítID
;

217 
GOSTSR_U16
 
u16PrivD©aLí
;

218 
GOSTSR_U8
 
u8LökTy≥
;

219 
GOSTSR_U8
 
u8H™dOvîTy≥
;

220 
GOSTSR_U8
 
u8OrigöTy≥
;

221 
GOSTSR_U8
 
u8T¨gëLi°ed
;

222 
GOSTSR_U8
 
u8EvítSimulˇ°
;

223 
GOSTSR_U8
 
u8PrivD©a
[
GOS_MAX_LINKAGEDATA_NUM
];

224 }
	tGOS_DESC_LINKAGE_S
;

229 
GOSTSR_U32
 
u32Cou¡ry_Code
;

230 
GOSTSR_U32
 
u32Time_Of_Ch™ge_UTC
;

231 
GOSTSR_U16
 
u16Loˇl_Time_Off£t
;

232 
GOSTSR_U16
 
u16time_Of_Ch™ge_MJD
;

233 
GOSTSR_U16
 
u16Next_Time_Off£t
;

234 
GOSTSR_U8
 
u8Cou¡ry_Regi⁄_Id
;

235 
GOSTSR_U8
 
u8Loˇl_Time_Off£t_Pﬁ¨ôy
;

236 } 
	tGOS_DESC_LOCALTMOFFELE_S
;

240 
GOSTSR_U32
 
u32TimeOff£tEÀNum
;

241 
GOS_DESC_LOCALTMOFFELE_S
 
a°TimeOff£tInfo
[
GOS_MAX_LOCALTIME_ELENUM
];

242 } 
	tGOS_DESC_LOCALTMOFFSET_S
;

247 
GOSTSR_U16
 
u16BouquëId
 ;

248 
GOSTSR_U16
 
u16OrId
;

249 
GOSTSR_U16
 
u16TsId
;

250 
GOSTSR_U16
 
u16Sîvi˚Id
;

251 
GOSTSR_U16
 
u16EvítId
;

252 
GOSTSR_U8
 
u8LogiˇlCñlId
;

253 
GOSTSR_U8
 
u8LogiˇlCñlInfo
;

254 
GOSTSR_U8
 
u8EÀCñlNum
;

255 
GOSTSR_U8
 
a°EÀCñlId
[
GOS_MAX_MOSAIC_ElE_CELL_NUM
];

256 
GOSTSR_U8
 
u8CñlLökageInfo
;

257 } 
	tGOS_DESC_MOSAIC_LOGICCELL_S
;

261 
GOSTSR_U8
 
u8Moßic_íåy_poöt
;

262 
GOSTSR_U8
 
u8NumbîHEÀmíèryCñls
;

263 
GOSTSR_U8
 
u8NumbîVEÀmíèryCñls
;

264 
GOSTSR_U8
 
u8NumbîLogicCñls
;

265 
GOS_DESC_MOSAIC_LOGICCELL_S
 
a°LogicCñlInfo
[
GOS_MAX_MOSAIC_LOGIC_CELL_NUM
];

266 } 
	tGOS_DESC_MOSAIC_S
;

271 
GOSTSR_U8
 
au8ISO639_L™guage_Code
[3];

272 
GOSTSR_U8
 
u8NameLígth
;

273 
GOSTSR_U8
 
au8Ch¨
[256];

274 } 
	tGOS_DESC_NAME_S
;

278 
GOSTSR_U8
 
u8BouquëNameNum
;

279 
GOS_DESC_NAME_S
 
a°BouquëName
[
GOS_MAX_BOUQUET_NAME_NUM
];

280 } 
	tGOS_DESC_MULT_BOUQUET_NAME_S
;

285 
GOSTSR_U8
 
u8Comp⁄ítTag
;

286 
GOSTSR_U8
 
u8Comp⁄ítNum
;

287 
GOS_DESC_NAME_S
 
a°Comp⁄ít
[
GOS_MAX_COMPONENT_NUM
];

288 } 
	tGOS_DESC_MULT_COMPONENT_S
;

293 
GOSTSR_U8
 
u8Nëw‹kNameNum
;

294 
GOS_DESC_NAME_S
 
a°Nëw‹kName
[
GOS_MAX_NETWORK_NAME_NUM
];

295 } 
	tGOS_DESC_MULT_NETWORK_NAME_S
;

300 
GOSTSR_U8
 
u8Sîvi˚NameNum
;

301 
GOSTSR_U8
 
u8Sîvi˚ProvidîNameNum
;

302 
GOS_DESC_NAME_S
 
a°Sîvi˚Name
[
GOS_MAX_SERVICE_NAME_NUM
];

303 
GOS_DESC_NAME_S
 
a°Sîvi˚ProvidîName
[
GOS_MAX_SERVICE_NAME_NUM
];

304 } 
	tGOS_DESC_MULT_SERVICE_NAME_S
;

309 
GOSTSR_U16
 
u16TøsId
;

310 
GOSTSR_U16
 
u16OrId
;

311 
GOSTSR_U16
 
u16Sîvi˚Id
;

312 }
	tGOS_DESC_NVODSERV_S
;

316 
GOSTSR_U8
 
u8NbSîvi˚
;

317 
GOS_DESC_NVODSERV_S
 
a°Sîvi˚Li°
[
GOS_MAX_NVODSERVICE_NUM
];

318 } 
	tGOS_DESC_NVODREF_S
;

323 
GOSTSR_U32
 
u32Lag_Code
;

324 
GOSTSR_U8
 
u8R©ög
;

325 } 
	tGOS_DESC_RATING_S
;

329 
GOSTSR_U32
 
u32R©ögNum
;

330 
GOS_DESC_RATING_S
 
a°R©ög
[
GOS_MAX_PARENTALRATING_NUM
];

331 } 
	tGOS_DESC_PARENTRATING_S
;

336 
GOSTSR_U32
 
u32Priv©eD©a
;

337 } 
	tGOS_DESC_PRIVATE_DATA_SPECIFIER_S
;

342 
GOSTSR_U16
 
u16DVBRe£rvedLí
;

343 
GOSTSR_U8
 
u8SbSize
;

344 
GOSTSR_U8
 
u8SbLókR©e
;

345 
GOSTSR_U8
 
u8DVBRe£rved
[256];

346 } 
	tGOS_DESC_SHORT_SMOOTHING_BUFFER_S
;

351 
GOSTSR_U32
 
u32SbLókR©e
;

352 
GOSTSR_U32
 
u32SbSize
;

353 }
	tGOS_DESC_SMOOTHING_BUFFER_S
;

358 
GOSTSR_U8
 
u8Sîvi˚Ty≥
;

359 
GOSTSR_U8
 
u8Sîvi˚ProvidîNameLí
;

360 
GOSTSR_U8
 
u8Sîvi˚ProvideName
[256];

361 
GOSTSR_U8
 
u8Sîvi˚NameLí
;

362 
GOSTSR_U8
 
u8Sîvi˚Name
[256];

363 }
	tGOS_DESC_SERVICE_S
;

368 
GOSTSR_U16
 
u16NewONID
;

369 
GOSTSR_U16
 
u16NewTSID
;

370 
GOSTSR_U16
 
u16NewSîvi˚ID
;

371 } 
	tGOS_DESC_SERVICE_MOVE_S
;

376 
GOSTSR_U32
 
u32L™gCode
;

377 
GOSTSR_U16
 
u16EvtNameLí
;

378 
GOSTSR_U16
 
u16Sh‹tEvtDesLí
;

379 
GOSTSR_U8
 
acEvtName
[
GOS_MAX_EVENTNAME_LEN
];

380 
GOSTSR_U8
 
acSh‹tEvtDes
[
GOS_MAX_EVENTSHORTEXTDES_LEN
];

381 } 
	tGOS_DESC_SHORTEVT_S
;

386 
GOSTSR_U8
 
u8Comp⁄ít_èg
;

387 } 
	tGOS_DESC_STREAM_IDENTIFIER_S
;

392 
GOSTSR_U16
 
u16°uffögLí
;

393 
GOSTSR_U8
 
u8°uffögByã
[
GOS_MAX_STUFFING_LEN
];

394 } 
	tGOS_DESC_STUFFING_S
;

399 
GOSTSR_U32
 
u32Cou¡ry_Code
;

400 
GOSTSR_U16
 
u16Composôi⁄_Page_Id
;

401 
GOSTSR_U16
 
u16Ancûœry_Page_Id
;

402 
GOSTSR_U8
 
u8Sub°ôlög_Ty≥
;

403 } 
	tGOS_DESC_SUBTELE_S
;

407 
GOSTSR_U32
 
u32SubtôÀEÀNum
;

408 
GOS_DESC_SUBTELE_S
 
a°SubtôÀInfo
[
GOS_MAX_SUBTITLE_ELENUM
];

409 } 
	tGOS_DESC_SUBT_S
;

414 
GOSTSR_U8
 
u8F‹egöAvaûabûôy
;

415 
GOSTSR_U8
 
u8C⁄√˘Ty≥
;

416 
GOSTSR_U8
 
u8Cou¡ryPªfixLí
;

417 
GOSTSR_U8
 
u8Cou¡ryPªfix
[4];

418 
GOSTSR_U8
 
u8I¡î«ti⁄ÆAªaCodeLí
;

419 
GOSTSR_U8
 
u8I¡î«ti⁄aAªaCode
[8];

420 
GOSTSR_U8
 
u8O≥øt‹CodeLí
;

421 
GOSTSR_U8
 
u8O≥øt‹Code
[4];

422 
GOSTSR_U8
 
u8N©i⁄AªaCodeLí
;

423 
GOSTSR_U8
 
u8N©i⁄AªaCode
[8];

424 
GOSTSR_U8
 
u8C‹eNumbîCodeLí
;

425 
GOSTSR_U8
 
u8C‹eNumbîCode
[16];

426 } 
	tGOS_DESC_TELEPHONE_S
;

431 
GOSTSR_U32
 
u32Lag_Code
;

432 
GOSTSR_U8
 
u8Tñëext_Ty≥
;

433 
GOSTSR_U8
 
u8Tñëext_Magazöe_Numbî
;

434 
GOSTSR_U8
 
u8Tñëext_Page_Numbî
;

435 } 
	tGOS_DESC_TELETEXTELE_S
;

439 
GOSTSR_U32
 
u32TñëextNum
;

440 
GOS_DESC_TELETEXTELE_S
 
a°TñëextInfo
[
GOS_MAX_TELETEXT_NUM
];

441 } 
	tGOS_DESC_TELETEXT_S
;

446 
GOSTSR_U16
 
u16Ref_Sîvi˚_Id
;

447 
GOSTSR_U16
 
u16Ref_Evt_Id
;

448 } 
	tGOS_DESC_TMSHIFTEVT_S
;

453 
GOSTSR_U16
 
u16RefSîvi˚Id
;

454 } 
	tGOS_DESC_TIMESHIFTSERV_S
;

459 
GOSTSR_U8
 
u8Mu…ùÀFømeR©eFœg
;

460 
GOSTSR_U8
 
u8FømeR©eCode
;

461 
GOSTSR_U8
 
u8MPEG2Fœg
;

462 
GOSTSR_U8
 
u8C⁄°øöP¨amëîFœg
;

463 
GOSTSR_U8
 
u8StûlPi˘uªFœg
;

464 
GOSTSR_U8
 
u8ProfûeAndLevñIndiˇti⁄
;

465 
GOSTSR_U8
 
u8ChromaF‹m©
;

466 
GOSTSR_U8
 
u8FømeR©eExãnsi⁄Fœg
;

467 }
	tGOS_DESC_VIDEOSTREAM_S
;

472 
GOSTSR_U8
 
u8FªeF‹m©Fœg
;

473 
GOSTSR_U8
 
u8ID
;

474 
GOSTSR_U8
 
u8Layî
;

475 }
	tGOS_DESC_AUDIOSTRAM_S
;

480 
GOSTSR_U8
 
u8HõørchyTy≥
;

481 
GOSTSR_U8
 
u8HõørchyLayîIndex
;

482 
GOSTSR_U8
 
u8HõørchyEmbeddedLayî
;

483 
GOSTSR_U8
 
u8HõørchyPri‹ôy
;

484 }
	tGOS_DESC_HIERARCHY_S
;

489 
GOSTSR_U32
 
u32F‹m©Idítifõr
;

490 
GOSTSR_U16
 
u16AddIdítifiˇti⁄Lí
;

491 
GOSTSR_U8
 
u8AddIdítifiˇti⁄Info
[256];

492 }
	tGOS_DESC_REGISTRATION_S
;

497 
GOSTSR_U8
 
u8AlignmítTy≥
;

498 }
	tGOS_DESC_DATASTRAMALIGNMENT_S
;

503 
GOSTSR_U16
 
u16H‹iz⁄èlSize
;

504 
GOSTSR_U16
 
u16VîtiˇlSize
;

505 
GOSTSR_U8
 
u8Pña•e˘R©io
;

506 }
	tGOS_DESC_TARBACGRID_S
;

511 
GOSTSR_U16
 
u16H‹iz⁄èlZOff£t
;

512 
GOSTSR_U16
 
u16VîtiˇlOff£t
;

513 
GOSTSR_U8
 
u8WödowPri‹ôy
;

514 }
	tGOS_DESC_VIDEOWINDOW_S
;

519 
GOSTSR_U16
 
u16CaSy°emId
;

520 
GOSTSR_U16
 
u16CaPId
;

521 
GOSTSR_U8
 
u8Piv©eD©aLí
;

522 
GOSTSR_U8
 *
pu8D©a
;

523 } 
	tGOS_DESC_CA_S
;

529 } 
GOS_DESC_CA_SYSTEM_S
;

534 
GOSTSR_U32
 
u32L™guageCode
[
GOS_MAX_LANGUAGECODE_NUM
];

535 
GOSTSR_U16
 
u16L™guageCodeLí
;

536 
GOSTSR_U8
 
u8AudioTy≥
;

537 }
	tGOS_DESC_ISOLANGUAGECODE_S
;

542 
GOSTSR_U8
 
u8Exã∫ClockRefIndiˇt‹
;

543 
GOSTSR_U8
 
u8ClockAccuøcyI¡egî
;

544 
GOSTSR_U8
 
u8ClockAccuøcyExp⁄ít
;

545 }
	tGOS_DESC_SYSTEMCLOCK_S
;

550 
GOSTSR_U16
 
u16Mu…ùÀxDñayV¨üti⁄
;

551 
GOSTSR_U8
 
u8MdvVÆidFœg
;

552 
GOSTSR_U8
 
u8Mu…ùÀxSå©egy
;

553 }
	tGOS_DESC_MULBUFFERUTILIZATION_S
;

558 
GOSTSR_U32
 
u32C›yrightIdítifõr
;

559 
GOSTSR_U16
 
u32AddC›yrightInfoLí
;

560 
GOSTSR_U8
 
u8AddC›yrightInfo
[
GOS_MAX_ADDCOPYRIGHTINFO_NUM
];

561 }
	tGOS_DESC_COPYRIGHT_S
;

566 
GOSTSR_U32
 
u32MaxBôøã
;

567 }
	tGOS_DESC_MAXBITRATE_S
;

572 
GOSTSR_U32
 
u32Priv©eD©aIndiˇt‹
;

573 }
	tGOS_DESC_PRIVATEDATAINDICATOR_S
;

578 
GOSTSR_U16
 
u16AVCVideoLí
;

579 
GOSTSR_U8
 
u8AVCVideoD©a
[
GOS_MAX_AVCVIDEO_NUM
];

580 }
	tGOS_DESC_AVCVIDEO_S
;

585 
GOSTSR_U16
 
u16Sîvi˚Id
;

586 
GOSTSR_U16
 
u16LCN
;

587 
GOSTSR_U8
 
u8VisFœg
;

588 }
	tGOS_DESC_LCNINFO_S
;

592 
GOSTSR_U16
 
u16LCNSîvi˚Num
;

593 
GOS_DESC_LCNINFO_S
 
LCNSîvi˚Info
[
GOS_MAX_LCNSREVICE_NUM
];

594 }
	tGOS_DESC_LCN83_S
;

599 
GOSTSR_U32
 
u32Cou¡ry_Code
;

600 
GOSTSR_U16
 
u16Ch™√lLi°NameLí
;

601 
GOSTSR_U16
 
u16LCNSîvi˚Num
;

602 
GOSTSR_U8
 
u8Ch™√lLi°Id
;

603 
GOSTSR_U8
 
u16Ch™√lLi°Name
[256];

604 
GOS_DESC_LCNINFO_S
 
LCNSîvi˚Info
[
GOS_MAX_LCNSREVICE_NUM
];

605 }
	tGOS_DESC_CHANNELLISTINFO_S
;

609 
GOSTSR_U16
 
u16Ch™√lLi°Num
;

610 
GOS_DESC_CHANNELLISTINFO_S
 
ch™√lLi°Info
[
GOS_MAX_CHANNELLIST_NUM
];

611 }
	tGOS_DESC_LCN87_S
;

616 
GOSTSR_U32
 
u32ProgømmeIdítifiˇti⁄
;

617 }
	tGOS_DESC_PDC_S
;

623 }
GOS_DESC_TRANSPORT_STREAM_S
;

628 
GOSTSR_U8
 
u8RókVÆidFœg
;

629 }
	tGOS_DESC_STD_S
;

634 
GOSTSR_U16
 
u16MaxG›Lígth
;

635 
GOSTSR_U8
 
u8Clo£dG›Fœg
;

636 
GOSTSR_U8
 
u8IdítiˇlG›Fœg
;

637 }
	tGOS_DESC_IBP_S
;

642 
GOSTSR_U8
 
u8ByãD©a
;

643 }
	tGOS_DESC_DGBYTE_S
;

647 
GOSTSR_U16
 
u16ByãLí
;

648 
GOS_DESC_DGBYTE_S
 
a°Byã
[
GOS_MAX_DSNG_NUM
];

649 }
	tGOS_DESC_DSNG_S
;

654 
GOSTSR_U8
 
u8ByãD©a
;

655 }
	tGOS_DESC_TSBYTE_S
;

659 
GOSTSR_U16
 
u16ByãLí
;

660 
GOS_DESC_TSBYTE_S
 
a°Byã
[
GOS_MAX_TPSTREAM_NUM
];

661 }
	tGOS_DESC_TPSTREAM_S
;

666 
GOSTSR_U8
 
u8FõldP¨ôy
;

667 
GOSTSR_U8
 
u8LöeOff£t
;

668 }
	tGOS_DESC_SERVDES_S
;

672 
GOSTSR_U8
 
u8D©aSîvi˚Id
;

673 
GOSTSR_U8
 
u8D©aSîvDesLí
;

674 
GOS_DESC_SERVDES_S
 
a°SîvDes
[
GOS_MAX_VBIDATA_DES_NUM
];

675 }
	tGOS_DESC_DATASERV_S
;

679 
GOSTSR_U16
 
u16VbiD©aLí
;

680 
GOS_DESC_DATASERV_S
 
a°D©aSîv
[
GOS_MAX_VBIDATA_NUM
];

681 }
	tGOS_DESC_VBIDATA_S
;

686 
GOSTSR_U32
 
u32L™guageCode
;

687 
GOSTSR_U8
 
u8TñëextTy≥
;

688 
GOSTSR_U8
 
u8TñëextMagNum
;

689 
GOSTSR_U8
 
u8TñëextPageNum
;

690 }
	tGOS_DESC_TELETEXTDES_S
;

694 
GOSTSR_U16
 
u16VbiTñeTextLí
;

695 
GOS_DESC_TELETEXTDES_S
 
a°TñeText
[
GOS_MAX_VBITELETEXT_NUM
];

696 }
	tGOS_DESC_VBITELETEXT_S
;

701 
GOSTSR_U32
 
u32PókR©e
;

702 
GOSTSR_U32
 
u32MöiSmoŸhR©e
;

703 
GOSTSR_U16
 
u16MaxiOvîSmoŸhBuâe
;

704 }
	tGOS_DESC_PARTIAL_TRANSTREAM_S
;

709 
GOSTSR_U32
 
u32Addôi⁄ÆInfo
;

710 }
	tGOS_DESC_ADDINFO_S
;

714 
GOSTSR_U8
 
u8AC3Ty≥Fœg
;

715 
GOSTSR_U8
 
u8BsidFœg
;

716 
GOSTSR_U8
 
u8MaöidFœg
;

717 
GOSTSR_U8
 
u8AsvcFœg
;

718 
GOSTSR_U8
 
u8AC3Ty≥
;

719 
GOSTSR_U8
 
u8Bsid
;

720 
GOSTSR_U8
 
u8Maöid
;

721 
GOSTSR_U8
 
u8Asvc
;

722 
GOS_DESC_ADDINFO_S
 
a°AddInfo
[32];

723 }
	tGOS_DESC_AC3_S
;

728 
GOSTSR_U8
 
u8AncûœryD©aIdítifõr
;

730 }
	tGOS_DESC_ANCILLARRYDATA_S
;

735 
GOSTSR_U16
 
u16SubCñlL©ôude
 ;

736 
GOSTSR_U16
 
u16SubCñlL⁄gtôude
;

737 
GOSTSR_U16
 
u16SubCñlExL©ôude
;

738 
GOSTSR_U16
 
u16SubCñlExL⁄gtôude
;

739 
GOSTSR_U8
 
u8CñlIdExãnsi⁄
 ;

740 }
	tGOS_DESC_SUBCELLINFO_S
;

744 
GOSTSR_U16
 
u16CñlId
;

745 
GOSTSR_U16
 
u16CñlL©ôude
 ;

746 
GOSTSR_U16
 
u16CñlL⁄gtôude
;

747 
GOSTSR_U16
 
u16CñlExL©ôude
;

748 
GOSTSR_U16
 
u16CñlExL⁄gtôude
;

749 
GOSTSR_U8
 
u8SubCñlInfoLí
;

750 
GOS_DESC_SUBCELLINFO_S
 
a°SubCñlInfo
[256];

751 }
	tGOS_DESC_CELLINFO_S
;

755 
GOSTSR_U16
 
u16CñlLi°Lí
;

756 
GOS_DESC_CELLINFO_S
 
a°CñlInfo
[256];

757 }
	tGOS_DESC_CELLLIST_S
;

762 
GOSTSR_U32
 
u32TønsFªquícy
;

763 
GOSTSR_U8
 
u8CñlIdExãn
 ;

764 }
	tGOS_DESC_SUBCELLFREINFO_S
;

768 
GOSTSR_U32
 
u32Fªquícy
 ;

769 
GOSTSR_U16
 
u16CñlId
;

770 
GOSTSR_U8
 
u8SubCñlFªInfoLí
;

771 
GOS_DESC_SUBCELLFREINFO_S
 
a°SubCñlFªInfo
[256];

772 }
	tGOS_DESC_CELLFREINFO_S
;

776 
GOSTSR_U16
 
u16CñlFªLí
;

777 
GOS_DESC_CELLFREINFO_S
 
a°CñlFªInfo
[256];

778 }
	tGOS_DESC_CELLFRELINK_S
;

783 
GOSTSR_U8
 
u8A¬oun˚Ty≥
;

784 
GOSTSR_U8
 
u8Re„ªn˚Ty≥
;

785 
GOSTSR_U8
 
u8OrigöÆNëw‹kId
;

786 
GOSTSR_U8
 
u8Tøn•‹tSåómId
 ;

787 
GOSTSR_U8
 
u8Sîvi˚Id
;

788 
GOSTSR_U8
 
u8Comp⁄ítTag
 ;

789 }
	tGOS_DESC_ANNOUNCEINFO_S
;

793 
GOSTSR_U16
 
u16A¬oun˚Lí
;

794 
GOSTSR_U16
 
u16AnSuµ‹tIndiˇt‹
;

795 
GOS_DESC_ANNOUNCEINFO_S
 
a°AddInfo
[32];

796 }
	tGOS_DESC_ANNOUNCE_S
;

801 
DESC_3DSERVICE_STREAMCONTENT_AVS
 = 0x01,

802 
DESC_3DSERVICE_STREAMCONTENT_H264
 = 0x05

803 }
	tGOS_DESC_3DSERVICE_STREAMCONTENT_E
;

807 
DESC_3DSERVICE_CONTENTTYPE_AVS_25_LR
 = 0xD0,

808 
DESC_3DSERVICE_CONTENTTYPE_AVS_25_BT
 = 0xD1,

809 
DESC_3DSERVICE_CONTENTTYPE_AVS_30_LR
 = 0xD2,

810 
DESC_3DSERVICE_CONTENTTYPE_AVS_30_BT
 = 0xD3,

812 
DESC_3DSERVICE_CONTENTTYPE_H264_25_LR
 = 0x80,

813 
DESC_3DSERVICE_CONTENTTYPE_H264_25_BT
 = 0x81,

814 
DESC_3DSERVICE_CONTENTTYPE_H264_30_LR
 = 0x82,

815 
DESC_3DSERVICE_CONTENTTYPE_H264_30_BT
 = 0x83

816 }
	tGOS_DESC_3DSERVICE_CONTENTTYPE_E
;

820 
GOS_DESC_3DSERVICE_STREAMCONTENT_E
 
íTvSåómC⁄ã¡_3D
;

821 
GOS_DESC_3DSERVICE_CONTENTTYPE_E
 
íTvComp⁄ítTy≥_3D
;

822 } 
	tGOS_DESC_3DSERVICE_PRIVATE_S
;

825 
GOSTSR_S32
 
GosT§_Des¸ùt‹_AC3
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_AC3_S
 *
acDes
);

826 
GOSTSR_S32
 
GosT§_Des¸ùt‹_AudioSåóm
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_AUDIOSTRAM_S
 *
asDes
);

827 
GOSTSR_S32
 
GosT§_Des¸ùt‹_AVCVideo
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_AVCVIDEO_S
 *
avDes
);

828 
GOSTSR_S32
 
GosT§_Des¸ùt‹_AncûœryD©a
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_ANCILLARRYDATA_S
 *
™Des
);

829 
GOSTSR_S32
 
GosT§_Des¸ùt‹_A¬oun˚Suµ‹t
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_ANNOUNCE_S
 *
™Des
);

830 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Bouquë«me
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_BOUQUETNAME_S
 *
bndes
);

831 
GOSTSR_S32
 
GosT§_Des¸ùt‹_CabÀSy°em
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_CABDELIVSYS_S
 *
csDes
);

832 
GOSTSR_S32
 
GosT§_Des¸ùt‹_CaIdítify
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_CAIDF_S
 *
ciDes
);

833 
GOSTSR_S32
 
GosT§_Des¸ùt‹_CA
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_CA_S
 *
ˇDes
);

834 
GOSTSR_S32
 
GosT§_Des¸ùt‹_CA_Sy°em
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_CA_SYSTEM_S
 *
ˇDes
);

835 
GOSTSR_S32
 
GosT§_Des¸ùt‹_CñlFªLök
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_CELLFRELINK_S
 *
cÊDes
);

836 
GOSTSR_S32
 
GosT§_Des¸ùt‹_CñlLi°
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_CELLLIST_S
 *
˛Des
);

837 
GOSTSR_S32
 
GosT§_Des¸ùt‹_C›yRight
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_COPYRIGHT_S
 *
cDes
);

838 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Comp⁄ít
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_COMPONENT_S
 *
cDes
);

839 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Comp⁄ít_Sîvi˚_Name
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_COMPONENT_SERVICE_NAME_S
 *
cDes
);

840 
GOSTSR_S32
 
GosT§_Des¸ùt‹_C⁄ã¡
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_CONTENT_S
 *
cDes
);

841 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Cou¡ryAvaûabûôy
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_COUNTRY_AVAILABILITY_S
 *
ˇDes
);

842 
GOSTSR_S32
 
GosT§_Des¸ùt‹_D©aSåómAlignmít
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_DATASTRAMALIGNMENT_S
 *
dßDes
);

843 
GOSTSR_S32
 
GosT§_Des¸ùt‹_D©aBrﬂdˇ°
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_DATA_BROADCAST_S
 *
dbDes
);

844 
GOSTSR_S32
 
GosT§_Des¸ùt‹_D©aBrﬂdˇ°ID
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_DATA_BROADCAST_ID_S
 *
dIDDes
);

845 
GOSTSR_S32
 
GosT§_Des¸ùt‹_DSNG
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_DSNG_S
 *
dgDes
);

846 
GOSTSR_S32
 
GosT§_Des¸ùt‹_ExãndEvít
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_EXTEVT_S
 *
ìDes
);

847 
GOSTSR_S32
 
GosT§_Des¸ùt‹_FªquícyLi°
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_FREQLST_S
 *
ÊDes
);

848 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Hõørchy
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_HIERARCHY_S
 *
hDes
);

849 
GOSTSR_S32
 
GosT§_Des¸ùt‹_IBP
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_IBP_S
 *
ibpDes
);

850 
GOSTSR_S32
 
GosT§_Des¸ùt‹_ISO639L™guageCode
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_ISOLANGUAGECODE_S
 *
lcDes
);

851 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Lökage
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_LINKAGE_S
 *
lDes
);

852 
GOSTSR_S32
 
GosT§_Des¸ùt‹_LoˇlTimeOff£t
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_LOCALTMOFFSET_S
 *
…oDes
);

853 
GOSTSR_S32
 
GosT§_Des¸ùt‹_LCN_83
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_LCN83_S
 *
l˙83Des
);

854 
GOSTSR_S32
 
GosT§_Des¸ùt‹_LCN_87
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_LCN87_S
 *
l˙87Des
);

855 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Moßic
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_MOSAIC_S
 *
mDes
);

856 
GOSTSR_S32
 
GosT§_Des¸ùt‹_MaximumBôøã
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_MAXBITRATE_S
 *
mbDes
);

857 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Mu…ûöguÆBouquëName
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_MULT_BOUQUET_NAME_S
 *
mbnDes
);

858 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Mu…ûöguÆComp⁄ít
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_MULT_COMPONENT_S
 *
mcDes
);

859 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Mu…ûöguÆNëw‹kName
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_MULT_NETWORK_NAME_S
 *
m¬Des
);

860 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Mu…ûöguÆSîvi˚Name
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_MULT_SERVICE_NAME_S
 *
m¢Des
);

861 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Mu…ùÀxBuf„rUtûiz©i⁄
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_MULBUFFERUTILIZATION_S
 *
mbuDes
);

862 
GOSTSR_S32
 
GosT§_Des¸ùt‹_NVODRe„ªn˚
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_NVODREF_S
 *
ƒDes
);

863 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Nëw‹kName
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_NETWORKNAME_S
 *
√äDes
);

864 
GOSTSR_S32
 
GosT§_Des¸ùt‹_P¨ítR©ög
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_PARENTRATING_S
 *
¥Des
);

865 
GOSTSR_S32
 
GosT§_Des¸ùt‹_P¨tülTønSåóm
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_PARTIAL_TRANSTREAM_S
 *
±sDes
);

866 
GOSTSR_S32
 
GosT§_Des¸ùt‹_PDC
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_PDC_S
 *
pdcDes
);

867 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Priv©eD©aS≥cifõr
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_PRIVATE_DATA_SPECIFIER_S
 *
pdsDes
);

868 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Priv©eD©aIndiˇt‹
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_PRIVATEDATAINDICATOR_S
 *
pdiDes
);

869 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Regi°øti⁄
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_REGISTRATION_S
 *
rDes
);

870 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Sh‹tSmoŸhögBuf„r
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_SHORT_SMOOTHING_BUFFER_S
 *
ssbDes
);

871 
GOSTSR_S32
 
GosT§_Des¸ùt‹_SmoŸhögBuf„r
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_SMOOTHING_BUFFER_S
 *
sbDes
);

872 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Sîvi˚
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_SERVICE_S
 *
sDes
);

873 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Sîvi˚Li°
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_SERVLIST_S
 *
£rLDes
);

874 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Sîvi˚Move
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_SERVICE_MOVE_S
 *
smDes
);

875 
GOSTSR_S32
 
GosT§_Des¸ùt‹_S©ñlôeSy°em
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_SATDELIVSYS_S
 *
ssdes
);

876 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Sh‹tEvít
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_SHORTEVT_S
 *
£Des
);

877 
GOSTSR_S32
 
GosT§_Des¸ùt‹_SåómIdítifõr
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_STREAM_IDENTIFIER_S
 *
siDes
);

878 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Stuffög
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_STUFFING_S
 *
sDes
);

879 
GOSTSR_S32
 
GosT§_Des¸ùt‹_STD
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_STD_S
 *
°dDes
);

880 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Subtôlög
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_SUBT_S
 *
sDes
);

881 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Sy°emClock
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_SYSTEMCLOCK_S
 *
scDes
);

882 
GOSTSR_S32
 
GosT§_Des¸ùt‹_T¨gëBackgroundGrid
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_TARBACGRID_S
 *
tbgDes
);

883 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Tîª°rülSy°em
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_TERDELIVSYS_S
 *
tsdes
);

884 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Tñïh⁄e
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_TELEPHONE_S
 *
tDes
);

885 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Tñëex
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_TELETEXT_S
 *
tDes
);

886 
GOSTSR_S32
 
GosT§_Des¸ùt‹_TimeShi·edEvít
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_TMSHIFTEVT_S
 *
t£Des
);

887 
GOSTSR_S32
 
GosT§_Des¸ùt‹_TimeShi·edSîvi˚
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_TIMESHIFTSERV_S
 *
tssDes
);

888 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Tøn•‹tSåóm
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_TPSTREAM_S
 *
çsDes
);

889 
GOSTSR_S32
 
GosT§_Des¸ùt‹_VBI_D©a
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_VBIDATA_S
 *
vbiDes
);

890 
GOSTSR_S32
 
GosT§_Des¸ùt‹_VBI_Tñëext
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_VBITELETEXT_S
 *
vâDes
);

891 
GOSTSR_S32
 
GosT§_Des¸ùt‹_VideoSåóm
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_VIDEOSTREAM_S
 *
vsDes
);

892 
GOSTSR_S32
 
GosT§_Des¸ùt‹_VideoWödow
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_VIDEOWINDOW_S
 *
vwDes
);

896 #ifde‡
__˝lu•lus


897 #i‡
__˝lu•lus


	@tscheck/include/GosTsr_Os.h

1 #i‚de‡
__GOSTSR_OS_H__


2 
	#__GOSTSR_OS_H__


	)

4 
	~"GosT§_Comm⁄.h
"

9 
GOSTSR_U16
 
	mu32D©aLí
;

10 
GOSTSR_U8
 
	mmsgTy≥
;

11 
GOSTSR_U8
 *
	mpD©a
;

13 }
	tTABLE_MSG
;

16 
	sèbÀ_msg_°


18 
	mmsgTy≥
;

21 
GOSTSR_U8
 
	mu8Ts_188
[
PACKAGE_LEN_188
];

22 
GOSTSR_U8
 
	mu8Ts_204
[
PACKAGE_LEN_204
];

23 }
	mTS_TYPE
;

24 }
	tTABLE_MSG
;

26 
PSISI_Msg_Inô
();

27 
PSISI_Msg_DeInô
();

28 
PSISI_Msg_ªcvMsg
(
TABLE_MSG
 *
msg
);

29 
PSISI_Msg_£ndMsg
(
TABLE_MSG
 *
msg
);

30 
GOSTSR_BOOL
 
OS_Packë_DñëeSem≠h‹e
(
OS_Packë_Sem≠h‹e_t
 *
Sem≠h‹e_p
);

31 
GOSTSR_BOOL
 
OS_Packë_Sig«lSem≠h‹e
(
OS_Packë_Sem≠h‹e_t
 *
Sem≠h‹e_p
);

32 
GOSTSR_BOOL
 
OS_Packë_WaôSem≠h‹e
(
OS_Packë_Sem≠h‹e_t
 *
Sem≠h‹e_p
);

33 
OS_Packë_Sem≠h‹e_t
 *
OS_Packë_Cª©eSem≠h‹e
(c⁄° 
GOSTSR_S32
 
InôülVÆue
);

	@tscheck/include/TsErrorCheck_Api.h

1 #i‚de‡
_TSERRORCHECK_Api_H


2 
	#_TSERRORCHECK_Api_H


	)

4 
	~"TsEº‹Check_Comm⁄.h
"

6 
	#API_PACKETBUFF_NUM
 10

	)

11 
GOSTSR_BOOL
 
	mbPackëTy≥
;

12 
GOSTSR_U32
 
	mu32PackëLí
;

14 
GOSTSR_U32
 
	mu32Api_PktCou¡
;

15 
GOSTSR_U32
 
	mu32Api_ByãPos
;

17 
GOSTSR_BOOL
 
	mbisM©ched
;

18 
GOSTSR_BOOL
 
	mbSyncisOk
;

19 
GOSTSR_BOOL
 
	mbSyncisLoss
;

20 
GOSTSR_U8
 
	mu8SyncNum
;

22 
GOSTSR_BOOL
 
	mbSórchFœg
;

23 
GOSTSR_U16
 
	mu16SórchCou¡
;

25 
SEARCH_UPDATE_INFO_S
 
	m°SórchUpd©eInfo
;

27 }
	tTSERROR_API_PARAM_S
;

31 
	mPACKET_ESTYPE_VIDEO
 = 0x00,

32 
	mPACKET_ESTYPE_AUDIO
,

33 
	mPACKET_ESTYPE_PRIVATE
,

35 
	mPACKET_ESTYPE_MAX


36 }
	tPACKET_STREAM_TYPE_E
;

38 
GOSTSR_S32
 
TsEº‹Check_Api_Inô
();

39 
GOSTSR_S32
 
TsEº‹Check_Api_DeInô
();

40 
GOSTSR_S32
 
TsEº‹Check_Api_ReInô
(
GOSTSR_U8
 
ch™ID
);

42 
GOSTSR_S32
 
TsEº‹Check_Api_A«lysisPackë
(
GOSTSR_U8
 
ch™ID
,
GOSTSR_BOOL
 
bC¨ryFœg
,
GOSTSR_U32
 
u32ByãPos
,GOSTSR_U8 *
pD©a
, GOSTSR_U32 
u32D©aLí
);

43 
GOSTSR_S32
 
TsEº‹Check_Api_TsM⁄ô‹
(
GOSTSR_U8
 
Ch™ID
,GOSTSR_U8 *
pD©a
, 
GOSTSR_U32
 
u32D©aLí
);

	@tscheck/include/TsErrorCheck_Common.h

1 #ifde‡
__˝lu•lus


2 #i‡
__˝lu•lus


7 #i‚de‡
__TSERRORCHECK_COMMON_H__


8 
	#__TSERRORCHECK_COMMON_H__


	)

10 
	~"GosT§_Comm⁄.h
"

12 
	#STREAM_TYPE_VIDEO_MPEG1
 0x01

	)

13 
	#STREAM_TYPE_VIDEO_MPEG2
 0x02

	)

14 
	#STREAM_TYPE_AUDIO_MPEG1
 0x03

	)

15 
	#STREAM_TYPE_AUDIO_MPEG2
 0x04

	)

16 
	#STREAM_TYPE_PRIVATE_SECTION
 0x05

	)

17 
	#STREAM_TYPE_PRIVATE_DATA
 0x06

	)

18 
	#STREAM_TYPE_AUDIO_AAC
 0x0f

	)

19 
	#STREAM_TYPE_VIDEO_MPEG4
 0x10

	)

20 
	#STREAM_TYPE_VIDEO_H264
 0x1b

	)

21 
	#STREAM_TYPE_VIDEO_VC1
 0xó

	)

22 
	#STREAM_TYPE_VIDEO_DIRAC
 0xd1

	)

24 
	#STREAM_TYPE_AUDIO_AC3
 0x81

	)

25 
	#STREAM_TYPE_AUDIO_DTS
 0x8a

	)

27 
	#TSERROR_INVALID_U64
 0xffffffffffffffffULL

	)

28 
	#TSERROR_INVALID_U32
 0xffffffff

	)

29 
	#TSERROR_INVALID_U16
 0xffff

	)

30 
	#TSERROR_INVALID_U8
 0xff

	)

32 
	#SEARCH_PROG_NUM_MAX
 32

33 
	#SEARCH_CA_NUM_MAX
 10

34 
	#EACH_PROG_PES_MAX
 8

35 

	)

36 
	#PCRPID_NUM_MAX
 (
SEARCH_PROG_NUM_MAX
)

	)

37 
	#PESPID_NUM_MAX
 (
SEARCH_PROG_NUM_MAX
 * 
EACH_PROG_PES_MAX
)

	)

41 
£rvi˚Name
[256];

42 
GOSTSR_U8
 
u8Nbaudio
;

43 
GOSTSR_U16
 
audio_pid
[
EACH_PROG_PES_MAX
];

44 
GOSTSR_U16
 
video_pid
;

45 
GOSTSR_U16
 
£rvi˚ID
;

46 }
	tSERVICE_INFO_S
;

50 
GOSTSR_BOOL
 
	mbU£d
;

52 
GOSTSR_U16
 
	mPmtPid
;

53 
GOSTSR_U16
 
	mP¸Pid
;

54 
GOSTSR_U8
 
	mu8NbPes
;

55 
GOSTSR_U16
 
	mPesPid
[
EACH_PROG_PES_MAX
];

58 
SERVICE_INFO_S
 
	m°£rvi˚öfo
;

59 }
	tSEARCH_PROG_INFO_S
;

63 
GOSTSR_U16
 
	mCaPid
;

64 }
	tSEARCH_CA_INFO_S
;

68 
GOSTSR_U16
 
	mu16NbProg
;

69 
SEARCH_PROG_INFO_S
 
	m°ProgInfo
[
SEARCH_PROG_NUM_MAX
];

71 
GOSTSR_U8
 
	mu16NbCa
;

72 
SEARCH_CA_INFO_S
 
	m°CaInfo
[
SEARCH_CA_NUM_MAX
];

73 } 
	tSEARCH_INFO_S
;

78 
GOSTSR_U8
 
	mu8P©Vîsi⁄
;

79 
GOSTSR_BOOL
 
	mbUpd©eFœg
;

81 
SEARCH_INFO_S
 
	m°SórchInfo
;

82 } 
	tSEARCH_UPDATE_INFO_S
;

86 #ifde‡
__˝lu•lus


87 #i‡
__˝lu•lus


	@tscheck/include/TsErrorCheck_Log.h

1 #i‚de‡
_TSERRORCHECK_LOG_H


2 
	#_TSERRORCHECK_LOG_H


	)

4 
	~"TsEº‹Check_Comm⁄.h
"

6 
GOSTSR_S32
 
TsEº‹Check_Log_Inô
();

7 
GOSTSR_S32
 
TsEº‹Check_Log_DeInô
();

8 
GOSTSR_S32
 
TsEº‹Check_Log_ReInô
(
GOSTSR_U8
 
ch™ID
);

10 
GOSTSR_S32
 
TS_DEBUG_LOG
(*
°r
);

11 
GOSTSR_S32
 
TS_ERROR_LOG
(
GOSTSR_U8
 
ch™ID
,
GOSTSR_U32
 
îr‹Ty≥
, GOSTSR_U32 
îr‹Levñ
,GOSTSR_U32 
byãPos
,*
pPriv©e
,c⁄° GOSTSR_U8 *
pF‹m©
);

12 
GOSTSR_S32
 
TsEº‹Check_Log_SëEº‹Ty≥
(
GOSTSR_U8
 
ch™ID
,
GOSTSR_U32
 
îr‹Ty≥
);

13 
GOSTSR_S32
 
TsEº‹Check_Log_SëEº‹Levñ
(
GOSTSR_U8
 
ch™ID
,
GOSTSR_U32
 
îr‹Levñ
);

14 
GOSTSR_S32
 
TsEº‹Check_Log_SëNbProg
(
GOSTSR_U8
 
ch™ID
,
GOSTSR_U32
 
NbProg
);

16 
GOSTSR_S32
 
TsEº‹Check_Log_O√Levñ_PrötInfo
(
GOSTSR_U8
 
ch™ID
);

17 
GOSTSR_S32
 
TsEº‹Check_Log_TwoLevñ_PrötInfo
(
GOSTSR_U8
 
ch™ID
);

18 
GOSTSR_S32
 
TsEº‹Check_Log_ThªeLevñ_PrötInfo
(
GOSTSR_U8
 
ch™ID
);

19 
GOSTSR_S32
 
TsEº‹Check_Log_PrötInfo
(
GOSTSR_U8
 
ch™ID
);

21 
GOSTSR_S32
 
TsEº‹Check_Log_Exp‹tLog
(*
pP©hName
,
GOSTSR_U8
 *
pD©a
, 
GOSTSR_U32
 
u32D©aLí
);

	@tscheck/include/TsErrorCheck_OneLevel.h

1 #ifde‡
__˝lu•lus


2 #i‡
__˝lu•lus


7 #i‚de‡
_TSERRORCHECK_ONELEVEL_H


8 
	#_TSERRORCHECK_ONELEVEL_H


	)

10 
	~"TsEº‹Check_Comm⁄.h
"

11 
	~"GosT§_A«lysisD©a.h
"

13 
	#ONE_ERROR_PMT_MAX
 (
PCRPID_NUM_MAX
)

	)

14 
	#ONE_ERROR_PES_MAX
 (
PESPID_NUM_MAX
)

	)

15 
	#PID_NUMBER_MAX
 (32 * 8 * 2)

16 

	)

17 
	#CONTINUITYCOUNTER_MAX
 15

	)

18 
	#ONELEVEL_BYTEPOS_MAX
 0xffffffff

	)

22 
GOSTSR_U32
 
timeout_îr‹
;

23 
GOSTSR_U32
 
èbÀid_îr‹
;

24 
GOSTSR_U32
 
s¸ambÀ_îr‹
;

25 
GOSTSR_U32
 
tŸÆ_îr‹
;

26 }
	tONELEVEL_PATERROR
;

30 
GOSTSR_U32
 
	mtimeout_îr‹
;

31 
GOSTSR_U32
 
	ms¸ambÀ_îr‹
;

32 
GOSTSR_U32
 
	mtŸÆ_îr‹
;

33 }
	tONELEVEL_PMTERROR
;

38 
GOSTSR_BOOL
 
	mbU£d
;

39 
GOSTSR_U16
 
	mpid
;

40 
GOSTSR_U8
 
	mc⁄töutycou¡
;

41 
GOSTSR_BOOL
 
	m¥edisC⁄töuôyIndiˇt‹
;

42 }
	tCONTINUTY_COUNT_INFO
;

46 
GOSTSR_U32
 
	mbyãPos
;

47 
GOSTSR_U16
 
	mpid
;

48 
GOSTSR_BOOL
 
	mªcvFœg
;

49 }
	tPID_TIMEOUT_INFO
;

53 
GOSTSR_U16
 
	mNbPmtInfo
;

54 
PID_TIMEOUT_INFO
 
	mpmtInfo
[
ONE_ERROR_PMT_MAX
];

55 }
	tPMTPID_TIMEOUT_INFO
;

59 
GOSTSR_U16
 
	mNbPesInfo
;

60 
PID_TIMEOUT_INFO
 
	m≥sInfo
[
ONE_ERROR_PES_MAX
];

61 }
	tPESPID_TIMEOUT_INFO
;

65 
GOSTSR_U32
 
	mtsSyncLossEº‹
;

66 
GOSTSR_U32
 
	mtsSyncByãEº‹
;

67 
GOSTSR_U32
 
	mtsC⁄töuôyCou¡îEº‹
;

69 
ONELEVEL_PATERROR
 
	mtsP©Eº‹
;

70 
ONELEVEL_PMTERROR
 
	mtsPmtEº‹
;

71 
GOSTSR_U32
 
	mtsPIDMissEº‹
;

72 }
	tTSERROR_ONELEVEL_RECORD
;

77 
GOSTSR_U32
 
	mu32ByãPos_P©Bak
;

79 
CONTINUTY_COUNT_INFO
 
	m°C⁄töutyCou¡
[
PID_NUMBER_MAX
];

80 
PMTPID_TIMEOUT_INFO
 
	mpmtPid_timeout_öfo
;

81 
PESPID_TIMEOUT_INFO
 
	m≥sPid_timeout_öfo
;

82 
TSERROR_ONELEVEL_RECORD
 
	m⁄eLevñEº‹_ªc‹d
;

83 }
	tTSERROR_ONELEVEL_PARAM_S
;

85 
GOSTSR_S32
 
TsEº‹Check_O√Levñ_Inô
();

86 
GOSTSR_S32
 
TsEº‹Check_O√Levñ_DeInô
();

87 
GOSTSR_S32
 
TsEº‹Check_O√Levñ_ReInô
(
GOSTSR_U8
 
ch™ID
);

88 
GOSTSR_S32
 
TsEº‹Check_O√Levñ_GëEº‹Info
(
GOSTSR_U8
 
ch™ID
,
TSERROR_ONELEVEL_RECORD
 *
⁄eLevñEº‹Info
);

90 
GOSTSR_S32
 
TsEº‹Check_O√Levñ_SyncLossEº‹
(
GOSTSR_U8
 
ch™ID
,
GOSTSR_BOOL
 
bisM©ched
,
GOSTSR_U32
 
tmpSyncOff£t
);

91 
GOSTSR_S32
 
TsEº‹Check_O√Levñ_SyncByãEº‹
(
GOSTSR_U8
 
ch™ID
,
GOSTSR_BOOL
 
bisM©ched
,
GOSTSR_U32
 
tmpSyncOff£t
);

92 
GOSTSR_S32
 
TsEº‹Check_O√Levñ_C⁄töuôyCou¡îEº‹
(
TR101290_ERROR_S
 *
p°Eº‹Info
,
GOSTSR_U32
 
pid
,
GOSTSR_U8
 
C⁄töuôy
,GOSTSR_U8 
ad≠ãr_c⁄åﬁ
,GOSTSR_U8 
disC⁄töuôyIndiˇt‹
);

93 
GOSTSR_S32
 
TsEº‹Check_O√Levñ_P©Eº‹
(
TR101290_ERROR_S
 *
p°Eº‹Info
,
GOSTSR_U32
 
pid
,GOSTSR_U32 
èbÀId
,
GOSTSR_U8
 
s¸ambÀ_c⁄åﬁ
);

94 
GOSTSR_S32
 
TsEº‹Check_O√Levñ_PmtEº‹
(
TR101290_ERROR_S
 *
p°Eº‹Info
,
GOSTSR_U16
 
pid
,
GOSTSR_U8
 
s¸ambÀ_c⁄åﬁ
);

95 
GOSTSR_S32
 
TsEº‹Check_O√Levñ_pidMissEº‹
(
TR101290_ERROR_S
 *
p°Eº‹Info
,
GOSTSR_U16
 
pid
);

96 
GOSTSR_S32
 
TsEº‹Check_O√Levñ_pidMissNŸRóch
(
GOSTSR_U8
 
ch™ID
);

98 
GOSTSR_S32
 
TsEº‹Check_O√Levñ_£tPid
(
GOSTSR_U8
 
ch™ID
,
SEARCH_INFO_S
 *
°SórchInfo
);

103 #ifde‡
__˝lu•lus


104 #i‡
__˝lu•lus


	@tscheck/include/TsErrorCheck_ThreeLevel.h

1 #ifde‡
__˝lu•lus


2 #i‡
__˝lu•lus


7 #i‚de‡
__TSERRORCHECK_THREELEVEL_H__


8 
	#__TSERRORCHECK_THREELEVEL_H__


	)

10 
	~"TsEº‹Check_Comm⁄.h
"

11 
	~"GosT§_A«lysisD©a.h
"

13 
	#MAX_PMT_NUMS
 256

	)

14 
	#MAX_CAT_NUMS
 10

	)

19 
GOSTSR_U16
 
tŸÆEº‹
;

20 
GOSTSR_U16
 
èbÀIDEº‹
;

21 
GOSTSR_U16
 
a˘uÆOvîTimeEº‹
;

22 
GOSTSR_U16
 
a˘uÆLimôTimeEº‹
;

23 
GOSTSR_U16
 
ŸhîOvîTimeEº‹
;

24 
GOSTSR_U16
 
ŸhîLimôTimeEº‹
;

25 }
	tNôEº‹_Info
;

30 
GOSTSR_U32
 
	m°¨tTime
;

31 
GOSTSR_U8
 
	m£˘i⁄Fœg
[256];

32 
GOSTSR_U8
 
	mœ°Se˘i⁄Num
;

33 
GOSTSR_U8
 
	mnumbî
;

34 }
	tSiRïëR©eSe˘i⁄s_Info
;

38 
GOSTSR_U16
 
	mtŸÆEº‹
;

39 
GOSTSR_U16
 
	msiSe˘i⁄LimôTimeEº‹
;

40 
GOSTSR_U16
 
	mnôOvîTimeEº‹
;

41 
GOSTSR_U16
 
	mb©OvîTimeEº‹
;

42 
GOSTSR_U16
 
	msdtA˘uÆOvîTimeEº‹
;

43 
GOSTSR_U16
 
	msdtOthîOvîTimeEº‹
;

44 
GOSTSR_U16
 
	meôA˘uÆOvîTimeEº‹
;

45 
GOSTSR_U16
 
	meôOthîOvîTimeEº‹
;

46 
GOSTSR_U16
 
	meôA˘uÆScheduÀOvîTimeEº‹
;

47 
GOSTSR_U16
 
	meôOthîScheduÀOvîTimeEº‹
;

48 
GOSTSR_U16
 
	mtdtOvîTimeEº‹
;

49 
GOSTSR_U16
 
	mtŸOvîTimeEº‹
;

50 }
	tSiRïëôi⁄R©eEº‹_Info
;

55 
GOSTSR_U16
 
	mtŸÆEº‹
;

56 
GOSTSR_U16
 
	mTBBuf„rEº‹
;

57 
GOSTSR_U16
 
	mTBsysBuf„rEº‹
;

58 
GOSTSR_U16
 
	mMBBuf„rEº‹
;

59 
GOSTSR_U16
 
	mEBBuf„rEº‹
;

60 
GOSTSR_U16
 
	mBBuf„rEº‹
;

61 
GOSTSR_U16
 
	mBsysBuf„rEº‹
;

62 }
	tBuf„rEº‹_Info
;

65 
	#MAX_UNREFERPID_NUM
 1024

	)

69 
GOSTSR_U32
 
	m°¨tTime
;

70 
GOSTSR_U16
 
	mpid
;

71 
GOSTSR_U8
 
	mÊag
;

72 }
	tUƒe„ªn˚dPid_Info
;

76 
GOSTSR_U16
 
	mtŸÆEº‹
;

77 }
	tUƒe„ªn˚dPidEº‹_Info
;

82 
GOSTSR_U16
 
	mtŸÆEº‹
;

83 
GOSTSR_U16
 
	mèbÀIDEº‹
;

84 
GOSTSR_U16
 
	ma˘uÆOvîTimeEº‹
;

85 
GOSTSR_U16
 
	ma˘uÆLimôTimeEº‹
;

86 
GOSTSR_U16
 
	mŸhîOvîTimeEº‹
;

87 }
	tSdtEº‹_Info
;

92 
GOSTSR_U16
 
	mtŸÆEº‹
;

93 
GOSTSR_U16
 
	mèbÀIDEº‹
;

94 
GOSTSR_U16
 
	ma˘uÆOvîTimeEº‹
;

95 
GOSTSR_U16
 
	ma˘uÆLimtTimeEº‹
;

96 
GOSTSR_U16
 
	ma˘uÆSec0OvîTimeEº‹
;

97 
GOSTSR_U16
 
	ma˘uÆSec1OvîTimeEº‹
;

98 
GOSTSR_U16
 
	ma˘uÆPFPaúEº‹
;

99 
GOSTSR_U16
 
	mŸhîSec0OvîTimeEº‹
;

100 
GOSTSR_U16
 
	mŸhîSec1OvîTimeEº‹
;

101 
GOSTSR_U16
 
	mŸhîPFPaúEº‹
;

102 }
	tEôEº‹_öfo
;

107 
GOSTSR_U16
 
	mtŸÆEº‹
;

108 
GOSTSR_U16
 
	mèbÀIDEº‹
;

109 
GOSTSR_U16
 
	mlimtTimeEº‹
;

110 }
	tR°Eº‹_Info
;

115 
GOSTSR_U16
 
	mtŸÆEº‹
;

116 
GOSTSR_U16
 
	movîTimeEº‹
;

117 
GOSTSR_U16
 
	mèbÀIDEº‹
;

118 
GOSTSR_U16
 
	mlimôTimeEº‹
;

119 }
	tTdtEº‹_Info
;

124 
GOSTSR_U16
 
	mtŸÆEº‹
;

125 
GOSTSR_U16
 
	mTBBuf„rEm±yEº‹
;

126 
GOSTSR_U16
 
	mTBsysBuf„rEm±yEº‹
;

127 
GOSTSR_U16
 
	mMBBuf„rEm±yEº‹
;

128 }
	tEm±yBuf„rEº‹_Info
;

133 
GOSTSR_U16
 
	mtŸÆEº‹
;

134 
GOSTSR_U16
 
	m°ûlPicOvîTimeEº‹
;

135 
GOSTSR_U16
 
	mgíîÆD©aOvîTimeEº‹
;

136 }
	tD©aDñayEº‹_Info
;

141 
NôEº‹_Info
 
	mnôEº‹Info
;

142 
SiRïëôi⁄R©eEº‹_Info
 
	msiRïëôi⁄R©eEº‹Info
;

143 
Buf„rEº‹_Info
 
	mbuf„rEº‹Info
;

144 
Uƒe„ªn˚dPidEº‹_Info
 
	muƒe„ªn˚dPidEº‹Info
;

145 
SdtEº‹_Info
 
	msdtEº‹Info
;

146 
EôEº‹_öfo
 
	meôEº‹Info
;

147 
R°Eº‹_Info
 
	mr°Eº‹Info
;

148 
TdtEº‹_Info
 
	mtdtEº‹Info
;

149 
Em±yBuf„rEº‹_Info
 
	mem±yBuf„rEº‹Info
;

150 
D©aDñayEº‹_Info
 
	md©aDñayEº‹Info
;

151 }
	tTsThªeLevñEº‹Check_Info
;

155 
GOSTSR_U16
 
	mpmtPidInfo
[
SEARCH_PROG_NUM_MAX
];

156 }
	tThªeLevñ_PmtDis_Info
;

160 
GOSTSR_U16
 
	mC©PidInfo
[
MAX_CAT_NUMS
];

161 }
	tThªeLevñ_C©Dis_Info
;

166 
GOSTSR_U32
 
	mnôPªTime
;

167 
GOSTSR_U32
 
	mnôA˘uÆPªTime
;

168 
GOSTSR_U32
 
	mnôOthîPªTime
;

170 
GOSTSR_U32
 
	msdtPªTime
;

171 
GOSTSR_U32
 
	msdtA˘uÆPªTime
;

172 
GOSTSR_U32
 
	msdtOthîPªTime
[256];

174 
GOSTSR_U32
 
	meôPªTime
;

175 
GOSTSR_U32
 
	meôA˘uÆPªTime
;

176 
GOSTSR_U32
 
	meôA˘uÆSec0PªTime
;

177 
GOSTSR_U32
 
	meôA˘uÆSec1PªTime
;

178 
GOSTSR_U32
 
	meôOthîSec0PªTime
;

179 
GOSTSR_U32
 
	meôOthîSec1PªTime
;

180 
GOSTSR_U8
 
	meôA˘uÆPaúFœg
;

181 
GOSTSR_U8
 
	meôOthîPaúFœg
;

183 
GOSTSR_U32
 
	mr°PªTime
;

184 
GOSTSR_U32
 
	mr°Se˘i⁄PªTime
;

186 
GOSTSR_U32
 
	mtdtPªTime
;

187 
GOSTSR_U32
 
	mtdtSe˘i⁄PªTime
;

189 
SiRïëR©eSe˘i⁄s_Info
 
	mnôA˘uÆSe˘i⁄Info
;

190 
SiRïëR©eSe˘i⁄s_Info
 
	mnôOthîSe˘i⁄Info
;

191 
SiRïëR©eSe˘i⁄s_Info
 
	mb©Se˘i⁄Info
;

192 
SiRïëR©eSe˘i⁄s_Info
 
	msdtA˘uÆSe˘i⁄Info
;

193 
SiRïëR©eSe˘i⁄s_Info
 
	msdtOthîSe˘i⁄Info
;

194 
SiRïëR©eSe˘i⁄s_Info
 
	meôA˘uÆSe˘i⁄Info
;

195 
SiRïëR©eSe˘i⁄s_Info
 
	meôOthîSe˘i⁄Info
;

196 
SiRïëR©eSe˘i⁄s_Info
 
	meôA˘uÆScheduÀSe˘i⁄Info
;

197 
SiRïëR©eSe˘i⁄s_Info
 
	meôOthîScheduÀSe˘i⁄Info
;

198 
SiRïëR©eSe˘i⁄s_Info
 
	mtdtSe˘i⁄Info
;

199 
SiRïëR©eSe˘i⁄s_Info
 
	mtŸSe˘i⁄Info
;

201 
Uƒe„ªn˚dPid_Info
 
	muƒe„rPidInfo
[
MAX_UNREFERPID_NUM
];

202 
SEARCH_INFO_S
 
	m°SórchInfo
;

204 
TsThªeLevñEº‹Check_Info
 
	mîr‹Info
;

205 }
	tTSERROR_THREELEVEL_PARAM_S
;

207 
GOSTSR_S32
 
TsEº‹Check_ThªeLevñ_Inô
();

208 
GOSTSR_S32
 
TsEº‹Check_ThªeLevñ_DeInô
();

209 
GOSTSR_S32
 
TsEº‹Check_ThªeLevñ_ReInô
(
GOSTSR_U8
 
ch™ID
);

210 
GOSTSR_S32
 
TsEº‹Check_ThªeLevñ_GëEº‹Info
(
GOSTSR_U8
 
ch™ID
,
TsThªeLevñEº‹Check_Info
 *
öfo
);

212 
GOSTSR_S32
 
TsEº‹Check_ThªeLevñ_Se˘i⁄sTimeEº‹
(
TS_SECTION_INFO
 *
£˘i⁄Info
);

213 
GOSTSR_S32
 
TsEº‹Check_ThªeLevñ_Buf„rEº‹
(
GOSTSR_U8
 *
d©a
, 
GOSTSR_U16
 
d©aLí
, 
GOSTSR_U32
 
time
);

214 
GOSTSR_S32
 
TsEº‹Check_ThªeLevñ_Uƒe„ªn˚dPidEº‹
(
TS_HEAD_INFO
 *
tsHódInfo
);

216 
GOSTSR_S32
 
TsEº‹Check_ThªeLevñ_£tPid
(
GOSTSR_U8
 
ch™ID
,
SEARCH_INFO_S
 *
p°ProgInfo
);

222 #ifde‡
__˝lu•lus


223 #i‡
__˝lu•lus


	@tscheck/include/TsErrorCheck_TwoLevel.h

1 #ifde‡
__˝lu•lus


2 #i‡
__˝lu•lus


7 #i‚de‡
__TSERRORCHECK_TWOLEVEL_H__


8 
	#__TSERRORCHECK_TWOLEVEL_H__


	)

10 
	~"TsEº‹Check_Comm⁄.h
"

12 
	#PCR_VALUE_MAX
 0x3ffffffffffULL

	)

13 
	#TWOLEVEL_PCRBASETIME_MAX
 0x1ffffffffULL

	)

15 
	#TWOLEVEL_BYTEPOS_MAX
 (
TSERROR_INVALID_U32
Ë

	)

16 
	#TWOLEVEL_TIME_INVALID
 0

	)

17 
	#TWOLEVEL_TIME_MAX
 (
TSERROR_INVALID_U32
)

	)

19 
	#TWOLEVEL_PCR_TSRATE_MIN
 (1000000Ë

	)

20 
	#TWOLEVEL_PCR_TSRATE_MAX
 (
TWOLEVEL_PCR_TSRATE_MIN
 * 200Ë

	)

25 
GOSTSR_U32
 
tŸÆCrcEº‹Cou¡
;

26 
GOSTSR_U32
 
∑tCrcEº‹Cou¡
;

27 
GOSTSR_U32
 
ˇtCrcEº‹Cou¡
;

28 
GOSTSR_U32
 
pmCr˘Eº‹Cou¡
;

29 
GOSTSR_U32
 
nôCrcEº‹Cou¡
;

30 
GOSTSR_U32
 
b©CrcEº‹Cou¡
;

31 
GOSTSR_U32
 
sdtCrcEº‹Cou¡
;

32 
GOSTSR_U32
 
eôCrcEº‹Cou¡
;

33 }
	tTwoLevñ_CrcEº‹_Info
;

37 
	mTWOLEVEL_ERRORTYPE_PCR
 = 0x01,

38 
	mTWOLEVEL_ERRORTYPE_PES
,

40 
	mTWOLEVEL_ERRORTYPE_MAX


41 }
	tTWOLEVEL_ERROR_TYPE_E
;

45 
GOSTSR_U32
 
	mtŸÆC©Eº‹Cou¡
;

46 
GOSTSR_U32
 
	mèbÀIDEº‹Cou¡
;

47 
GOSTSR_U32
 
	msˇmbÀEº‹Cou¡
;

48 }
	tTwoLevñ_C©Eº‹_Info
;

53 
GOSTSR_U32
 
	mu32ByãPos
;

54 
GOSTSR_U32
 
	mu32Tøn•‹tR©e
;

55 
GOSTSR_U64
 
	mu64P¸Ba£
;

56 
GOSTSR_U16
 
	mu16P¸Ext
;

57 
GOSTSR_U16
 
	mu16P¸Pid
;

58 
GOSTSR_BOOL
 
	mbFú°U£d
;

59 }
	tTwoLevñ_TsR©eDis_Info
;

64 
GOSTSR_U32
 
	mu32ByãPos
;

65 
GOSTSR_U32
 
	mu32P¸VÆueNs
;

66 
GOSTSR_U64
 
	mu64P¸Ba£
;

67 
GOSTSR_U16
 
	mu16P¸Ext
;

68 
GOSTSR_U16
 
	mu16P¸Pid
;

69 
GOSTSR_BOOL
 
	mbFú°U£d
;

70 }
	tTwoLevñ_P¸Dis_Info
;

75 
GOSTSR_U32
 
	mu32ByãPos
;

76 
GOSTSR_U16
 
	mu16PesPid
;

77 
GOSTSR_U16
 
	mu16P¸Pid
;

78 
GOSTSR_BOOL
 
	mbFú°U£d
;

79 }
	tTwoLevñ_PesDis_Info
;

84 
GOSTSR_U32
 
	mu32TSå™smissi⁄Eº‹Cou¡
;

85 
TwoLevñ_CrcEº‹_Info
 
	m°CrcEº‹Info
;

86 
GOSTSR_U32
 
	mu32P¸DisEº‹Cou¡
;

87 
GOSTSR_U32
 
	mu32P¸JôEº‹Cou¡
;

88 
GOSTSR_U32
 
	mu32PtsEº‹Cou¡
;

89 
TwoLevñ_C©Eº‹_Info
 
	m°C©Eº‹Info
;

91 }
	tTSERROR_TWOLEVEL_S
;

96 
GOSTSR_U32
 
	mbTsR©eisRecved
;

97 
GOSTSR_U32
 
	mTsR©e_VÆid
;

99 
TSERROR_TWOLEVEL_S
 
	m°TwoLevñ
;

100 
TwoLevñ_TsR©eDis_Info
 
	m°TsR©eInfo
[
PCRPID_NUM_MAX
];

101 
TwoLevñ_P¸Dis_Info
 
	m°P¸Info
[
PCRPID_NUM_MAX
];

102 
TwoLevñ_PesDis_Info
 
	m°PesInfo
[
PESPID_NUM_MAX
];

103 }
	tTSERROR_TWOLEVEL_PARAM_S
;

105 
GOSTSR_S32
 
TsEº‹Check_TwoLevñ_Inô
();

106 
GOSTSR_S32
 
TsEº‹Check_TwoLevñ_DeInô
();

107 
GOSTSR_S32
 
TsEº‹Check_TwoLevñ_ReInô
(
GOSTSR_U8
 
ch™ID
);

108 
GOSTSR_S32
 
TsEº‹Check_TwoLevñ_gëTwoLevñEº‹
(
GOSTSR_U8
 
ch™ID
,
TSERROR_TWOLEVEL_S
 *
pTwoLevñ
);

110 
GOSTSR_S32
 
TsEº‹Check_TwoLevñ_checkTøn•‹tEº‹
(
TR101290_ERROR_S
 *
p°Eº‹Info
,
GOSTSR_U8
 
u8Eº‹_ödiˇãr
);

111 
GOSTSR_S32
 
TsEº‹Check_TwoLevñ_checkCrcEº‹
(
TR101290_ERROR_S
 *
p°Eº‹Info
,
GOSTSR_U8
 
u8TabÀID
,
GOSTSR_U32
 
u32TabÀCrc
,GOSTSR_U32 
u32CÆCrc
);

112 
GOSTSR_S32
 
TsEº‹Check_TwoLevñ_checkP¸Disc⁄tEº‹
(
TR101290_ERROR_S
 *
p°Eº‹Info
,
GOSTSR_U32
 
ödex
,
GOSTSR_U64
 
u64P¸_Ba£
, 
GOSTSR_U16
 
u64P¸_Ex
,
GOSTSR_BOOL
 *
bEº‹Fœgt
);

113 
GOSTSR_S32
 
TsEº‹Check_TwoLevñ_checkP¸AccuøcyEº‹
(
TR101290_ERROR_S
 *
p°Eº‹Info
,
GOSTSR_U32
 
ödex
,
GOSTSR_U64
 
u64P¸_Ba£
, 
GOSTSR_U16
 
u64P¸_Ex
);

114 
GOSTSR_S32
 
TsEº‹Check_TwoLevñ_checkP¸Eº‹
(
TR101290_ERROR_S
 *
p°Eº‹Info
,
GOSTSR_U16
 
u16P¸Pid
,
GOSTSR_U64
 
u64P¸_Ba£
, GOSTSR_U16 
u64P¸_Ext
, 
GOSTSR_BOOL
 
Êag
);

115 
GOSTSR_S32
 
TsEº‹Check_TwoLevñ_checkPtsEº‹
(
TR101290_ERROR_S
 *
p°Eº‹Info
,
GOSTSR_U16
 
u16PesPid
);

116 
GOSTSR_S32
 
TsEº‹Check_TwoLevñ_checkC©Eº‹
(
TR101290_ERROR_S
 *
p°Eº‹Info
,
GOSTSR_U16
 
u16Pid
, 
GOSTSR_U8
 
u8TabÀID
, GOSTSR_U8 
u8S¸ambÀ
);

118 
GOSTSR_U32
 
TsEº‹Check_TwoLevñ_gëTimeUs_byByãPos
(
GOSTSR_U8
 
ch™ID
,GOSTSR_U32 
u32ByãPos
);

119 
GOSTSR_U32
 
TsEº‹Check_TwoLevñ_gëAvTøn•‹tR©e
(
GOSTSR_U8
 
ch™ID
);

120 
GOSTSR_S32
 
TsEº‹Check_TwoLevñ_£tPid
(
GOSTSR_U8
 
ch™ID
,
SEARCH_INFO_S
 *
°SórchInfo
);

124 #ifde‡
__˝lu•lus


125 #i‡
__˝lu•lus


	@tscheck/src/GosTsr_AnalysisData.c

1 #ifde‡
__˝lu•lus


2 #i‡
__˝lu•lus


7 
	~"GosT§_A«lysisD©a.h
"

9 
	~"TsEº‹Check_O√Levñ.h
"

10 
	~"TsEº‹Check_TwoLevñ.h
"

11 
	~"TsEº‹Check_ThªeLevñ.h
"

13 
	~"ts_b™d.h
"

15 
	#DEFAULT_CODE
 0x02

	)

17 c⁄° 
GOSTSR_U16
 
iso8859_2
[] = {

32 c⁄° 
GOSTSR_U16
 
iso8859_3
[] = {

47 c⁄° 
GOSTSR_U16
 
iso8859_4
[] = {

62 c⁄° 
GOSTSR_U16
 
iso8859_7
[] = {

77 c⁄° 
GOSTSR_U16
 
iso8859_8
[] = {

92 c⁄° 
GOSTSR_U16
 
iso8859_10
[] = {

107 c⁄° 
GOSTSR_U16
 
iso8859_13
[] = {

122 c⁄° 
GOSTSR_U16
 
iso8859_14
[] = {

137 c⁄° 
GOSTSR_U16
 
iso8859_16
[] = {

153 
	#FREE_ALL_LIST
(
±r
Ëdo{ \

	)

154 
TS_PACKAGE_INFO
 *
¥ePackage
 = 
GOSTSR_NULL
; \

155 
TS_PACKAGE_INFO
 *
pCurPackage
 = (TS_PACKAGE_INFO *)
±r
; \

156 
pCurPackage
 !
GOSTSR_NULL
) \

158 
¥ePackage
 = 
pCurPackage
; \

159 
pCurPackage
 =ÖCurPackage->
√xt
; \

160 
‰ì
(
¥ePackage
); \

161 
¥ePackage
 = 
GOSTSR_NULL
; \

163 
±r
 = 
GOSTSR_NULL
; \

167 
TS_PACKAGE_INFO
 *
PackageHód
[
TSERROR_CHANNELID_MAX
][
TABLE_NUMBER
];

168 
GOSTSR_U16
 
pmtsPID
[
GOS_MAX_SERVICE_NUM
];

169 
GOSTSR_U16
 
pmtsPIDNumbî
 = 0;

170 
A«lysisD©a_FUN
 
ˇŒBackFunc
[
ANALYSIS_CALLBACKFUNCTION_NUM
];

171 
GOSTSR_PSISI_PAT_S
 
g°P©Info
[
TSERROR_CHANNELID_MAX
];

173 
GOSTSR_S32
 
GosT§_A«lysisD©a_Re£tPMTID
()

175 
mem£t
(
pmtsPID
, 0xffff, (pmtsPID));

176 
pmtsPIDNumbî
 = 0;

178  
GOSTSR_SUCCESS
;

181 
GOSTSR_S32
 
GosT§_A«lysisD©a_Re£tP©Info
()

183 
GOSTSR_S32
 
i
 =0;

184 
mem£t
(&
g°P©Info
, 0, (
GOSTSR_PSISI_PAT_S
Ë* 
TSERROR_CHANNELID_MAX
);

186 
i
 = 0; i < 
TSERROR_CHANNELID_MAX
;i++)

188 
g°P©Info
[
i
].
u8Vîsi⁄
 = 0xff;

191  
GOSTSR_SUCCESS
;

193 
GOSTSR_S32
 
GosT§_A«lysisD©a_ReInôP©Info
(
GOSTSR_U8
 
ch™ID
)

195 
mem£t
(&
g°P©Info
[
ch™ID
], 0, (
GOSTSR_PSISI_PAT_S
));

196 
g°P©Info
[
ch™ID
].
u8Vîsi⁄
 = 0xff;

198  
GOSTSR_SUCCESS
;

201 
GOSTSR_S32
 
GosT§_A«lysisD©a_gëP©Info
(
GOSTSR_U8
 
ch™ID
,
GOSTSR_PSISI_PAT_S
 *
∑tInfo
)

203 if(
g°P©Info
[
ch™ID
].
u8Vîsi⁄
 !
∑tInfo
->u8Version)

205 
mem˝y
(&
g°P©Info
[
ch™ID
],
∑tInfo
,(
GOSTSR_PSISI_PAT_S
));

208  
GOSTSR_SUCCESS
;

211 
GOSTSR_S32
 
GosT§_A«lysisD©a_TsEnvInô
()

213 
TS_PACKAGE_INFO
 *
pCurPackage
 = 
GOSTSR_NULL
;

214 
TS_PACKAGE_INFO
 *
¥ePackage
 = 
GOSTSR_NULL
;

215 
GOSTSR_U8
 
i
 = 0, 
j
 = 0;

217 
j
 = 0; j < 
TSERROR_CHANNELID_MAX
; j++)

219 
i
 = 0; i < 
TABLE_NUMBER
; i++)

222 
pCurPackage
 = 
PackageHód
[
j
][
i
];

223 
pCurPackage
 !
GOSTSR_NULL
)

225 
¥ePackage
 = 
pCurPackage
;

226 
pCurPackage
 =ÖCurPackage->
√xt
;

227 
‰ì
(
¥ePackage
);

228 
¥ePackage
 = 
GOSTSR_NULL
;

230 
PackageHód
[
j
][
i
] = 
GOSTSR_NULL
;

234 
i
 = 0; i < 
ANALYSIS_CALLBACKFUNCTION_NUM
; i++)

236 
ˇŒBackFunc
[
i
] = 
GOSTSR_NULL
;

239 
GosT§_A«lysisD©a_Re£tPMTID
();

240 
GosT§_A«lysisD©a_Re£tP©Info
();

242  
GOSTSR_SUCCESS
;

245 
GOSTSR_S32
 
GosT§_A«lysisD©a_TsEnvDeInô
()

247 
TS_PACKAGE_INFO
 *
pCurPackage
 = 
GOSTSR_NULL
;

248 
TS_PACKAGE_INFO
 *
¥ePackage
 = 
GOSTSR_NULL
;

249 
GOSTSR_U8
 
i
 = 0, 
j
 = 0;

250 
j
 = 0; j < 
TSERROR_CHANNELID_MAX
; j++)

252 
i
 = 0; i < 
TABLE_NUMBER
; i++)

255 
pCurPackage
 = 
PackageHód
[
j
][
i
];

256 
pCurPackage
 !
GOSTSR_NULL
)

258 
¥ePackage
 = 
pCurPackage
;

259 
pCurPackage
 =ÖCurPackage->
√xt
;

260 
‰ì
(
¥ePackage
);

261 
¥ePackage
 = 
GOSTSR_NULL
;

263 
PackageHód
[
j
][
i
] = 
GOSTSR_NULL
;

267 
i
 = 0; i < 
ANALYSIS_CALLBACKFUNCTION_NUM
; i++)

269 
ˇŒBackFunc
[
i
] = 
GOSTSR_NULL
;

272 
GosT§_A«lysisD©a_Re£tPMTID
();

274  
GOSTSR_SUCCESS
;

277 
GOSTSR_S32
 
GosT§_A«lysisD©a_TsEnvReInô
(
GOSTSR_U8
 
ch™ID
)

279 
TS_PACKAGE_INFO
 *
pCurPackage
 = 
GOSTSR_NULL
;

280 
TS_PACKAGE_INFO
 *
¥ePackage
 = 
GOSTSR_NULL
;

281 
GOSTSR_U8
 
i
 = 0;

283 
i
 = 0; i < 
TABLE_NUMBER
; i++)

286 
pCurPackage
 = 
PackageHód
[
ch™ID
][
i
];

287 
pCurPackage
 !
GOSTSR_NULL
)

289 
¥ePackage
 = 
pCurPackage
;

290 
pCurPackage
 =ÖCurPackage->
√xt
;

291 
‰ì
(
¥ePackage
);

292 
¥ePackage
 = 
GOSTSR_NULL
;

294 
PackageHód
[
ch™ID
][
i
] = 
GOSTSR_NULL
;

296 
GosT§_A«lysisD©a_ReInôP©Info
(
ch™ID
);

298  
GOSTSR_SUCCESS
;

301 
GOSTSR_S32
 
GosT§_A«lysisD©a_CÆlBack
(
GOSTSR_U8
 
ch™ID
,
TS_SECTION_INFO
 *
tsSe˘i⁄Info
)

303 
GOSTSR_U8
 
i
 = 0;

305 
i
 = 0; i < 
ANALYSIS_CALLBACKFUNCTION_NUM
; i++)

307 i‡(
GOSTSR_NULL
 !
ˇŒBackFunc
[
i
])

309 
ˇŒBackFunc
[
i
](
ch™ID
,
tsSe˘i⁄Info
);

313  
GOSTSR_SUCCESS
;

316 
GOSTSR_S32
 
GosT§_A«lysisD©a_Regi°îCÆlBack
(
A«lysisD©a_FUN
 
fun˘i⁄
, 
GOSTSR_U8
 *
ödex
)

318 
GOSTSR_U8
 
i
 = 0;

320 i‡((
GOSTSR_NULL
 =
fun˘i⁄
Ë|| (GOSTSR_NULL =
ödex
))

322  
GOSTSR_FAILURE
;

325 
i
 = 0; i < 
ANALYSIS_CALLBACKFUNCTION_NUM
; i++)

327 i‡(
GOSTSR_NULL
 =
ˇŒBackFunc
[
i
])

333 i‡(
i
 !
ANALYSIS_CALLBACKFUNCTION_NUM
)

335 
ˇŒBackFunc
[
i
] = 
fun˘i⁄
;

336 *
ödex
 = 
i
;

338  
GOSTSR_SUCCESS
;

341  
GOSTSR_FAILURE
;

344 
GOSTSR_S32
 
GosT§_A«lysisD©a_UnRegi°îCÆlBack
(
GOSTSR_U8
 
ödex
)

346 i‡(
GOSTSR_NULL
 !
ˇŒBackFunc
[
ödex
])

348 
ˇŒBackFunc
[
ödex
] = 
GOSTSR_NULL
;

351  
GOSTSR_SUCCESS
;

354 
GOSTSR_S32
 
GosT§_A«lysisD©a_PackëTy≥
(
GOSTSR_U32
 *
pu32PackëLí
, GOSTSR_U32 
u32D©©Lí
,
GOSTSR_U8
 *
pD©a
)

356 
GOSTSR_U8
 
chr
 = '\0';

357 
GOSTSR_BOOL
 
checkFœg
 = 
GOSTSR_FALSE
;

358 
GOSTSR_U32
 
CurOff£t
 = 0;

359 
GOSTSR_U32
 
PªOff£t
 = 0;

360 
GOSTSR_U32
 
∑ckageLí
 = 0;

361 
GOSTSR_U32
 
pos
 =0;

362 
GOSTSR_U8
 *
tsD©a
 = 
GOSTSR_NULL
;

363 
GOSTSR_U8
 *
pTempD©a
 = 
pD©a
;

365 if((
pu32PackëLí
 =
GOSTSR_NULL
Ë|| (
pD©a
 == GOSTSR_NULL))

367  
GOSTSR_FAILURE
;

371 
chr
 = 
pTempD©a
[
pos
++];

372 
CurOff£t
++;

374 i‡(
u32D©©Lí
 =
pos
)

376  
GOSTSR_FAILURE
;

379 i‡(
chr
 =
SYNC_BYTE
)

381 i‡(
PªOff£t
 == 0)

383 
PªOff£t
 = 
CurOff£t
;

387 i‡(((
CurOff£t
 - 
PªOff£t
Ë=
TS_LENGTH_188
Ë|| ((CurOff£à- PªOff£tË=
TS_LENGTH_204
))

389 
CurOff£t
 = 
PªOff£t
;

390 
checkFœg
 = 
GOSTSR_TRUE
;

394 
PªOff£t
 = 
CurOff£t
;

399 }!
checkFœg
);

404 
tsD©a
 = (
GOSTSR_U8
 *)
OS_Packë_AŒocMem‹y
(
TS_LENGTH_204
 + 1);

405 i‡(
GOSTSR_NULL
 =
tsD©a
)

407  
GOSTSR_FAILURE
;

409 
mem£t
(
tsD©a
, 0x00, 
TS_LENGTH_204
 + 1);

411 
mem˝y
(
tsD©a
, 
pTempD©a
, 
TS_LENGTH_204
 + 1);

413 if((
tsD©a
[0] =
SYNC_BYTE
) && (tsData[188] == SYNC_BYTE))

416 
∑ckageLí
 = 
TS_LENGTH_188
;

418 if((
tsD©a
[0] =
SYNC_BYTE
) && (tsData[188] != SYNC_BYTE) && \

419 (
tsD©a
[204] =
SYNC_BYTE
))

422 
∑ckageLí
 = 
TS_LENGTH_204
;

425 i‡(
GOSTSR_NULL
 !
tsD©a
)

427 
‰ì
(
tsD©a
);

428 
tsD©a
 = 
GOSTSR_NULL
;

431 *
pu32PackëLí
 = 
∑ckageLí
;

433  
GOSTSR_SUCCESS
;

437 
GOSTSR_S32
 
GosT§_A«lysisD©a_GëPMTID
(
GOSTSR_PSISI_PAT_S
 *
∑tInfo
)

439 
GOSTSR_U16
 
i
 = 0;

440 
GOSTSR_U16
 
ödex
 = 0;

443 
i
 = 0; i < 
∑tInfo
->
u16NbEÀmíts
; i++)

445 i‡(0 =
∑tInfo
->
a°EÀmít
[
i
].
u16ProgømNumbî
)

450 
pmtsPID
[
ödex
++] = 
∑tInfo
->
a°EÀmít
[
i
].
u16Pid
;

454 
pmtsPIDNumbî
 = 
ödex
;

457  
GOSTSR_SUCCESS
;

460 
GOSTSR_S32
 
GosT§_A«lysisD©a_LökPackage
(
GOSTSR_U8
 
èbÀID
, 
TS_PACKAGE_INFO
 *
PackageHód_Temp
, GOSTSR_U8 
œ°D©aLí
, GOSTSR_U8 *
œ°D©a
)

462 
GOSTSR_U8
 *
pSe˘i⁄D©a
 = 
GOSTSR_NULL
;

463 
GOSTSR_U16
 
curSe˘i⁄Lígth
 = 0;

464 
GOSTSR_U16
 
ÆlSe˘i⁄Lígth
 = 0;

465 
TS_SECTION_INFO
 *
curSe˘i⁄Info
 = 
GOSTSR_NULL
;

466 
TS_PACKAGE_INFO
 *
pCurPackage
 = 
GOSTSR_NULL
;

468 if((
GOSTSR_NULL
 =
PackageHód_Temp
Ë|| (GOSTSR_NULL =
œ°D©a
))

470  
GOSTSR_FAILURE
;

473 
pCurPackage
 = 
PackageHód_Temp
;

474 
GOSTSR_NULL
 !
pCurPackage
)

476 
ÆlSe˘i⁄Lígth
 +
pCurPackage
->
∑ckageLí
;

477 
pCurPackage
 =ÖCurPackage->
√xt
;

480 
curSe˘i⁄Lígth
 = 
ÆlSe˘i⁄Lígth
;

481 
curSe˘i⁄Lígth
 +
œ°D©aLí
;

483 
curSe˘i⁄Info
 = (
TS_SECTION_INFO
 *)
OS_Packë_AŒocMem‹y
((TS_SECTION_INFO));

484 if(
GOSTSR_NULL
 =
curSe˘i⁄Info
)

486  
GOSTSR_FAILURE
;

488 
curSe˘i⁄Info
->
£˘i⁄Lígth
 = 
curSe˘i⁄Lígth
;

489 
curSe˘i⁄Info
->
PID
 = 
PackageHód_Temp
->PID;

490 
curSe˘i⁄Info
->
èbÀID
 = 
PackageHód_Temp
->tableID;

491 
mem˝y
(&
curSe˘i⁄Info
->
°Eº‹Info
,&
PackageHód_Temp
->°Eº‹Info,(
TR101290_ERROR_S
));

492 
curSe˘i⁄Info
->
£˘i⁄D©a
 = (
GOSTSR_U8
 *)
OS_Packë_AŒocMem‹y
(
curSe˘i⁄Lígth
);

493 if(
GOSTSR_NULL
 =
curSe˘i⁄Info
->
£˘i⁄D©a
)

495 
OS_Packë_FªeMem‹y
(
curSe˘i⁄Info
);

496  
GOSTSR_FAILURE
;

499 
mem£t
(
curSe˘i⁄Info
->
£˘i⁄D©a
, 0x00, 
curSe˘i⁄Lígth
);

500 
pSe˘i⁄D©a
 = 
curSe˘i⁄Info
->
£˘i⁄D©a
;

501 
pCurPackage
 = 
PackageHód_Temp
;

503 
GOSTSR_NULL
 !
pCurPackage
)

505 
mem˝y
(
pSe˘i⁄D©a
, 
pCurPackage
->
∑ckageD©a
,ÖCurPackage->
∑ckageLí
);

506 
pSe˘i⁄D©a
 +
pCurPackage
->
∑ckageLí
;

507 
pCurPackage
 =ÖCurPackage->
√xt
;

509 
mem˝y
(
pSe˘i⁄D©a
, 
œ°D©a
, 
œ°D©aLí
);

511 
GOSTSR_U16
 
curPos
 = 
curSe˘i⁄Info
->
£˘i⁄Lígth
 - 4;

512 
GOSTSR_U8
 *
pD©a
 = &(
curSe˘i⁄Info
->
£˘i⁄D©a
[
curPos
]);

513 
GOSTSR_U32
 
¸c32
 = (
pD©a
[0]<<24) + (pData[1]<<16) + (pData[2]<<8) +ÖData[3];

514 
GOSTSR_U32
 
ˇlCrc32
 = 0;

516 
ˇlCrc32
 = 
GosT§_A«lysisD©a_CRCCheck
(
curSe˘i⁄Info
->
£˘i⁄D©a
, curSe˘i⁄Info->
£˘i⁄Lígth
 - 4);

517 i‡((
¸c32
 =
ˇlCrc32
Ë|| (
TDT_TABLE_ID
 =
èbÀID
))

519 
GosT§_A«lysisD©a_CÆlBack
(
curSe˘i⁄Info
->
°Eº‹Info
.
ch™ID
,curSectionInfo);

522 #i‡
TSERROR_CHECK


523 #i‡
TSERROR_TWO_LEVEL


525 if(
TsEº‹Check_TwoLevñ_checkCrcEº‹
(&
curSe˘i⁄Info
->
°Eº‹Info
,curSe˘i⁄Info->
èbÀID
, 
¸c32
, 
ˇlCrc32
Ë=
GOSTSR_SUCCESS
)

527 #i‡
TSERROR_THREE_LEVEL


528 
TsEº‹Check_ThªeLevñ_Se˘i⁄sTimeEº‹
(
curSe˘i⁄Info
);

534 i‡(
GOSTSR_NULL
 !
curSe˘i⁄Info
)

536 i‡(
GOSTSR_NULL
 !
curSe˘i⁄Info
->
£˘i⁄D©a
)

538 
OS_Packë_FªeMem‹y
(
curSe˘i⁄Info
->
£˘i⁄D©a
);

540 
OS_Packë_FªeMem‹y
(
curSe˘i⁄Info
);

543  
GOSTSR_SUCCESS
;

546 
GOSTSR_S32
 
GosT§_A«lysisD©a_TabÀID
(
GOSTSR_U8
 
èbÀID
,c⁄° *
d©a
, 
TS_HEAD_INFO
 *
tsHódInfo
)

548 
GOSTSR_U8
 
£˘i⁄Fœg
 = 
GOSTSR_FALSE
;

549 
GOSTSR_U16
 
i
 = 0, 
j
 = 0;

550 
GOSTSR_U8
 *
pcurD©a
 = 
GOSTSR_NULL
;

551 
GOSTSR_U8
 
ad≠tLígth
 = 0;

552 
GOSTSR_U8
 
poötFõldLígth
 = 0;

553 
GOSTSR_U8
 
‰⁄tSe˘i⁄D©a
[256] = {0,};

554 
GOSTSR_U8
 
curTabÀID
 = 
BULT_TABLE_ID
;

555 
GOSTSR_U16
 
curTempD©a
 = 0;

556 
GOSTSR_U16
 
curSe˘i⁄Lígth
 = 0;

557 
GOSTSR_U16
 
ªmaöLí
 = 0;

558 
TS_SECTION_INFO
 *
curSe˘i⁄Info
 = 
GOSTSR_NULL
;

559 
TS_PACKAGE_INFO
 *
pCurPackage
 = 
GOSTSR_NULL
;

560 
TS_PACKAGE_INFO
 *
¥ePackage
 = 
GOSTSR_NULL
;

561 
GOSTSR_U16
 
∑ckageAŒLí
 = 0;

562 
GOSTSR_U8
 *
pSe˘i⁄D©a
 = 
GOSTSR_NULL
;

563 
GOSTSR_U16
 
ÆlSe˘i⁄Lígth
 = 0;

565 i‡((
GOSTSR_NULL
 =
d©a
Ë|| (GOSTSR_NULL =
tsHódInfo
))

567  
GOSTSR_FAILURE
;

570 
pcurD©a
 = (
GOSTSR_U8
 *)
d©a
;

571 
pcurD©a
 +
TS_HEAD_LENGTH
;

574 i‡(
tsHódInfo
->
ad≠ãr_c⁄åﬁ
 & 
BIT2
)

577 
ad≠tLígth
 = 
pcurD©a
[0];

578 
pcurD©a
 += 1;

581 
pcurD©a
 +
ad≠tLígth
;

585 i‡(
tsHódInfo
->
lﬂd_ödiˇãr
 =
BIT1
)

588 
poötFõldLígth
 = 
pcurD©a
[0];

589 
pcurD©a
 += 1;

592 
mem£t
(
‰⁄tSe˘i⁄D©a
, 0x00, (frontSectionData));

593 
mem˝y
(
‰⁄tSe˘i⁄D©a
, 
pcurD©a
, 
poötFõldLígth
);

594 
pcurD©a
 +
poötFõldLígth
;

597 
curTabÀID
 = 
pcurD©a
[0];

598 
pcurD©a
 += 1;

599 i‡(
curTabÀID
 !
èbÀID
)

601  
GOSTSR_FAILURE
;

603 #i‡
TSERROR_CHECK


604 #i‡
TSERROR_ONE_LEVEL


605 
TsEº‹Check_O√Levñ_P©Eº‹
(&
tsHódInfo
->
°Eº‹Info
,tsHódInfo->
ts_pid
,
curTabÀID
,tsHódInfo->
s¸ambÀ_c⁄åﬁ
);

606 
TsEº‹Check_O√Levñ_PmtEº‹
(&
tsHódInfo
->
°Eº‹Info
,tsHódInfo->
ts_pid
,tsHódInfo->
s¸ambÀ_c⁄åﬁ
);

608 #i‡
TSERROR_TWO_LEVEL


609 
TsEº‹Check_TwoLevñ_checkC©Eº‹
(&
tsHódInfo
->
°Eº‹Info
,tsHódInfo->
ts_pid
, 
curTabÀID
,ÅsHódInfo->
s¸ambÀ_c⁄åﬁ
);

614 
i
 = 0; i < 
TABLE_NUMBER
; i++)

616 i‡(
PackageHód
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
][
i
] =
GOSTSR_NULL
)

621 i‡(
PackageHód
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
][
i
]->
PID
 =tsHódInfo->
ts_pid
)

623 
ÆlSe˘i⁄Lígth
 = 0;

625 
pCurPackage
 = 
PackageHód
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
][
i
];

626 
GOSTSR_NULL
 !
pCurPackage
)

628 
ÆlSe˘i⁄Lígth
 +
pCurPackage
->
∑ckageLí
;

629 
pCurPackage
 =ÖCurPackage->
√xt
;

632 if((
ÆlSe˘i⁄Lígth
 + 
poötFõldLígth
Ë>
PackageHód
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
][
i
]->
£˘i⁄Lí
)

634 
GosT§_A«lysisD©a_LökPackage
(
èbÀID
,
PackageHód
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
][
i
],
poötFõldLígth
,
‰⁄tSe˘i⁄D©a
);

637 
FREE_ALL_LIST
(
PackageHód
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
][
i
]);

644 
curTempD©a
 = 
pcurD©a
[0]*256 +ÖcurData[1];

645 
curSe˘i⁄Lígth
 = 
curTempD©a
 & (~((
BIT8
 | 
BIT7
 | 
BIT6
 | 
BIT5
) * 256));

646 
pcurD©a
 += 2;

649 
pcurD©a
 -= 3;

650 
curSe˘i⁄Lígth
 += 3;

653 i‡(
tsHódInfo
->
ad≠ãr_c⁄åﬁ
 & 
BIT2
)

655 i‡(
tsHódInfo
->
∑ckageTy≥
 =
PACKAGE_188
)

657 
ªmaöLí
 = (
TS_LENGTH_188
 - 
TS_HEAD_LENGTH
 - 1 - 
ad≠tLígth
 - 1 - 
poötFõldLígth
);

661 
ªmaöLí
 = (
TS_LENGTH_204
 - 
TS_HEAD_LENGTH
 - 1 - 
ad≠tLígth
 - 1 - 
poötFõldLígth
);

666 i‡(
tsHódInfo
->
∑ckageTy≥
 =
PACKAGE_188
)

668 
ªmaöLí
 = (
TS_LENGTH_188
 - 
TS_HEAD_LENGTH
 - 1 - 
poötFõldLígth
);

672 
ªmaöLí
 = (
TS_LENGTH_204
 - 
TS_HEAD_LENGTH
 - 1 - 
poötFõldLígth
);

677 i‡(
curSe˘i⁄Lígth
 <
ªmaöLí
)

679 
curSe˘i⁄Info
 = (
TS_SECTION_INFO
 *)
OS_Packë_AŒocMem‹y
((TS_SECTION_INFO));

680 if(
curSe˘i⁄Info
 =
GOSTSR_NULL
)

682  
GOSTSR_FAILURE
;

684 
mem£t
(
curSe˘i⁄Info
, 0x00, (
TS_SECTION_INFO
));

685 
curSe˘i⁄Info
->
£˘i⁄Lígth
 = 
curSe˘i⁄Lígth
;

686 
curSe˘i⁄Info
->
èbÀID
 =ÅableID;

687 
curSe˘i⁄Info
->
PID
 = 
tsHódInfo
->
ts_pid
;

689 
mem˝y
(&
curSe˘i⁄Info
->
°Eº‹Info
,&
tsHódInfo
->°Eº‹Info,(
TR101290_ERROR_S
));

691 
curSe˘i⁄Info
->
£˘i⁄D©a
 = (
GOSTSR_U8
 *)
OS_Packë_AŒocMem‹y
(
curSe˘i⁄Lígth
);

692 if(
curSe˘i⁄Info
->
£˘i⁄D©a
 =
GOSTSR_NULL
)

694 
OS_Packë_FªeMem‹y
(
curSe˘i⁄Info
);

695  
GOSTSR_FAILURE
;

697 
mem£t
(
curSe˘i⁄Info
->
£˘i⁄D©a
, 0x00, 
curSe˘i⁄Lígth
);

698 
mem˝y
(
curSe˘i⁄Info
->
£˘i⁄D©a
, 
pcurD©a
, 
curSe˘i⁄Lígth
);

701 
£˘i⁄Fœg
 = 
GOSTSR_TRUE
;

706 
i
 = 0; i < 
TABLE_NUMBER
; i++)

708 i‡(
PackageHód
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
][
i
] =
GOSTSR_NULL
)

714 i‡(
TABLE_NUMBER
 !
i
)

716 
PackageHód
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
][
i
] = (
TS_PACKAGE_INFO
*)
OS_Packë_AŒocMem‹y
((TS_PACKAGE_INFO));

717 if(
PackageHód
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
][
i
] !
GOSTSR_NULL
)

719 
PackageHód
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
][
i
]->
√xt
 = 
GOSTSR_NULL
;

720 
PackageHód
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
][
i
]->
∑ckageLí
 = 
ªmaöLí
;

721 
mem£t
(
PackageHód
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
][
i
]->
∑ckageD©a
, 0x00, (PackageHead[tsHeadInfo->stErrorInfo.chanID][i]->packageData));

722 
mem˝y
(
PackageHód
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
][
i
]->
∑ckageD©a
, 
pcurD©a
, 
ªmaöLí
);

723 
PackageHód
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
][
i
]->
PID
 =ÅsHódInfo->
ts_pid
;

724 
PackageHód
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
][
i
]->
numbî
 =ÅsHódInfo->
cou¡î
;

725 
PackageHód
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
][
i
]->
£˘i⁄Lí
 = 
curSe˘i⁄Lígth
;

726 
PackageHód
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
][
i
]->
èbÀID
 =ÅableID;

727 
mem˝y
(&
PackageHód
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
][
i
]->°Eº‹Info,&tsHódInfo->°Eº‹Info,(
TR101290_ERROR_S
));

736 
i
 = 0; i < 
TABLE_NUMBER
; i++)

738 i‡(
PackageHód
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
][
i
] =
GOSTSR_NULL
)

743 i‡(
PackageHód
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
][
i
]->
PID
 =tsHódInfo->
ts_pid
)

750 i‡(
i
 =
TABLE_NUMBER
)

752  
GOSTSR_FAILURE
;

756 
∑ckageAŒLí
 = 0;

757 
pCurPackage
 = 
PackageHód
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
][
i
];

758 
¥ePackage
 = 
PackageHód
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
][
i
];

759 
pCurPackage
 !
GOSTSR_NULL
)

761 
∑ckageAŒLí
 +
pCurPackage
->
∑ckageLí
;

762 
¥ePackage
 = 
pCurPackage
;

763 
pCurPackage
 =ÖCurPackage->
√xt
;

767 
pCurPackage
 = (
TS_PACKAGE_INFO
*)
OS_Packë_AŒocMem‹y
((TS_PACKAGE_INFO));

768 i‡(
GOSTSR_NULL
 =
pCurPackage
)

770  
GOSTSR_FAILURE
;

773 
¥ePackage
->
√xt
 = 
pCurPackage
;

774 
pCurPackage
->
√xt
 = 
GOSTSR_NULL
;

775 i‡(
tsHódInfo
->
ad≠ãr_c⁄åﬁ
 & 
BIT2
)

777 i‡(
tsHódInfo
->
∑ckageTy≥
 =
PACKAGE_188
)

779 
pCurPackage
->
∑ckageLí
 = (
TS_LENGTH_188
 - 
TS_HEAD_LENGTH
 - 1 - 
ad≠tLígth
);

783 
pCurPackage
->
∑ckageLí
 = (
TS_LENGTH_204
 - 
TS_HEAD_LENGTH
 - 1 - 
ad≠tLígth
);

788 i‡(
tsHódInfo
->
∑ckageTy≥
 =
PACKAGE_188
)

790 
pCurPackage
->
∑ckageLí
 = (
TS_LENGTH_188
 - 
TS_HEAD_LENGTH
);

794 
pCurPackage
->
∑ckageLí
 = (
TS_LENGTH_204
 - 
TS_HEAD_LENGTH
);

797 
mem£t
(
pCurPackage
->
∑ckageD©a
, 0x00, (pCurPackage->packageData));

798 
mem˝y
(
pCurPackage
->
∑ckageD©a
, 
pcurD©a
,ÖCurPackage->
∑ckageLí
);

799 
pCurPackage
->
PID
 = 
tsHódInfo
->
ts_pid
;

800 
pCurPackage
->
numbî
 = 
tsHódInfo
->
cou¡î
;

801 
pCurPackage
->
£˘i⁄Lí
 = 
PackageHód
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
][
i
]->sectionLen;

802 
pCurPackage
->
èbÀID
 = 
PackageHód
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
][
i
]->tableID;

803 
mem˝y
(&
pCurPackage
->
°Eº‹Info
,&
tsHódInfo
->°Eº‹Info,(
TR101290_ERROR_S
));

805 
∑ckageAŒLí
 +
pCurPackage
->
∑ckageLí
;

807 i‡(
∑ckageAŒLí
 >
PackageHód
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
][
i
]->
£˘i⁄Lí
)

809 
∑ckageAŒLí
 = 0;

810 
j
 = 
PackageHód
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
][
i
]->
numbî
;

813 
∑ckageAŒLí
 < 
PackageHód
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
][
i
]->
£˘i⁄Lí
)

815 
pCurPackage
 = 
PackageHód
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
][
i
];

816 
pCurPackage
 !
GOSTSR_NULL
)

818 if(
pCurPackage
->
numbî
 =
j
)

820 
∑ckageAŒLí
 +
pCurPackage
->
∑ckageLí
;

821 
j
++;

823 i‡(
j
 == 16)

825 
j
 = 0;

829 
pCurPackage
 =ÖCurPackage->
√xt
;

832 i‡(
GOSTSR_NULL
 =
pCurPackage
)

839 i‡(
GOSTSR_NULL
 =
pCurPackage
)

845 
èbÀID
 = 
PackageHód
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
][
i
]->tableID;

846 
curSe˘i⁄Lígth
 = 
PackageHód
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
][
i
]->
£˘i⁄Lí
;

847 
curSe˘i⁄Info
 = (
TS_SECTION_INFO
 *)
OS_Packë_AŒocMem‹y
((TS_SECTION_INFO));

848 if(
curSe˘i⁄Info
 =
GOSTSR_NULL
)

850  
GOSTSR_FAILURE
;

852 
curSe˘i⁄Info
->
£˘i⁄Lígth
 = 
curSe˘i⁄Lígth
;

853 
curSe˘i⁄Info
->
PID
 = 
tsHódInfo
->
ts_pid
;

854 
curSe˘i⁄Info
->
èbÀID
 =ÅableID;

855 
mem˝y
(&
curSe˘i⁄Info
->
°Eº‹Info
,&
tsHódInfo
->°Eº‹Info,(
TR101290_ERROR_S
));

856 
curSe˘i⁄Info
->
£˘i⁄D©a
 = (
GOSTSR_U8
 *)
OS_Packë_AŒocMem‹y
(
curSe˘i⁄Lígth
);

857 if(
curSe˘i⁄Info
->
£˘i⁄D©a
 =
GOSTSR_NULL
)

859 
OS_Packë_FªeMem‹y
(
curSe˘i⁄Info
);

860  
GOSTSR_FAILURE
;

862 
mem£t
(
curSe˘i⁄Info
->
£˘i⁄D©a
, 0x00, 
curSe˘i⁄Lígth
);

863 
pSe˘i⁄D©a
 = 
curSe˘i⁄Info
->
£˘i⁄D©a
;

865 
∑ckageAŒLí
 = 0;

866 
∑ckageAŒLí
 < 
curSe˘i⁄Lígth
)

869 
pCurPackage
 = 
PackageHód
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
][
i
];

870 
¥ePackage
 = 
PackageHód
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
][
i
];

871 
j
 = 
PackageHód
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
][
i
]->
numbî
;

873 
pCurPackage
 !
GOSTSR_NULL
)

875 if(
pCurPackage
->
numbî
 =
j
)

877 
j
++;

879 i‡(
j
 == 16)

881 
j
 = 0;

885 
¥ePackage
 = 
pCurPackage
;

886 
pCurPackage
 =ÖCurPackage->
√xt
;

889 i‡(
GOSTSR_NULL
 !
pCurPackage
)

892 i‡((
∑ckageAŒLí
 + 
pCurPackage
->
∑ckageLí
Ë> 
curSe˘i⁄Lígth
)

894 
ªmaöLí
 = 
curSe˘i⁄Lígth
 - 
∑ckageAŒLí
;

898 
ªmaöLí
 = 
pCurPackage
->
∑ckageLí
;

901 
mem˝y
(
pSe˘i⁄D©a
, 
pCurPackage
->
∑ckageD©a
, 
ªmaöLí
);

903 
pSe˘i⁄D©a
 +
ªmaöLí
;

904 
∑ckageAŒLí
 +
pCurPackage
->
∑ckageLí
;

907 i‡(
¥ePackage
 =
PackageHód
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
][
i
])

909 
PackageHód
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
][
i
] = 
¥ePackage
->
√xt
;

910 
OS_Packë_FªeMem‹y
(
¥ePackage
);

914 
¥ePackage
->
√xt
 = 
pCurPackage
->next;

915 
OS_Packë_FªeMem‹y
(
pCurPackage
);

922 
FREE_ALL_LIST
(
PackageHód
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
][
i
]);

925 
£˘i⁄Fœg
 = 
GOSTSR_TRUE
;

930 i‡(
GOSTSR_TRUE
 =
£˘i⁄Fœg
)

932 
èbÀID
)

934 
PAT_TABLE_ID
:

935 
PMT_TABLE_ID
:

936 
CAT_TABLE_ID
:

937 
NIT_TABLE_ID_ACTUAL
:

938 
NIT_TABLE_ID_OTHER
:

939 
BAT_TABLE_ID
:

940 
SDT_TABLE_ID_ACTUAL
:

941 
SDT_TABLE_ID_OTEHR
:

942 
EIT_TABLE_ID_ACTUAL
:

943 
EIT_TABLE_ID_ACTUAL_SHEDULE
:

944 
EIT_TABLE_ID_OTHER
:

945 
EIT_TABLE_ID_OTHER_SHEDULE
:

946 
TDT_TABLE_ID
:

947 
TOT_TABLE_ID
:

949 
GOSTSR_U16
 
curPos
 = 
curSe˘i⁄Info
->
£˘i⁄Lígth
 - 4;

950 
GOSTSR_U8
 *
pD©a
 = &(
curSe˘i⁄Info
->
£˘i⁄D©a
[
curPos
]);

951 
GOSTSR_U32
 
¸c32
 = (
pD©a
[0]<<24) + (pData[1]<<16) + (pData[2]<<8) +ÖData[3];

952 
GOSTSR_U32
 
ˇlCrc32
 = 0;

953 
ˇlCrc32
 = 
GosT§_A«lysisD©a_CRCCheck
(
curSe˘i⁄Info
->
£˘i⁄D©a
, curSe˘i⁄Info->
£˘i⁄Lígth
 - 4);

954 i‡((
¸c32
 =
ˇlCrc32
Ë|| (
TDT_TABLE_ID
 =
èbÀID
))

956 
GosT§_A«lysisD©a_CÆlBack
(
curSe˘i⁄Info
->
°Eº‹Info
.
ch™ID
,curSectionInfo);

959 #i‡
TSERROR_CHECK


960 #i‡
TSERROR_TWO_LEVEL


962 if(
TsEº‹Check_TwoLevñ_checkCrcEº‹
(&
curSe˘i⁄Info
->
°Eº‹Info
,curSe˘i⁄Info->
èbÀID
, 
¸c32
, 
ˇlCrc32
Ë!
GOSTSR_SUCCESS
)

964 #i‡
TSERROR_THREE_LEVEL


965 
TsEº‹Check_ThªeLevñ_Se˘i⁄sTimeEº‹
(
curSe˘i⁄Info
);

973 
RST_TABLE_ID
:

974 
SI_TABLE_ID
:

980 i‡(
GOSTSR_NULL
 !
curSe˘i⁄Info
)

982 i‡(
GOSTSR_NULL
 !
curSe˘i⁄Info
->
£˘i⁄D©a
)

984 
OS_Packë_FªeMem‹y
(
curSe˘i⁄Info
->
£˘i⁄D©a
);

986 
OS_Packë_FªeMem‹y
(
curSe˘i⁄Info
);

989  
GOSTSR_SUCCESS
;

992 
GOSTSR_S32
 
GosT§_A«lysisD©a_TSHódInfo
–c⁄° *
§cD©a
, 
TS_HEAD_INFO
 *
desD©a
)

994 
GOSTSR_U8
 *
curD©a
 = 
GOSTSR_NULL
;

995 
GOSTSR_U16
 
ãmpD©a
 = 0;

997 i‡((
GOSTSR_NULL
 =
§cD©a
Ë|| (GOSTSR_NULL =
desD©a
))

999  
GOSTSR_FAILURE
;

1002 
curD©a
 = (
GOSTSR_U8
 *)
§cD©a
;

1005 i‡(
SYNC_BYTE
 !
curD©a
[0])

1010 
curD©a
++;

1012 
desD©a
->
îr‹_ödiˇãr
 = (
curD©a
[0] & 
BIT8
) / BIT8;

1013 #i‡
TSERROR_CHECK


1014 
GOSTSR_S32
 
s32Rë
 = 0;

1016 
s32Rë
 = 
TsEº‹Check_TwoLevñ_checkTøn•‹tEº‹
(&
desD©a
->
°Eº‹Info
,desD©a->
îr‹_ödiˇãr
);

1017 if(
s32Rë
 =
GOSTSR_SUCCESS
)

1019  
GOSTSR_FAILURE
;

1023 
desD©a
->
lﬂd_ödiˇãr
 = (
curD©a
[0] & 
BIT7
) / BIT7;

1028 
ãmpD©a
 = 
curD©a
[0]*256 + curData[1];

1029 
desD©a
->
ts_pid
 = 
ãmpD©a
 & (~((
BIT8
 | 
BIT7
 | 
BIT6
) * 256));

1031 #i‡
TSBAND_BANDWIDTH


1032 
tsb™d_°©i°ics_∑ckagïackë
(
desD©a
->
°Eº‹Info
.
ch™ID
,desD©a->
ts_pid
);

1033 
tsb™d_°©i°ics_≥•ackë
(
desD©a
->
°Eº‹Info
.
ch™ID
,desD©a->
ts_pid
);

1034 
tsb™d_°©i°ics_pid∑ckë
(
desD©a
->
°Eº‹Info
.
ch™ID
,desD©a->
ts_pid
);

1037 #i‡
TSERROR_CHECK


1038 
s32Rë
 = 
TsEº‹Check_O√Levñ_pidMissEº‹
(&
desD©a
->
°Eº‹Info
,desD©a->
ts_pid
);

1039 if(
s32Rë
 =
GOSTSR_SUCCESS
)

1044 
curD©a
 += 2;

1046 
desD©a
->
s¸ambÀ_c⁄åﬁ
 = (
curD©a
[0] & (
BIT8
 | 
BIT7
)) / BIT7;

1049 
desD©a
->
ad≠ãr_c⁄åﬁ
 = (
curD©a
[0] & (
BIT6
 | 
BIT5
)) / BIT5;

1052 
desD©a
->
cou¡î
 = 
curD©a
[0] & (
BIT4
 | 
BIT3
 | 
BIT2
 | 
BIT1
);

1054  
GOSTSR_SUCCESS
;

1057 
GOSTSR_S32
 
GosT§_A«lysisD©a_CheckTsHódInfo
(
TS_HEAD_INFO
 *
tsHódInfo
)

1059 
GOSTSR_S32
 
ªt
 = 
GOSTSR_SUCCESS
;

1062 i‡(
tsHódInfo
->
îr‹_ödiˇãr
 =
BIT1
)

1064 
ªt
 |
GOSTSR_FAILURE
;

1068 i‡(
tsHódInfo
->
s¸ambÀ_c⁄åﬁ
 !
BIT0
)

1070 
ªt
 |
GOSTSR_FAILURE
;

1074 i‡((
tsHódInfo
->
ad≠ãr_c⁄åﬁ
 & 
BIT1
) != BIT1)

1076 
ªt
 |
GOSTSR_FAILURE
;

1079  
ªt
;

1082 
GOSTSR_S32
 
GosT§_A«lysisD©a_Ad≠èti⁄Info
(
TS_HEAD_INFO
 *
desD©a
, c⁄° *
d©a
, 
TS_ADAPT_INFO
 *
ad≠tInfo
)

1084 
GOSTSR_U8
 *
curD©a
 = 
GOSTSR_NULL
;

1086 i‡((
GOSTSR_NULL
 =
desD©a
Ë|| (GOSTSR_NULL =
d©a
Ë|| (GOSTSR_NULL =
ad≠tInfo
))

1088  
GOSTSR_FAILURE
;

1091 #i‡
TSERROR_CHECK


1092 #i‡
TSERROR_ONE_LEVEL


1093 i‡((0 =
desD©a
->
ad≠ãr_c⁄åﬁ
) || (1 == desData->adapter_control))

1095 
TsEº‹Check_O√Levñ_C⁄töuôyCou¡îEº‹
(&
desD©a
->
°Eº‹Info
,desD©a->
ts_pid
,desD©a->
cou¡î
,desD©a->
ad≠ãr_c⁄åﬁ
,0);

1096  
GOSTSR_SUCCESS
;

1100 
curD©a
 = (
GOSTSR_U8
 *)
d©a
;

1101 
mem£t
(
ad≠tInfo
, 0x00, (
TS_ADAPT_INFO
));

1104 
ad≠tInfo
->
ad≠tLí
 = 
curD©a
[0];

1105 i‡(
ad≠tInfo
->
ad≠tLí
 > 0)

1107 
curD©a
++;

1110 
ad≠tInfo
->
disC⁄töuôyIndiˇt‹
 = (
BIT8
 & 
curD©a
[0]) / BIT8;

1111 #i‡
TSERROR_CHECK


1112 #i‡
TSERROR_ONE_LEVEL


1114 
TsEº‹Check_O√Levñ_C⁄töuôyCou¡îEº‹
(&
desD©a
->
°Eº‹Info
,desD©a->
ts_pid
,desD©a->
cou¡î
,desD©a->
ad≠ãr_c⁄åﬁ
,
ad≠tInfo
->
disC⁄töuôyIndiˇt‹
);

1119 
ad≠tInfo
->
øndomAc˚ssIndiˇt‹
 = (
BIT7
 & 
curD©a
[0]) / BIT7;

1122 
ad≠tInfo
->
esPri‹ôyIndiˇt‹
 = (
BIT6
 & 
curD©a
[0]) / BIT6;

1125 
ad≠tInfo
->
p¸Fœg
 = (
BIT5
 & 
curD©a
[0]) / BIT5;

1128 
ad≠tInfo
->
›¸Fœg
 = (
BIT4
 & 
curD©a
[0]) / BIT4;

1131 
ad≠tInfo
->
•licögPoötFœg
 = (
BIT3
 & 
curD©a
[0]) / BIT3;

1134 
ad≠tInfo
->
tsPriv©eFœg
 = (
BIT2
 & 
curD©a
[0]) / BIT2;

1137 
ad≠tInfo
->
ad≠tFõldExãnFœg
 = 
BIT1
 & 
curD©a
[0];

1139 
curD©a
++;

1142 i‡(
ad≠tInfo
->
p¸Fœg
 =
BIT1
)

1145 
ad≠tInfo
->
p¸Info
.
pgClockRfBa£
 = ((((
curD©a
[0]*256 + curD©a[1])*256 + curD©a[2])*256 + curD©a[3])*256 + (curD©a[4] & 
BIT8
)) / BIT8;

1146 
curD©a
 += 4;

1151 
ad≠tInfo
->
p¸Info
.
pgClockRfExãn
 = (
curD©a
[0] & 
BIT1
)*256 + curData[1];

1152 
curD©a
 += 2;

1153 #i‡
TSERROR_CHECK


1154 #i‡
TSERROR_TWO_LEVEL


1156 i‡(
ad≠tInfo
->
disC⁄töuôyIndiˇt‹
 =
BIT0
)

1158 
TsEº‹Check_TwoLevñ_checkP¸Eº‹
(&
desD©a
->
°Eº‹Info
,desD©a->
ts_pid
,
ad≠tInfo
->
p¸Info
.
pgClockRfBa£
,ád≠tInfo->p¸Info.
pgClockRfExãn
, 
GOSTSR_TRUE
);

1162 
TsEº‹Check_TwoLevñ_checkP¸Eº‹
(&
desD©a
->
°Eº‹Info
,desD©a->
ts_pid
,
ad≠tInfo
->
p¸Info
.
pgClockRfBa£
,ád≠tInfo->p¸Info.
pgClockRfExãn
, 
GOSTSR_FALSE
);

1169 i‡(
ad≠tInfo
->
›¸Fœg
 =
BIT1
)

1172 
ad≠tInfo
->
p¸Info
.
pgClockRfBa£
 = ((((
curD©a
[0]*256 + curD©a[1])*256 + curD©a[2])*256 + curD©a[3])*256 + (curD©a[4] & 
BIT8
)) / BIT8;

1173 
curD©a
 += 4;

1178 
ad≠tInfo
->
p¸Info
.
pgClockRfExãn
 = (
curD©a
[0] & 
BIT1
)*256 + curData[1];

1179 
curD©a
 += 2;

1183 i‡(
ad≠tInfo
->
•licögPoötFœg
 =
BIT1
)

1185 
ad≠tInfo
->
•li˚Cou¡Down
 = 
curD©a
[0];

1186 
curD©a
++;

1190 i‡(
ad≠tInfo
->
tsPriv©eFœg
 =
BIT1
)

1193 
ad≠tInfo
->
¥iv©eInfo
.
¥iD©aLí
 = 
curD©a
[0];

1194 
curD©a
++;

1197 
mem˝y
(
ad≠tInfo
->
¥iv©eInfo
.
¥iD©a
, 
curD©a
,ád≠tInfo->¥iv©eInfo.
¥iD©aLí
);

1198 
curD©a
 +
ad≠tInfo
->
¥iv©eInfo
.
¥iD©aLí
;

1202 i‡(
ad≠tInfo
->
ad≠tFõldExãnFœg
 =
BIT1
)

1205 
ad≠tInfo
->
exãnsi⁄Info
.
ad≠tExãnLí
 = 
curD©a
[0];

1206 
curD©a
++;

1209 
ad≠tInfo
->
exãnsi⁄Info
.
…wFœg
 = (
curD©a
[0] & 
BIT8
) / BIT8;

1212 
ad≠tInfo
->
exãnsi⁄Info
.
põ˚wi£R©eFœg
 = (
curD©a
[0] & 
BIT7
) / BIT7;

1215 
ad≠tInfo
->
exãnsi⁄Info
.
£amÀssS∂i˚Fœg
 = (
curD©a
[0] & 
BIT6
) / BIT6;

1218 
curD©a
++;

1221 i‡(
ad≠tInfo
->
exãnsi⁄Info
.
…wFœg
 =
BIT1
)

1224 
ad≠tInfo
->
exãnsi⁄Info
.
…wVÆidFœg
 = (
curD©a
[0] & 
BIT8
) / BIT8;

1227 
ad≠tInfo
->
exãnsi⁄Info
.
…wOff£t
 = (
curD©a
[0] & (~
BIT8
))*256 + curData[1];

1228 
curD©a
 += 2;

1232 i‡(
ad≠tInfo
->
exãnsi⁄Info
.
põ˚wi£R©eFœg
 =
BIT1
)

1237 
ad≠tInfo
->
exãnsi⁄Info
.
põ˚wi£R©e
 = (
curD©a
[0] & (~(
BIT8
 + 
BIT7
)))*256*256 + curData[1]*256 + curData[2];

1238 
curD©a
 += 3;

1242 i‡(
ad≠tInfo
->
exãnsi⁄Info
.
£amÀssS∂i˚Fœg
 =
BIT1
)

1245 
ad≠tInfo
->
exãnsi⁄Info
.
•li˚Ty≥
 = 
curD©a
[0] & (~(
BIT4
 + 
BIT3
 + 
BIT2
 + 
BIT1
));

1248 
ad≠tInfo
->
exãnsi⁄Info
.
DTSNextAU
 = ((
curD©a
[0] & (
BIT4
 + 
BIT3
 + 
BIT2
))<<29) + \

1249 ((
curD©a
[1]*256 + (curD©a[2] & (~
BIT1
)))<<14Ë+ (curD©a[3]*256 + (curD©a[4] & (~BIT1))Ë/ 
BIT2
;

1250 
curD©a
 += 5;

1259  
GOSTSR_SUCCESS
;

1262 
GOSTSR_S32
 
GosT§_A«lysisD©a_PESInfo
(
TS_HEAD_INFO
 *
desD©a
,c⁄° *
d©a
, 
TS_PES_INFO
 *
≥sInfo
)

1264 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

1266 i‡((
GOSTSR_NULL
 =
d©a
Ë|| (GOSTSR_NULL =
≥sInfo
Ë|| (GOSTSR_NULL =
desD©a
))

1268  
GOSTSR_FAILURE
;

1271 
pD©a
 = (
GOSTSR_U8
 *)
d©a
;

1272 
mem£t
(
≥sInfo
, 0x00, (
TS_PES_INFO
));

1276 
≥sInfo
->
ps˝
 = (
pD©a
[0]*256 +ÖData[1])*256 +ÖData[2];

1277 
pD©a
 += 3;

1280 
≥sInfo
->
°ªamId
 = 
pD©a
[0];

1281 
pD©a
 += 1;

1284 
≥sInfo
->
≥sPackëLí
 = 
pD©a
[0]*256 +ÖData[1];

1285 
pD©a
 += 2;

1287 i‡((
≥sInfo
->
°ªamId
 !
PROGRAM_STREAM_MAP
) \

1288 && (
≥sInfo
->
°ªamId
 !
PADDING_STREAM
) \

1289 && (
≥sInfo
->
°ªamId
 !
PRIVATE_STREAM_TWO
) \

1290 && (
≥sInfo
->
°ªamId
 !
ECM_STREAM
) \

1291 && (
≥sInfo
->
°ªamId
 !
EMM_STREAM
) \

1292 && (
≥sInfo
->
°ªamId
 !
PROGRAM_STREAM_DIR
))

1297 
≥sInfo
->
≥sS¸ambÀCå
 = (
pD©a
[0] & (
BIT6
 + 
BIT5
)) / BIT5;

1300 
≥sInfo
->
≥sPri‹ty
 = (
pD©a
[0] & 
BIT4
) / BIT4;

1303 
≥sInfo
->
d©aAlignmítIndiˇt‹
 = (
pD©a
[0] & 
BIT3
) / BIT3;

1306 
≥sInfo
->
c›yright
 = (
pD©a
[0] & 
BIT2
) / BIT2;

1309 
≥sInfo
->
‹igöÆOrC›y
 = 
pD©a
[0] & 
BIT1
;

1310 
pD©a
 += 1;

1313 
≥sInfo
->
PTSDTSFœg
 = (
pD©a
[0] & (
BIT8
 + 
BIT7
)) / BIT7;

1316 
≥sInfo
->
ESCRFœg
 = (
pD©a
[0] & 
BIT6
) / BIT6;

1319 
≥sInfo
->
EsR©eFœg
 = (
pD©a
[0] & 
BIT5
) / BIT5;

1322 
≥sInfo
->
DSMTrickModeFœg
 = (
pD©a
[0] & 
BIT4
) / BIT4;

1325 
≥sInfo
->
addôi⁄ÆC›yInfoFœg
 = (
pD©a
[0] & 
BIT3
) / BIT3;

1328 
≥sInfo
->
PESCRCFœg
 = (
pD©a
[0] & 
BIT2
) / BIT2;

1331 
≥sInfo
->
PESExãnsi⁄Fœg
 = 
pD©a
[0] & 
BIT1
;

1332 
pD©a
 += 1;

1335 
≥sInfo
->
PESHódîD©aLí
 = 
pD©a
[0];

1336 
pD©a
 += 1;

1339 i‡(
BIT2
 =
≥sInfo
->
PTSDTSFœg
)

1343 
≥sInfo
->
PTS
 = ((
pD©a
[0] & (
BIT4
 + 
BIT3
 + 
BIT2
))<<29) + \

1344 ((
pD©a
[1]*256 + (pD©a[2] & (~
BIT1
)))<<14Ë+ (’D©a[3]*256 + (pD©a[4] & (~BIT1))Ë/ 
BIT2
);

1345 
pD©a
 += 5;

1346 #i‡
TSERROR_CHECK


1347 #i‡
TSERROR_TWO_LEVEL


1349 
TsEº‹Check_TwoLevñ_checkPtsEº‹
(&
desD©a
->
°Eº‹Info
,desD©a->
ts_pid
);

1353 i‡((
BIT1
 + 
BIT2
Ë=
≥sInfo
->
PTSDTSFœg
)

1357 
≥sInfo
->
PTS
 = ((
pD©a
[0] & (
BIT4
 + 
BIT3
 + 
BIT2
))<<29) + \

1358 ((
pD©a
[1]*256 + (pD©a[2] & (~
BIT1
)))<<14Ë+ (’D©a[3]*256 + (pD©a[4] & (~BIT1))Ë/ 
BIT2
);

1359 
pD©a
 += 5;

1360 #i‡
TSERROR_CHECK


1361 #i‡
TSERROR_TWO_LEVEL


1363 
TsEº‹Check_TwoLevñ_checkPtsEº‹
(&
desD©a
->
°Eº‹Info
,desD©a->
ts_pid
);

1368 
≥sInfo
->
DTS
 = ((
pD©a
[0] & (
BIT4
 + 
BIT3
 + 
BIT2
))<<29) + \

1369 ((
pD©a
[1]*256 + (pD©a[2] & (~
BIT1
)))<<14Ë+ (’D©a[3]*256 + (pD©a[4] & (~BIT1))Ë/ 
BIT2
);

1370 
pD©a
 += 5;

1374 i‡(
≥sInfo
->
ESCRFœg
 =
BIT1
)

1379 
≥sInfo
->
ESCRBa£
 = ((
pD©a
[0] & (
BIT6
 + 
BIT5
 + 
BIT4
))<<27) + \

1380 ((((
pD©a
[0] & (
BIT2
 + 
BIT1
))*256 +ÖD©a[1])*256 + (pD©a[2] & (~(
BIT3
 + BIT2 + BIT1))))<<12) + \

1381 (((
pD©a
[2] & (
BIT2
 + 
BIT1
))*256 +ÖD©a[3])*256 + (pD©a[4]& (~(
BIT3
 + BIT2 + BIT1)))Ë/ 
BIT4
;

1385 
≥sInfo
->
ESCRExãn
 = ((
pD©a
[4] & (
BIT1
 + 
BIT2
))*256 + (pData[5] & (~BIT1))) / BIT2;

1386 
pD©a
 += 5;

1390 i‡(
≥sInfo
->
EsR©eFœg
 =
BIT1
)

1393 
≥sInfo
->
ESR©e
 = (((
pD©a
[0] & (~
BIT8
))*256 +ÖD©a[1])*256 + (pD©a[2] & (~
BIT1
))Ë/ 
BIT2
;

1394 
pD©a
 += 3;

1398 i‡(
≥sInfo
->
DSMTrickModeFœg
 =
BIT1
)

1401 
≥sInfo
->
åickModeCå
 = (
pD©a
[0] & (
BIT8
 + 
BIT7
 + 
BIT6
)) / BIT6;

1403 i‡((
BIT0
 =
≥sInfo
->
åickModeCå
Ë|| ((
BIT2
 + 
BIT1
) ==ÖesInfo->trickModeCtr))

1406 
≥sInfo
->
fõldId
 = (
pD©a
[0] & (
BIT5
 + 
BIT4
)) / BIT4;

1409 
≥sInfo
->
öåaSli˚Re‰esh
 = (
pD©a
[0] & 
BIT3
) / BIT3;

1412 
≥sInfo
->
‰equícyTrunˇti⁄
 = 
pD©a
[0] & (
BIT2
 + 
BIT1
);

1414 i‡((
BIT1
 =
≥sInfo
->
åickModeCå
Ë|| (
BIT3
 ==ÖesInfo->trickModeCtr))

1417 
≥sInfo
->
fõldRïC¡æ
 = 
pD©a
[0] & (~(
BIT8
 + 
BIT7
 + 
BIT6
));

1419 i‡(
BIT2
 =
≥sInfo
->
åickModeCå
)

1422 
≥sInfo
->
fõldId
 = (
pD©a
[0] & (
BIT5
 + 
BIT4
)) / BIT4;

1431 
pD©a
 += 1;

1435 i‡(
≥sInfo
->
addôi⁄ÆC›yInfoFœg
 =
BIT1
)

1438 
≥sInfo
->
addôi⁄ÆC›yInfo
 = 
pD©a
[0] & (~
BIT8
);

1439 
pD©a
 += 1;

1443 i‡(
≥sInfo
->
PESCRCFœg
 =
BIT1
)

1446 
≥sInfo
->
¥eviousPESPackëCRC
 = 
pD©a
[0]*256 +ÖData[1];

1447 
pD©a
 += 2;

1451 i‡(
≥sInfo
->
PESExãnsi⁄Fœg
 =
BIT1
)

1454 
≥sInfo
->
≥sExãnsi⁄Info
.
PESPriv©eD©aFœg
 = (
pD©a
[0] & 
BIT8
) / BIT8;

1457 
≥sInfo
->
≥sExãnsi⁄Info
.
∑ckHódîFõldFœg
 = (
pD©a
[0] & 
BIT7
) / BIT7;

1460 
≥sInfo
->
≥sExãnsi⁄Info
.
¥ogømPackëSequí˚Cou¡îFœg
 = (
pD©a
[0] & 
BIT6
) / BIT6;

1463 
≥sInfo
->
≥sExãnsi⁄Info
.
PSTDBuf„rFœg
 = (
pD©a
[0] & 
BIT5
) / BIT5;

1468 
≥sInfo
->
≥sExãnsi⁄Info
.
PESExãnsi⁄Fœg2
 = 
pD©a
[0] & 
BIT1
;

1469 
pD©a
 += 1;

1472 i‡(
≥sInfo
->
≥sExãnsi⁄Info
.
PESPriv©eD©aFœg
 =
BIT1
)

1476 
pD©a
 += 16;

1480 i‡(
≥sInfo
->
≥sExãnsi⁄Info
.
∑ckHódîFõldFœg
 =
BIT1
)

1483 
≥sInfo
->
≥sExãnsi⁄Info
.
∑ckFõldLí
 = 
pD©a
[0];

1484 
pD©a
 += 1;

1487 
pD©a
 +
≥sInfo
->
≥sExãnsi⁄Info
.
∑ckFõldLí
;

1491 i‡(
≥sInfo
->
≥sExãnsi⁄Info
.
¥ogømPackëSequí˚Cou¡îFœg
 =
BIT1
)

1494 
≥sInfo
->
≥sExãnsi⁄Info
.
¥ogømPackëSequí˚Cou¡î
 = 
pD©a
[0] & (~
BIT8
);

1495 
pD©a
 += 1;

1498 
≥sInfo
->
≥sExãnsi⁄Info
.
MPEG1MPEG2Idítifõr
 = (
pD©a
[0] & 
BIT7
) / BIT7;

1501 
≥sInfo
->
≥sExãnsi⁄Info
.
‹igöÆStuffLí
 = 
pD©a
[0] & (~(
BIT8
 + 
BIT7
));

1502 
pD©a
 += 1;

1506 i‡(
≥sInfo
->
≥sExãnsi⁄Info
.
PSTDBuf„rFœg
 =
BIT1
)

1511 
≥sInfo
->
≥sExãnsi⁄Info
.
PSTDBuf„rSˇÀ
 = (
pD©a
[0] & 
BIT6
) / BIT6;

1514 
≥sInfo
->
≥sExãnsi⁄Info
.
PSTDBuf„rSize
 = (
pD©a
[0] & (~(
BIT8
 + 
BIT7
 + 
BIT6
)))*256 +ÖData[1];

1515 
pD©a
 += 2;

1519 i‡(
≥sInfo
->
≥sExãnsi⁄Info
.
PESExãnsi⁄Fœg2
 =
BIT1
)

1522 
≥sInfo
->
≥sExãnsi⁄Info
.
PESExãnsi⁄FõldLí
 = 
pD©a
[0] & (~
BIT8
);

1523 
pD©a
 += 1;

1526 
pD©a
 +
≥sInfo
->
≥sExãnsi⁄Info
.
PESExãnsi⁄FõldLí
;

1534 if((
≥sInfo
->
°ªamId
 =
PROGRAM_STREAM_MAP
) \

1535 || (
≥sInfo
->
°ªamId
 =
PRIVATE_STREAM_TWO
) \

1536 || (
≥sInfo
->
°ªamId
 =
ECM_STREAM
) \

1537 || (
≥sInfo
->
°ªamId
 =
EMM_STREAM
) \

1538 || (
≥sInfo
->
°ªamId
 =
PROGRAM_STREAM_DIR
))

1542 i‡(
≥sInfo
->
°ªamId
 =
PADDING_STREAM
)

1547  
GOSTSR_SUCCESS
;

1550 
GOSTSR_S32
 
GosT§_A«lysisD©a_PSI
(c⁄° *
d©a
, 
TS_HEAD_INFO
 *
tsHódInfo
)

1552 
GOSTSR_S32
 
i
 = 0;

1553 
GOSTSR_S32
 
ªt
 = 
GOSTSR_FAILURE
;

1555 i‡((
GOSTSR_NULL
 =
d©a
Ë|| (GOSTSR_NULL =
tsHódInfo
))

1557  
GOSTSR_FAILURE
;

1559 #i‡
TSERROR_CHECK


1560 #i‡
TSERROR_THREE_LEVEL


1561 
TsEº‹Check_ThªeLevñ_Uƒe„ªn˚dPidEº‹
(
tsHódInfo
);

1564 
tsHódInfo
->
ts_pid
)

1566 
PAT_PID
:

1567 
ªt
 = 
GosT§_A«lysisD©a_TabÀID
(
PAT_TABLE_ID
, 
d©a
, 
tsHódInfo
);

1570 
CAT_PID
:

1571 
ªt
 = 
GosT§_A«lysisD©a_TabÀID
(
CAT_TABLE_ID
, 
d©a
, 
tsHódInfo
);

1574 
NIT_PID
:

1575 
ªt
 = 
GosT§_A«lysisD©a_TabÀID
(
NIT_TABLE_ID_ACTUAL
, 
d©a
, 
tsHódInfo
);

1576 i‡(
ªt
 =
GOSTSR_FAILURE
)

1578 
ªt
 = 
GosT§_A«lysisD©a_TabÀID
(
NIT_TABLE_ID_OTHER
, 
d©a
, 
tsHódInfo
);

1585 
i
 = 0; i < 
g°P©Info
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
].
u16NbEÀmíts
;i++)

1587 if(
g°P©Info
[
tsHódInfo
->
°Eº‹Info
.
ch™ID
].
a°EÀmít
[
i
].
u16Pid
 =tsHódInfo->
ts_pid
)

1590 
ªt
 |
GosT§_A«lysisD©a_TabÀID
(
PMT_TABLE_ID
, 
d©a
, 
tsHódInfo
);

1599  
ªt
;

1602 
GOSTSR_S32
 
GosT§_A«lysisD©a_SI
(c⁄° *
d©a
, 
TS_HEAD_INFO
 *
tsHódInfo
)

1604 
GOSTSR_S32
 
ªt
 = 
GOSTSR_FAILURE
;

1606 i‡(
GOSTSR_NULL
 =
d©a
)

1608  
GOSTSR_FAILURE
;

1611 
tsHódInfo
->
ts_pid
)

1613 
BAT_SDT_PID
:

1614 
ªt
 = 
GosT§_A«lysisD©a_TabÀID
(
BAT_TABLE_ID
, 
d©a
, 
tsHódInfo
);

1615 i‡(
GOSTSR_FAILURE
 =
ªt
)

1617 
ªt
 = 
GosT§_A«lysisD©a_TabÀID
(
SDT_TABLE_ID_ACTUAL
, 
d©a
, 
tsHódInfo
);

1619 i‡(
ªt
 =
GOSTSR_FAILURE
)

1621 
ªt
 = 
GosT§_A«lysisD©a_TabÀID
(
SDT_TABLE_ID_OTEHR
, 
d©a
, 
tsHódInfo
);

1625 
EIT_PID
:

1626 
ªt
 = 
GosT§_A«lysisD©a_TabÀID
(
EIT_TABLE_ID_ACTUAL
, 
d©a
, 
tsHódInfo
);

1627 i‡(
ªt
 =
GOSTSR_FAILURE
)

1629 
ªt
 = 
GosT§_A«lysisD©a_TabÀID
(
EIT_TABLE_ID_OTHER
, 
d©a
, 
tsHódInfo
);

1631 i‡(
ªt
 =
GOSTSR_FAILURE
)

1633 
ªt
 = 
GosT§_A«lysisD©a_TabÀID
(
EIT_TABLE_ID_OTHER_SHEDULE
, 
d©a
, 
tsHódInfo
);

1635 i‡(
ªt
 =
GOSTSR_FAILURE
)

1637 
ªt
 = 
GosT§_A«lysisD©a_TabÀID
(
EIT_TABLE_ID_ACTUAL_SHEDULE
, 
d©a
, 
tsHódInfo
);

1641 
RST_PID
:

1642 
ªt
 = 
GosT§_A«lysisD©a_TabÀID
(
RST_TABLE_ID
, 
d©a
, 
tsHódInfo
);

1645 
TDT_TOT_PID
:

1646 
ªt
 = 
GosT§_A«lysisD©a_TabÀID
(
TDT_TABLE_ID
, 
d©a
, 
tsHódInfo
);

1647 i‡(
GOSTSR_FAILURE
 =
ªt
)

1649 
ªt
 = 
GosT§_A«lysisD©a_TabÀID
(
TOT_TABLE_ID
, 
d©a
, 
tsHódInfo
);

1654 i‡((
SI_PID_MIN
 <
tsHódInfo
->
ts_pid
Ë&& (tsHódInfo->ts_pid <
SI_PID_MAX
))

1656 
ªt
 = 
GosT§_A«lysisD©a_TabÀID
(
SI_TABLE_ID
, 
d©a
, 
tsHódInfo
);

1660  
ªt
;

1663 
GOSTSR_S32
 
GosT§_A«lysisD©a_PAT
(
TS_SECTION_INFO
 *
£˘i⁄Info
, 
GOSTSR_PSISI_PAT_S
 *
∑tInfo
)

1665 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

1666 
GOSTSR_U16
 
ãmpD©a
 = 0;

1667 
GOSTSR_U16
 
i
 = 0;

1668 
GOSTSR_U32
 
¸cVÆue
 = 0;

1669 
GOSTSR_U16
 
u16OvîNbEÀmíts
 = 0;

1671 i‡((
GOSTSR_NULL
 =
£˘i⁄Info
Ë|| (GOSTSR_NULL =£˘i⁄Info->
£˘i⁄D©a
Ë|| (GOSTSR_NULL =
∑tInfo
))

1673  
GOSTSR_FAILURE
;

1676 
pD©a
 = 
£˘i⁄Info
->
£˘i⁄D©a
;

1677 
mem£t
(
∑tInfo
, 0x00, (
GOSTSR_PSISI_PAT_S
));

1678 
pD©a
 += 3;

1681 
∑tInfo
->
u8TabÀId
 = 
£˘i⁄Info
->
èbÀID
;

1684 
ãmpD©a
 = 
pD©a
[0]*256 +ÖData[1];

1685 
∑tInfo
->
u16Tøn•‹tSåómId
 = 
ãmpD©a
;

1686 
pD©a
 += 2;

1691 
∑tInfo
->
u8Vîsi⁄
 = (
pD©a
[0] & (~(
BIT8
 | 
BIT7
 | 
BIT1
))Ë/ 
BIT2
;

1694 
ãmpD©a
 = 
pD©a
[0] & 
BIT1
;

1695 i‡(
BIT1
 !
ãmpD©a
)

1697  
GOSTSR_FAILURE
;

1699 
pD©a
 += 1;

1702 
∑tInfo
->
u8Se˘i⁄Num
 = 
pD©a
[0];

1703 
pD©a
 += 1;

1706 
∑tInfo
->
u8La°Se˘i⁄Num
 = 
pD©a
[0];

1707 
pD©a
 += 1;

1709 
∑tInfo
->
u16NbEÀmíts
 = (
£˘i⁄Info
->
£˘i⁄Lígth
 - 8 - 4) / 4;

1711 i‡(
∑tInfo
->
u16NbEÀmíts
 > 
GOS_MAX_SERVICE_NUM
)

1713 
u16OvîNbEÀmíts
 = 
∑tInfo
->
u16NbEÀmíts
 - 
GOS_MAX_SERVICE_NUM
;

1714 
∑tInfo
->
u16NbEÀmíts
 = 
GOS_MAX_SERVICE_NUM
;

1717 
i
 = 0; i < 
∑tInfo
->
u16NbEÀmíts
; i++)

1720 
∑tInfo
->
a°EÀmít
[
i
].
u16ProgømNumbî
 = 
pD©a
[0]*256 +ÖData[1];

1723 
∑tInfo
->
a°EÀmít
[
i
].
u16Pid
 = (
pD©a
[2] & (~(
BIT8
 | 
BIT7
 | 
BIT6
)))*256 +ÖData[3] ;

1725 
pD©a
 += 4;

1728 i‡(0 !
u16OvîNbEÀmíts
)

1730 
pD©a
 +4 * 
u16OvîNbEÀmíts
;

1734 
¸cVÆue
 = (
pD©a
[0]<<24) + (pData[1]<<16) + (pData[2]<<8) +ÖData[3];

1735 
∑tInfo
->
u32CrcVÆue
 = 
¸cVÆue
;

1736 
pD©a
 = 
GOSTSR_NULL
;

1738 
GosT§_A«lysisD©a_Re£tPMTID
();

1739 
GosT§_A«lysisD©a_GëPMTID
(
∑tInfo
);

1740 
GosT§_A«lysisD©a_gëP©Info
(
£˘i⁄Info
->
°Eº‹Info
.
ch™ID
,
∑tInfo
);

1742  
GOSTSR_SUCCESS
;

1745 
GOSTSR_S32
 
GosT§_A«lysisD©a_CAT
(
TS_SECTION_INFO
 *
£˘i⁄Info
, 
GOSTSR_PSISI_CAT_S
 *
ˇtInfo
)

1747 
GOSTSR_U16
 
i
 = 0;

1748 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

1749 
GOSTSR_U16
 
ãmpD©a
 = 0;

1750 
GOSTSR_S32
 
desTŸÆLígth
 = 0;

1751 
GOSTSR_U16
 
desSögÀLígth
 = 0;

1752 
GOSTSR_U32
 
¸cVÆue
 = 0;

1754 i‡((
GOSTSR_NULL
 =
£˘i⁄Info
Ë|| (GOSTSR_NULL =£˘i⁄Info->
£˘i⁄D©a
Ë|| (GOSTSR_NULL =
ˇtInfo
))

1756  
GOSTSR_FAILURE
;

1759 
pD©a
 = 
£˘i⁄Info
->
£˘i⁄D©a
;

1760 
mem£t
(
ˇtInfo
, 0x00, (
GOSTSR_PSISI_CAT_S
));

1761 
pD©a
 += 3;

1764 
ˇtInfo
->
u8TabÀId
 = 
£˘i⁄Info
->
èbÀID
;

1767 
pD©a
 += 2;

1770 
ˇtInfo
->
u8Vîsi⁄
 = (
pD©a
[0] & (~(
BIT8
 | 
BIT7
 | 
BIT1
))Ë/ 
BIT2
;

1773 
ãmpD©a
 = 
pD©a
[0] & 
BIT1
;

1774 i‡(
BIT1
 !
ãmpD©a
)

1776  
GOSTSR_FAILURE
;

1778 
pD©a
 += 1;

1781 
ˇtInfo
->
u8Se˘i⁄Num
 = 
pD©a
[0];

1782 
pD©a
 += 1;

1785 
ˇtInfo
->
u8La°Se˘i⁄Num
 = 
pD©a
[0];

1786 
pD©a
 += 1;

1788 
desTŸÆLígth
 = 
£˘i⁄Info
->
£˘i⁄Lígth
 - 8 - 4;

1789 
i
 = 0;

1791 
desTŸÆLígth
 > 0)

1794 
ˇtInfo
->
a°Des¸ùt‹
[
i
].
Tag
 = (
GOS_PSISI_DESCRIPTORTYPE_E
)
pD©a
[0];

1795 
pD©a
 += 1;

1798 
desSögÀLígth
 = 
pD©a
[0];

1799 
ˇtInfo
->
a°Des¸ùt‹
[
i
].
u16Size
 = 
desSögÀLígth
;

1800 
pD©a
 += 1;

1802 i‡((
desTŸÆLígth
 - (
desSögÀLígth
 + 2)) < 0)

1804 
pD©a
 +(
desTŸÆLígth
 - 2);

1809 
ˇtInfo
->
a°Des¸ùt‹
[
i
].
D©a
 = (
GOSTSR_U8
 *Ë
mÆloc
(
desSögÀLígth
);

1810 
mem£t
(
ˇtInfo
->
a°Des¸ùt‹
[
i
].
D©a
, 0x00, 
desSögÀLígth
);

1811 
mem˝y
(
ˇtInfo
->
a°Des¸ùt‹
[
i
].
D©a
, 
pD©a
, 
desSögÀLígth
);

1813 
pD©a
 +
desSögÀLígth
;

1814 
desTŸÆLígth
 -(
desSögÀLígth
 + 2);

1815 
i
++;

1817 i‡(
i
 >
GOS_MAX_CAT_DESCRIPTOR
)

1819 
pD©a
 +
desTŸÆLígth
;

1823 
ˇtInfo
->
u16NbDes¸ùt‹s
 = 
i
;

1826 
¸cVÆue
 = (
pD©a
[0]<<24) + (pData[1]<<16) + (pData[2]<<8) +ÖData[3];

1827 
ˇtInfo
->
u32CrcVÆue
 = 
¸cVÆue
;

1830 
pD©a
 = 
GOSTSR_NULL
;

1832  
GOSTSR_SUCCESS
;

1835 
GOSTSR_S32
 
GosT§_A«lysisD©a_NIT
(
TS_SECTION_INFO
 *
£˘i⁄Info
, 
GOSTSR_PSISI_NIT_S
 *
nôInfo
)

1837 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

1838 
GOSTSR_U16
 
ãmpD©a
 = 0;

1839 
GOSTSR_S32
 
√tDesTŸÆLí
 = 0;

1840 
GOSTSR_U16
 
√tDesSögÀLí
 = 0;

1841 
GOSTSR_S32
 
√tEÀmítTŸÆLí
 = 0;

1842 
GOSTSR_U16
 
i
 = 0, 
j
 = 0;

1843 
GOSTSR_U32
 
¸cVÆue
 = 0;

1845 i‡((
GOSTSR_NULL
 =
£˘i⁄Info
Ë|| (GOSTSR_NULL =£˘i⁄Info->
£˘i⁄D©a
Ë|| (GOSTSR_NULL =
nôInfo
))

1847  
GOSTSR_FAILURE
;

1850 
pD©a
 = 
£˘i⁄Info
->
£˘i⁄D©a
;

1851 
mem£t
(
nôInfo
, 0x00, (
GOSTSR_PSISI_NIT_S
));

1852 
pD©a
 += 3;

1855 
nôInfo
->
u8TabÀId
 = 
£˘i⁄Info
->
èbÀID
;

1858 
nôInfo
->
u16NëW‹kId
 = 
pD©a
[0]*256 +pData[1];

1859 
pD©a
 += 2;

1864 
nôInfo
->
u8Vîsi⁄
 = (
pD©a
[0] & (~(
BIT8
 | 
BIT7
 | 
BIT1
))Ë/ 
BIT2
;

1867 
ãmpD©a
 = 
pD©a
[0] & 
BIT1
;

1868 i‡(
BIT1
 !
ãmpD©a
)

1870  
GOSTSR_FAILURE
;

1872 
pD©a
 += 1;

1875 
nôInfo
->
u8Se˘i⁄Num
 = 
pD©a
[0];

1876 
pD©a
 += 1;

1879 
nôInfo
->
u8La°Se˘i⁄Num
 = 
pD©a
[0];

1880 
pD©a
 += 1;

1885 
√tDesTŸÆLí
 = (
pD©a
[0] & (~(
BIT8
 | 
BIT7
 | 
BIT6
 | 
BIT5
)))*256 +ÖData[1];

1886 
pD©a
 += 2;

1889 
i
 = 0;

1890 
√tDesTŸÆLí
 > 0)

1893 
nôInfo
->
a°Des¸ùt‹
[
i
].
Tag
 = (
GOS_PSISI_DESCRIPTORTYPE_E
)
pD©a
[0];

1894 
pD©a
 += 1;

1897 
√tDesSögÀLí
 = 
pD©a
[0];

1898 
nôInfo
->
a°Des¸ùt‹
[
i
].
u16Size
 = 
√tDesSögÀLí
;

1899 
pD©a
 += 1;

1901 i‡((
√tDesTŸÆLí
 - (
√tDesSögÀLí
 + 2)) < 0)

1903 
pD©a
 +(
√tDesTŸÆLí
 - 2);

1908 
nôInfo
->
a°Des¸ùt‹
[
i
].
D©a
 = (
GOSTSR_U8
 *)
mÆloc
(
√tDesSögÀLí
);

1909 
mem£t
(
nôInfo
->
a°Des¸ùt‹
[
i
].
D©a
, 0x00, 
√tDesSögÀLí
);

1910 
mem˝y
(
nôInfo
->
a°Des¸ùt‹
[
i
].
D©a
, 
pD©a
, 
√tDesSögÀLí
);

1911 
pD©a
 +
√tDesSögÀLí
;

1913 
√tDesTŸÆLí
 -(
√tDesSögÀLí
 + 2);

1914 
i
++;

1916 i‡(
i
 >
GOS_MAX_NIT_DESCIP_LOOP
)

1918 
pD©a
 +
√tDesTŸÆLí
;

1922 
nôInfo
->
u16NbDes¸ùt‹s
 = 
i
;

1927 
√tEÀmítTŸÆLí
 = (
pD©a
[0] & (~(
BIT8
 | 
BIT7
 | 
BIT6
 | 
BIT5
)))*256 +ÖData[1];

1928 
pD©a
 += 2;

1931 
j
 = 0; 
i
 = 0;

1932 
√tEÀmítTŸÆLí
 > 0)

1935 
nôInfo
->
a°EÀmít
[
i
].
u16Tøn•‹tSåómId
 = 
pD©a
[0]*256 +ÖData[1];

1936 
pD©a
 += 2;

1939 
nôInfo
->
a°EÀmít
[
i
].
u16OrigöÆNëW‹kId
 = 
pD©a
[0]*256 +ÖData[1];

1940 
pD©a
 += 2;

1945 
√tDesTŸÆLí
 = (
pD©a
[0] & (~(
BIT8
 | 
BIT7
 | 
BIT6
 | 
BIT5
)))*256 +ÖData[1];

1946 
pD©a
 += 2;

1948 i‡((
√tEÀmítTŸÆLí
 - (6 + 
√tDesTŸÆLí
)) < 0)

1950 
pD©a
 +(
√tEÀmítTŸÆLí
 - 6);

1954 
√tEÀmítTŸÆLí
 -(6 + 
√tDesTŸÆLí
);

1956 
j
 = 0;

1957 
√tDesTŸÆLí
 > 0)

1960 
nôInfo
->
a°EÀmít
[
i
].
a°Des¸ùt‹
[
j
].
Tag
 = (
GOS_PSISI_DESCRIPTORTYPE_E
)
pD©a
[0];

1961 
pD©a
 += 1;

1964 
√tDesSögÀLí
 = 
pD©a
[0];

1965 
nôInfo
->
a°EÀmít
[
i
].
a°Des¸ùt‹
[
j
].
u16Size
 = 
√tDesSögÀLí
;

1966 
pD©a
 += 1;

1968 i‡((
√tDesTŸÆLí
 - (
√tDesSögÀLí
 + 2)) < 0)

1970 
pD©a
 +(
√tDesTŸÆLí
 - 2);

1975 
nôInfo
->
a°EÀmít
[
i
].
a°Des¸ùt‹
[
j
].
D©a
 = (
GOSTSR_U8
 *)
mÆloc
(
√tDesSögÀLí
);

1976 
mem£t
(
nôInfo
->
a°EÀmít
[
i
].
a°Des¸ùt‹
[
j
].
D©a
, 0x00, 
√tDesSögÀLí
);

1977 
mem˝y
(
nôInfo
->
a°EÀmít
[
i
].
a°Des¸ùt‹
[
j
].
D©a
, 
pD©a
, 
√tDesSögÀLí
);

1979 
pD©a
 +
√tDesSögÀLí
;

1980 
√tDesTŸÆLí
 -(
√tDesSögÀLí
 + 2);

1981 
j
++;

1983 i‡(
j
 >
GOS_MAX_NIT_ELEMENT_DESCRIPTOR
)

1985 
pD©a
 +
√tDesTŸÆLí
;

1989 
nôInfo
->
a°EÀmít
[
i
].
u16NbDes¸ùt‹s
 = 
j
;

1991 
i
++;

1993 i‡(
i
 >
GOS_MAX_NIT_ELEMENT
)

1995 
pD©a
 +
√tEÀmítTŸÆLí
;

1999 
nôInfo
->
u16NbEÀmíts
 = 
i
;

2002 
¸cVÆue
 = (
pD©a
[0]<<24) + (pData[1]<<16) + (pData[2]<<8) +ÖData[3];

2003 
nôInfo
->
u32CrcVÆue
 = 
¸cVÆue
;

2005 
pD©a
 = 
GOSTSR_NULL
;

2007  
GOSTSR_SUCCESS
;

2010 
GOSTSR_S32
 
GosT§_A«lysisD©a_PMT
(
TS_SECTION_INFO
 *
£˘i⁄Info
, 
GOSTSR_PSISI_PMT_S
 *
pmtInfo
)

2012 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

2013 
GOSTSR_U16
 
ãmpD©a
 = 0;

2014 
GOSTSR_U16
 
i
 = 0, 
j
 = 0;

2015 
GOSTSR_S32
 
pmtDesTŸÆLí
 = 0;

2016 
GOSTSR_U16
 
pmtDesSögÀLí
 = 0;

2017 
GOSTSR_S32
 
pmtElmTŸÆLí
 = 0;

2018 
GOSTSR_U32
 
¸cVÆue
 = 0;

2020 i‡((
GOSTSR_NULL
 =
£˘i⁄Info
Ë|| (GOSTSR_NULL =£˘i⁄Info->
£˘i⁄D©a
Ë|| (GOSTSR_NULL =
pmtInfo
Ë|| (0 =
pmtsPIDNumbî
))

2022  
GOSTSR_FAILURE
;

2025 
pD©a
 = 
£˘i⁄Info
->
£˘i⁄D©a
;

2026 
mem£t
(
pmtInfo
, 0x00, (
GOSTSR_PSISI_PMT_S
));

2027 
pD©a
 += 3;

2030 
pmtInfo
->
u8TabÀId
 = 
£˘i⁄Info
->
èbÀID
;

2033 
pmtInfo
->
u16ProgømNumbî
 = 
pD©a
[0]*256 +ÖData[1];

2034 
pD©a
 += 2;

2039 
pmtInfo
->
u8Vîsi⁄
 = (
pD©a
[0] & (~(
BIT8
 | 
BIT7
 | 
BIT1
))Ë/ 
BIT2
;

2042 
ãmpD©a
 = 
pD©a
[0] & 
BIT1
;

2043 i‡(
BIT1
 !
ãmpD©a
)

2045  
GOSTSR_FAILURE
;

2047 
pD©a
 += 1;

2050 
pmtInfo
->
u8Se˘i⁄Num
 = 
pD©a
[0];

2051 
pD©a
 += 1;

2054 
pmtInfo
->
u8La°Se˘i⁄Num
 = 
pD©a
[0];

2055 
pD©a
 += 1;

2060 
pmtInfo
->
u16P¸Pid
 = (
pD©a
[0] & (~(
BIT8
 | 
BIT7
 | 
BIT6
)))*256 +ÖData[1];

2061 
pD©a
 += 2;

2066 
pmtDesTŸÆLí
 = (
pD©a
[0] & (~(
BIT8
 | 
BIT7
 | 
BIT6
 | 
BIT5
)))*256 +ÖData[1];

2067 
pD©a
 += 2;

2069 
pmtElmTŸÆLí
 = 
£˘i⁄Info
->
£˘i⁄Lígth
 - 4 - 
pmtDesTŸÆLí
 - 12;

2071 
i
 = 0;

2073 
pmtDesTŸÆLí
 > 0)

2076 
pmtInfo
->
a°Des¸ùt‹
[
i
].
Tag
 = (
GOS_PSISI_DESCRIPTORTYPE_E
)
pD©a
[0];

2077 
pD©a
 += 1;

2080 
pmtDesSögÀLí
 = 
pD©a
[0];

2081 
pmtInfo
->
a°Des¸ùt‹
[
i
].
u16Size
 = 
pmtDesSögÀLí
;

2082 
pD©a
 += 1;

2084 i‡((
pmtDesTŸÆLí
 - (
pmtDesSögÀLí
 + 2)) < 0)

2086 
pD©a
 +(
pmtDesTŸÆLí
 - 2);

2091 
pmtInfo
->
a°Des¸ùt‹
[
i
].
D©a
 = (
GOSTSR_U8
 *)
mÆloc
(
pmtDesSögÀLí
);

2092 
mem£t
(
pmtInfo
->
a°Des¸ùt‹
[
i
].
D©a
, 0x00, 
pmtDesSögÀLí
);

2093 
mem˝y
(
pmtInfo
->
a°Des¸ùt‹
[
i
].
D©a
, 
pD©a
, 
pmtDesSögÀLí
);

2095 
pD©a
 +
pmtDesSögÀLí
;

2096 
pmtDesTŸÆLí
 -(
pmtDesSögÀLí
 + 2);

2097 
i
++;

2099 i‡(
i
 >
GOS_MAX_PMT_DESCIP_LOOP1
)

2101 
pD©a
 +
pmtDesTŸÆLí
;

2105 
pmtInfo
->
u16NbDes¸ùt‹s
 = 
i
;

2107 
i
 = 0;
j
 = 0;

2108 
pmtElmTŸÆLí
 > 0)

2111 
pmtInfo
->
a°EÀmít
[
i
].
eTy≥
 = (
GOS_PSISI_STREAMTYPE_E
)
pD©a
[0];

2112 
pD©a
 += 1;

2117 
pmtInfo
->
a°EÀmít
[
i
].
u16Pid
 = (
pD©a
[0] & (~(
BIT8
 | 
BIT7
 | 
BIT6
)))*256 +ÖData[1];

2118 
pD©a
 += 2;

2123 
pmtDesTŸÆLí
 = (
pD©a
[0] & (~(
BIT8
 | 
BIT7
 | 
BIT6
 | 
BIT5
)))*256 +ÖData[1];

2124 
pD©a
 += 2;

2126 i‡((
pmtElmTŸÆLí
 - (
pmtDesTŸÆLí
 + 5)) < 0)

2128 
pD©a
 +(
pmtElmTŸÆLí
 - 5);

2132 
pmtElmTŸÆLí
 -(
pmtDesTŸÆLí
 + 5);

2134 
j
 = 0;

2136 
pmtDesTŸÆLí
 > 0)

2139 
pmtInfo
->
a°EÀmít
[
i
].
a°Des¸ùt‹
[
j
].
Tag
 = (
GOS_PSISI_DESCRIPTORTYPE_E
)
pD©a
[0];

2140 
pD©a
 += 1;

2143 
pmtDesSögÀLí
 = 
pD©a
[0];

2144 
pmtInfo
->
a°EÀmít
[
i
].
a°Des¸ùt‹
[
j
].
u16Size
 = 
pmtDesSögÀLí
;

2145 
pD©a
 += 1;

2147 i‡((
pmtDesTŸÆLí
 - (
pmtDesSögÀLí
 + 2)) < 0)

2149 
pD©a
 +(
pmtDesTŸÆLí
 - 2);

2154 
pmtInfo
->
a°EÀmít
[
i
].
a°Des¸ùt‹
[
j
].
D©a
 = (
GOSTSR_U8
 *)
mÆloc
(
pmtDesSögÀLí
);

2155 
mem£t
(
pmtInfo
->
a°EÀmít
[
i
].
a°Des¸ùt‹
[
j
].
D©a
, 0x00, 
pmtDesSögÀLí
);

2156 
mem˝y
(
pmtInfo
->
a°EÀmít
[
i
].
a°Des¸ùt‹
[
j
].
D©a
, 
pD©a
, 
pmtDesSögÀLí
);

2158 
pD©a
 +
pmtDesSögÀLí
;

2159 
pmtDesTŸÆLí
 -(
pmtDesSögÀLí
 + 2);

2160 
j
++;

2162 i‡(
j
 >
GOS_MAX_PMT_ELEMENT_DESCRIPTOR
)

2164 
pD©a
 +
pmtDesTŸÆLí
;

2168 
pmtInfo
->
a°EÀmít
[
i
].
u16NbDes¸ùt‹s
 = 
j
;

2170 
i
++;

2172 i‡(
i
 >
GOS_MAX_PMT_ELEMENT
)

2174 
pD©a
 +
pmtElmTŸÆLí
;

2178 
pmtInfo
->
u16NbEÀmíts
 = 
i
;

2181 
¸cVÆue
 = (
pD©a
[0]<<24) + (pData[1]<<16) + (pData[2]<<8) +ÖData[3];

2182 
pmtInfo
->
u32CrcVÆue
 = 
¸cVÆue
;

2183 
pD©a
 = 
GOSTSR_NULL
;

2185  
GOSTSR_SUCCESS
;

2188 
GOSTSR_S32
 
GosT§_A«lysisD©a_SDT
(
TS_SECTION_INFO
 *
£˘i⁄Info
, 
GOSTSR_PSISI_SDT_S
 *
sdtInfo
)

2190 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

2191 
GOSTSR_U16
 
ãmpD©a
 = 0;

2192 
GOSTSR_S32
 
sdtDesTŸÆLí
 = 0;

2193 
GOSTSR_U16
 
sdtDesSögÀLí
 = 0;

2194 
GOSTSR_S32
 
sdtEÀTŸÆLí
 = 0;

2195 
GOSTSR_U16
 
i
 = 0, 
j
 = 0;

2196 
GOSTSR_U32
 
¸cVÆue
 = 0;

2198 i‡((
GOSTSR_NULL
 =
£˘i⁄Info
Ë|| (GOSTSR_NULL =£˘i⁄Info->
£˘i⁄D©a
Ë|| (GOSTSR_NULL =
sdtInfo
))

2200  
GOSTSR_FAILURE
;

2203 
pD©a
 = 
£˘i⁄Info
->
£˘i⁄D©a
;

2204 
mem£t
(
sdtInfo
, 0x00, (
GOSTSR_PSISI_SDT_S
));

2205 
pD©a
 += 3;

2208 
sdtInfo
->
u8TabÀId
 = 
£˘i⁄Info
->
èbÀID
;

2211 
sdtInfo
->
u16Tøn•‹tSåómId
 = 
pD©a
[0]*256 +ÖData[1];

2212 
pD©a
 += 2;

2217 
sdtInfo
->
u8Vîsi⁄
 = (
pD©a
[0] & (~(
BIT8
 | 
BIT7
 | 
BIT1
))Ë/ 
BIT2
;

2220 
ãmpD©a
 = 
pD©a
[0] & 
BIT1
;

2221 i‡(
BIT1
 !
ãmpD©a
)

2223  
GOSTSR_FAILURE
;

2225 
pD©a
 += 1;

2228 
sdtInfo
->
u8Se˘i⁄Num
 = 
pD©a
[0];

2229 
pD©a
 += 1;

2232 
sdtInfo
->
u8La°Se˘i⁄Num
 = 
pD©a
[0];

2233 
pD©a
 += 1;

2236 
sdtInfo
->
u16OrigöÆNëW‹kdId
 = 
pD©a
[0]*256 +ÖData[1];

2237 
pD©a
 += 2;

2240 
pD©a
 += 1;

2243 
sdtEÀTŸÆLí
 = 
£˘i⁄Info
->
£˘i⁄Lígth
 - 11 - 4;

2245 
i
 = 0;

2246 
sdtEÀTŸÆLí
 > 0)

2249 
sdtInfo
->
a°EÀmít
[
i
].
u16Sîvi˚Id
 = 
pD©a
[0]*256 +ÖData[1];

2250 
pD©a
 += 2;

2255 
sdtInfo
->
a°EÀmít
[
i
].
bEITScheduÀFœg
 = (
pD©a
[0] & 
BIT2
) / BIT2;

2258 
sdtInfo
->
a°EÀmít
[
i
].
bEITPª£¡FﬁlowögFœg
 = 
pD©a
[0] & 
BIT1
;

2259 
pD©a
 += 1;

2262 
sdtInfo
->
a°EÀmít
[
i
].
eSètus
 = (
GOS_PSISI_TABLE_STATUS_E
)((
pD©a
[0] & (
BIT8
 | 
BIT7
 | 
BIT6
)) / BIT6);

2265 
sdtInfo
->
a°EÀmít
[
i
].
bS¸ambÀd
 = (
pD©a
[0] & 
BIT5
) / BIT5;

2268 
sdtDesTŸÆLí
 = (
pD©a
[0] & (~(
BIT8
 | 
BIT7
 | 
BIT6
 | 
BIT5
)))*256 +ÖData[1];

2269 
pD©a
 += 2;

2271 i‡((
sdtEÀTŸÆLí
 - (5 + 
sdtDesTŸÆLí
)) < 0)

2273 
pD©a
 +(
sdtEÀTŸÆLí
 - 5);

2277 
sdtEÀTŸÆLí
 -(5 + 
sdtDesTŸÆLí
);

2279 
j
 = 0;

2280 
sdtDesTŸÆLí
 > 0)

2283 
sdtInfo
->
a°EÀmít
[
i
].
a°Des¸ùt‹
[
j
].
Tag
 = (
GOS_PSISI_DESCRIPTORTYPE_E
)
pD©a
[0];

2284 
pD©a
 += 1;

2287 
sdtDesSögÀLí
 = 
pD©a
[0];

2288 
sdtInfo
->
a°EÀmít
[
i
].
a°Des¸ùt‹
[
j
].
u16Size
 = 
sdtDesSögÀLí
;

2289 
pD©a
 += 1;

2291 i‡((
sdtDesTŸÆLí
 - (
sdtDesSögÀLí
 + 2)) < 0)

2293 
pD©a
 +(
sdtDesTŸÆLí
 - 2);

2298 
sdtInfo
->
a°EÀmít
[
i
].
a°Des¸ùt‹
[
j
].
D©a
 = (
GOSTSR_U8
 *)
mÆloc
(
sdtDesSögÀLí
);

2299 
mem£t
(
sdtInfo
->
a°EÀmít
[
i
].
a°Des¸ùt‹
[
j
].
D©a
, 0x00, 
sdtDesSögÀLí
);

2300 
mem˝y
(
sdtInfo
->
a°EÀmít
[
i
].
a°Des¸ùt‹
[
j
].
D©a
, 
pD©a
, 
sdtDesSögÀLí
);

2302 
pD©a
 +
sdtDesSögÀLí
;

2303 
sdtDesTŸÆLí
 -(
sdtDesSögÀLí
 + 2);

2304 
j
++;

2306 i‡(
j
 >
GOS_MAX_SDT_ELEMENT_DESCRIPTOR
)

2308 
pD©a
 +
sdtDesTŸÆLí
;

2312 
sdtInfo
->
a°EÀmít
[
i
].
u16NbDes¸ùt‹s
 = 
j
;

2314 
i
++;

2316 i‡(
i
 >
GOS_MAX_SDT_ELEMENT
)

2318 
pD©a
 +
sdtEÀTŸÆLí
;

2322 
sdtInfo
->
u16NbEÀmíts
 = 
i
;

2325 
¸cVÆue
 = (
pD©a
[0]<<24) + (pData[1]<<16) + (pData[2]<<8) +ÖData[3];

2326 
sdtInfo
->
u32CrcVÆue
 = 
¸cVÆue
;

2327 
pD©a
 = 
GOSTSR_NULL
;

2329  
GOSTSR_SUCCESS
;

2332 
GOSTSR_S32
 
GosT§_A«lysisD©a_BAT
(
TS_SECTION_INFO
 *
£˘i⁄Info
, 
GOSTSR_PSISI_BAT_S
 *
b©Info
)

2334 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

2335 
GOSTSR_U16
 
ãmpD©a
 = 0;

2336 
GOSTSR_S32
 
b©DesTŸÆLí
 = 0;

2337 
GOSTSR_U16
 
b©DesSögÀLí
 = 0;

2338 
GOSTSR_S32
 
b©ElmTŸÆLí
 = 0;

2339 
GOSTSR_U16
 
i
 = 0, 
j
 = 0;

2340 
GOSTSR_U32
 
¸cVÆue
 = 0;

2342 i‡((
GOSTSR_NULL
 =
£˘i⁄Info
Ë|| (GOSTSR_NULL =£˘i⁄Info->
£˘i⁄D©a
Ë|| (GOSTSR_NULL =
b©Info
))

2344  
GOSTSR_FAILURE
;

2347 
pD©a
 = 
£˘i⁄Info
->
£˘i⁄D©a
;

2348 
mem£t
(
b©Info
, 0x00, (
GOSTSR_PSISI_BAT_S
));

2349 
pD©a
 += 3;

2352 
b©Info
->
u8TabÀId
 = 
£˘i⁄Info
->
èbÀID
;

2355 
b©Info
->
u16Bouquë_id
 = 
pD©a
[0]*256 +ÖData[1];

2356 
pD©a
 += 2;

2361 
b©Info
->
u8Vîsi⁄
 = (
pD©a
[0] & (~(
BIT8
 | 
BIT7
 | 
BIT1
))Ë/ 
BIT2
;

2364 
ãmpD©a
 = 
pD©a
[0] & 
BIT1
;

2365 i‡(
BIT1
 !
ãmpD©a
)

2367  
GOSTSR_FAILURE
;

2369 
pD©a
 += 1;

2372 
b©Info
->
u8Se˘i⁄Num
 = 
pD©a
[0];

2373 
pD©a
 += 1;

2376 
b©Info
->
u8La°Se˘i⁄Num
 = 
pD©a
[0];

2377 
pD©a
 += 1;

2382 
b©DesTŸÆLí
 = (
pD©a
[0] & (
BIT4
 | 
BIT3
 | 
BIT2
 | 
BIT1
))*256 +ÖData[1];

2383 
pD©a
 += 2;

2385 
i
 = 0;

2387 
b©DesTŸÆLí
 > 0)

2390 
b©Info
->
a°Des¸ùt‹
[
i
].
Tag
 = (
GOS_PSISI_DESCRIPTORTYPE_E
)
pD©a
[0];

2391 
pD©a
 += 1;

2394 
b©DesSögÀLí
 = 
pD©a
[0];

2395 
b©Info
->
a°Des¸ùt‹
[
i
].
u16Size
 = 
b©DesSögÀLí
;

2396 
pD©a
 += 1;

2398 i‡((
b©DesTŸÆLí
 - (
b©DesSögÀLí
 + 2)) < 0)

2400 
pD©a
 +(
b©DesTŸÆLí
 - 2);

2405 
b©Info
->
a°Des¸ùt‹
[
i
].
D©a
 = (
GOSTSR_U8
 *)
mÆloc
(
b©DesSögÀLí
);

2406 if(
b©Info
->
a°Des¸ùt‹
[
i
].
D©a
 =
GOSTSR_NULL
)

2408  
GOSTSR_FAILURE
;

2410 
mem£t
(
b©Info
->
a°Des¸ùt‹
[
i
].
D©a
, 0x00, 
b©DesSögÀLí
);

2411 
mem˝y
(
b©Info
->
a°Des¸ùt‹
[
i
].
D©a
, 
pD©a
, 
b©DesSögÀLí
);

2413 
pD©a
 +
b©DesSögÀLí
;

2414 
b©DesTŸÆLí
 -(
b©DesSögÀLí
 + 2);

2415 
i
++;

2417 i‡(
i
 >
GOS_MAX_BAT_DESCIP_LOOP1
)

2419 
pD©a
 +
b©DesTŸÆLí
;

2423 
b©Info
->
u16NbDes¸ùt‹s
 = 
i
;

2428 
b©ElmTŸÆLí
 = (
pD©a
[0] & (
BIT4
 | 
BIT3
 | 
BIT2
 | 
BIT1
))*256 +ÖData[1];

2429 
pD©a
 += 2;

2431 
i
 = 0;
j
 = 0;

2433 
b©ElmTŸÆLí
 > 0)

2436 
b©Info
->
a°EÀmít
[
i
].
u16Tøn•‹tSåómId
 = 
pD©a
[0]*256 +ÖData[1];

2437 
pD©a
 += 2;

2440 
b©Info
->
a°EÀmít
[
i
].
u16OrigöÆNëw‹kId
 = 
pD©a
[0]*256 +ÖData[1];

2441 
pD©a
 += 2;

2446 
b©DesTŸÆLí
 = (
pD©a
[0] & (
BIT4
 | 
BIT3
 | 
BIT2
 | 
BIT1
))*256 +ÖData[1];

2447 
pD©a
 += 2;

2449 i‡((
b©ElmTŸÆLí
 - (6 + 
b©DesTŸÆLí
)) < 0)

2451 
pD©a
 +(
b©ElmTŸÆLí
 - 6);

2455 
b©ElmTŸÆLí
 -(6 + 
b©DesTŸÆLí
);

2457 
j
 = 0;

2459 
b©DesTŸÆLí
 > 0)

2462 
b©Info
->
a°EÀmít
[
i
].
a°Des¸ùt‹
[
j
].
Tag
 = (
GOS_PSISI_DESCRIPTORTYPE_E
)
pD©a
[0];

2463 
pD©a
 += 1;

2466 
b©DesSögÀLí
 = 
pD©a
[0];

2467 
b©Info
->
a°EÀmít
[
i
].
a°Des¸ùt‹
[
j
].
u16Size
 = 
b©DesSögÀLí
;

2468 
pD©a
 += 1;

2470 i‡((
b©DesTŸÆLí
 - (
b©DesSögÀLí
 + 2)) < 0)

2472 
pD©a
 +(
b©DesTŸÆLí
 - 2);

2477 
b©Info
->
a°EÀmít
[
i
].
a°Des¸ùt‹
[
j
].
D©a
 = (
GOSTSR_U8
 *)
mÆloc
(
b©DesSögÀLí
);

2478 
mem£t
(
b©Info
->
a°EÀmít
[
i
].
a°Des¸ùt‹
[
j
].
D©a
, 0x00, 
b©DesSögÀLí
);

2479 
mem˝y
(
b©Info
->
a°EÀmít
[
i
].
a°Des¸ùt‹
[
j
].
D©a
, 
pD©a
, 
b©DesSögÀLí
);

2481 
pD©a
 +
b©DesSögÀLí
;

2482 
b©DesTŸÆLí
 -(
b©DesSögÀLí
 + 2);

2483 
j
++;

2485 i‡(
j
 >
GOS_MAX_BAT_ELEMENT_DESCRIPTOR
)

2487 
pD©a
 +
b©DesTŸÆLí
;

2491 
b©Info
->
a°EÀmít
[
i
].
u16NbDes¸ùt‹s
 = 
j
;

2493 
i
++;

2495 i‡(
i
 >
GOS_MAX_BAT_ELEMENT
)

2497 
pD©a
 +
b©ElmTŸÆLí
;

2501 
b©Info
->
u16NbEÀmíts
 = 
i
;

2504 
¸cVÆue
 = (
pD©a
[0]<<24) + (pData[1]<<16) + (pData[2]<<8) +ÖData[3];

2505 
b©Info
->
u32CrcVÆue
 = 
¸cVÆue
;

2506 
pD©a
 = 
GOSTSR_NULL
;

2508  
GOSTSR_SUCCESS
;

2511 
GOSTSR_S32
 
GosT§_A«lysisD©a_EIT
(
TS_SECTION_INFO
 *
£˘i⁄Info
, 
GOSTSR_PSISI_EIT_S
 *
eôInfo
)

2513 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

2514 
GOSTSR_U16
 
ãmpD©a
 = 0;

2515 
GOSTSR_S32
 
eôDesTŸÆLí
 = 0;

2516 
GOSTSR_U16
 
eôDesSögÀLí
 = 0;

2517 
GOSTSR_S32
 
eôEÀTŸÆLí
 = 0;

2518 
GOSTSR_U16
 
i
 = 0, 
j
 = 0;

2519 
GOSTSR_U32
 
¸cVÆue
 = 0;

2521 i‡((
GOSTSR_NULL
 =
£˘i⁄Info
Ë|| (GOSTSR_NULL =£˘i⁄Info->
£˘i⁄D©a
Ë|| (GOSTSR_NULL =
eôInfo
))

2523  
GOSTSR_FAILURE
;

2526 
pD©a
 = 
£˘i⁄Info
->
£˘i⁄D©a
;

2527 
mem£t
(
eôInfo
, 0x00, (
GOSTSR_PSISI_SDT_S
));

2528 
pD©a
 += 3;

2531 
eôInfo
->
u8TabÀId
 = 
£˘i⁄Info
->
èbÀID
;

2534 
eôInfo
->
u16Sîvi˚Id
 = 
pD©a
[0]*256 +ÖData[1];

2535 
pD©a
 += 2;

2540 
eôInfo
->
u8Vîsi⁄
 = (
pD©a
[0] & (~(
BIT8
 | 
BIT7
 | 
BIT1
))Ë/ 
BIT2
;

2543 
ãmpD©a
 = 
pD©a
[0] & 
BIT1
;

2544 i‡(
BIT1
 !
ãmpD©a
)

2546  
GOSTSR_FAILURE
;

2548 
pD©a
 += 1;

2551 
eôInfo
->
u8Se˘i⁄Num
 = 
pD©a
[0];

2552 
pD©a
 += 1;

2555 
eôInfo
->
u8La°Se˘i⁄Num
 = 
pD©a
[0];

2556 
pD©a
 += 1;

2559 
eôInfo
->
u16Tøn•‹tSåómId
 = 
pD©a
[0]*256 +ÖData[1];

2560 
pD©a
 += 2;

2563 
eôInfo
->
u16OrigöÆNëW‹kdId
 = 
pD©a
[0]*256 +ÖData[1];

2564 
pD©a
 += 2;

2567 
eôInfo
->
u8SegLa°Se˘i⁄Num
 = 
pD©a
[0];

2568 
pD©a
 += 1;

2571 
eôInfo
->
u8La°TabeId
 = 
pD©a
[0];

2572 
pD©a
 += 1;

2574 
eôEÀTŸÆLí
 = 
£˘i⁄Info
->
£˘i⁄Lígth
 - 14 - 4;

2576 
i
 = 0; 
j
 = 0;

2577 
eôEÀTŸÆLí
 > 0)

2580 
eôInfo
->
a°EÀmít
[
i
].
u16EvítId
 = 
pD©a
[0]*256 +ÖData[1];

2581 
pD©a
 += 2;

2584 
eôInfo
->
a°EÀmít
[
i
].
u32SèπTimeW‹d
[0] = 
pD©a
[0];

2585 
eôInfo
->
a°EÀmít
[
i
].
u32SèπTimeW‹d
[1] = (
pD©a
[1]<<24) + (pData[2]<<16) + (pData[3]<<8) +ÖData[4];

2586 
pD©a
 += 5;

2589 
eôInfo
->
a°EÀmít
[
i
].
u32Duøti⁄TimeW‹d
 = (
pD©a
[0]<<16) + (pData[1]<<8) +ÖData[2];

2590 
pD©a
 += 3;

2593 
eôInfo
->
a°EÀmít
[
i
].
eSètus
 = (
GOS_PSISI_TABLE_STATUS_E
)((
pD©a
[0] & (
BIT8
 | 
BIT7
 | 
BIT6
)) / BIT6);

2596 
eôInfo
->
a°EÀmít
[
i
].
bS¸ambÀd
 = (
pD©a
[0] & 
BIT5
) / BIT5;

2599 
eôDesTŸÆLí
 = (
pD©a
[0] & (~(
BIT8
 | 
BIT7
 | 
BIT6
 | 
BIT5
)))*256 +ÖData[1];

2600 
pD©a
 += 2;

2602 i‡((
eôEÀTŸÆLí
 - (12 + 
eôDesTŸÆLí
)) < 0)

2604 
pD©a
 +(
eôEÀTŸÆLí
 - 12);

2608 
eôEÀTŸÆLí
 -(12 + 
eôDesTŸÆLí
);

2610 
j
 = 0;

2611 
eôDesTŸÆLí
 > 0)

2614 
eôInfo
->
a°EÀmít
[
i
].
a°Des¸ùt‹
[
j
].
Tag
 = (
GOS_PSISI_DESCRIPTORTYPE_E
)
pD©a
[0];

2615 
pD©a
 += 1;

2618 
eôDesSögÀLí
 = 
pD©a
[0];

2619 
eôInfo
->
a°EÀmít
[
i
].
a°Des¸ùt‹
[
j
].
u16Size
 = 
eôDesSögÀLí
;

2620 
pD©a
 += 1;

2622 i‡((
eôDesTŸÆLí
 - (
eôDesSögÀLí
 + 2)) < 0)

2624 
pD©a
 +(
eôDesTŸÆLí
 - 2);

2629 
eôInfo
->
a°EÀmít
[
i
].
a°Des¸ùt‹
[
j
].
D©a
 = 
GOSTSR_NULL
;

2630 
eôInfo
->
a°EÀmít
[
i
].
a°Des¸ùt‹
[
j
].
D©a
 = (
GOSTSR_U8
 *)
mÆloc
(
eôDesSögÀLí
);

2631 i‡(
GOSTSR_NULL
 =
eôInfo
->
a°EÀmít
[
i
].
a°Des¸ùt‹
[
j
].
D©a
)

2633  
GOSTSR_FAILURE
;

2635 
mem£t
(
eôInfo
->
a°EÀmít
[
i
].
a°Des¸ùt‹
[
j
].
D©a
, 0x00, 
eôDesSögÀLí
);

2636 
mem˝y
(
eôInfo
->
a°EÀmít
[
i
].
a°Des¸ùt‹
[
j
].
D©a
, 
pD©a
, 
eôDesSögÀLí
);

2638 
pD©a
 +
eôDesSögÀLí
;

2640 
eôDesTŸÆLí
 -(
eôDesSögÀLí
 + 2);

2642 
j
++;

2644 i‡(
j
 >
GOS_MAX_EIT_ELEMENT_DESCRIPTOR
)

2646 
pD©a
 +
eôDesTŸÆLí
;

2650 
eôInfo
->
a°EÀmít
[
i
].
u16NbDes¸ùt‹s
 = 
j
;

2652 
i
++;

2654 i‡(
i
 >
GOS_MAX_EIT_ELEMENT
)

2656 
pD©a
 +
eôEÀTŸÆLí
;

2660 
eôInfo
->
u16NbEÀmíts
 = 
i
;

2663 
¸cVÆue
 = (
pD©a
[0]<<24) + (pData[1]<<16) + (pData[2]<<8) +ÖData[3];

2664 
eôInfo
->
u32CrcVÆue
 = 
¸cVÆue
;

2665 
pD©a
 = 
GOSTSR_NULL
;

2667  
GOSTSR_SUCCESS
;

2670 
GOSTSR_S32
 
GosT§_A«lysisD©a_TDT
(
TS_SECTION_INFO
 *
£˘i⁄Info
, 
GOSTSR_PSISI_TDT_S
 *
tdtInfo
)

2672 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

2674 i‡((
GOSTSR_NULL
 =
£˘i⁄Info
Ë|| (GOSTSR_NULL =£˘i⁄Info->
£˘i⁄D©a
Ë|| (GOSTSR_NULL =
tdtInfo
))

2676  
GOSTSR_FAILURE
;

2679 
pD©a
 = 
£˘i⁄Info
->
£˘i⁄D©a
;

2680 
mem£t
(
tdtInfo
, 0x00, (
GOSTSR_PSISI_TDT_S
));

2682 
pD©a
 += 3;

2685 
tdtInfo
->
u16MJDtime
 = 
pD©a
[0]*256 +ÖData[1];

2686 
pD©a
 += 2;

2688 
tdtInfo
->
u32UTCtimeDW‹d
 = (
pD©a
[0]<<16) + (pData[1]<<8) +ÖData[2];

2691 
tdtInfo
->
utcTime
.
u8Hour
 = (
pD©a
[0] & 0xf0)*10 + (pData[0] &0x0f);

2694 
tdtInfo
->
utcTime
.
u8Möuã
 = (
pD©a
[1] & 0xf0)*10 + (pData[1] &0x0f);

2697 
tdtInfo
->
utcTime
.
u8Sec⁄d
(
pD©a
[2] & 0xf0)*10 + (pData[2] &0x0f);

2699 
pD©a
 = 
GOSTSR_NULL
;

2701  
GOSTSR_SUCCESS
;

2704 
GOSTSR_S32
 
GosT§_A«lysisD©a_TOT
(
TS_SECTION_INFO
 *
£˘i⁄Info
, 
GOSTSR_PSISI_TOT_S
 *
tŸInfo
)

2706 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

2707 
GOSTSR_S32
 
tŸDesTŸÆLí
 = 0;

2708 
GOSTSR_U16
 
tŸDesSögÀLí
 = 0;

2709 
GOSTSR_U16
 
i
 = 0;

2710 
GOSTSR_U32
 
¸cVÆue
 = 0;

2712 i‡((
GOSTSR_NULL
 =
£˘i⁄Info
Ë|| (GOSTSR_NULL =£˘i⁄Info->
£˘i⁄D©a
Ë|| (GOSTSR_NULL =
tŸInfo
))

2714  
GOSTSR_FAILURE
;

2717 
pD©a
 = 
£˘i⁄Info
->
£˘i⁄D©a
;

2718 
mem£t
(
tŸInfo
, 0x00, (
GOSTSR_PSISI_TOT_S
));

2720 
pD©a
 += 3;

2723 
tŸInfo
->
u16MJDtime
 = 
pD©a
[0]*256 +ÖData[1];

2724 
pD©a
 += 2;

2726 
tŸInfo
->
u32UTCtimeDW‹d
 = (
pD©a
[0]<<16) + (pData[1]<<8) +ÖData[2];

2727 
pD©a
 += 3;

2732 
tŸDesTŸÆLí
 = (
pD©a
[0] & (~(
BIT8
 | 
BIT7
 | 
BIT6
 | 
BIT5
)))*256 +ÖData[1];

2733 
pD©a
 += 2;

2735 
i
 = 0;

2736 
tŸDesTŸÆLí
 > 0)

2739 
tŸInfo
->
°LoˇlTimeOffDesc
[
i
].
Tag
 = (
GOS_PSISI_DESCRIPTORTYPE_E
)
pD©a
[0];

2740 
pD©a
 += 1;

2743 
tŸDesSögÀLí
 = 
pD©a
[0];

2744 
tŸInfo
->
°LoˇlTimeOffDesc
[
i
].
u16Size
 = 
tŸDesSögÀLí
;

2745 
pD©a
 += 1;

2747 i‡((
tŸDesTŸÆLí
 - (
tŸDesSögÀLí
 + 2)) < 0)

2749 
pD©a
 +(
tŸDesTŸÆLí
 - 2);

2754 
tŸInfo
->
°LoˇlTimeOffDesc
[
i
].
D©a
 = (
GOSTSR_U8
*)
mÆloc
(
tŸDesSögÀLí
);

2755 
mem£t
(
tŸInfo
->
°LoˇlTimeOffDesc
[
i
].
D©a
, 0x00, 
tŸDesSögÀLí
);

2756 
mem˝y
(
tŸInfo
->
°LoˇlTimeOffDesc
[
i
].
D©a
, 
pD©a
, 
tŸDesSögÀLí
);

2758 
pD©a
 +
tŸDesSögÀLí
;

2759 
tŸDesTŸÆLí
 -(
tŸDesSögÀLí
 + 2);

2760 
i
++;

2762 i‡(
i
 >
GOS_MAX_TOT_DESCRIPTOR
)

2764 
pD©a
 +
tŸDesTŸÆLí
;

2768 
tŸInfo
->
u16NbDes¸ùt‹s
 = 
i
;

2771 
¸cVÆue
 = (
pD©a
[0]<<24) + (pData[1]<<16) + (pData[2]<<8) +ÖData[3];

2772 
tŸInfo
->
u32CrcVÆue
 = 
¸cVÆue
;

2773 
pD©a
 = 
GOSTSR_NULL
;

2775  
GOSTSR_SUCCESS
;

2778 
GOSTSR_S32
 
GosT§_A«lysisD©a_RST
(
TS_SECTION_INFO
 *
£˘i⁄Info
, 
GOSTSR_PSISI_RST_S
 *
r°Info
)

2780 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

2781 
GOSTSR_U16
 
i
 = 0;

2783 i‡((
GOSTSR_NULL
 =
£˘i⁄Info
Ë|| (GOSTSR_NULL =£˘i⁄Info->
£˘i⁄D©a
Ë|| (GOSTSR_NULL =
r°Info
))

2785  
GOSTSR_FAILURE
;

2788 
pD©a
 = 
£˘i⁄Info
->
£˘i⁄D©a
;

2789 
mem£t
(
r°Info
, 0x00, (
GOSTSR_PSISI_RST_S
));

2791 
pD©a
 += 3;

2794 
r°Info
->
u16NbEÀmíts
 = 
£˘i⁄Info
->
£˘i⁄Lígth
 / 9;

2795 i‡(
r°Info
->
u16NbEÀmíts
 > 
GOS_MAX_RTT_ELEMENT
)

2797 
r°Info
->
u16NbEÀmíts
 = 
GOS_MAX_RTT_ELEMENT
;

2800 
i
 = 0; i < 
r°Info
->
u16NbEÀmíts
; i++)

2803 
r°Info
->
a°EÀmít
[
i
].
u16Tøn•‹tSåómId
 = 
pD©a
[0]*256 +ÖData[1];

2804 
pD©a
 += 2;

2807 
r°Info
->
a°EÀmít
[
i
].
u16OrigöÆNëW‹kdId
 = 
pD©a
[0]*256 +ÖData[1];

2808 
pD©a
 += 2;

2811 
r°Info
->
a°EÀmít
[
i
].
u16Sîvi˚Id
 = 
pD©a
[0]*256 +ÖData[1];

2812 
pD©a
 += 2;

2815 
r°Info
->
a°EÀmít
[
i
].
u16EvítId
 = 
pD©a
[0]*256 +ÖData[1];

2816 
pD©a
 += 2;

2821 
r°Info
->
a°EÀmít
[
i
].
u8RunSètus
 = 
pD©a
[0] & (
BIT3
 | 
BIT2
 | 
BIT1
);

2822 
pD©a
 += 1;

2825 
pD©a
 = 
GOSTSR_NULL
;

2827  
GOSTSR_SUCCESS
;

2830 
GOSTSR_S32
 
GosT§_A«lysisD©a_ST
(
TS_SECTION_INFO
 *
£˘i⁄D©a
, 
GOSTSR_PSISI_ST_S
 *
°Info
)

2832 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

2833 
GOSTSR_U16
 
ãmpSe˘i⁄Lí
 = 0;

2834 
GOSTSR_U16
 
ãmpD©a
 = 0;

2836 i‡((
GOSTSR_NULL
 =
£˘i⁄D©a
Ë|| (GOSTSR_NULL =£˘i⁄D©a->£˘i⁄D©aË|| (GOSTSR_NULL =
°Info
))

2838  
GOSTSR_FAILURE
;

2841 
pD©a
 = 
£˘i⁄D©a
->sectionData;

2842 
mem£t
(
°Info
, 0x00, (
GOSTSR_PSISI_DIT_S
));

2845 
°Info
->
u8TabÀId
 = 
£˘i⁄D©a
->
èbÀID
;

2846 
pD©a
 += 1;

2849 
ãmpD©a
 = (
pD©a
[0] & 
BIT8
) / BIT8;

2852 
ãmpD©a
 = (
pD©a
[0] & 
BIT7
) / BIT7;

2855 
ãmpD©a
 = (
pD©a
[0] & (
BIT6
 |
BIT5
)) / BIT5;

2858 
ãmpSe˘i⁄Lí
 = ((
pD©a
[0] & (
BIT4
 | 
BIT3
 | 
BIT2
 | 
BIT1
)) << 8) +ÖData[1];

2859 
pD©a
 += 2;

2862 
ãmpSe˘i⁄Lí
 > 0)

2865 
ãmpD©a
 = 
pD©a
[0];

2868 i‡(
ãmpD©a
)

2872 
pD©a
 = 
GOSTSR_NULL
;

2874  
GOSTSR_SUCCESS
;

2877 
GOSTSR_S32
 
GosT§_A«lysisD©a_DIT
(
TS_SECTION_INFO
 *
£˘i⁄D©a
, 
GOSTSR_PSISI_DIT_S
 *
dôInfo
)

2879 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

2880 
GOSTSR_U16
 
ãmpD©a
 = 0;

2882 i‡((
GOSTSR_NULL
 =
£˘i⁄D©a
Ë|| (GOSTSR_NULL =£˘i⁄D©a->£˘i⁄D©aË|| (GOSTSR_NULL =
dôInfo
))

2884  
GOSTSR_FAILURE
;

2887 
pD©a
 = 
£˘i⁄D©a
->sectionData;

2888 
mem£t
(
dôInfo
, 0x00, (
GOSTSR_PSISI_DIT_S
));

2891 
dôInfo
->
u8TabÀId
 = 
£˘i⁄D©a
->
èbÀID
;

2892 
pD©a
 += 1;

2895 
ãmpD©a
 = (
pD©a
[0] & 
BIT8
) / BIT8;

2896 i‡(0x00 !
ãmpD©a
)

2898  
GOSTSR_FAILURE
;

2902 
ãmpD©a
 = (
pD©a
[0] & 
BIT7
) / BIT7;

2905 
ãmpD©a
 = (
pD©a
[0] & 
BIT6
) / BIT6;

2908 
ãmpD©a
 = ((
pD©a
[0] & (
BIT4
 | 
BIT3
 | 
BIT2
 | 
BIT1
)) << 8) +ÖData[1];

2909 
pD©a
 += 2;

2912 
dôInfo
->
u8Tønsôi⁄Fœg
 = (
pD©a
[0] & 
BIT8
) / BIT8;

2915 
ãmpD©a
 = 
pD©a
[0] & (~(
BIT8
));

2917 
pD©a
 = 
GOSTSR_NULL
;

2919  
GOSTSR_SUCCESS
;

2922 
GOSTSR_S32
 
GosT§_A«lysisD©a_SIT
(
TS_SECTION_INFO
 *
£˘i⁄D©a
, 
GOSTSR_PSISI_SIT_S
 *
sôInfo
)

2924 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

2925 
GOSTSR_U16
 
ãmpD©a
 = 0;

2926 
GOSTSR_S32
 
sôDesTempLí
 = 0;

2927 
GOSTSR_S32
 
sôDesTŸÆLí
 = 0;

2928 
GOSTSR_U16
 
sôDesSögÀLí
 = 0;

2929 
GOSTSR_S32
 
sôElmTŸÆLí
 = 0;

2930 
GOSTSR_U16
 
i
 = 0;

2931 
GOSTSR_U16
 
j
 = 0;

2933 i‡((
GOSTSR_NULL
 =
£˘i⁄D©a
Ë|| (GOSTSR_NULL =£˘i⁄D©a->£˘i⁄D©aË|| (GOSTSR_NULL =
sôInfo
))

2935  
GOSTSR_FAILURE
;

2938 
pD©a
 = 
£˘i⁄D©a
->sectionData;

2939 
mem£t
(
sôInfo
, 0x00, (
GOSTSR_PSISI_SIT_S
));

2942 
sôInfo
->
u8TabÀId
 = 
£˘i⁄D©a
->
èbÀID
;

2943 
pD©a
 += 1;

2946 
ãmpD©a
 = (
pD©a
[0] & 
BIT8
) / BIT8;

2947 i‡(0x01 !
ãmpD©a
)

2949  
GOSTSR_FAILURE
;

2953 
ãmpD©a
 = (
pD©a
[0] & 
BIT7
) / BIT7;

2956 
ãmpD©a
 = (
pD©a
[0] & (
BIT6
 | 
BIT5
)) / BIT5;

2959 
ãmpD©a
 = ((
pD©a
[0] & (
BIT4
 | 
BIT3
 | 
BIT2
 | 
BIT1
)) << 8 )+ÖData[1];

2960 
pD©a
 += 2;

2963 
ãmpD©a
 = (
pD©a
[0] << 8) +ÖData[1];

2964 
pD©a
 += 2;

2967 
ãmpD©a
 = (
pD©a
[0] & (
BIT8
 | 
BIT7
)) / BIT7;

2970 
sôInfo
->
u8Vîsi⁄Num
 = (
pD©a
[0] & (~(
BIT8
 | 
BIT7
 | 
BIT1
))Ë/ 
BIT2
;

2973 
ãmpD©a
 = 
pD©a
[0] & 
BIT1
;

2974 i‡(
BIT1
 !
ãmpD©a
)

2976  
GOSTSR_FAILURE
;

2978 
pD©a
 += 1;

2981 
sôInfo
->
u8Se˘i⁄Num
 = 
pD©a
[0];

2982 
pD©a
 += 1;

2985 
sôInfo
->
u8La°Se˘i⁄Num
 = 
pD©a
[0];

2986 
pD©a
 += 1;

2989 
ãmpD©a
 = (
pD©a
[0] & (
BIT8
 | 
BIT7
 | 
BIT6
 | 
BIT5
)) / BIT5;

2992 
sôDesTempLí
 = (
pD©a
[0] & (
BIT4
 | 
BIT3
 | 
BIT2
 | 
BIT1
)) * 256 +ÖData[1];

2993 
pD©a
 += 2;

2995 
i
 = 0;

2996 
sôDesTŸÆLí
 = 
sôDesTempLí
;

2999 
sôDesTŸÆLí
 > 0)

3002 
sôInfo
->
a°Des¸ùt‹
[
i
].
Tag
 = (
GOS_PSISI_DESCRIPTORTYPE_E
)
pD©a
[0];

3003 
pD©a
 += 1;

3006 
sôDesSögÀLí
 = 
pD©a
[0];

3007 
sôInfo
->
a°Des¸ùt‹
[
i
].
u16Size
 = 
sôDesSögÀLí
;

3008 
pD©a
 += 1;

3010 i‡((
sôDesTŸÆLí
 - (
sôDesSögÀLí
 + 2)) < 0)

3012 
pD©a
 +(
sôDesTŸÆLí
 - 2);

3017 
sôInfo
->
a°Des¸ùt‹
[
i
].
D©a
 = (
GOSTSR_U8
 *)
mÆloc
(
sôDesSögÀLí
);

3018 
mem£t
(
sôInfo
->
a°Des¸ùt‹
[
i
].
D©a
, 0x00, 
sôDesSögÀLí
);

3019 
mem˝y
(
sôInfo
->
a°Des¸ùt‹
[
i
].
D©a
, 
pD©a
, 
sôDesSögÀLí
);

3021 
pD©a
 +
sôDesSögÀLí
;

3022 
sôDesTŸÆLí
 -(
sôDesSögÀLí
 + 2);

3023 
i
++;

3025 i‡(
i
 >
GOS_MAX_SIT_DESCIP_LOOP1
)

3027 
pD©a
 +
sôDesTŸÆLí
;

3031 
sôInfo
->
u16NbDes¸ùt‹s
 = 
i
;

3034 
sôElmTŸÆLí
 = 
sôDesTempLí
;

3035 
i
 = 0;
j
 = 0;

3038 
sôElmTŸÆLí
 > 0)

3041 
sôInfo
->
a°EÀmít
[
i
].
u16Sîvi˚Id
 = 
pD©a
[0]*256 +ÖData[1];

3042 
pD©a
 += 2;

3045 
ãmpD©a
 = (
pD©a
[0] & (
BIT8
)) / BIT8;

3048 
sôInfo
->
a°EÀmít
[
i
].
u8RunSètus
(
pD©a
[0] & (
BIT7
 | 
BIT6
 | 
BIT5
 )) / BIT5;

3051 
sôDesTŸÆLí
 = (
pD©a
[0] & (
BIT4
 | 
BIT3
 | 
BIT2
 | 
BIT1
))*256 +ÖData[1];

3052 
pD©a
 += 2;

3054 i‡((
sôElmTŸÆLí
 - (4 + 
sôDesTŸÆLí
)) < 0)

3056 
pD©a
 +(
sôElmTŸÆLí
 - 4);

3060 
sôElmTŸÆLí
 -(4 + 
sôDesTŸÆLí
);

3062 
j
 = 0;

3064 
sôDesTŸÆLí
 > 0)

3067 
sôInfo
->
a°EÀmít
[
i
].
a°Des¸ùt‹
[
j
].
Tag
 = (
GOS_PSISI_DESCRIPTORTYPE_E
)
pD©a
[0];

3068 
pD©a
 += 1;

3071 
sôDesSögÀLí
 = 
pD©a
[0];

3072 
sôInfo
->
a°EÀmít
[
i
].
a°Des¸ùt‹
[
j
].
u16Size
 = 
sôDesSögÀLí
;

3073 
pD©a
 += 1;

3075 i‡((
sôDesTŸÆLí
 - (
sôDesSögÀLí
 + 2)) < 0)

3077 
pD©a
 +(
sôDesTŸÆLí
 - 2);

3082 
sôInfo
->
a°EÀmít
[
i
].
a°Des¸ùt‹
[
j
].
D©a
 = (
GOSTSR_U8
 *)
mÆloc
(
sôDesSögÀLí
);

3083 
mem£t
(
sôInfo
->
a°EÀmít
[
i
].
a°Des¸ùt‹
[
j
].
D©a
, 0x00, 
sôDesSögÀLí
);

3084 
mem˝y
(
sôInfo
->
a°EÀmít
[
i
].
a°Des¸ùt‹
[
j
].
D©a
, 
pD©a
, 
sôDesSögÀLí
);

3086 
pD©a
 +
sôDesSögÀLí
;

3087 
sôDesTŸÆLí
 -(
sôDesSögÀLí
 + 2);

3088 
j
++;

3090 i‡(
j
 >
GOS_MAX_SIT_ELEMENT_DESCRIPTOR
)

3092 
pD©a
 +
sôDesTŸÆLí
;

3096 
sôInfo
->
a°EÀmít
[
i
].
u16NbDes¸ùt‹s
 = 
j
;

3098 
i
++;

3100 i‡(
i
 >
GOS_MAX_SIT_ELEMENT
)

3102 
pD©a
 +
sôElmTŸÆLí
;

3106 
sôInfo
->
u16NbEÀmíts
 = 
i
;

3109 
ãmpD©a
 = (
pD©a
[0]<<24) + (pData[1]<<16) + (pData[2]<<8) +ÖData[3];

3111 
pD©a
 = 
GOSTSR_NULL
;

3113  
GOSTSR_SUCCESS
;

3116 
GOSTSR_S32
 
A«lysisD©a_P¨£Desc_Sdt
(
GOSTSR_U8
 *
pDescD©a
, 
GOSTSR_S16
 
s16DescLí
, *
£rvi˚«me
)

3118 
GOSTSR_S16
 
s16Des¸ùt‹Lí
 = 
s16DescLí
;

3119 
GOSTSR_U8
 *
pD©a
 = 
pDescD©a
;

3120 
GOSTSR_U8
 
u8DescTag
 = 0;

3121 
GOSTSR_U8
 
u8DescLí
= 0;

3122 
GOSTSR_U8
 
u8ProvidîNameLí
= 0;

3123 
GOSTSR_U8
 
u8Sîvi˚NameLí
= 0;

3125 if((
GOSTSR_NULL
 =
pDescD©a
Ë|| (0 =
s16DescLí
Ë|| (GOSTSR_NULL =
£rvi˚«me
))

3127  
GOSTSR_FAILURE
;

3130 
s16Des¸ùt‹Lí
 > 0)

3132 
u8DescTag
 = 
pD©a
[0];

3133 
u8DescLí
 = 
pD©a
[1];

3134 
pD©a
 += 2;

3135 if(
u8DescTag
 =
GOS_PSISI_DESCRIPTOR_SERVICE
)

3137 
pD©a
 += 1;

3139 
u8ProvidîNameLí
 = 
pD©a
[0];

3140 
pD©a
 += 1;

3143 
pD©a
 +
u8ProvidîNameLí
;

3145 
u8Sîvi˚NameLí
 = 
pD©a
[0];

3146 
pD©a
 += 1;

3149 
mem˝y
(
£rvi˚«me
, 
pD©a
, 
u8Sîvi˚NameLí
);

3150 
¥ötf
("!!!!!======Úame:%s\n", 
pD©a
);

3151 
pD©a
 +
u8Sîvi˚NameLí
;

3153  
GOSTSR_SUCCESS
;

3156 
s16Des¸ùt‹Lí
 -
u8DescLí
;

3157 
pD©a
 +
u8DescLí
;

3160  
GOSTSR_FAILURE
;

3163 
GOSTSR_S32
 
GosT§_A«lysisD©a_gëSîvi˚Name
(*
£rvi˚«me
, 
GOSTSR_U16
 *
£rvi˚ID
, 
TS_SECTION_INFO
 *
pSe˘i⁄Info
)

3165 
GOSTSR_S32
 
s32Rë
 = 
GOSTSR_FAILURE
;

3166 
GOSTSR_S16
 
s16EÀmíts_Lí
 = 0;

3167 
GOSTSR_S16
 
s16Des¸ùt‹_Lí
 = 0;

3168 
GOSTSR_U8
 *
pDes¸ùt‹_D©a
 = 
GOSTSR_NULL
;

3170 
GOSTSR_U8
 *
pD©a
 = 
pSe˘i⁄Info
->
£˘i⁄D©a
;

3171 
GOSTSR_U32
 
u32Se˘i⁄Lí
 = 
pSe˘i⁄Info
->
£˘i⁄Lígth
;

3173 if((
GOSTSR_NULL
 =
pSe˘i⁄Info
Ë|| (GOSTSR_NULL =
£rvi˚«me
Ë|| (GOSTSR_NULL =
£rvi˚ID
))

3175  
GOSTSR_FAILURE
;

3178 
pD©a
 += (3 + 3);

3180 
s16EÀmíts_Lí
 = (
u32Se˘i⁄Lí
 - 8 - 3 - 4) ;

3182 
s16EÀmíts_Lí
 > 0)

3184 *
£rvi˚ID
 = 
pD©a
[0] * 256 +ÖData[1];

3185 
pD©a
 += 3;

3187 
s16Des¸ùt‹_Lí
 = (
pD©a
[0] & (~(
BIT8
 | 
BIT7
 | 
BIT6
 | 
BIT5
)))*256 +ÖData[1];

3188 
pD©a
 += 2;

3190 if(
s16Des¸ùt‹_Lí
 > 0)

3193 
pDes¸ùt‹_D©a
 = (
GOSTSR_U8
 *)
mÆloc
((GOSTSR_U8Ë* 
s16Des¸ùt‹_Lí
);

3194 if(
GOSTSR_NULL
 =
pDes¸ùt‹_D©a
)

3196  
GOSTSR_FAILURE
;

3198 
mem£t
(
pDes¸ùt‹_D©a
, 0x00, 
s16Des¸ùt‹_Lí
);

3199 
mem˝y
(
pDes¸ùt‹_D©a
, 
pD©a
, 
s16Des¸ùt‹_Lí
);

3201 
s32Rë
 = 
A«lysisD©a_P¨£Desc_Sdt
(
pDes¸ùt‹_D©a
, 
s16Des¸ùt‹_Lí
, 
£rvi˚«me
);

3203 if(
pDes¸ùt‹_D©a
)

3205 
‰ì
(
pDes¸ùt‹_D©a
);

3206 
pDes¸ùt‹_D©a
 = 
GOSTSR_NULL
;

3210 
pD©a
 +
s16Des¸ùt‹_Lí
;

3212 
s16EÀmíts_Lí
 -(5 + 
s16Des¸ùt‹_Lí
);

3215  
GOSTSR_SUCCESS
;

3218 
GOSTSR_S32
 
GosT§_A«lysisD©a_PAT_Fªe
(
GOSTSR_PSISI_PAT_S
 *
∑tInfo
)

3220 i‡(
GOSTSR_NULL
 =
∑tInfo
)

3222  
GOSTSR_FAILURE
;

3227  
GOSTSR_SUCCESS
;

3230 
GOSTSR_S32
 
GosT§_A«lysisD©a_CAT_Fªe
(
GOSTSR_PSISI_CAT_S
 *
ˇtInfo
)

3232 
GOSTSR_U32
 
i
 = 0;

3234 i‡(
GOSTSR_NULL
 =
ˇtInfo
)

3236  
GOSTSR_FAILURE
;

3239 
i
 = 0; i < 
ˇtInfo
->
u16NbDes¸ùt‹s
; i++)

3241 i‡(
GOSTSR_NULL
 =
ˇtInfo
->
a°Des¸ùt‹
[
i
].
D©a
)

3246 
‰ì
(
ˇtInfo
->
a°Des¸ùt‹
[
i
].
D©a
);

3247 
ˇtInfo
->
a°Des¸ùt‹
[
i
].
D©a
 = 
GOSTSR_NULL
;

3250  
GOSTSR_SUCCESS
;

3253 
GOSTSR_S32
 
GosT§_A«lysisD©a_PMT_Fªe
(
GOSTSR_PSISI_PMT_S
 *
pmtInfo
)

3255 
GOSTSR_U32
 
i
 = 0, 
j
= 0;

3257 i‡(
GOSTSR_NULL
 =
pmtInfo
)

3259  
GOSTSR_FAILURE
;

3262 
i
 = 0; i < 
pmtInfo
->
u16NbDes¸ùt‹s
; i++)

3264 i‡(
GOSTSR_NULL
 =
pmtInfo
->
a°Des¸ùt‹
[
i
].
D©a
)

3269 
‰ì
(
pmtInfo
->
a°Des¸ùt‹
[
i
].
D©a
);

3270 
pmtInfo
->
a°Des¸ùt‹
[
i
].
D©a
 = 
GOSTSR_NULL
;

3273 
i
 = 0; i < 
pmtInfo
->
u16NbEÀmíts
; i++)

3275 
j
 = 0; j < 
pmtInfo
->
a°EÀmít
[
i
].
u16NbDes¸ùt‹s
; j++)

3277 i‡(
GOSTSR_NULL
 =
pmtInfo
->
a°EÀmít
[
i
].
a°Des¸ùt‹
[
j
].
D©a
)

3281 
‰ì
(
pmtInfo
->
a°EÀmít
[
i
].
a°Des¸ùt‹
[
j
].
D©a
);

3282 
pmtInfo
->
a°EÀmít
[
i
].
a°Des¸ùt‹
[
j
].
D©a
 = 
GOSTSR_NULL
;

3286  
GOSTSR_SUCCESS
;

3290 
GOSTSR_DATE_S
 
GosT§_TIME_MJDtoYMD
(
GOSTSR_U16
 
mjd
)

3292 
GOSTSR_S32
 
yór_x
, 
m⁄th_x
;

3293 
GOSTSR_S32
 
m_day
, 
m_m⁄th
, 
m_yór
;

3294 
GOSTSR_U8
 
k
;

3295 
GOSTSR_DATE_S
 
d©e
;

3297 
GOSTSR_U32
 
ˇl_mjd
;

3299 
ˇl_mjd
 = 
mjd
;

3301 
yór_x
 = ()–(
ˇl_mjd
*100 - 1507820) / 36525 );

3302 
m⁄th_x
 = ()–(
ˇl_mjd
*10000 - 149561000 - ()((
yór_x
 * 36525)/100)*10000) / 306001 );

3303 
m_day
 = 
ˇl_mjd
 - 14956 - (Ë((
yór_x
 * 36525)/100Ë- (Ë((
m⁄th_x
 * 306001)/10000);

3305 i‡(
m⁄th_x
 == 14 || month_x == 15)

3306 
k
 = 1;

3308 
k
 = 0;

3310 
m_yór
 = (Ë(
yór_x
 + 
k
);

3311 
m_m⁄th
 = (Ë(
m⁄th_x
 - 1 - (
k
 * 12));

3313 if–
m_m⁄th
 > 12 )

3315 
m_yór
++;

3316 
m_m⁄th
 -= 12;

3320 
m_yór
 += 1900;

3322 
d©e
.
u16yór
 = 
m_yór
;

3323 
d©e
.
u8m⁄th
 = 
m_m⁄th
;

3324 
d©e
.
u8day
 = 
m_day
;

3326  
d©e
;

3329 
GOSTSR_TIME_S
 
GosT§_TIME_UTCtoHMS
(
GOSTSR_U32
 
utc
)

3331 
GOSTSR_TIME_S
 
time
;

3333 
time
.
u8hour
 = (
GOSTSR_U8
Ë––((
utc
 >> 20) & 0x0F) * 10 ) + ( (utc >> 16) & 0x0F ) );

3334 
time
.
u8möuã
 = (
GOSTSR_U8
Ë––((
utc
 >> 12) & 0x0F) * 10 ) + ( (utc >> 8) & 0x0F ) );

3335 
time
.
u8£c⁄d
 = (
GOSTSR_U8
Ë––((
utc
 >> 4) & 0x0F) * 10 ) + ( utc & 0x0F ) );

3337 i‡(60 <
time
.
u8£c⁄d
)

3339 
time
.
u8möuã
 +time.
u8£c⁄d
 / 60;

3340 
time
.
u8£c⁄d
 =Åime.u8second % 60;

3343 i‡(60 <
time
.
u8möuã
)

3345 
time
.
u8hour
 +time.
u8möuã
 / 60;

3346 
time
.
u8möuã
 =Åime.u8minute % 60;

3349 i‡(24 <
time
.
u8hour
)

3351 
time
.
u8hour
 =Åime.u8hour % 24;

3354  
time
;

3357 
GOS_STREAMTYPE
 
GosT§_A«lysisD©a_SåómTy≥
(
GOS_PSISI_STREAMTYPE_E
 
SåómD©a
)

3359 
GOS_STREAMTYPE
 
SåómTy≥
 = 
BULT_STREAM
;

3361 i‡–(
SåómD©a
Ë=
GOS_PSISI_STREAM_VIDEO_MPEG1
 \

3362 ||(
SåómD©a
Ë=
GOS_PSISI_STREAM_VIDEO_MPEG2
 \

3363 ||(
SåómD©a
Ë=
GOS_PSISI_STREAM_VIDEO_MPEG4
 \

3364 ||(
SåómD©a
Ë=
GOS_PSISI_STREAM_VIDEO_H264
 \

3365 ||(
SåómD©a
Ë=
GOS_PSISI_STREAM_VIDEO_AVS
 \

3366 ||(
SåómD©a
Ë=
GOS_PSISI_STREAM_VIDEO_WM9
 \

3369 
SåómTy≥
 = 
VIDEO_STREAM
;

3371 i‡–(
SåómD©a
Ë=
GOS_PSISI_STREAM_AUDIO_MPEG1
 \

3372 ||(
SåómD©a
Ë=
GOS_PSISI_STREAM_AUDIO_MPEG2
 \

3373 ||(
SåómD©a
Ë=
GOS_PSISI_STREAM_AUDIO_AAC_ADTS
 \

3374 ||(
SåómD©a
Ë=
GOS_PSISI_STREAM_AUDIO_AAC_LATM
 \

3375 ||(
SåómD©a
Ë=
GOS_PSISI_STREAM_AUDIO_AAC_RAW
 \

3376 ||(
SåómD©a
Ë=
GOS_PSISI_STREAM_AUDIO_AVS
 \

3377 ||(
SåómD©a
Ë=
GOS_PSISI_STREAM_AUDIO_AC3
 \

3378 ||(
SåómD©a
Ë=
GOS_PSISI_STREAM_AUDIO_DTS
 \

3381 
SåómTy≥
 = 
AUDIO_STREAM
;

3383 if–(
SåómD©a
Ë=
GOS_PSISI_STREAM_SCTE_SUBT
)

3385 
SåómTy≥
 = 
SCTE_SUBTITLE_STREAM
;

3387 if–(
SåómD©a
Ë=
GOS_PSISI_STREAM_PRIVATE_PES
)

3389 
SåómTy≥
 = 
PRIVATE_PES_STREAM
;

3393 
SåómTy≥
 = 
BULT_STREAM
;

3396  
SåómTy≥
;

3399 
GOSTSR_S32
 
GosT§_A«lysisD©a_OTAPriv©e
(
GOSTSR_U8
 *
¥iv©eD©a
, 
GOSTSR_PSISI_OTAINFO
 *
ŸaInfo
)

3401 
GOSTSR_S32
 
i
 = 0;

3402 
GOSTSR_U8
 *
pD©a
 = 
¥iv©eD©a
;

3404 i‡(
GOSTSR_NULL
 =
pD©a
)

3406  
GOSTSR_FAILURE
;

3410 
ŸaInfo
->
u8DscLí
 = 
pD©a
[0];

3411 
pD©a
 += 1;

3414 
ŸaInfo
->
u32OUI
 = (
pD©a
[0] << 16) + (pData[1] << 8) +ÖData[2];

3415 
pD©a
 += 3;

3418 
ŸaInfo
->
u8Sñe˘‹Lígth
 = 
pD©a
[0];

3419 
pD©a
 += 1;

3422 
i
 = 0;i < 12;i++)

3424 
ŸaInfo
->
u8Sñe˘‹
[
i
] = 
pD©a
[i];

3427 
pD©a
 += 12;

3430 
ŸaInfo
->
u8So·Vî
 = 
pD©a
[0];

3431 
pD©a
 += 1;

3434 
ŸaInfo
->
u8Upd©eMode
 = 
pD©a
[0];

3435 
pD©a
 += 1;

3438 
ŸaInfo
->
u8So·Mode
 = 
pD©a
[0];

3439 
pD©a
 += 1;

3442 
ŸaInfo
->
u16OADPid
 = (
pD©a
[0] << 8) +ÖData[1];

3443 
pD©a
 += 2;

3446 
ŸaInfo
->
u32Fªquícy
 = (
pD©a
[0] << 16) + (pData[1] << 8) +ÖData[2];

3448 
pD©a
 += 3;

3451 
ŸaInfo
->
u8B™dWidth
 = 
pD©a
[0];

3452 
pD©a
 += 1;

3455 
ŸaInfo
->
u16Symbﬁøã
 = (
pD©a
[0] << 8) +ÖData[1];

3456 
pD©a
 += 2;

3459 
ŸaInfo
->
u8Qam
 = 
pD©a
[0];

3460 
pD©a
 += 1;

3463 
ŸaInfo
->
u8Pﬁ¨ôy
 = 
pD©a
[0];

3464 
pD©a
 += 1;

3466  
GOSTSR_SUCCESS
;

3469 
GOSTSR_S32
 
GosT§_Unicode_to_UTF8
(
GOSTSR_U16
 
unicode
, 
GOSTSR_U8
 *
pOutd©a
, GOSTSR_U8 *
pOuéí
)

3471 
GOSTSR_U8
 
cou¡
 = 0;

3473 i‡((
GOSTSR_NULL
 =
pOutd©a
Ë|| (GOSTSR_NULL =
pOuéí
))

3475  
GOSTSR_FAILURE
;

3478 i‡(
unicode
 <= 0x0000007F)

3480 *
pOutd©a
 = (
unicode
 & 0x7F);

3481 
cou¡
 = 1;

3483 i‡–
unicode
 >= 0x00000080 && unicode <= 0x000007FF)

3485 *(
pOutd©a
+1Ë(
unicode
 & 0x3F) | 0x80;

3486 *
pOutd©a
 = ((
unicode
 >> 6) & 0x1F) | 0xC0;

3487 
cou¡
 = 2;

3489 i‡–
unicode
 >= 0x00000800 && unicode <= 0x0000FFFF)

3491 *(
pOutd©a
+2Ë(
unicode
 & 0x3F) | 0x80;

3492 *(
pOutd©a
+1Ë((
unicode
 >> 6) & 0x3F) | 0x80;

3493 *
pOutd©a
 = ((
unicode
 >> 12) & 0x0F) | 0xE0;

3494 
cou¡
 = 3;

3496 i‡(
unicode
 >= 0x00010000 && unicode <= 0x001FFFFF)

3498 *(
pOutd©a
+3Ë(
unicode
 & 0x3F) | 0x80;

3499 *(
pOutd©a
+2Ë((
unicode
 >> 6) & 0x3F) | 0x80;

3500 *(
pOutd©a
+1Ë((
unicode
 >> 12) & 0x3F) | 0x80;

3501 *
pOutd©a
 = ((
unicode
 >> 18) & 0x07) | 0xF0;

3502 
cou¡
 = 4;

3504 i‡(
unicode
 >= 0x00200000 && unicode <= 0x03FFFFFF)

3506 *(
pOutd©a
+4Ë(
unicode
 & 0x3F) | 0x80;

3507 *(
pOutd©a
+3Ë((
unicode
 >> 6) & 0x3F) | 0x80;

3508 *(
pOutd©a
+2Ë((
unicode
 >> 12) & 0x3F) | 0x80;

3509 *(
pOutd©a
+1Ë((
unicode
 >> 18) & 0x3F) | 0x80;

3510 *
pOutd©a
 = ((
unicode
 >> 24) & 0x03) | 0xF8;

3511 
cou¡
 = 5;

3513 i‡(
unicode
 >= 0x04000000 && unicode <= 0x7FFFFFFF)

3515 *(
pOutd©a
+5Ë(
unicode
 & 0x3F) | 0x80;

3516 *(
pOutd©a
+4Ë((
unicode
 >> 6) & 0x3F) | 0x80;

3517 *(
pOutd©a
+3Ë((
unicode
 >> 12) & 0x3F) | 0x80;

3518 *(
pOutd©a
+2Ë((
unicode
 >> 18) & 0x3F) | 0x80;

3519 *(
pOutd©a
+1Ë((
unicode
 >> 24) & 0x3F) | 0x80;

3520 *
pOutd©a
 = ((
unicode
 >> 30) & 0x01) | 0xFC;

3521 
cou¡
 = 6;

3523 *
pOuéí
 = 
cou¡
;

3524 i‡(0 =
cou¡
)

3525  
GOSTSR_FAILURE
;

3527  
GOSTSR_SUCCESS
;

3530 
GOSTSR_S32
 
GosT§_UnicodeSåög_to_UTF8Såög
(
GOSTSR_U8
 *
sour_°rög
, 
GOSTSR_U16
 
sour_Àn
, GOSTSR_U8 *
des_°rög
, GOSTSR_U16 *
des_Àn
)

3532 
GOSTSR_U16
 
i
 = 0;

3533 
GOSTSR_U8
 
ãmpbuff
[6];

3534 
GOSTSR_U8
 
ãmpLí
 = 0;

3535 
GOSTSR_U32
 
tŸÆÀn
 = 0;

3536 
GOSTSR_U16
 
unicode
 = 0;

3538 i‡((
GOSTSR_NULL
 =
sour_°rög
Ë|| (GOSTSR_NULL =
des_°rög
))

3540  
GOSTSR_FAILURE
;

3543 
i
 = 0; i < 
sour_Àn
; i = i+2)

3545 i‡((
sour_Àn
 % 2 !0Ë&& ((
i
+1) == sour_len))

3547 
unicode
 = 0x0000;

3551 
unicode
 = 
sour_°rög
[
i
]*256 + sour_string[i+1];

3553 i‡(
GOSTSR_SUCCESS
 =
GosT§_Unicode_to_UTF8
(
unicode
, 
ãmpbuff
, &
ãmpLí
))

3555 
mem˝y
(&
des_°rög
[
tŸÆÀn
], 
ãmpbuff
, 
ãmpLí
);

3556 
tŸÆÀn
 +
ãmpLí
;

3557 
ãmpLí
 = 0;

3560 
des_°rög
[
tŸÆÀn
] = '\0';

3561 
tŸÆÀn
++;

3563 i‡(
GOSTSR_NULL
 !
des_Àn
)

3565 *
des_Àn
 = 
tŸÆÀn
 ;

3568  
GOSTSR_SUCCESS
;

3571 
GOSTSR_S32
 
GosT§_ISO8859_1Såög_to_UnicodeSåög
(
GOSTSR_U8
 *
sour_°rög
, 
GOSTSR_U16
 
sour_Àn
, GOSTSR_U8 *
des_°rög
, GOSTSR_U16 *
des_Àn
)

3573 
GOSTSR_U16
 
i
 = 0;

3575 i‡((
GOSTSR_NULL
 =
sour_°rög
Ë|| (GOSTSR_NULL =
des_°rög
))

3577  
GOSTSR_FAILURE
;

3580 
i
 = 0; i < 
sour_Àn
; i++)

3582 i‡(
sour_°rög
[
i
] < 0xa0)

3584 i‡((0x20 <
sour_°rög
[
i
]) && (sour_string[i] <= 0x7e))

3586 
des_°rög
[
i
*2] = 0x00;

3587 
des_°rög
[
i
*2 + 1] = 
sour_°rög
[i];

3593 
des_°rög
[
i
*2] = 0x00;

3594 
des_°rög
[
i
*2 + 1] = 
DEFAULT_CODE
;

3599 
des_°rög
[
i
*2] = 0x00;

3600 
des_°rög
[
i
*2 + 1] = 
sour_°rög
[i];

3603 
des_°rög
[
i
*2] = 0x00;

3604 
des_°rög
[
i
*2 + 1] = 0x00;

3606 *
des_Àn
 = 2 * 
sour_Àn
 + 2;

3608  
GOSTSR_SUCCESS
;

3611 
GOSTSR_S32
 
GosT§_ISO8859_2Såög_to_UnicodeSåög
(
GOSTSR_U8
 *
sour_°rög
, 
GOSTSR_U16
 
sour_Àn
, GOSTSR_U8 *
des_°rög
, GOSTSR_U16 *
des_Àn
)

3613 
GOSTSR_U16
 
i
 = 0;

3614 
GOSTSR_U16
 
ödex
 = 0;

3616 i‡((
GOSTSR_NULL
 =
sour_°rög
Ë|| (GOSTSR_NULL =
des_°rög
))

3618  
GOSTSR_FAILURE
;

3621 
i
 = 0; i < 
sour_Àn
; i++)

3623 i‡(
sour_°rög
[
i
] < 0xa0)

3625 i‡((0x20 <
sour_°rög
[
i
]) && (sour_string[i] <= 0x7e))

3627 
des_°rög
[
i
*2] = 0x00;

3628 
des_°rög
[
i
*2 + 1] = 
sour_°rög
[i];

3634 
des_°rög
[
i
*2] = 0x00;

3635 
des_°rög
[
i
*2 + 1] = 
DEFAULT_CODE
;

3640 
ödex
 = 
sour_°rög
[
i
] - 0xa0;

3642 
des_°rög
[
i
*2] = 
iso8859_2
[
ödex
] / 256;

3643 
des_°rög
[
i
*2 + 1] = 
iso8859_2
[
ödex
] % 256;

3646 
des_°rög
[
i
*2] = 0x00;

3647 
des_°rög
[
i
*2 + 1] = 0x00;

3649 *
des_Àn
 = 2 * 
sour_Àn
 + 2;

3651  
GOSTSR_SUCCESS
;

3654 
GOSTSR_S32
 
GosT§_ISO8859_3Såög_to_UnicodeSåög
(
GOSTSR_U8
 *
sour_°rög
, 
GOSTSR_U16
 
sour_Àn
, GOSTSR_U8 *
des_°rög
, GOSTSR_U16 *
des_Àn
)

3656 
GOSTSR_U16
 
i
 = 0;

3657 
GOSTSR_U16
 
ödex
 = 0;

3659 i‡((
GOSTSR_NULL
 =
sour_°rög
Ë|| (GOSTSR_NULL =
des_°rög
))

3661  
GOSTSR_FAILURE
;

3664 
i
 = 0; i < 
sour_Àn
; i++)

3666 i‡(
sour_°rög
[
i
] < 0xa0)

3668 i‡((0x20 <
sour_°rög
[
i
]) && (sour_string[i] <= 0x7e))

3670 
des_°rög
[
i
*2] = 0x00;

3671 
des_°rög
[
i
*2 + 1] = 
sour_°rög
[i];

3677 
des_°rög
[
i
*2] = 0x00;

3678 
des_°rög
[
i
*2 + 1] = 
DEFAULT_CODE
;

3683 
ödex
 = 
sour_°rög
[
i
] - 0xa0;

3685 
des_°rög
[
i
*2] = 
iso8859_3
[
ödex
] / 256;

3686 
des_°rög
[
i
*2 + 1] = 
iso8859_3
[
ödex
] % 256;

3689 
des_°rög
[
i
*2] = 0x00;

3690 
des_°rög
[
i
*2 + 1] = 0x00;

3692 *
des_Àn
 = 2 * 
sour_Àn
 + 2;

3694  
GOSTSR_SUCCESS
;

3697 
GOSTSR_S32
 
GosT§_ISO8859_4Såög_to_UnicodeSåög
(
GOSTSR_U8
 *
sour_°rög
, 
GOSTSR_U16
 
sour_Àn
, GOSTSR_U8 *
des_°rög
, GOSTSR_U16 *
des_Àn
)

3699 
GOSTSR_U16
 
i
 = 0;

3700 
GOSTSR_U16
 
ödex
 = 0;

3702 i‡((
GOSTSR_NULL
 =
sour_°rög
Ë|| (GOSTSR_NULL =
des_°rög
))

3704  
GOSTSR_FAILURE
;

3707 
i
 = 0; i < 
sour_Àn
; i++)

3709 i‡(
sour_°rög
[
i
] < 0xa0)

3711 i‡((0x20 <
sour_°rög
[
i
]) && (sour_string[i] <= 0x7e))

3713 
des_°rög
[
i
*2] = 0x00;

3714 
des_°rög
[
i
*2 + 1] = 
sour_°rög
[i];

3720 
des_°rög
[
i
*2] = 0x00;

3721 
des_°rög
[
i
*2 + 1] = 
DEFAULT_CODE
;

3726 
ödex
 = 
sour_°rög
[
i
] - 0xa0;

3728 
des_°rög
[
i
*2] = 
iso8859_4
[
ödex
] / 256;

3729 
des_°rög
[
i
*2 + 1] = 
iso8859_4
[
ödex
] % 256;

3732 
des_°rög
[
i
*2] = 0x00;

3733 
des_°rög
[
i
*2 + 1] = 0x00;

3735 *
des_Àn
 = 2 * 
sour_Àn
 + 2;

3737  
GOSTSR_SUCCESS
;

3740 
GOSTSR_S32
 
GosT§_ISO8859_5Såög_to_UnicodeSåög
(
GOSTSR_U8
 *
sour_°rög
, 
GOSTSR_U16
 
sour_Àn
, GOSTSR_U8 *
des_°rög
, GOSTSR_U16 *
des_Àn
)

3742 
GOSTSR_U16
 
i
 = 0;

3744 i‡((
GOSTSR_NULL
 =
sour_°rög
Ë|| (GOSTSR_NULL =
des_°rög
))

3746  
GOSTSR_FAILURE
;

3749 
i
 = 0; i < 
sour_Àn
; i++)

3751 i‡(
sour_°rög
[
i
] < 0xa0)

3753 i‡((0x20 <
sour_°rög
[
i
]) && (sour_string[i] <= 0x7e))

3755 
des_°rög
[
i
*2] = 0x00;

3756 
des_°rög
[
i
*2 + 1] = 
sour_°rög
[i];

3762 
des_°rög
[
i
*2] = 0x00;

3763 
des_°rög
[
i
*2 + 1] = 
DEFAULT_CODE
;

3768 
sour_°rög
[
i
])

3772 
des_°rög
[
i
*2] = 0x00;

3773 
des_°rög
[
i
*2 + 1] = 
sour_°rög
[i];

3777 
des_°rög
[
i
*2] = 0x21;

3778 
des_°rög
[
i
*2 + 1] = 0x16;

3782 
des_°rög
[
i
*2] = 0x00;

3783 
des_°rög
[
i
*2 + 1] = 0xa7;

3787 
des_°rög
[
i
*2] = 0x04;

3788 
des_°rög
[
i
*2 + 1] = 
sour_°rög
[i] - 0xa0;

3793 
des_°rög
[
i
*2] = 0x00;

3794 
des_°rög
[
i
*2 + 1] = 0x00;

3796 *
des_Àn
 = 2 * 
sour_Àn
 + 2;

3798  
GOSTSR_SUCCESS
;

3801 
GOSTSR_S32
 
GosT§_ISO8859_6Såög_to_UnicodeSåög
(
GOSTSR_U8
 *
sour_°rög
, 
GOSTSR_U16
 
sour_Àn
, GOSTSR_U8 *
des_°rög
, GOSTSR_U16 *
des_Àn
)

3803 
GOSTSR_U16
 
i
 = 0;

3805 i‡((
GOSTSR_NULL
 =
sour_°rög
Ë|| (GOSTSR_NULL =
des_°rög
))

3807  
GOSTSR_FAILURE
;

3810 
i
 = 0; i < 
sour_Àn
; i++)

3812 i‡(
sour_°rög
[
i
] < 0xac)

3814 i‡(((0x20 <
sour_°rög
[
i
]) && (sour_string[i] <= 0x7e)) || \

3815 (0xa0 =
sour_°rög
[
i
]) || (sour_string[i] == 0xa4))

3817 
des_°rög
[
i
*2] = 0x00;

3818 
des_°rög
[
i
*2 + 1] = 
sour_°rög
[i];

3824 
des_°rög
[
i
*2] = 0x00;

3825 
des_°rög
[
i
*2 + 1] = 
DEFAULT_CODE
;

3830 i‡(
sour_°rög
[
i
] == 0xad)

3832 
des_°rög
[
i
*2] = 0x00;

3833 
des_°rög
[
i
*2 + 1] = 
sour_°rög
[i];

3837 
des_°rög
[
i
*2] = 0x06;

3838 
des_°rög
[
i
*2 + 1] = 
sour_°rög
[i] - 0xa0;

3841 
des_°rög
[
i
*2] = 0x00;

3842 
des_°rög
[
i
*2 + 1] = 0x00;

3844 *
des_Àn
 = 2 * 
sour_Àn
 + 2;

3846  
GOSTSR_SUCCESS
;

3849 
GOSTSR_S32
 
GosT§_ISO8859_7Såög_to_UnicodeSåög
(
GOSTSR_U8
 *
sour_°rög
, 
GOSTSR_U16
 
sour_Àn
, GOSTSR_U8 *
des_°rög
, GOSTSR_U16 *
des_Àn
)

3851 
GOSTSR_U16
 
i
 = 0;

3852 
GOSTSR_U16
 
ödex
 = 0;

3854 i‡((
GOSTSR_NULL
 =
sour_°rög
Ë|| (GOSTSR_NULL =
des_°rög
))

3856  
GOSTSR_FAILURE
;

3859 
i
 = 0; i < 
sour_Àn
; i++)

3861 i‡(
sour_°rög
[
i
] < 0xa0)

3863 i‡((0x20 <
sour_°rög
[
i
]) && (sour_string[i] <= 0x7e))

3865 
des_°rög
[
i
*2] = 0x00;

3866 
des_°rög
[
i
*2 + 1] = 
sour_°rög
[i];

3872 
des_°rög
[
i
*2] = 0x00;

3873 
des_°rög
[
i
*2 + 1] = 
DEFAULT_CODE
;

3878 
ödex
 = 
sour_°rög
[
i
] - 0xa0;

3880 
des_°rög
[
i
*2] = 
iso8859_7
[
ödex
] / 256;

3881 
des_°rög
[
i
*2 + 1] = 
iso8859_7
[
ödex
] % 256;

3884 
des_°rög
[
i
*2] = 0x00;

3885 
des_°rög
[
i
*2 + 1] = 0x00;

3887 *
des_Àn
 = 2 * 
sour_Àn
 + 2;

3889  
GOSTSR_SUCCESS
;

3892 
GOSTSR_S32
 
GosT§_ISO8859_8Såög_to_UnicodeSåög
(
GOSTSR_U8
 *
sour_°rög
, 
GOSTSR_U16
 
sour_Àn
, GOSTSR_U8 *
des_°rög
, GOSTSR_U16 *
des_Àn
)

3894 
GOSTSR_U16
 
i
 = 0;

3895 
GOSTSR_U16
 
ödex
 = 0;

3897 i‡((
GOSTSR_NULL
 =
sour_°rög
Ë|| (GOSTSR_NULL =
des_°rög
))

3899  
GOSTSR_FAILURE
;

3902 
i
 = 0; i < 
sour_Àn
; i++)

3904 i‡(
sour_°rög
[
i
] < 0xa0)

3906 i‡((0x20 <
sour_°rög
[
i
]) && (sour_string[i] <= 0x7e))

3908 
des_°rög
[
i
*2] = 0x00;

3909 
des_°rög
[
i
*2 + 1] = 
sour_°rög
[i];

3915 
des_°rög
[
i
*2] = 0x00;

3916 
des_°rög
[
i
*2 + 1] = 
DEFAULT_CODE
;

3921 
ödex
 = 
sour_°rög
[
i
] - 0xa0;

3923 
des_°rög
[
i
*2] = 
iso8859_8
[
ödex
] / 256;

3924 
des_°rög
[
i
*2 + 1] = 
iso8859_8
[
ödex
] % 256;

3927 
des_°rög
[
i
*2] = 0x00;

3928 
des_°rög
[
i
*2 + 1] = 0x00;

3930 *
des_Àn
 = 2 * 
sour_Àn
 + 2;

3932  
GOSTSR_SUCCESS
;

3935 
GOSTSR_S32
 
GosT§_ISO8859_9Såög_to_UnicodeSåög
(
GOSTSR_U8
 *
sour_°rög
, 
GOSTSR_U16
 
sour_Àn
, GOSTSR_U8 *
des_°rög
, GOSTSR_U16 *
des_Àn
)

3937 
GOSTSR_U16
 
i
 = 0;

3939 i‡((
GOSTSR_NULL
 =
sour_°rög
Ë|| (GOSTSR_NULL =
des_°rög
))

3941  
GOSTSR_FAILURE
;

3944 
i
 = 0; i < 
sour_Àn
; i++)

3946 i‡(
sour_°rög
[
i
] < 0xa0)

3948 i‡((0x20 <
sour_°rög
[
i
]) && (sour_string[i] <= 0x7e))

3950 
des_°rög
[
i
*2] = 0x00;

3951 
des_°rög
[
i
*2 + 1] = 
sour_°rög
[i];

3957 
des_°rög
[
i
*2] = 0x00;

3958 
des_°rög
[
i
*2 + 1] = 
DEFAULT_CODE
;

3963 
sour_°rög
[
i
])

3966 
des_°rög
[
i
*2] = 0x01;

3967 
des_°rög
[
i
*2 + 1] = 0x1e;

3971 
des_°rög
[
i
*2] = 0x01;

3972 
des_°rög
[
i
*2 + 1] = 0x30;

3976 
des_°rög
[
i
*2] = 0x01;

3977 
des_°rög
[
i
*2 + 1] = 0x5e;

3981 
des_°rög
[
i
*2] = 0x01;

3982 
des_°rög
[
i
*2 + 1] = 0x1f;

3986 
des_°rög
[
i
*2] = 0x01;

3987 
des_°rög
[
i
*2 + 1] = 0x31;

3991 
des_°rög
[
i
*2] = 0x01;

3992 
des_°rög
[
i
*2 + 1] = 0x5f;

3996 
des_°rög
[
i
*2] = 0x00;

3997 
des_°rög
[
i
*2 + 1] = 
sour_°rög
[i];

4002 
des_°rög
[
i
*2] = 0x00;

4003 
des_°rög
[
i
*2 + 1] = 0x00;

4005 *
des_Àn
 = 2 * 
sour_Àn
 + 2;

4007  
GOSTSR_SUCCESS
;

4010 
GOSTSR_S32
 
GosT§_ISO8859_10Såög_to_UnicodeSåög
(
GOSTSR_U8
 *
sour_°rög
, 
GOSTSR_U16
 
sour_Àn
, GOSTSR_U8 *
des_°rög
, GOSTSR_U16 *
des_Àn
)

4012 
GOSTSR_U16
 
i
 = 0;

4013 
GOSTSR_U16
 
ödex
 = 0;

4015 i‡((
GOSTSR_NULL
 =
sour_°rög
Ë|| (GOSTSR_NULL =
des_°rög
))

4017  
GOSTSR_FAILURE
;

4020 
i
 = 0; i < 
sour_Àn
; i++)

4022 i‡(
sour_°rög
[
i
] < 0xa0)

4024 i‡((0x20 <
sour_°rög
[
i
]) && (sour_string[i] <= 0x7e))

4026 
des_°rög
[
i
*2] = 0x00;

4027 
des_°rög
[
i
*2 + 1] = 
sour_°rög
[i];

4033 
des_°rög
[
i
*2] = 0x00;

4034 
des_°rög
[
i
*2 + 1] = 
DEFAULT_CODE
;

4039 
ödex
 = 
sour_°rög
[
i
] - 0xa0;

4041 
des_°rög
[
i
*2] = 
iso8859_10
[
ödex
] / 256;

4042 
des_°rög
[
i
*2 + 1] = 
iso8859_10
[
ödex
] % 256;

4045 
des_°rög
[
i
*2] = 0x00;

4046 
des_°rög
[
i
*2 + 1] = 0x00;

4048 *
des_Àn
 = 2 * 
sour_Àn
 + 2;

4050  
GOSTSR_SUCCESS
;

4053 
GOSTSR_S32
 
GosT§_ISO8859_11Såög_to_UnicodeSåög
(
GOSTSR_U8
 *
sour_°rög
, 
GOSTSR_U16
 
sour_Àn
, GOSTSR_U8 *
des_°rög
, GOSTSR_U16 *
des_Àn
)

4055 
GOSTSR_U16
 
i
 = 0;

4057 i‡((
GOSTSR_NULL
 =
sour_°rög
Ë|| (GOSTSR_NULL =
des_°rög
))

4059  
GOSTSR_FAILURE
;

4062 
i
 = 0; i < 
sour_Àn
; i++)

4064 i‡(
sour_°rög
[
i
] < 0xa0)

4066 i‡((0x20 <
sour_°rög
[
i
]) && (sour_string[i] <= 0x7e))

4068 
des_°rög
[
i
*2] = 0x00;

4069 
des_°rög
[
i
*2 + 1] = 
sour_°rög
[i];

4075 
des_°rög
[
i
*2] = 0x00;

4076 
des_°rög
[
i
*2 + 1] = 
DEFAULT_CODE
;

4081 i‡(0xa0 =
sour_°rög
[
i
])

4083 
des_°rög
[
i
*2] = 0x00;

4084 
des_°rög
[
i
*2 + 1] = 
sour_°rög
[i];

4088 
des_°rög
[
i
*2] = 0x0e;

4089 
des_°rög
[
i
*2 + 1] = 
sour_°rög
[i] - 0xa0;

4092 
des_°rög
[
i
*2] = 0x00;

4093 
des_°rög
[
i
*2 + 1] = 0x00;

4095 *
des_Àn
 = 2 * 
sour_Àn
 + 2;

4097  
GOSTSR_SUCCESS
;

4100 
GOSTSR_S32
 
GosT§_ISO8859_13Såög_to_UnicodeSåög
(
GOSTSR_U8
 *
sour_°rög
, 
GOSTSR_U16
 
sour_Àn
, GOSTSR_U8 *
des_°rög
, GOSTSR_U16 *
des_Àn
)

4102 
GOSTSR_U16
 
i
 = 0;

4103 
GOSTSR_U16
 
ödex
 = 0;

4105 i‡((
GOSTSR_NULL
 =
sour_°rög
Ë|| (GOSTSR_NULL =
des_°rög
))

4107  
GOSTSR_FAILURE
;

4110 
i
 = 0; i < 
sour_Àn
; i++)

4112 i‡(
sour_°rög
[
i
] < 0xa0)

4114 i‡((0x20 <
sour_°rög
[
i
]) && (sour_string[i] <= 0x7e))

4116 
des_°rög
[
i
*2] = 0x00;

4117 
des_°rög
[
i
*2 + 1] = 
sour_°rög
[i];

4123 
des_°rög
[
i
*2] = 0x00;

4124 
des_°rög
[
i
*2 + 1] = 
DEFAULT_CODE
;

4129 
ödex
 = 
sour_°rög
[
i
] - 0xa0;

4131 
des_°rög
[
i
*2] = 
iso8859_13
[
ödex
] / 256;

4132 
des_°rög
[
i
*2 + 1] = 
iso8859_13
[
ödex
] % 256;

4135 
des_°rög
[
i
*2] = 0x00;

4136 
des_°rög
[
i
*2 + 1] = 0x00;

4138 *
des_Àn
 = 2 * 
sour_Àn
 + 2;

4140  
GOSTSR_SUCCESS
;

4143 
GOSTSR_S32
 
GosT§_ISO8859_14Såög_to_UnicodeSåög
(
GOSTSR_U8
 *
sour_°rög
, 
GOSTSR_U16
 
sour_Àn
, GOSTSR_U8 *
des_°rög
, GOSTSR_U16 *
des_Àn
)

4145 
GOSTSR_U16
 
i
 = 0;

4146 
GOSTSR_U16
 
ödex
 = 0;

4148 i‡((
GOSTSR_NULL
 =
sour_°rög
Ë|| (GOSTSR_NULL =
des_°rög
))

4150  
GOSTSR_FAILURE
;

4153 
i
 = 0; i < 
sour_Àn
; i++)

4155 i‡(
sour_°rög
[
i
] < 0xa0)

4157 i‡((0x20 <
sour_°rög
[
i
]) && (sour_string[i] <= 0x7e))

4159 
des_°rög
[
i
*2] = 0x00;

4160 
des_°rög
[
i
*2 + 1] = 
sour_°rög
[i];

4166 
des_°rög
[
i
*2] = 0x00;

4167 
des_°rög
[
i
*2 + 1] = 
DEFAULT_CODE
;

4172 
ödex
 = 
sour_°rög
[
i
] - 0xa0;

4174 
des_°rög
[
i
*2] = 
iso8859_14
[
ödex
] / 256;

4175 
des_°rög
[
i
*2 + 1] = 
iso8859_14
[
ödex
] % 256;

4178 
des_°rög
[
i
*2] = 0x00;

4179 
des_°rög
[
i
*2 + 1] = 0x00;

4181 *
des_Àn
 = 2 * 
sour_Àn
 + 2;

4183  
GOSTSR_SUCCESS
;

4186 
GOSTSR_S32
 
GosT§_ISO8859_15Såög_to_UnicodeSåög
(
GOSTSR_U8
 *
sour_°rög
, 
GOSTSR_U16
 
sour_Àn
, GOSTSR_U8 *
des_°rög
, GOSTSR_U16 *
des_Àn
)

4188 
GOSTSR_U16
 
i
 = 0;

4190 i‡((
GOSTSR_NULL
 =
sour_°rög
Ë|| (GOSTSR_NULL =
des_°rög
))

4192  
GOSTSR_FAILURE
;

4195 
i
 = 0; i < 
sour_Àn
; i++)

4197 i‡(
sour_°rög
[
i
] < 0xa0)

4199 i‡((0x20 <
sour_°rög
[
i
]) && (sour_string[i] <= 0x7e))

4201 
des_°rög
[
i
*2] = 0x00;

4202 
des_°rög
[
i
*2 + 1] = 
sour_°rög
[i];

4208 
des_°rög
[
i
*2] = 0x00;

4209 
des_°rög
[
i
*2 + 1] = 
DEFAULT_CODE
;

4214 
sour_°rög
[
i
])

4217 
des_°rög
[
i
*2] = 0x20;

4218 
des_°rög
[
i
*2 + 1] = 0xac;

4222 
des_°rög
[
i
*2] = 0x01;

4223 
des_°rög
[
i
*2 + 1] = 0x60;

4227 
des_°rög
[
i
*2] = 0x01;

4228 
des_°rög
[
i
*2 + 1] = 0x61;

4232 
des_°rög
[
i
*2] = 0x01;

4233 
des_°rög
[
i
*2 + 1] = 0x7d;

4237 
des_°rög
[
i
*2] = 0x01;

4238 
des_°rög
[
i
*2 + 1] = 0x7e;

4242 
des_°rög
[
i
*2] = 0x01;

4243 
des_°rög
[
i
*2 + 1] = 0x52;

4247 
des_°rög
[
i
*2] = 0x01;

4248 
des_°rög
[
i
*2 + 1] = 0x53;

4252 
des_°rög
[
i
*2] = 0x01;

4253 
des_°rög
[
i
*2 + 1] = 0x78;

4257 
des_°rög
[
i
*2] = 0x00;

4258 
des_°rög
[
i
*2 + 1] = 
sour_°rög
[i];

4263 
des_°rög
[
i
*2] = 0x00;

4264 
des_°rög
[
i
*2 + 1] = 0x00;

4266 *
des_Àn
 = 2 * 
sour_Àn
 + 2;

4268  
GOSTSR_SUCCESS
;

4271 
GOSTSR_S32
 
GosT§_ISO8859_16Såög_to_UnicodeSåög
(
GOSTSR_U8
 *
sour_°rög
, 
GOSTSR_U16
 
sour_Àn
, GOSTSR_U8 *
des_°rög
, GOSTSR_U16 *
des_Àn
)

4273 
GOSTSR_U16
 
i
 = 0;

4274 
GOSTSR_U16
 
ödex
 = 0;

4276 i‡((
GOSTSR_NULL
 =
sour_°rög
Ë|| (GOSTSR_NULL =
des_°rög
))

4278  
GOSTSR_FAILURE
;

4281 
i
 = 0; i < 
sour_Àn
; i++)

4283 i‡(
sour_°rög
[
i
] < 0xa0)

4285 i‡((0x20 <
sour_°rög
[
i
]) && (sour_string[i] <= 0x7e))

4287 
des_°rög
[
i
*2] = 0x00;

4288 
des_°rög
[
i
*2 + 1] = 
sour_°rög
[i];

4294 
des_°rög
[
i
*2] = 0x00;

4295 
des_°rög
[
i
*2 + 1] = 
DEFAULT_CODE
;

4300 
ödex
 = 
sour_°rög
[
i
] - 0xa0;

4302 
des_°rög
[
i
*2] = 
iso8859_16
[
ödex
] / 256;

4303 
des_°rög
[
i
*2 + 1] = 
iso8859_16
[
ödex
] % 256;

4306 
des_°rög
[
i
*2] = 0x00;

4307 
des_°rög
[
i
*2 + 1] = 0x00;

4309 *
des_Àn
 = 2 * 
sour_Àn
 + 2;

4311  
GOSTSR_SUCCESS
;

4314 
ENCODE_TYPE
 
GosT§_CheckL™guageHódCode
(
GOSTSR_U8
 
hódCode
, GOSTSR_U8 
£c⁄dCode
, GOSTSR_U8 
thridCode
)

4316 
ENCODE_TYPE
 
ícodeTy≥
 = 
ENCODE_ASCII
;

4318 
hódCode
)

4320 
FRIST_ISO10646
:

4321 
ícodeTy≥
 = 
ENCODE_UNICODE
;

4324 
FRIST_ISO8859_5
:

4325 
ícodeTy≥
 = 
ENCODE_ISO8859_5
;

4328 
FRIST_ISO8859_6
:

4329 
ícodeTy≥
 = 
ENCODE_ISO8859_6
;

4332 
FRIST_ISO8859_7
:

4333 
ícodeTy≥
 = 
ENCODE_ISO8859_7
;

4336 
FRIST_ISO8859_8
:

4337 
ícodeTy≥
 = 
ENCODE_ISO8859_8
;

4340 
FRIST_ISO8859_9
:

4341 
ícodeTy≥
 = 
ENCODE_ISO8859_9
;

4344 
FRIST_ISO8859_10
:

4345 
ícodeTy≥
 = 
ENCODE_ISO8859_10
;

4348 
FRIST_ISO8859_11
:

4349 
ícodeTy≥
 = 
ENCODE_ISO8859_11
;

4352 
FRIST_ISO8859_13
:

4353 
ícodeTy≥
 = 
ENCODE_ISO8859_13
;

4356 
FRIST_ISO8859_14
:

4357 
ícodeTy≥
 = 
ENCODE_ISO8859_14
;

4360 
FRIST_ISO8859_15
:

4361 
ícodeTy≥
 = 
ENCODE_ISO8859_15
;

4364 
FRIST_ISO8859
:

4366 i‡(
SECOND_ISO8859
 =
£c⁄dCode
)

4368 
thridCode
)

4370 
THIRD_ISO8859_1
:

4371 
ícodeTy≥
 = 
ENCODE_ISO8859_1
;

4374 
THIRD_ISO8859_2
:

4375 
ícodeTy≥
 = 
ENCODE_ISO8859_2
;

4378 
THIRD_ISO8859_3
:

4379 
ícodeTy≥
 = 
ENCODE_ISO8859_3
;

4382 
THIRD_ISO8859_4
:

4383 
ícodeTy≥
 = 
ENCODE_ISO8859_4
;

4386 
THIRD_ISO8859_5
:

4387 
ícodeTy≥
 = 
ENCODE_ISO8859_5
;

4390 
THIRD_ISO8859_6
:

4391 
ícodeTy≥
 = 
ENCODE_ISO8859_6
;

4394 
THIRD_ISO8859_7
:

4395 
ícodeTy≥
 = 
ENCODE_ISO8859_7
;

4398 
THIRD_ISO8859_8
:

4399 
ícodeTy≥
 = 
ENCODE_ISO8859_8
;

4402 
THIRD_ISO8859_9
:

4403 
ícodeTy≥
 = 
ENCODE_ISO8859_9
;

4406 
THIRD_ISO8859_10
:

4407 
ícodeTy≥
 = 
ENCODE_ISO8859_10
;

4410 
THIRD_ISO8859_11
:

4411 
ícodeTy≥
 = 
ENCODE_ISO8859_11
;

4414 
THIRD_ISO8859_13
:

4415 
ícodeTy≥
 = 
ENCODE_ISO8859_13
;

4418 
THIRD_ISO8859_14
:

4419 
ícodeTy≥
 = 
ENCODE_ISO8859_14
;

4422 
THIRD_ISO8859_15
:

4423 
ícodeTy≥
 = 
ENCODE_ISO8859_15
;

4433 
FRIST_KSX1001
:

4436 
FRIST_GB2312
:

4440 
FRIST_ISO10646_TC
:

4441 
ícodeTy≥
 = 
ENCODE_UNICODE
;

4444 
FRIST_ISO10646_UTF8
:

4445 
ícodeTy≥
 = 
ENCODE_UTF8
;

4448 
FRIST_ENCODE_TYPEID
:

4455  
ícodeTy≥
;

4458 
GOSTSR_S32
 
GosT§_Sour˚Såög_to_UTF8Såög
(
GOSTSR_U8
 *
sour_°rög
, 
GOSTSR_U16
 
sour_Àn
, GOSTSR_U8 *
des_°rög
, GOSTSR_U16 *
des_Àn
)

4460 
GOSTSR_U8
 
ödex
 = 1;

4461 
ENCODE_TYPE
 
ícodeTy≥
 = 
ENCODE_BULT
;

4462 
GOSTSR_U8
 *
ãmpSåög
 = 
GOSTSR_NULL
;

4463 
GOSTSR_U16
 
ãmpSåögLí
 = 0;

4465 i‡((
GOSTSR_NULL
 =
sour_°rög
Ë|| (GOSTSR_NULL =
des_°rög
Ë|| (GOSTSR_NULL =
des_Àn
Ë|| (0 =
sour_Àn
))

4467 i‡(
GOSTSR_NULL
 !
des_°rög
)

4469 
des_°rög
[0] = '\0';

4471  
GOSTSR_FAILURE
;

4474 
ícodeTy≥
 = 
GosT§_CheckL™guageHódCode
(
sour_°rög
[0], sour_string[1], sour_string[2]);

4475 i‡(
FRIST_ISO8859
 =
sour_°rög
[0])

4477 
ödex
 = 3;

4480 
ãmpSåög
 = (
GOSTSR_U8
 *)
mÆloc
(
sour_Àn
*2 + 2);

4481 i‡(
GOSTSR_NULL
 =
ãmpSåög
)

4483  
GOSTSR_FAILURE
;

4485 
mem£t
(
ãmpSåög
, 0x00, 2*
sour_Àn
 + 2);

4487 
ícodeTy≥
)

4489 
ENCODE_ASCII
:

4490 
ENCODE_UTF8
:

4491 
mem˝y
(
des_°rög
, 
sour_°rög
, 
sour_Àn
);

4492 *
des_Àn
 = 
sour_Àn
;

4495 
ENCODE_UNICODE
:

4496 
GosT§_UnicodeSåög_to_UTF8Såög
(&
sour_°rög
[
ödex
], 
sour_Àn
 - index, 
des_°rög
, 
des_Àn
);

4499 
ENCODE_ISO8859_1
:

4500 
GosT§_ISO8859_1Såög_to_UnicodeSåög
(&
sour_°rög
[
ödex
], 
sour_Àn
 - index, 
ãmpSåög
, &
ãmpSåögLí
);

4501 
GosT§_UnicodeSåög_to_UTF8Såög
(
ãmpSåög
, 
ãmpSåögLí
, 
des_°rög
, 
des_Àn
);

4504 
ENCODE_ISO8859_2
:

4505 
GosT§_ISO8859_2Såög_to_UnicodeSåög
(&
sour_°rög
[
ödex
], 
sour_Àn
 - index, 
ãmpSåög
, &
ãmpSåögLí
);

4506 
GosT§_UnicodeSåög_to_UTF8Såög
(
ãmpSåög
, 
ãmpSåögLí
, 
des_°rög
, 
des_Àn
);

4509 
ENCODE_ISO8859_3
:

4510 
GosT§_ISO8859_3Såög_to_UnicodeSåög
(&
sour_°rög
[
ödex
], 
sour_Àn
 - index, 
ãmpSåög
, &
ãmpSåögLí
);

4511 
GosT§_UnicodeSåög_to_UTF8Såög
(
ãmpSåög
, 
ãmpSåögLí
, 
des_°rög
, 
des_Àn
);

4514 
ENCODE_ISO8859_4
:

4515 
GosT§_ISO8859_4Såög_to_UnicodeSåög
(&
sour_°rög
[
ödex
], 
sour_Àn
 - index, 
ãmpSåög
, &
ãmpSåögLí
);

4516 
GosT§_UnicodeSåög_to_UTF8Såög
(
ãmpSåög
, 
ãmpSåögLí
, 
des_°rög
, 
des_Àn
);

4519 
ENCODE_ISO8859_5
:

4520 
GosT§_ISO8859_5Såög_to_UnicodeSåög
(&
sour_°rög
[
ödex
], 
sour_Àn
 - index, 
ãmpSåög
, &
ãmpSåögLí
);

4521 
GosT§_UnicodeSåög_to_UTF8Såög
(
ãmpSåög
, 
ãmpSåögLí
, 
des_°rög
, 
des_Àn
);

4524 
ENCODE_ISO8859_6
:

4525 
GosT§_ISO8859_6Såög_to_UnicodeSåög
(&
sour_°rög
[
ödex
], 
sour_Àn
 - index, 
ãmpSåög
, &
ãmpSåögLí
);

4526 
GosT§_UnicodeSåög_to_UTF8Såög
(
ãmpSåög
, 
ãmpSåögLí
, 
des_°rög
, 
des_Àn
);

4529 
ENCODE_ISO8859_7
:

4530 
GosT§_ISO8859_7Såög_to_UnicodeSåög
(&
sour_°rög
[
ödex
], 
sour_Àn
 - index, 
ãmpSåög
, &
ãmpSåögLí
);

4531 
GosT§_UnicodeSåög_to_UTF8Såög
(
ãmpSåög
, 
ãmpSåögLí
, 
des_°rög
, 
des_Àn
);

4534 
ENCODE_ISO8859_8
:

4535 
GosT§_ISO8859_8Såög_to_UnicodeSåög
(&
sour_°rög
[
ödex
], 
sour_Àn
 - index, 
ãmpSåög
, &
ãmpSåögLí
);

4536 
GosT§_UnicodeSåög_to_UTF8Såög
(
ãmpSåög
, 
ãmpSåögLí
, 
des_°rög
, 
des_Àn
);

4539 
ENCODE_ISO8859_9
:

4540 
GosT§_ISO8859_9Såög_to_UnicodeSåög
(&
sour_°rög
[
ödex
], 
sour_Àn
 - index, 
ãmpSåög
, &
ãmpSåögLí
);

4541 
GosT§_UnicodeSåög_to_UTF8Såög
(
ãmpSåög
, 
ãmpSåögLí
, 
des_°rög
, 
des_Àn
);

4544 
ENCODE_ISO8859_10
:

4545 
GosT§_ISO8859_10Såög_to_UnicodeSåög
(&
sour_°rög
[
ödex
], 
sour_Àn
 - index, 
ãmpSåög
, &
ãmpSåögLí
);

4546 
GosT§_UnicodeSåög_to_UTF8Såög
(
ãmpSåög
, 
ãmpSåögLí
, 
des_°rög
, 
des_Àn
);

4549 
ENCODE_ISO8859_11
:

4550 
GosT§_ISO8859_11Såög_to_UnicodeSåög
(&
sour_°rög
[
ödex
], 
sour_Àn
 - index, 
ãmpSåög
, &
ãmpSåögLí
);

4551 
GosT§_UnicodeSåög_to_UTF8Såög
(
ãmpSåög
, 
ãmpSåögLí
, 
des_°rög
, 
des_Àn
);

4554 
ENCODE_ISO8859_13
:

4555 
GosT§_ISO8859_13Såög_to_UnicodeSåög
(&
sour_°rög
[
ödex
], 
sour_Àn
 - index, 
ãmpSåög
, &
ãmpSåögLí
);

4556 
GosT§_UnicodeSåög_to_UTF8Såög
(
ãmpSåög
, 
ãmpSåögLí
, 
des_°rög
, 
des_Àn
);

4559 
ENCODE_ISO8859_14
:

4560 
GosT§_ISO8859_14Såög_to_UnicodeSåög
(&
sour_°rög
[
ödex
], 
sour_Àn
 - index, 
ãmpSåög
, &
ãmpSåögLí
);

4561 
GosT§_UnicodeSåög_to_UTF8Såög
(
ãmpSåög
, 
ãmpSåögLí
, 
des_°rög
, 
des_Àn
);

4564 
ENCODE_ISO8859_15
:

4565 
GosT§_ISO8859_15Såög_to_UnicodeSåög
(&
sour_°rög
[
ödex
], 
sour_Àn
 - index, 
ãmpSåög
, &
ãmpSåögLí
);

4566 
GosT§_UnicodeSåög_to_UTF8Såög
(
ãmpSåög
, 
ãmpSåögLí
, 
des_°rög
, 
des_Àn
);

4569 
ENCODE_ISO8859_16
:

4570 
GosT§_ISO8859_16Såög_to_UnicodeSåög
(&
sour_°rög
[
ödex
], 
sour_Àn
 - index, 
ãmpSåög
, &
ãmpSåögLí
);

4571 
GosT§_UnicodeSåög_to_UTF8Såög
(
ãmpSåög
, 
ãmpSåögLí
, 
des_°rög
, 
des_Àn
);

4578 i‡(
GOSTSR_NULL
 !
ãmpSåög
)

4580 
‰ì
(
ãmpSåög
);

4581 
ãmpSåög
 = 
GOSTSR_NULL
;

4584  
GOSTSR_SUCCESS
;

4588 #ifde‡
__˝lu•lus


4589 #i‡
__˝lu•lus


	@tscheck/src/GosTsr_Crc.c

1 #ifde‡
__˝lu•lus


2 #i‡
__˝lu•lus


7 
	~"GosT§_Crc.h
"

9 
GOSTSR_U32
 
CRC_¸c32_èbÀ
[
CRC32_MAX_COEFFICIENTS
];

11 
GOSTSR_S32
 
GosT§_A«lysisD©a_CRCInô
()

13 
GOSTSR_U32
 
lo›C¡C€f
;

14 
GOSTSR_U32
 
lo›C¡Bô
;

15 
GOSTSR_U32
 
c€f32
;

17 
lo›C¡C€f
 = 0;Üo›C¡C€‡< 
CRC32_MAX_COEFFICIENTS
;ÜoopCntCoef++)

19 
c€f32
 = 
lo›C¡C€f
 << 24;

20 
lo›C¡Bô
=0;ÜoopCntBit<8;ÜoopCntBit++)

22 i‡(
c€f32
 & 0x80000000)

23 
c€f32
 = ((c€f32 << 1Ë^ 
CRC32_POLYNOMIAL
);

25 
c€f32
 <<= 1;

27 
CRC_¸c32_èbÀ
[
lo›C¡C€f
] = 
c€f32
;

30  
GOSTSR_SUCCESS
;

33 
GOSTSR_U32
 
GosT§_A«lysisD©a_CRCCheck
(c⁄° 
GOSTSR_U8
 *
d©a
, GOSTSR_U32 
d©aLí
)

35 
GOSTSR_U32
 
¸c32
 = 0xFFFFFFFF;

36 
GOSTSR_U32
 
˙tByã
;

38 
˙tByã
 = 0; c¡Byã < 
d©aLí
; cntByte++)

40 
¸c32
 = (¸c32 << 8 ) ^ 
CRC_¸c32_èbÀ
[((¸c32 >> 24Ë^ *
d©a
++) & 0xFF];

43  
¸c32
;

46 #ifde‡
__˝lu•lus


47 #i‡
__˝lu•lus


	@tscheck/src/GosTsr_Descriptor.c

1 #ifde‡
__˝lu•lus


2 #i‡
__˝lu•lus


7 
	~"GosT§_Des¸ùt‹.h
"

9 
GOSTSR_S32
 
GosT§_Des¸ùt‹_AudioSåóm
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_AUDIOSTRAM_S
 *
asDes
)

11 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

13 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
asDes
))

15  
GOSTSR_FAILURE
;

18 i‡(
GOS_PSISI_DESCRIPTOR_AUDIO_STREAM
 !
§cDes
->
Tag
)

20  
GOSTSR_FAILURE
;

23 
mem£t
(
asDes
, 0x00, (
GOS_DESC_AUDIOSTRAM_S
));

24 
pD©a
 = 
§cDes
->
D©a
;

27 
asDes
->
u8FªeF‹m©Fœg
 = (
pD©a
[0] & 
BIT8
) / BIT8;

30 
asDes
->
u8ID
 = (
pD©a
[0] & 
BIT7
) / BIT7;

33 
asDes
->
u8Layî
 = (
pD©a
[0] & (
BIT6
 | 
BIT5
)) / BIT5;

37 
pD©a
 = 
GOSTSR_NULL
;

39  
GOSTSR_SUCCESS
;

42 
GOSTSR_S32
 
GosT§_Des¸ùt‹_AVCVideo
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_AVCVIDEO_S
 *
avDes
)

44 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
avDes
))

46  
GOSTSR_FAILURE
;

49 i‡(
GOS_PSISI_DESCRIPTOR_AVC_VIDEO
 !
§cDes
->
Tag
)

51  
GOSTSR_FAILURE
;

55 
avDes
->
u16AVCVideoLí
 = 
§cDes
->
u16Size
;

57 i‡(
avDes
->
u16AVCVideoLí
 > 
GOS_MAX_AVCVIDEO_NUM
)

59 
avDes
->
u16AVCVideoLí
 = 
GOS_MAX_AVCVIDEO_NUM
;

63 
mem£t
(
avDes
->
u8AVCVideoD©a
, 0x00, 
GOS_MAX_AVCVIDEO_NUM
);

64 
mem˝y
(
avDes
->
u8AVCVideoD©a
, 
§cDes
->
D©a
,ávDes->
u16AVCVideoLí
);

66  
GOSTSR_SUCCESS
;

69 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Bouquë«me
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_BOUQUETNAME_S
 *
bndes
)

71 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
bndes
))

73  
GOSTSR_FAILURE
;

76 i‡(
GOS_PSISI_DESCRIPTOR_BOUQUET_NAME
 !
§cDes
->
Tag
)

78  
GOSTSR_FAILURE
;

81 
mem£t
(
bndes
, 0x00, (
GOS_DESC_BOUQUETNAME_S
));

82 
bndes
->
u8NameLí
 = (
§cDes
->
u16Size
 < 
GOS_MAX_BOUQUET_NAME_LEN
)? srcDes->u16Size : (GOS_MAX_BOUQUET_NAME_LEN - 1);

83 
mem˝y
(
bndes
->
au8BouqName
, 
§cDes
->
D©a
, bndes->
u8NameLí
);

84 
bndes
->
au8BouqName
[bndes->
u8NameLí
] = '\0';

86  
GOSTSR_SUCCESS
;

89 
GOSTSR_S32
 
GosT§_Des¸ùt‹_CabÀSy°em
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_CABDELIVSYS_S
 *
csDes
)

91 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

93 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
csDes
))

95  
GOSTSR_FAILURE
;

98 i‡(
GOS_PSISI_DESCRIPTOR_CABLE_DELIVERY_SYSTEM
 !
§cDes
->
Tag
)

100  
GOSTSR_FAILURE
;

103 
mem£t
(
csDes
, 0x00, (
GOS_DESC_CABDELIVSYS_S
));

104 
pD©a
 = 
§cDes
->
D©a
;

107 
csDes
->
u32Fªq
 =((
pD©a
[0] & 0xf0Ë/ 
BIT5
)*10000000 + (pData[0] & 0x0f)*1000000 + \

108 ((
pD©a
[1] & 0xf0Ë/ 
BIT5
)*100000 + (pData[1] & 0x0f)*10000 + \

109 ((
pD©a
[2] & 0xf0Ë/ 
BIT5
)*1000 + (pData[2] & 0x0f)*100 + \

110 ((
pD©a
[3] & 0xf0Ë/ 
BIT5
)*10 + (pData[3] & 0x0f);

111 
pD©a
 += 4;

114 
pD©a
 += 1;

117 
csDes
->
u8FEC_Ouãr
 = 
pD©a
[0] & (
BIT4
 | 
BIT3
 | 
BIT2
 | 
BIT1
);

118 
pD©a
 += 1;

121 
csDes
->
u8Moduœti⁄
 = 
pD©a
[0];

122 
pD©a
 += 1;

125 
csDes
->
u32Symbﬁ_R©e
 = ((
pD©a
[0] & 0xf0Ë/ 
BIT5
)*1000000 + (pData[0] & 0x0f)*100000 + \

126 ((
pD©a
[1] & 0xf0Ë/ 
BIT5
)*10000 + (pData[1] & 0x0f)*1000 + \

127 ((
pD©a
[2] & 0xf0Ë/ 
BIT5
)*100 + (pData[2] & 0x0f)*10 + \

128 ((
pD©a
[3] & 0xf0Ë/ 
BIT5
);

129 
pD©a
 += 3;

132 
csDes
->
u8FEC_I¬î
 = 
pD©a
[0] & (
BIT4
 | 
BIT3
 | 
BIT2
 | 
BIT1
);

134 
pD©a
 = 
GOSTSR_NULL
;

136  
GOSTSR_SUCCESS
;

139 
GOSTSR_S32
 
GosT§_Des¸ùt‹_CaIdítify
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_CAIDF_S
 *
ciDes
)

141 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

142 
GOSTSR_U16
 
i
 = 0;

144 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
ciDes
))

146  
GOSTSR_FAILURE
;

149 i‡(
GOS_PSISI_DESCRIPTOR_CA_IDENTIFIER
 !
§cDes
->
Tag
)

151  
GOSTSR_FAILURE
;

154 
mem£t
(
ciDes
, 0x00, (
GOS_DESC_CAIDF_S
));

155 
pD©a
 = 
§cDes
->
D©a
;

157 
ciDes
->
u8CANum
 = 
§cDes
->
u16Size
 / 2;

159 
i
 = 0; i < 
ciDes
->
u8CANum
; i++)

161 
ciDes
->
au16CA_Sys_ID
[
i
] = 
pD©a
[0]*256 +ÖData[1];

162 
pD©a
 += 2;

165 
pD©a
 = 
GOSTSR_NULL
;

167  
GOSTSR_SUCCESS
;

170 
GOSTSR_S32
 
GosT§_Des¸ùt‹_CA
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_CA_S
 *
ˇDes
)

172 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

174 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
ˇDes
))

176  
GOSTSR_FAILURE
;

179 i‡(
GOS_PSISI_DESCRIPTOR_CA
 !
§cDes
->
Tag
)

181  
GOSTSR_FAILURE
;

184 
mem£t
(
ˇDes
, 0x00, (
GOS_DESC_CA_S
));

185 
pD©a
 = 
§cDes
->
D©a
;

188 
ˇDes
->
u16CaSy°emId
 = 
pD©a
[0]*256 +ÖData[1];

189 
pD©a
 += 2;

194 
ˇDes
->
u16CaPId
 = (
pD©a
[0] & (
BIT5
 | 
BIT4
 | 
BIT3
 | 
BIT2
 | 
BIT1
))*256 +ÖData[1];

195 
pD©a
 += 2;

198 
ˇDes
->
u8Piv©eD©aLí
 = 
§cDes
->
u16Size
 - 4;

201 
ˇDes
->
pu8D©a
 = (
GOSTSR_U8
 *)
mÆloc
(ˇDes->
u8Piv©eD©aLí
);

202 
mem£t
(
ˇDes
->
pu8D©a
, 0x00, caDes->
u8Piv©eD©aLí
);

203 
mem˝y
(
ˇDes
->
pu8D©a
, 
pD©a
, caDes->
u8Piv©eD©aLí
);

205 
pD©a
 = 
GOSTSR_NULL
;

207  
GOSTSR_SUCCESS
;

210 
GOSTSR_S32
 
GosT§_Des¸ùt‹_CA_Sy°em
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_CA_SYSTEM_S
 *
ˇDes
)

212 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

214 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
ˇDes
))

216  
GOSTSR_FAILURE
;

219 i‡(
GOS_PSISI_DESCRIPTOR_CA_SYSTEM
 !
§cDes
->
Tag
)

221  
GOSTSR_FAILURE
;

224 
mem£t
(
ˇDes
, 0x00, (
GOS_DESC_CA_SYSTEM_S
));

225 
pD©a
 = 
§cDes
->
D©a
;

227  
GOSTSR_SUCCESS
;

230 
GOSTSR_S32
 
GosT§_Des¸ùt‹_C›yRight
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_COPYRIGHT_S
 *
cDes
)

232 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

234 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
cDes
))

236  
GOSTSR_FAILURE
;

239 i‡(
GOS_PSISI_DESCRIPTOR_COPYRIGHT
 !
§cDes
->
Tag
)

241  
GOSTSR_FAILURE
;

244 
mem£t
(
cDes
, 0x00, (
GOS_DESC_COPYRIGHT_S
));

245 
pD©a
 = 
§cDes
->
D©a
;

248 
cDes
->
u32C›yrightIdítifõr
 = (
pD©a
[0]<<24) + (pData[1]<<16) + (pData[2]<<8) +ÖData[3];

249 
pD©a
 += 4;

252 
cDes
->
u32AddC›yrightInfoLí
 = 
§cDes
->
u16Size
 - 4;

253 i‡(
cDes
->
u32AddC›yrightInfoLí
 > (
GOS_MAX_ADDCOPYRIGHTINFO_NUM
 - 1))

255 
cDes
->
u32AddC›yrightInfoLí
 = (
GOS_MAX_ADDCOPYRIGHTINFO_NUM
 - 1);

259 
mem˝y
(
cDes
->
u8AddC›yrightInfo
, 
pD©a
, cDes->
u32AddC›yrightInfoLí
);

260 
cDes
->
u8AddC›yrightInfo
[cDes->
u32AddC›yrightInfoLí
] = '\0';

262 
pD©a
 = 
GOSTSR_NULL
;

264  
GOSTSR_SUCCESS
;

267 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Comp⁄ít
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_COMPONENT_S
 *
cDes
)

269 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

270 
GOSTSR_U16
 
ªmaöLí
 = 0;

272 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
cDes
))

274  
GOSTSR_FAILURE
;

277 i‡(
GOS_PSISI_DESCRIPTOR_COMPONENT
 !
§cDes
->
Tag
)

279  
GOSTSR_FAILURE
;

282 
mem£t
(
cDes
, 0x00, (
GOS_DESC_COMPONENT_S
));

283 
pD©a
 = 
§cDes
->
D©a
;

288 
cDes
->
u8SåómC⁄ã¡
 = 
pD©a
[0] & (
BIT4
 | 
BIT3
 | 
BIT2
 | 
BIT1
);

289 
pD©a
 += 1;

292 
cDes
->
u8Comp⁄ítTy≥
 = 
pD©a
[0];

293 
pD©a
 += 1;

296 
cDes
->
u8Comp⁄ítTag
 = 
pD©a
[0];

297 
pD©a
 += 1;

300 
cDes
->
au8ISO639_L™guage_Code
[0] = 
pD©a
[0];

301 
cDes
->
au8ISO639_L™guage_Code
[1] = 
pD©a
[1];

302 
cDes
->
au8ISO639_L™guage_Code
[2] = 
pD©a
[2];

303 
pD©a
 += 3;

306 
ªmaöLí
 = 
§cDes
->
u16Size
 - 6;

307 
ªmaöLí
 =ÑemaöLí < (
cDes
->
acTextCh¨
)?ÑemainLen: (cDes->acTextChar);

308 
mem£t
(
cDes
->
acTextCh¨
, 0x00, (cDes->acTextChar));

309 
mem˝y
(
cDes
->
acTextCh¨
, 
pD©a
, 
ªmaöLí
);

310 
cDes
->
acTextCh¨
[(cDes->acTextChar) - 1] = '\0';

312 
pD©a
 = 
GOSTSR_NULL
;

314  
GOSTSR_SUCCESS
;

317 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Comp⁄ít_Sîvi˚_Name
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_COMPONENT_SERVICE_NAME_S
 *
cDes
)

319 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

321 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
cDes
))

323  
GOSTSR_FAILURE
;

326 i‡(
GOS_PSISI_DESCRIPTOR_COMPONENT_SERVICE_NAME
 !
§cDes
->
Tag
)

328  
GOSTSR_FAILURE
;

331 
mem£t
(
cDes
, 0x00, (
GOS_DESC_COMPONENT_SERVICE_NAME_S
));

332 
pD©a
 = 
§cDes
->
D©a
;

334  
GOSTSR_SUCCESS
;

337 
GOSTSR_S32
 
GosT§_Des¸ùt‹_C⁄ã¡
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_CONTENT_S
 *
cDes
)

339 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

340 
GOSTSR_U16
 
i
 = 0;

342 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
cDes
))

344  
GOSTSR_FAILURE
;

347 i‡(
GOS_PSISI_DESCRIPTOR_CONTENT
 !
§cDes
->
Tag
)

349  
GOSTSR_FAILURE
;

352 
mem£t
(
cDes
, 0x00, (
GOS_DESC_CONTENT_S
));

353 
pD©a
 = 
§cDes
->
D©a
;

355 
cDes
->
u16NbC⁄ã¡
 = 
§cDes
->
u16Size
 / 2;

356 
i
 = 0; i < 
cDes
->
u16NbC⁄ã¡
; i++)

358 
cDes
->
a°DëaûLi°
[
i
].
u8NibbÀLevñ1
 = (
pD©a
[0] & (
BIT8
 | 
BIT7
 | 
BIT6
 | 
BIT5
)) / BIT5;

359 
cDes
->
a°DëaûLi°
[
i
].
u8NibbÀLevñ2
 = 
pD©a
[0] & (
BIT4
 | 
BIT3
 | 
BIT2
 | 
BIT1
);

360 
cDes
->
a°DëaûLi°
[
i
].
u8U£rNibbÀ1
(
pD©a
[1] & (
BIT8
 | 
BIT7
 | 
BIT6
 | 
BIT5
)) / BIT5;

361 
cDes
->
a°DëaûLi°
[
i
].
u8U£rNibbÀ2
 = 
pD©a
[1] & (
BIT4
 | 
BIT3
 | 
BIT2
 | 
BIT1
);

362 
pD©a
 += 2;

365 
pD©a
 = 
GOSTSR_NULL
;

367  
GOSTSR_SUCCESS
;

370 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Cou¡ryAvaûabûôy
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_COUNTRY_AVAILABILITY_S
 *
ˇDes
)

372 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

373 
GOSTSR_U16
 
i
 = 0;

375 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
ˇDes
))

377  
GOSTSR_FAILURE
;

380 i‡(
GOS_PSISI_DESCRIPTOR_COUNTRY_AVAIBILITY
 !
§cDes
->
Tag
)

382  
GOSTSR_FAILURE
;

385 
mem£t
(
ˇDes
, 0x00, (
GOS_DESC_COUNTRY_AVAILABILITY_S
));

386 
pD©a
 = 
§cDes
->
D©a
;

389 
ˇDes
->
u8Cou¡ry_Avaûabûôy_Fœg
 = (
pD©a
[0] & 
BIT8
) / BIT8;

392 
pD©a
 += 1;

394 
ˇDes
->
u32Cou¡ryNum
 = (
§cDes
->
u16Size
 - 1) / 3;

395 
i
 = 0; i < 
ˇDes
->
u32Cou¡ryNum
; i++)

397 
ˇDes
->
au32Cou¡ryCode
[
i
] = (
pD©a
[0]<<16) + (pData[1]<<8) +ÖData[2];

398 
pD©a
 += 3;

401 
pD©a
 = 
GOSTSR_NULL
;

403  
GOSTSR_SUCCESS
;

406 
GOSTSR_S32
 
GosT§_Des¸ùt‹_D©aSåómAlignmít
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_DATASTRAMALIGNMENT_S
 *
dßDes
)

408 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

410 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
dßDes
))

412  
GOSTSR_FAILURE
;

415 i‡(
GOS_PSISI_DESCRIPTOR_DATA_STREAM_ALIGNMENT
 !
§cDes
->
Tag
)

417  
GOSTSR_FAILURE
;

420 
mem£t
(
dßDes
, 0x00, (
GOS_DESC_DATASTRAMALIGNMENT_S
));

421 
pD©a
 = 
§cDes
->
D©a
;

424 
dßDes
->
u8AlignmítTy≥
 = 
pD©a
[0];

426 
pD©a
 = 
GOSTSR_NULL
;

428  
GOSTSR_SUCCESS
;

431 
GOSTSR_S32
 
GosT§_Des¸ùt‹_D©aBrﬂdˇ°
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_DATA_BROADCAST_S
 *
dbDes
)

433 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

435 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
dbDes
))

437  
GOSTSR_FAILURE
;

440 i‡(
GOS_PSISI_DESCRIPTOR_DATA_BROADCAST
 !
§cDes
->
Tag
)

442  
GOSTSR_FAILURE
;

445 
mem£t
(
dbDes
, 0x00, (
GOS_DESC_DATA_BROADCAST_S
));

446 
pD©a
 = 
§cDes
->
D©a
;

449 
dbDes
->
u16D©aBrﬂdˇ°Id
 = 
pD©a
[0]*256 +ÖData[1];

450 
pD©a
 += 2;

453 
dbDes
->
u8Comp⁄ítTag
 = 
pD©a
[0];

454 
pD©a
 += 1;

457 
dbDes
->
u8Sñe˘‹Lígth
 = 
pD©a
[0];

458 
pD©a
 += 1;

461 
mem˝y
(
dbDes
->
au8Sñe˘‹Byã
, 
pD©a
, dbDes->
u8Sñe˘‹Lígth
);

462 
pD©a
 +
dbDes
->
u8Sñe˘‹Lígth
;

465 
dbDes
->
au8ISO639_L™guage_Code
[0] = 
pD©a
[0];

466 
dbDes
->
au8ISO639_L™guage_Code
[1] = 
pD©a
[1];

467 
dbDes
->
au8ISO639_L™guage_Code
[2] = 
pD©a
[2];

468 
pD©a
 += 3;

471 
dbDes
->
u8TextLígth
 = 
pD©a
[0];

472 
pD©a
 += 1;

475 
mem˝y
(
dbDes
->
au8TextCh¨
, 
pD©a
, dbDes->
u8TextLígth
);

476 
dbDes
->
au8TextCh¨
[(dbDes->au8TextChar) - 1] = '\0';

478 
pD©a
 = 
GOSTSR_NULL
;

480  
GOSTSR_SUCCESS
;

483 
GOSTSR_S32
 
GosT§_Des¸ùt‹_D©aBrﬂdˇ°ID
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_DATA_BROADCAST_ID_S
 *
dIDDes
)

485 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

487 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
dIDDes
))

489  
GOSTSR_FAILURE
;

492 i‡(
GOS_PSISI_DESCRIPTOR_DATA_BROADCAST_ID
 !
§cDes
->
Tag
)

494  
GOSTSR_FAILURE
;

497 
mem£t
(
dIDDes
, 0x00, (
GOS_DESC_DATA_BROADCAST_ID_S
));

498 
pD©a
 = 
§cDes
->
D©a
;

501 
dIDDes
->
u16D©aBrﬂdˇ°Id
 = 
pD©a
[0]*256 +ÖData[0];

502 
pD©a
 += 2;

505 
mem˝y
(
dIDDes
->
au8IdSñe˘‹Byã
, 
pD©a
, 
§cDes
->
u16Size
 - 2);

506 
dIDDes
->
au8IdSñe˘‹Byã
[(dIDDes->au8IdSelectorByte) - 1] = '\0';

508 
pD©a
 = 
GOSTSR_NULL
;

510  
GOSTSR_SUCCESS
;

513 
GOSTSR_S32
 
GosT§_Des¸ùt‹_ExãndEvít
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_EXTEVT_S
 *
ìDes
)

515 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

516 
GOSTSR_S16
 
ôemLí
 = 0;

517 
GOSTSR_U8
 
i
 = 0;

519 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
ìDes
))

521  
GOSTSR_FAILURE
;

524 i‡(
GOS_PSISI_DESCRIPTOR_EXTENDED_EVENT
 !
§cDes
->
Tag
)

526  
GOSTSR_FAILURE
;

529 
mem£t
(
ìDes
, 0x00, (
GOS_DESC_EXTEVT_S
));

530 
pD©a
 = 
§cDes
->
D©a
;

533 
ìDes
->
u8Desc_Num
 = (
pD©a
[0] & 0xf0Ë/ 
BIT5
;

536 
ìDes
->
u8La°_Desc_Num
 = 
pD©a
[0] & 0x0f;

537 
pD©a
 += 1;

540 
ìDes
->
u32Lag_Code
 = (
pD©a
[0]<<16) + (pData[1]<<8) +ÖData[2];

541 
pD©a
 += 3;

544 
ôemLí
 = 
pD©a
[0];

545 
ìDes
->
u8IãmNum
 = 
pD©a
[0];

546 
pD©a
 += 1;

548 
i
 = 0;

549 
ôemLí
 > 0)

552 
ìDes
->
a°IãmEÀ
[
i
].
u8IãmDescLí
 = 
pD©a
[0];

553 
pD©a
 += 1;

556 
mem˝y
(
ìDes
->
a°IãmEÀ
[
i
].
IãmDesc
, 
pD©a
,ÉeDes->a°IãmEÀ[i].
u8IãmDescLí
);

557 
ìDes
->
a°IãmEÀ
[
i
].
IãmDesc
[ìDes->a°IãmEÀ[i].
u8IãmDescLí
] = '\0';

558 
pD©a
 +
ìDes
->
a°IãmEÀ
[
i
].
u8IãmDescLí
;

561 
ìDes
->
a°IãmEÀ
[
i
].
u8IãmCh¨Lí
 = 
pD©a
[0];

562 
pD©a
 += 1;

565 
mem˝y
(
ìDes
->
a°IãmEÀ
[
i
].
IãmCh¨
, 
pD©a
,ÉeDes->a°IãmEÀ[i].
u8IãmCh¨Lí
);

566 
ìDes
->
a°IãmEÀ
[
i
].
IãmCh¨
[ìDes->a°IãmEÀ[i].
u8IãmCh¨Lí
] = '\0';

567 
pD©a
 +
ìDes
->
a°IãmEÀ
[
i
].
u8IãmCh¨Lí
;

569 
ôemLí
 -(2 + 
ìDes
->
a°IãmEÀ
[
i
].
u8IãmCh¨Lí
 +ÉeDes->a°IãmEÀ[i].
u8IãmDescLí
);

570 
i
++;

572 
ìDes
->
u8IãmNum
 = 
i
;

575 
ìDes
->
u32Txt_Lígth
 = 
pD©a
[0];

576 
pD©a
 += 1;

579 
mem˝y
(
ìDes
->
acTxt_Ch¨
, 
pD©a
,ÉeDes->
u32Txt_Lígth
);

580 
ìDes
->
acTxt_Ch¨
[(eeDes->acTxt_Char) - 1] = '\0';

582 
pD©a
 = 
GOSTSR_NULL
;

584  
GOSTSR_SUCCESS
;

587 
GOSTSR_S32
 
GosT§_Des¸ùt‹_FªquícyLi°
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_FREQLST_S
 *
ÊDes
)

589 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

590 
GOSTSR_U8
 
i
 = 0;

592 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
ÊDes
))

594  
GOSTSR_FAILURE
;

597 i‡(
GOS_PSISI_DESCRIPTOR_FREQUENCY_LIST
 !
§cDes
->
Tag
)

599  
GOSTSR_FAILURE
;

602 
mem£t
(
ÊDes
, 0x00, (
GOS_DESC_FREQLST_S
));

603 
pD©a
 = 
§cDes
->
D©a
;

608 
ÊDes
->
u8Codög_Ty≥
 = 
pD©a
[0] & (
BIT2
 | 
BIT1
);

609 
pD©a
 += 1;

611 
ÊDes
->
u32FªNum
 = ((
§cDes
->
u16Size
 - 1Ë/ 4Ë< 
GOS_MAX_FREQUENCY_NUM
? ((srcDes->u16Size - 1) / 4) : GOS_MAX_FREQUENCY_NUM;

614 
i
 = 0; i < 
ÊDes
->
u32FªNum
; i++)

616 
ÊDes
->
au32FªquícyVÆue
[
i
] = (
pD©a
[0]<<24) + (pData[1]<<16) + (pData[2]<<8) +ÖData[3];

617 
pD©a
 += 4;

620 
pD©a
 = 
GOSTSR_NULL
;

622  
GOSTSR_SUCCESS
;

625 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Hõørchy
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_HIERARCHY_S
 *
hDes
)

627 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

629 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
hDes
))

631  
GOSTSR_FAILURE
;

634 i‡(
GOS_PSISI_DESCRIPTOR_HIERARCHY
 !
§cDes
->
Tag
)

636  
GOSTSR_FAILURE
;

639 
mem£t
(
hDes
, 0x00, (
GOS_DESC_HIERARCHY_S
));

640 
pD©a
 = 
§cDes
->
D©a
;

645 
hDes
->
u8HõørchyTy≥
 = 
pD©a
[0] & (
BIT4
 | 
BIT3
 | 
BIT2
 | 
BIT1
);

646 
pD©a
 += 1;

651 
hDes
->
u8HõørchyLayîIndex
 = 
pD©a
[0] & (
BIT6
 | 
BIT5
 | 
BIT4
 | 
BIT3
 | 
BIT2
 | 
BIT1
);

652 
pD©a
 += 1;

657 
hDes
->
u8HõørchyEmbeddedLayî
 = 
pD©a
[0] & (
BIT6
 | 
BIT5
 | 
BIT4
 | 
BIT3
 | 
BIT2
 | 
BIT1
);

658 
pD©a
 += 1;

663 
hDes
->
u8HõørchyPri‹ôy
 = 
pD©a
[0] & (
BIT6
 | 
BIT5
 | 
BIT4
 | 
BIT3
 | 
BIT2
 | 
BIT1
);

664 
pD©a
 += 1;

666 
pD©a
 = 
GOSTSR_NULL
;

668  
GOSTSR_SUCCESS
;

671 
GOSTSR_S32
 
GosT§_Des¸ùt‹_ISO639L™guageCode
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_ISOLANGUAGECODE_S
 *
lcDes
)

673 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

674 
GOSTSR_U16
 
i
 = 0;

676 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
lcDes
))

678  
GOSTSR_FAILURE
;

681 i‡(
GOS_PSISI_DESCRIPTOR_LANGUAGE_NAME
 !
§cDes
->
Tag
)

683  
GOSTSR_FAILURE
;

686 
mem£t
(
lcDes
, 0x00, (
GOS_DESC_ISOLANGUAGECODE_S
));

687 
pD©a
 = 
§cDes
->
D©a
;

690 
lcDes
->
u16L™guageCodeLí
 = (
§cDes
->
u16Size
 - 1) / 3;

691 i‡(
lcDes
->
u16L™guageCodeLí
 > 
GOS_MAX_LANGUAGECODE_NUM
)

693 
lcDes
->
u16L™guageCodeLí
 = 
GOS_MAX_LANGUAGECODE_NUM
;

696 
i
 = 0; i < 
lcDes
->
u16L™guageCodeLí
; i++)

698 
lcDes
->
u32L™guageCode
[
i
] = (
pD©a
[0]<<16) + (pData[1]<<8) +ÖData[2];

699 
pD©a
 += 3;

703 
lcDes
->
u8AudioTy≥
 = 
pD©a
[0];

705 
pD©a
 = 
GOSTSR_NULL
;

707  
GOSTSR_SUCCESS
;

710 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Lökage
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_LINKAGE_S
 *
lDes
)

712 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

713 
GOSTSR_U8
 
u8TempOff£t
 = 0;

714 
GOSTSR_U16
 
u16TempLí
 = 0;

716 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
lDes
))

718  
GOSTSR_FAILURE
;

721 i‡(
GOS_PSISI_DESCRIPTOR_LINKAGE
 !
§cDes
->
Tag
)

723  
GOSTSR_FAILURE
;

726 
mem£t
(
lDes
, 0x00, (
GOS_DESC_LINKAGE_S
));

727 
pD©a
 = 
§cDes
->
D©a
;

729 
u16TempLí
 = 
§cDes
->
u16Size
;

732 
lDes
->
u16TsId
 = 
pD©a
[0]*256 +ÖData[1];

733 
pD©a
 += 2;

736 
lDes
->
u16Orid
 = 
pD©a
[0]*256 +ÖData[1];

737 
pD©a
 += 2;

740 
lDes
->
u16Sîvi˚Id
 = 
pD©a
[0]*256 +ÖData[1];

741 
pD©a
 += 2;

744 
lDes
->
u8LökTy≥
 = 
pD©a
[0];

745 
pD©a
 += 1;

747 if(
lDes
->
u8LökTy≥
 == 0x08)

750 
lDes
->
u8H™dOvîTy≥
 = (
pD©a
[0] & (
BIT8
 | 
BIT7
 | 
BIT6
 | 
BIT5
)) / BIT5;

755 
lDes
->
u8OrigöTy≥
 = 
pD©a
[0] & 
BIT1
;

756 
pD©a
[0] += 1;

758 if((
lDes
->
u8H™dOvîTy≥
 == 0x01) ||(ÜDes->u8HandOverType == 0x02) || (lDes->u8HandOverType == 0x03))

761 
lDes
->
u16Nëw‹kID
 = (
pD©a
[0] << 8) +ÖData[1];

762 
u8TempOff£t
 += 2;

763 
pD©a
 += 2;

765 if(
lDes
->
u8OrigöTy≥
 == 0x00)

768 
lDes
->
u16InôSîID
 = (
pD©a
[0] << 8) +ÖData[1];

769 
u8TempOff£t
 += 2;

770 
pD©a
 += 2;

774 
lDes
->
u16PrivD©aLí
 = (
GOSTSR_U8
)
u16TempLí
 - 8 - 
u8TempOff£t
;

777 
mem˝y
(
lDes
->
u8PrivD©a
,
pD©a
,lDes->
u16PrivD©aLí
);

780 i‡(0x0D =
lDes
->
u8LökTy≥
)

783 
lDes
->
u16T¨gëEvítID
 = 
pD©a
[0]*256 +ÖData[1];

784 
pD©a
 += 2;

787 
lDes
->
u8T¨gëLi°ed
 = (
pD©a
[0] & 
BIT8
) / BIT8;

790 
lDes
->
u8EvítSimulˇ°
 = (
pD©a
[0] & 
BIT7
) / BIT7;

793 
pD©a
 += 1;

795 
u8TempOff£t
 += 3;

800 
lDes
->
u16PrivD©aLí
 = (
GOSTSR_U8
)
u16TempLí
 - 7 - 
u8TempOff£t
;

803 
mem˝y
(
lDes
->
u8PrivD©a
,
pD©a
,lDes->
u16PrivD©aLí
);

806 
pD©a
 = 
GOSTSR_NULL
;

808  
GOSTSR_SUCCESS
;

811 
GOSTSR_S32
 
GosT§_Des¸ùt‹_LoˇlTimeOff£t
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_LOCALTMOFFSET_S
 *
…oDes
)

813 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

814 
GOSTSR_U16
 
i
 = 0;

816 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
…oDes
))

818  
GOSTSR_FAILURE
;

821 i‡(
GOS_PSISI_DESCRIPTOR_LOCAL_TIME_OFFSET
 !
§cDes
->
Tag
)

823  
GOSTSR_FAILURE
;

826 
mem£t
(
…oDes
, 0x00, (
GOS_DESC_LOCALTMOFFSET_S
));

827 
pD©a
 = 
§cDes
->
D©a
;

829 
…oDes
->
u32TimeOff£tEÀNum
 = (
§cDes
->
u16Size
 / 13Ë< 
GOS_MAX_LOCALTIME_ELENUM
? (srcDes->u16Size / 13) : GOS_MAX_LOCALTIME_ELENUM;

831 
i
 = 0; i < 
…oDes
->
u32TimeOff£tEÀNum
; i++)

834 
…oDes
->
a°TimeOff£tInfo
[
i
].
u32Cou¡ry_Code
 = (
pD©a
[0]<<16) + (pData[1]<<8) +ÖData[2];

835 
pD©a
 += 3;

838 
…oDes
->
a°TimeOff£tInfo
[
i
].
u8Cou¡ry_Regi⁄_Id
 = (
pD©a
[0] & (~(
BIT2
 | 
BIT1
))Ë/ 
BIT3
;

843 
…oDes
->
a°TimeOff£tInfo
[
i
].
u8Loˇl_Time_Off£t_Pﬁ¨ôy
 = 
pD©a
[0] & 
BIT1
;

844 
pD©a
 += 1;

847 
…oDes
->
a°TimeOff£tInfo
[
i
].
u16Loˇl_Time_Off£t
 = ((
pD©a
[0] & 0xf0Ë/ 
BIT5
)*1000 + (pData[0] & 0x0f)*100 + \

848 ((
pD©a
[1] & 0xf0Ë/ 
BIT5
)*10 + (pData[1] & 0x0f);

849 
pD©a
 += 2;

852 
…oDes
->
a°TimeOff£tInfo
[
i
].
u16time_Of_Ch™ge_MJD
 = 
pD©a
[0]*256 +ÖData[1];

853 
pD©a
 += 2;

855 
…oDes
->
a°TimeOff£tInfo
[
i
].
u32Time_Of_Ch™ge_UTC
 = ((
pD©a
[0] & 0xf0Ë/ 
BIT5
)*100000 + (pData[0] & 0x0f)*10000 + \

856 ((
pD©a
[1] & 0xf0Ë/ 
BIT5
)*1000 + (pData[1] & 0x0f)*100 + \

857 ((
pD©a
[2] & 0xf0Ë/ 
BIT5
)*10 + (pData[2] & 0x0f);

858 
pD©a
 += 3;

861 
…oDes
->
a°TimeOff£tInfo
[
i
].
u16Next_Time_Off£t
 = ((
pD©a
[0] & 0xf0Ë/ 
BIT5
)*1000 + (pData[0] & 0x0f)*100 + \

862 ((
pD©a
[1] & 0xf0Ë/ 
BIT5
)*10 + (pData[1] & 0x0f);

863 
pD©a
 += 2;

866 
pD©a
 = 
GOSTSR_NULL
;

868  
GOSTSR_SUCCESS
;

871 
GOSTSR_S32
 
GosT§_Des¸ùt‹_LCN_83
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_LCN83_S
 *
l˙83Des
)

873 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

874 
GOSTSR_U16
 
i
 = 0;

876 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
l˙83Des
))

878  
GOSTSR_FAILURE
;

881 i‡(
GOS_PSISI_DESCRIPTOR_LCN_0X83
 !
§cDes
->
Tag
)

883  
GOSTSR_FAILURE
;

886 
mem£t
(
l˙83Des
, 0x00, (
GOS_DESC_LCN83_S
));

887 
pD©a
 = 
§cDes
->
D©a
;

889 
i
 = 0; i < (
§cDes
->
u16Size
 / 4); i++)

892 
l˙83Des
->
LCNSîvi˚Info
[
i
].
u16Sîvi˚Id
 = 
pD©a
[0]*256 +ÖData[1];

893 
pD©a
 += 2;

896 
l˙83Des
->
LCNSîvi˚Info
[
i
].
u8VisFœg
 = (
pD©a
[0] & 
BIT8
) / BIT8;

901 
l˙83Des
->
LCNSîvi˚Info
[
i
].
u16LCN
 = (
pD©a
[0] & (~(
BIT8
 + 
BIT7
)))*256 +ÖData[1];

902 
pD©a
 += 2;

904 
l˙83Des
->
u16LCNSîvi˚Num
 = 
i
;

906  
GOSTSR_SUCCESS
;

909 
GOSTSR_S32
 
GosT§_Des¸ùt‹_LCN_87
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_LCN87_S
 *
l˙87Des
)

911 
GOSTSR_S32
 
desLí
;

912 
GOSTSR_U16
 
l˙InfoLí
 = 0;

913 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

914 
GOSTSR_U16
 
i
 = 0, 
j
 =0;

916 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
l˙87Des
))

918  
GOSTSR_FAILURE
;

921 i‡(
GOS_PSISI_DESCRIPTOR_LCN_0X87
 !
§cDes
->
Tag
)

923  
GOSTSR_FAILURE
;

926 
mem£t
(
l˙87Des
, 0x00, (
GOS_DESC_LCN87_S
));

927 
pD©a
 = 
§cDes
->
D©a
;

928 
desLí
 = 
§cDes
->
u16Size
;

930 
desLí
 > 0)

933 
l˙87Des
->
ch™√lLi°Info
[
i
].
u8Ch™√lLi°Id
 = 
pD©a
[0];

934 
pD©a
++;

937 
l˙87Des
->
ch™√lLi°Info
[
i
].
u16Ch™√lLi°NameLí
 = 
pD©a
[0];

938 
pD©a
++;

941 
mem£t
(
l˙87Des
->
ch™√lLi°Info
[
i
].
u16Ch™√lLi°Name
, '\0', (lcn87Des->channelListInfo[i].u16ChannelListName));

942 
mem˝y
(
l˙87Des
->
ch™√lLi°Info
[
i
].
u16Ch™√lLi°Name
, 
pD©a
,Ü˙87Des->ch™√lLi°Info[i].
u16Ch™√lLi°NameLí
);

943 
pD©a
 +
l˙87Des
->
ch™√lLi°Info
[
i
].
u16Ch™√lLi°NameLí
;

946 
l˙87Des
->
ch™√lLi°Info
[
i
].
u32Cou¡ry_Code
 = (
pD©a
[0]<<24) + (pData[1]<<16) + (pData[2]<<8) +ÖData[3];

947 
pD©a
 += 4;

949 
l˙InfoLí
 = 
pD©a
[0];

950 
pD©a
++;

952 
j
 = 0; j < (
l˙InfoLí
 / 4); j++)

955 
l˙87Des
->
ch™√lLi°Info
[
i
].
LCNSîvi˚Info
[
j
].
u16Sîvi˚Id
 = 
pD©a
[0]*256 +ÖData[1];

956 
pD©a
 += 2;

959 
l˙87Des
->
ch™√lLi°Info
[
i
].
LCNSîvi˚Info
[
j
].
u8VisFœg
 = (
pD©a
[0] & 
BIT8
) / BIT8;

964 
l˙87Des
->
ch™√lLi°Info
[
i
].
LCNSîvi˚Info
[
j
].
u16LCN
 = (
pD©a
[0] & (~(
BIT8
 + 
BIT7
)))*256 +ÖData[1];

965 
pD©a
 += 2;

967 
l˙87Des
->
ch™√lLi°Info
[
i
].
u16LCNSîvi˚Num
 = 
j
;

969 
desLí
 -
l˙InfoLí
 + 5 + 
l˙87Des
->
ch™√lLi°Info
[
i
].
u16Ch™√lLi°NameLí
 + 2;

970 
i
++;

972 
l˙87Des
->
u16Ch™√lLi°Num
 = 
i
;

974  
GOSTSR_SUCCESS
;

977 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Moßic
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_MOSAIC_S
 *
mDes
)

979 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

980 
GOSTSR_S32
 
ªmaöLí
 = 0;

981 
GOSTSR_U16
 
i
 = 0, 
j
 = 0;

982 
GOSTSR_U8
 
lökAge
 = 0;

983 
GOSTSR_U8
 
lökAgeLí
 = 0;

985 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
mDes
))

987  
GOSTSR_FAILURE
;

990 i‡(
GOS_PSISI_DESCRIPTOR_MOSAIC
 !
§cDes
->
Tag
)

992  
GOSTSR_FAILURE
;

995 
mem£t
(
mDes
, 0x00, (
GOS_DESC_MOSAIC_S
));

996 
pD©a
 = 
§cDes
->
D©a
;

999 
mDes
->
u8Moßic_íåy_poöt
 = (
pD©a
[0] & 
BIT8
) / BIT8;

1002 
mDes
->
u8NumbîHEÀmíèryCñls
 = (
pD©a
[0] & (
BIT7
 | 
BIT6
 | 
BIT5
)) / BIT5;

1007 
mDes
->
u8NumbîVEÀmíèryCñls
 = 
pD©a
[0] & (
BIT3
 | 
BIT2
 | 
BIT1
);

1008 
pD©a
 += 1;

1010 
ªmaöLí
 = 
§cDes
->
u16Size
 - 1;

1012 
i
 = 0;

1013 
ªmaöLí
 > 0)

1016 
mDes
->
a°LogicCñlInfo
[
i
].
u8LogiˇlCñlId
 = (
pD©a
[0] & (~(
BIT2
 | 
BIT1
))Ë/ 
BIT3
;

1019 
pD©a
 += 1;

1022 
mDes
->
a°LogicCñlInfo
[
i
].
u8LogiˇlCñlInfo
 = 
pD©a
[0] & (
BIT3
 | 
BIT2
 | 
BIT1
);

1023 
pD©a
 += 1;

1026 
mDes
->
a°LogicCñlInfo
[
i
].
u8EÀCñlNum
 = 
pD©a
[0];

1027 i‡(
mDes
->
a°LogicCñlInfo
[
i
].
u8EÀCñlNum
 > 
GOS_MAX_MOSAIC_ElE_CELL_NUM
)

1029 
mDes
->
a°LogicCñlInfo
[
i
].
u8EÀCñlNum
 = 
GOS_MAX_MOSAIC_ElE_CELL_NUM
;

1031 
pD©a
 += 1;

1033 
j
 = 0; j < 
mDes
->
a°LogicCñlInfo
[
i
].
u8EÀCñlNum
; j++)

1038 
mDes
->
a°LogicCñlInfo
[
i
].
a°EÀCñlId
[
j
] = 
pD©a
[0] & (
BIT6
 | 
BIT5
 | 
BIT4
 | 
BIT3
 | 
BIT2
 | 
BIT1
);

1039 
pD©a
 += 1;

1043 
lökAge
 = 
pD©a
[0];

1044 
mDes
->
a°LogicCñlInfo
[
i
].
u8CñlLökageInfo
 = 
lökAge
;

1045 
pD©a
 += 1;

1047 
lökAgeLí
 = 0;

1049 i‡(
lökAge
 == 0x01)

1052 
mDes
->
a°LogicCñlInfo
[
i
].
u16BouquëId
 = 
pD©a
[0]*256 +ÖData[1];

1053 
pD©a
 += 2;

1055 
lökAgeLí
 = 2;

1057 i‡((
lökAge
 == 0x02) || (linkAge == 0x03))

1060 
mDes
->
a°LogicCñlInfo
[
i
].
u16OrId
 = 
pD©a
[0]*256 +ÖData[1];

1061 
pD©a
 += 2;

1064 
mDes
->
a°LogicCñlInfo
[
i
].
u16TsId
 = 
pD©a
[0]*256 +ÖData[1];

1065 
pD©a
 += 2;

1068 
mDes
->
a°LogicCñlInfo
[
i
].
u16Sîvi˚Id
 = 
pD©a
[0]*256 +ÖData[1];

1069 
pD©a
 += 2;

1071 
lökAgeLí
 = 6;

1073 i‡(
lökAge
 == 0x04)

1076 
mDes
->
a°LogicCñlInfo
[
i
].
u16OrId
 = 
pD©a
[0]*256 +ÖData[1];

1077 
pD©a
 += 2;

1080 
mDes
->
a°LogicCñlInfo
[
i
].
u16TsId
 = 
pD©a
[0]*256 +ÖData[1];

1081 
pD©a
 += 2;

1084 
mDes
->
a°LogicCñlInfo
[
i
].
u16Sîvi˚Id
 = 
pD©a
[0]*256 +ÖData[1];

1085 
pD©a
 += 2;

1088 
mDes
->
a°LogicCñlInfo
[
i
].
u16EvítId
 = 
pD©a
[0]*256 +ÖData[1];

1089 
pD©a
 += 2;

1091 
lökAgeLí
 = 8;

1094 
ªmaöLí
 -
lökAgeLí
 + 
mDes
->
a°LogicCñlInfo
[
i
].
u8EÀCñlNum
 + 4;

1095 
i
++;

1097 
mDes
->
u8NumbîLogicCñls
 = (
GOSTSR_U8
)
i
;

1099 
pD©a
 = 
GOSTSR_NULL
;

1101  
GOSTSR_SUCCESS
;

1104 
GOSTSR_S32
 
GosT§_Des¸ùt‹_MaximumBôøã
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_MAXBITRATE_S
 *
mbDes
)

1106 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

1108 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
mbDes
))

1110  
GOSTSR_FAILURE
;

1113 i‡(
GOS_PSISI_DESCRIPTOR_MAX_BITRATE
 !
§cDes
->
Tag
)

1115  
GOSTSR_FAILURE
;

1118 
mem£t
(
mbDes
, 0x00, (
GOS_DESC_MAXBITRATE_S
));

1119 
pD©a
 = 
§cDes
->
D©a
;

1124 
mbDes
->
u32MaxBôøã
 = ((
pD©a
[0] & (~(
BIT8
 | 
BIT7
)))<<16) + (pData[1]<<8) +ÖData[2];

1126 
pD©a
 = 
GOSTSR_NULL
;

1128  
GOSTSR_SUCCESS
;

1131 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Mu…ûöguÆBouquëName
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_MULT_BOUQUET_NAME_S
 *
mbnDes
)

1133 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

1134 
GOSTSR_S32
 
ªmaöLí
 = 0;

1135 
GOSTSR_U16
 
i
 = 0;

1137 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
mbnDes
))

1139  
GOSTSR_FAILURE
;

1142 i‡(
GOS_PSISI_DESCRIPTOR_MULTILINGUAL_BOUQUET_NAME
 !
§cDes
->
Tag
)

1144  
GOSTSR_FAILURE
;

1147 
mem£t
(
mbnDes
, 0x00, (
GOS_DESC_MULT_BOUQUET_NAME_S
));

1148 
pD©a
 = 
§cDes
->
D©a
;

1150 
ªmaöLí
 = 
§cDes
->
u16Size
;

1152 
i
 = 0;

1153 
ªmaöLí
 > 0)

1156 
mbnDes
->
a°BouquëName
[
i
].
au8ISO639_L™guage_Code
[0] = 
pD©a
[0];

1157 
mbnDes
->
a°BouquëName
[
i
].
au8ISO639_L™guage_Code
[1] = 
pD©a
[1];

1158 
mbnDes
->
a°BouquëName
[
i
].
au8ISO639_L™guage_Code
[2] = 
pD©a
[2];

1159 
pD©a
 += 3;

1162 
mbnDes
->
a°BouquëName
[
i
].
u8NameLígth
 = 
pD©a
[0];

1163 
pD©a
 += 1;

1166 
mem˝y
(
mbnDes
->
a°BouquëName
[
i
].
au8Ch¨
, 
pD©a
, mbnDes->a°BouquëName[i].
u8NameLígth
);

1167 
mbnDes
->
a°BouquëName
[
i
].
au8Ch¨
[255] = '\0';

1168 
pD©a
 +
mbnDes
->
a°BouquëName
[
i
].
u8NameLígth
;

1170 
ªmaöLí
 -4 + 
mbnDes
->
a°BouquëName
[
i
].
u8NameLígth
;

1171 
i
++;

1173 
mbnDes
->
u8BouquëNameNum
 = (
GOSTSR_U8
)
i
;

1175 
pD©a
 = 
GOSTSR_NULL
;

1177  
GOSTSR_SUCCESS
;

1180 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Mu…ûöguÆComp⁄ít
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_MULT_COMPONENT_S
 *
mcDes
)

1182 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

1183 
GOSTSR_S32
 
ªmaöLí
 = 0;

1184 
GOSTSR_U16
 
i
 = 0;

1186 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
mcDes
))

1188  
GOSTSR_FAILURE
;

1191 i‡(
GOS_PSISI_DESCRIPTOR_COMPONENT_SERVICE_NAME
 !
§cDes
->
Tag
)

1193  
GOSTSR_FAILURE
;

1196 
mem£t
(
mcDes
, 0x00, (
GOS_DESC_MULT_COMPONENT_S
));

1197 
pD©a
 = 
§cDes
->
D©a
;

1200 
mcDes
->
u8Comp⁄ítTag
 = 
pD©a
[0];

1201 
pD©a
 += 1;

1203 
ªmaöLí
 = 
§cDes
->
u16Size
 - 1;

1205 
i
 = 0;

1206 
ªmaöLí
 > 0)

1209 
mcDes
->
a°Comp⁄ít
[
i
].
au8ISO639_L™guage_Code
[0] = 
pD©a
[0];

1210 
mcDes
->
a°Comp⁄ít
[
i
].
au8ISO639_L™guage_Code
[1] = 
pD©a
[1];

1211 
mcDes
->
a°Comp⁄ít
[
i
].
au8ISO639_L™guage_Code
[2] = 
pD©a
[2];

1212 
pD©a
 += 3;

1215 
mcDes
->
a°Comp⁄ít
[
i
].
u8NameLígth
 = 
pD©a
[0];

1216 
pD©a
 += 1;

1219 
mem˝y
(
mcDes
->
a°Comp⁄ít
[
i
].
au8Ch¨
, 
pD©a
, mcDes->a°Comp⁄ít[i].
u8NameLígth
);

1220 
mcDes
->
a°Comp⁄ít
[
i
].
au8Ch¨
[(mcDes->astComponent[i].au8Char) - 1] = '\0';

1221 
pD©a
 +
mcDes
->
a°Comp⁄ít
[
i
].
u8NameLígth
;

1223 
ªmaöLí
 -4 + 
mcDes
->
a°Comp⁄ít
[
i
].
u8NameLígth
;

1224 
i
++;

1226 
mcDes
->
u8Comp⁄ítNum
 = (
GOSTSR_U8
)
i
;

1228 
pD©a
 = 
GOSTSR_NULL
;

1230  
GOSTSR_SUCCESS
;

1233 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Mu…ûöguÆNëw‹kName
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_MULT_NETWORK_NAME_S
 *
m¬Des
)

1235 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

1236 
GOSTSR_S32
 
ªmaöLí
 = 0;

1237 
GOSTSR_U16
 
i
 = 0;

1239 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
m¬Des
))

1241  
GOSTSR_FAILURE
;

1244 i‡(
GOS_PSISI_DESCRIPTOR_MULTILINGUAL_NETWORK_NAME
 !
§cDes
->
Tag
)

1246  
GOSTSR_FAILURE
;

1249 
mem£t
(
m¬Des
, 0x00, (
GOS_DESC_MULT_NETWORK_NAME_S
));

1250 
pD©a
 = 
§cDes
->
D©a
;

1252 
ªmaöLí
 = 
§cDes
->
u16Size
;

1254 
i
 = 0;

1255 
ªmaöLí
 > 0)

1258 
m¬Des
->
a°Nëw‹kName
[
i
].
au8ISO639_L™guage_Code
[0] = 
pD©a
[0];

1259 
m¬Des
->
a°Nëw‹kName
[
i
].
au8ISO639_L™guage_Code
[1] = 
pD©a
[1];

1260 
m¬Des
->
a°Nëw‹kName
[
i
].
au8ISO639_L™guage_Code
[2] = 
pD©a
[2];

1261 
pD©a
 += 3;

1264 
m¬Des
->
a°Nëw‹kName
[
i
].
u8NameLígth
 = 
pD©a
[0];

1265 
pD©a
 += 1;

1268 
mem˝y
(
m¬Des
->
a°Nëw‹kName
[
i
].
au8Ch¨
, 
pD©a
, m¬Des->a°Nëw‹kName[i].
u8NameLígth
);

1269 
m¬Des
->
a°Nëw‹kName
[
i
].
au8Ch¨
[(mnnDes->astNetworkName[i].au8Char) - 1] = '\0';

1270 
pD©a
 +
m¬Des
->
a°Nëw‹kName
[
i
].
u8NameLígth
;

1272 
ªmaöLí
 -4 + 
m¬Des
->
a°Nëw‹kName
[
i
].
u8NameLígth
;

1273 
i
++;

1275 
m¬Des
->
u8Nëw‹kNameNum
 = (
GOSTSR_U8
)
i
;

1277 
pD©a
 = 
GOSTSR_NULL
;

1279  
GOSTSR_SUCCESS
;

1282 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Mu…ûöguÆSîvi˚Name
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_MULT_SERVICE_NAME_S
 *
m¢Des
)

1284 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

1285 
GOSTSR_S32
 
ªmaöLí
 = 0;

1286 
GOSTSR_U16
 
i
 = 0;

1288 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
m¢Des
))

1290  
GOSTSR_FAILURE
;

1293 i‡(
GOS_PSISI_DESCRIPTOR_MULTILINGUAL_SERVICE_NAME
 !
§cDes
->
Tag
)

1295  
GOSTSR_FAILURE
;

1298 
mem£t
(
m¢Des
, 0x00, (
GOS_DESC_MULT_SERVICE_NAME_S
));

1299 
pD©a
 = 
§cDes
->
D©a
;

1301 
ªmaöLí
 = 
§cDes
->
u16Size
;

1303 
i
 = 0;

1304 
ªmaöLí
 > 0)

1307 
m¢Des
->
a°Sîvi˚ProvidîName
[
i
].
au8ISO639_L™guage_Code
[0] = 
pD©a
[0];

1308 
m¢Des
->
a°Sîvi˚ProvidîName
[
i
].
au8ISO639_L™guage_Code
[1] = 
pD©a
[1];

1309 
m¢Des
->
a°Sîvi˚ProvidîName
[
i
].
au8ISO639_L™guage_Code
[2] = 
pD©a
[2];

1310 
m¢Des
->
a°Sîvi˚Name
[
i
].
au8ISO639_L™guage_Code
[0] = 
pD©a
[0];

1311 
m¢Des
->
a°Sîvi˚Name
[
i
].
au8ISO639_L™guage_Code
[1] = 
pD©a
[1];

1312 
m¢Des
->
a°Sîvi˚Name
[
i
].
au8ISO639_L™guage_Code
[2] = 
pD©a
[2];

1313 
pD©a
 += 3;

1316 
m¢Des
->
a°Sîvi˚ProvidîName
[
i
].
u8NameLígth
 = 
pD©a
[0];

1317 
pD©a
 += 1;

1320 
mem˝y
(
m¢Des
->
a°Sîvi˚ProvidîName
[
i
].
au8Ch¨
, 
pD©a
, m¢Des->a°Sîvi˚ProvidîName[i].
u8NameLígth
);

1321 
m¢Des
->
a°Sîvi˚ProvidîName
[
i
].
au8Ch¨
[(msnDes->astServiceProviderName[i].au8Char) - 1] = '\0';

1322 
pD©a
 +
m¢Des
->
a°Sîvi˚ProvidîName
[
i
].
u8NameLígth
;

1325 
m¢Des
->
a°Sîvi˚Name
[
i
].
u8NameLígth
 = 
pD©a
[0];

1326 
pD©a
 += 1;

1329 
mem˝y
(
m¢Des
->
a°Sîvi˚Name
[
i
].
au8Ch¨
, 
pD©a
, m¢Des->a°Sîvi˚Name[i].
u8NameLígth
);

1330 
m¢Des
->
a°Sîvi˚Name
[
i
].
au8Ch¨
[(msnDes->astServiceName[i].au8Char) - 1] = '\0';

1331 
pD©a
 +
m¢Des
->
a°Sîvi˚Name
[
i
].
u8NameLígth
;

1333 
ªmaöLí
 -5 + 
m¢Des
->
a°Sîvi˚ProvidîName
[
i
].
u8NameLígth
 + m¢Des->
a°Sîvi˚Name
[i].u8NameLength;

1334 
i
++;

1336 
m¢Des
->
u8Sîvi˚NameNum
 = (
GOSTSR_U8
)
i
;

1337 
m¢Des
->
u8Sîvi˚ProvidîNameNum
 = (
GOSTSR_U8
)
i
;

1339 
pD©a
 = 
GOSTSR_NULL
;

1341  
GOSTSR_SUCCESS
;

1344 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Mu…ùÀxBuf„rUtûiz©i⁄
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_MULBUFFERUTILIZATION_S
 *
mbuDes
)

1346 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

1348 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
mbuDes
))

1350  
GOSTSR_FAILURE
;

1353 i‡(
GOS_PSISI_DESCRIPTOR_MULTIPLEX_BUFFER
 !
§cDes
->
Tag
)

1355  
GOSTSR_FAILURE
;

1358 
mem£t
(
mbuDes
, 0x00, (
GOS_DESC_MULBUFFERUTILIZATION_S
));

1359 
pD©a
 = 
§cDes
->
D©a
;

1362 
mbuDes
->
u8MdvVÆidFœg
 = (
pD©a
[0] & 
BIT8
) / BIT8;

1365 
mbuDes
->
u16Mu…ùÀxDñayV¨üti⁄
 = (
pD©a
[0] & (~(
BIT8
)))*256 +ÖData[1];

1366 
pD©a
 += 2;

1369 
mbuDes
->
u8Mu…ùÀxSå©egy
 = (
pD©a
[0] & (
BIT8
 | 
BIT7
 | 
BIT6
)) / BIT6;

1373 
pD©a
 = 
GOSTSR_NULL
;

1375  
GOSTSR_SUCCESS
;

1378 
GOSTSR_S32
 
GosT§_Des¸ùt‹_NVODRe„ªn˚
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_NVODREF_S
 *
ƒDes
)

1380 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

1381 
GOSTSR_U16
 
i
 = 0;

1383 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
ƒDes
))

1385  
GOSTSR_FAILURE
;

1388 i‡(
GOS_PSISI_DESCRIPTOR_NVOD_REFERENCE
 !
§cDes
->
Tag
)

1390  
GOSTSR_FAILURE
;

1393 
mem£t
(
ƒDes
, 0x00, (
GOS_DESC_NVODREF_S
));

1394 
pD©a
 = 
§cDes
->
D©a
;

1396 
ƒDes
->
u8NbSîvi˚
 = 
§cDes
->
u16Size
 / 6;

1397 i‡(
ƒDes
->
u8NbSîvi˚
 > 
GOS_MAX_NVODSERVICE_NUM
)

1399 
ƒDes
->
u8NbSîvi˚
 = 
GOS_MAX_NVODSERVICE_NUM
;

1402 
i
 = 0; i < 
ƒDes
->
u8NbSîvi˚
; i++)

1405 
ƒDes
->
a°Sîvi˚Li°
[
i
].
u16TøsId
 = 
pD©a
[0]*256 +ÖData[1];

1406 
pD©a
 += 2;

1409 
ƒDes
->
a°Sîvi˚Li°
[
i
].
u16OrId
 = 
pD©a
[0]*256 +ÖData[1];

1410 
pD©a
 += 2;

1413 
ƒDes
->
a°Sîvi˚Li°
[
i
].
u16Sîvi˚Id
 = 
pD©a
[0]*256 +ÖData[1];

1414 
pD©a
 += 2;

1417 
pD©a
 = 
GOSTSR_NULL
;

1419  
GOSTSR_SUCCESS
;

1422 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Nëw‹kName
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_NETWORKNAME_S
 *
√äDes
)

1424 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
√äDes
))

1426  
GOSTSR_FAILURE
;

1429 i‡(
GOS_PSISI_DESCRIPTOR_NETWORK_NAME
 !
§cDes
->
Tag
)

1431  
GOSTSR_FAILURE
;

1434 
mem£t
(
√äDes
, 0x00, (
GOS_DESC_NETWORKNAME_S
));

1435 
√äDes
->
u8NameLí
 = (
§cDes
->
u16Size
 < 
GOS_MAX_BOUQUET_NAME_LEN
)? srcDes->u16Size : GOS_MAX_BOUQUET_NAME_LEN;

1436 
mem˝y
(
√äDes
->
au8Nëw‹kName
, 
§cDes
->
D©a
,ÇënDes->
u8NameLí
);

1438  
GOSTSR_SUCCESS
;

1441 
GOSTSR_S32
 
GosT§_Des¸ùt‹_P¨ítR©ög
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_PARENTRATING_S
 *
¥Des
)

1443 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

1444 
GOSTSR_U16
 
i
 = 0;

1446 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
¥Des
))

1448  
GOSTSR_FAILURE
;

1451 i‡(
GOS_PSISI_DESCRIPTOR_PARENTAL_RATING
 !
§cDes
->
Tag
)

1453  
GOSTSR_FAILURE
;

1456 
mem£t
(
¥Des
, 0x00, (
GOS_DESC_PARENTRATING_S
));

1457 
pD©a
 = 
§cDes
->
D©a
;

1459 
¥Des
->
u32R©ögNum
 = 
§cDes
->
u16Size
 / 4;

1460 i‡(
¥Des
->
u32R©ögNum
 > 
GOS_MAX_PARENTALRATING_NUM
)

1462 
¥Des
->
u32R©ögNum
 = 
GOS_MAX_PARENTALRATING_NUM
;

1465 
i
 = 0; i < 
¥Des
->
u32R©ögNum
; i++)

1468 
¥Des
->
a°R©ög
[
i
].
u32Lag_Code
 = (
pD©a
[0]<<16) + (pData[1]<<8) +ÖData[2];

1469 
pD©a
 += 3;

1472 
¥Des
->
a°R©ög
[
i
].
u8R©ög
 = 
pD©a
[0];

1473 
pD©a
 += 1;

1476 
pD©a
 = 
GOSTSR_NULL
;

1478  
GOSTSR_SUCCESS
;

1481 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Priv©eD©aS≥cifõr
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_PRIVATE_DATA_SPECIFIER_S
 *
pdsDes
)

1483 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

1485 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
pdsDes
))

1487  
GOSTSR_FAILURE
;

1490 i‡(
GOS_PSISI_DESCRIPTOR_PRIVATE_DATA_SPECIFIER
 !
§cDes
->
Tag
)

1492  
GOSTSR_FAILURE
;

1495 
mem£t
(
pdsDes
, 0x00, (
GOS_DESC_PRIVATE_DATA_SPECIFIER_S
));

1496 
pD©a
 = 
§cDes
->
D©a
;

1499 
pdsDes
->
u32Priv©eD©a
 = (
pD©a
[0]<<24) + (pData[1]<<16) + (pData[0]<<8) +ÖData[0];

1500 
pD©a
 += 4;

1502 
pD©a
 = 
GOSTSR_NULL
;

1504  
GOSTSR_SUCCESS
;

1507 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Priv©eD©aIndiˇt‹
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_PRIVATEDATAINDICATOR_S
 *
pdiDes
)

1509 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

1511 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
pdiDes
))

1513  
GOSTSR_FAILURE
;

1516 i‡(
GOS_PSISI_DESCRIPTOR_PRIVATE_DATA_INDICATOR
 !
§cDes
->
Tag
)

1518  
GOSTSR_FAILURE
;

1521 
mem£t
(
pdiDes
, 0x00, (
GOS_DESC_PRIVATEDATAINDICATOR_S
));

1522 
pD©a
 = 
§cDes
->
D©a
;

1525 
pdiDes
->
u32Priv©eD©aIndiˇt‹
 = (
pD©a
[0]<<24) + (pData[1]<<16) + (pData[0]<<8) +ÖData[0];

1526 
pD©a
 += 4;

1528 
pD©a
 = 
GOSTSR_NULL
;

1530  
GOSTSR_SUCCESS
;

1533 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Regi°øti⁄
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_REGISTRATION_S
 *
rDes
)

1535 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

1536 
GOSTSR_U16
 
ªmaöLí
 = 0;

1538 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
rDes
))

1540  
GOSTSR_FAILURE
;

1543 i‡(
GOS_PSISI_DESCRIPTOR_REGISTRATION
 !
§cDes
->
Tag
)

1545  
GOSTSR_FAILURE
;

1548 
mem£t
(
rDes
, 0x00, (
GOS_DESC_REGISTRATION_S
));

1549 
pD©a
 = 
§cDes
->
D©a
;

1552 
rDes
->
u32F‹m©Idítifõr
 = (
pD©a
[0]<<24) + (pData[1]<<16) + (pData[2]<<8) +ÖData[3];

1553 
pD©a
 += 4;

1556 
ªmaöLí
 = 
§cDes
->
u16Size
 - 4;

1557 
rDes
->
u16AddIdítifiˇti⁄Lí
 = 
ªmaöLí
;

1560 
mem˝y
(
rDes
->
u8AddIdítifiˇti⁄Info
, 
pD©a
, 
ªmaöLí
);

1562 
pD©a
 = 
GOSTSR_NULL
;

1564  
GOSTSR_SUCCESS
;

1566 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Sh‹tSmoŸhögBuf„r
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_SHORT_SMOOTHING_BUFFER_S
 *
ssbDes
)

1568 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

1570 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
ssbDes
))

1572  
GOSTSR_FAILURE
;

1575 i‡(
GOS_PSISI_DESCRIPTOR_SHORT_SMOOTHING_BUFFER
 !
§cDes
->
Tag
)

1577  
GOSTSR_FAILURE
;

1580 
mem£t
(
ssbDes
, 0x00, (
GOS_DESC_SHORT_SMOOTHING_BUFFER_S
));

1581 
pD©a
 = 
§cDes
->
D©a
;

1584 
ssbDes
->
u8SbSize
 = (
pD©a
[0] & (
BIT8
 | 
BIT7
)) / BIT7;

1587 
ssbDes
->
u8SbLókR©e
 = 
pD©a
[0] & (~(
BIT8
 | 
BIT7
));

1588 
pD©a
 += 1;

1591 i‡(
§cDes
->
u16Size
 > ((
ssbDes
->
u8DVBRe£rved
) + 1))

1593 
ssbDes
->
u16DVBRe£rvedLí
 = (ssbDes->
u8DVBRe£rved
);

1594 
mem˝y
(
ssbDes
->
u8DVBRe£rved
, 
pD©a
, (ssbDes->u8DVBReserved));

1598 
ssbDes
->
u16DVBRe£rvedLí
 = 
§cDes
->
u16Size
 - 1;

1599 
mem˝y
(
ssbDes
->
u8DVBRe£rved
, 
pD©a
, 
§cDes
->
u16Size
 - 1);

1602 
pD©a
 = 
GOSTSR_NULL
;

1604  
GOSTSR_SUCCESS
;

1607 
GOSTSR_S32
 
GosT§_Des¸ùt‹_SmoŸhögBuf„r
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_SMOOTHING_BUFFER_S
 *
sbDes
)

1609 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

1611 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
sbDes
))

1613  
GOSTSR_FAILURE
;

1616 i‡(
GOS_PSISI_DESCRIPTOR_SMOOTHING_BUFFER
 !
§cDes
->
Tag
)

1618  
GOSTSR_FAILURE
;

1621 
mem£t
(
sbDes
, 0x00, (
GOS_DESC_SMOOTHING_BUFFER_S
));

1622 
pD©a
 = 
§cDes
->
D©a
;

1623 
pD©a
 += 1;

1626 
sbDes
->
u32SbLókR©e
 = (
pD©a
[0] << 8)+pData[1];

1627 
pD©a
 += 3;

1630 
sbDes
->
u32SbSize
 = ((
pD©a
[0] & 0X0F) << 8) +ÖData[1];

1634 
pD©a
 = 
GOSTSR_NULL
;

1636  
GOSTSR_SUCCESS
;

1639 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Sîvi˚
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_SERVICE_S
 *
sDes
)

1641 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

1643 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
sDes
))

1645  
GOSTSR_FAILURE
;

1648 i‡(
GOS_PSISI_DESCRIPTOR_SERVICE
 !
§cDes
->
Tag
)

1650  
GOSTSR_FAILURE
;

1653 
mem£t
(
sDes
, 0x00, (
GOS_DESC_SERVICE_S
));

1654 
pD©a
 = 
§cDes
->
D©a
;

1657 
sDes
->
u8Sîvi˚Ty≥
 = 
pD©a
[0];

1658 
pD©a
 += 1;

1661 
sDes
->
u8Sîvi˚ProvidîNameLí
 = 
pD©a
[0];

1662 
pD©a
 += 1;

1665 
mem˝y
(
sDes
->
u8Sîvi˚ProvideName
, 
pD©a
, sDes->
u8Sîvi˚ProvidîNameLí
);

1666 
sDes
->
u8Sîvi˚ProvideName
[(sDes->u8ServiceProvideName) - 1] = '\0';

1667 
pD©a
 +
sDes
->
u8Sîvi˚ProvidîNameLí
;

1670 
sDes
->
u8Sîvi˚NameLí
 = 
pD©a
[0];

1671 
pD©a
 += 1;

1674 
mem˝y
(
sDes
->
u8Sîvi˚Name
, 
pD©a
, sDes->
u8Sîvi˚NameLí
);

1675 
sDes
->
u8Sîvi˚Name
[(sDes->u8ServiceName) - 1] = '\0';

1677 
pD©a
 = 
GOSTSR_NULL
;

1679  
GOSTSR_SUCCESS
;

1682 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Sîvi˚Li°
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_SERVLIST_S
 *
£rLDes
)

1684 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

1685 
GOSTSR_U16
 
i
 = 0;

1686 
GOSTSR_S32
 
desTŸÆLí
 = 0;

1688 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
£rLDes
))

1690  
GOSTSR_FAILURE
;

1693 i‡(
GOS_PSISI_DESCRIPTOR_SERVICE_LIST
 !
§cDes
->
Tag
)

1695  
GOSTSR_FAILURE
;

1698 
mem£t
(
£rLDes
, 0x00, (
GOS_DESC_SERVLIST_S
));

1700 
desTŸÆLí
 = 
§cDes
->
u16Size
;

1701 
pD©a
 = 
§cDes
->
D©a
;

1703 
i
 = 0;

1704 
desTŸÆLí
 > 0)

1707 
£rLDes
->
a°Sîvi˚Li°
[
i
].
U16Sîvi˚Id
 = 
pD©a
[0]*256 +ÖData[1];

1708 
pD©a
 += 2;

1711 
£rLDes
->
a°Sîvi˚Li°
[
i
].
U8Sîvi˚Ty≥
 = 
pD©a
[0];

1712 
pD©a
 += 1;

1714 
desTŸÆLí
 -= 3;

1715 
i
++;

1717 
£rLDes
->
u16NbSîvi˚
 = 
i
;

1719 
pD©a
 = 
GOSTSR_NULL
;

1721  
GOSTSR_SUCCESS
;

1724 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Sîvi˚Move
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_SERVICE_MOVE_S
 *
smDes
)

1726 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

1728 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
smDes
))

1730  
GOSTSR_FAILURE
;

1733 i‡(
GOS_PSISI_DESCRIPTOR_SERVICE_MOVE
 !
§cDes
->
Tag
)

1735  
GOSTSR_FAILURE
;

1738 
mem£t
(
smDes
, 0x00, (
GOS_DESC_SERVICE_MOVE_S
));

1739 
pD©a
 = 
§cDes
->
D©a
;

1742 
smDes
->
u16NewONID
 = 
pD©a
[0]*256 +ÖData[1];

1743 
pD©a
 += 2;

1746 
smDes
->
u16NewTSID
 = 
pD©a
[0]*256 +ÖData[1];

1747 
pD©a
 += 2;

1750 
smDes
->
u16NewSîvi˚ID
 = 
pD©a
[0]*256 +ÖData[1];

1752 
pD©a
 = 
GOSTSR_NULL
;

1754  
GOSTSR_SUCCESS
;

1757 
GOSTSR_S32
 
GosT§_Des¸ùt‹_S©ñlôeSy°em
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_SATDELIVSYS_S
 *
ssdes
)

1759 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

1761 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
ssdes
))

1763  
GOSTSR_FAILURE
;

1766 i‡(
GOS_PSISI_DESCRIPTOR_SATELLITE_DELIVERY_SYSTEM
 !
§cDes
->
Tag
)

1768  
GOSTSR_FAILURE
;

1771 
mem£t
(
ssdes
, 0x00, (
GOS_DESC_SATDELIVSYS_S
));

1772 
pD©a
 = 
§cDes
->
D©a
;

1775 
ssdes
->
u32Fªq
 =((
pD©a
[0] & 0xf0Ë/ 
BIT5
)*10000000 + (pData[1] & 0x0f)*1000000 + \

1776 ((
pD©a
[1] & 0xf0Ë/ 
BIT5
)*100000 + (pData[1] & 0x0f)*10000 + \

1777 ((
pD©a
[2] & 0xf0Ë/ 
BIT5
)*1000 + (pData[2] & 0x0f)*100 + \

1778 ((
pD©a
[3] & 0xf0Ë/ 
BIT5
)*10 + (pData[3] & 0x0f);

1779 
pD©a
 += 4;

1782 
ssdes
->
u160rbôÆ_Posôi⁄
 = ((
pD©a
[0] & 0xf0Ë/ 
BIT5
)*1000 + (pData[0] & 0x0f)*100 + \

1783 ((
pD©a
[1] & 0xf0Ë/ 
BIT5
)*10 + (pData[1] & 0x0f);

1784 
pD©a
 += 2;

1787 
ssdes
->
u8We°_Ea°_Fœg
 = (
pD©a
[0] & 
BIT8
) / BIT8;

1790 
ssdes
->
u8Pﬁ¨iz©i⁄
 = (
pD©a
[0] & (
BIT7
 | 
BIT6
)) / BIT6;

1793 
ssdes
->
u8Moduœti⁄
 = 
pD©a
[0] & (
BIT5
 | 
BIT4
 | 
BIT3
 | 
BIT2
 | 
BIT1
);

1794 
pD©a
 += 1;

1797 
ssdes
->
u32Symbﬁ_R©e
 = ((
pD©a
[0] & 0xf0Ë/ 
BIT5
)*1000000 + (pData[1] & 0x0f)*100000 + \

1798 ((
pD©a
[1] & 0xf0Ë/ 
BIT5
)*10000 + (pData[1] & 0x0f)*1000 + \

1799 ((
pD©a
[2] & 0xf0Ë/ 
BIT5
)*100 + (pData[2] & 0x0f)*10 + \

1800 ((
pD©a
[3] & 0xf0Ë/ 
BIT5
);

1801 
pD©a
 += 3;

1804 
ssdes
->
u8FEC_I¬î
 = 
pD©a
[0] & (
BIT8
 | 
BIT7
 | 
BIT6
 | 
BIT5
);

1806 
pD©a
 = 
GOSTSR_NULL
;

1808  
GOSTSR_SUCCESS
;

1812 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Sh‹tEvít
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_SHORTEVT_S
 *
£Des
)

1814 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

1816 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
£Des
))

1818  
GOSTSR_FAILURE
;

1821 i‡(
GOS_PSISI_DESCRIPTOR_SHORT_EVENT
 !
§cDes
->
Tag
)

1823  
GOSTSR_FAILURE
;

1826 
mem£t
(
£Des
, 0x00, (
GOS_DESC_SHORTEVT_S
));

1827 
pD©a
 = 
§cDes
->
D©a
;

1830 
£Des
->
u32L™gCode
 = (
pD©a
[0]<<16) + (pData[1]<<8) +ÖData[2];

1831 
pD©a
 += 3;

1834 
£Des
->
u16EvtNameLí
 = 
pD©a
[0];

1835 i‡(
£Des
->
u16EvtNameLí
 > 
GOS_MAX_EVENTNAME_LEN
)

1837 
£Des
->
u16EvtNameLí
 = 
GOS_MAX_EVENTNAME_LEN
;

1839 
pD©a
 += 1;

1842 
mem˝y
(
£Des
->
acEvtName
, 
pD©a
, seDes->
u16EvtNameLí
);

1843 
£Des
->
acEvtName
[(seDes->acEvtName) - 1] = '\0';

1844 
pD©a
 +
£Des
->
u16EvtNameLí
;

1847 
£Des
->
u16Sh‹tEvtDesLí
 = 
pD©a
[0];

1848 i‡(
£Des
->
u16Sh‹tEvtDesLí
 > 
GOS_MAX_EVENTSHORTEXTDES_LEN
)

1850 
£Des
->
u16Sh‹tEvtDesLí
 = 
GOS_MAX_EVENTSHORTEXTDES_LEN
;

1852 
pD©a
 += 1;

1855 
mem˝y
(
£Des
->
acSh‹tEvtDes
, 
pD©a
, seDes->
u16Sh‹tEvtDesLí
);

1856 
£Des
->
acSh‹tEvtDes
[(seDes->acShortEvtDes) - 1] = '\0';

1858 
pD©a
 = 
GOSTSR_NULL
;

1860  
GOSTSR_SUCCESS
;

1863 
GOSTSR_S32
 
GosT§_Des¸ùt‹_SåómIdítifõr
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_STREAM_IDENTIFIER_S
 *
siDes
)

1865 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

1867 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
siDes
))

1869  
GOSTSR_FAILURE
;

1872 i‡(
GOS_PSISI_DESCRIPTOR_STREAM_IDENTIFIER
 !
§cDes
->
Tag
)

1874  
GOSTSR_FAILURE
;

1877 
mem£t
(
siDes
, 0x00, (
GOS_DESC_STREAM_IDENTIFIER_S
));

1878 
pD©a
 = 
§cDes
->
D©a
;

1881 
siDes
->
u8Comp⁄ít_èg
 = 
pD©a
[0];

1883 
pD©a
 = 
GOSTSR_NULL
;

1885  
GOSTSR_SUCCESS
;

1888 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Stuffög
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_STUFFING_S
 *
sDes
)

1890 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

1892 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
sDes
))

1894  
GOSTSR_FAILURE
;

1897 i‡(
GOS_PSISI_DESCRIPTOR_STUFFING
 !
§cDes
->
Tag
)

1899  
GOSTSR_FAILURE
;

1902 
mem£t
(
sDes
, 0x00, (
GOS_DESC_STUFFING_S
));

1903 
pD©a
 = 
§cDes
->
D©a
;

1906 
sDes
->
u16°uffögLí
 = 
§cDes
->
u16Size
;

1909 
mem˝y
(
sDes
->
u8°uffögByã
, 
pD©a
, sDes->
u16°uffögLí
);

1911 
pD©a
 = 
GOSTSR_NULL
;

1913  
GOSTSR_SUCCESS
;

1916 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Subtôlög
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_SUBT_S
 *
sDes
)

1918 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

1919 
GOSTSR_U16
 
i
 = 0;

1921 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
sDes
))

1923  
GOSTSR_FAILURE
;

1926 i‡(
GOS_PSISI_DESCRIPTOR_SUBTITLING
 !
§cDes
->
Tag
)

1928  
GOSTSR_FAILURE
;

1931 
mem£t
(
sDes
, 0x00, (
GOS_DESC_SUBT_S
));

1932 
pD©a
 = 
§cDes
->
D©a
;

1935 
sDes
->
u32SubtôÀEÀNum
 = 
§cDes
->
u16Size
 / 8;

1936 i‡(
sDes
->
u32SubtôÀEÀNum
 > 
GOS_MAX_SUBTITLE_ELENUM
)

1938 
sDes
->
u32SubtôÀEÀNum
 = 
GOS_MAX_SUBTITLE_ELENUM
;

1941 
i
 = 0; i < 
sDes
->
u32SubtôÀEÀNum
; i++)

1944 
sDes
->
a°SubtôÀInfo
[
i
].
u32Cou¡ry_Code
 = (
pD©a
[0]<<16) + (pData[1]<<8) +ÖData[2];

1947 
pD©a
 += 3;

1950 
sDes
->
a°SubtôÀInfo
[
i
].
u8Sub°ôlög_Ty≥
 = 
pD©a
[0];

1951 
pD©a
 += 1;

1954 
sDes
->
a°SubtôÀInfo
[
i
].
u16Composôi⁄_Page_Id
 = 
pD©a
[0]*256 +ÖData[1];

1955 
pD©a
 += 2;

1958 
sDes
->
a°SubtôÀInfo
[
i
].
u16Ancûœry_Page_Id
 = 
pD©a
[0]*256 +ÖData[1];

1959 
pD©a
 += 2;

1962 
pD©a
 = 
GOSTSR_NULL
;

1964  
GOSTSR_SUCCESS
;

1967 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Sy°emClock
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_SYSTEMCLOCK_S
 *
scDes
)

1969 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

1971 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
scDes
))

1973  
GOSTSR_FAILURE
;

1976 i‡(
GOS_PSISI_DESCRIPTOR_SYSTEM_CLOCK
 !
§cDes
->
Tag
)

1978  
GOSTSR_FAILURE
;

1981 
mem£t
(
scDes
, 0x00, (
GOS_DESC_SYSTEMCLOCK_S
));

1982 
pD©a
 = 
§cDes
->
D©a
;

1985 
scDes
->
u8Exã∫ClockRefIndiˇt‹
 = (
pD©a
[0] & 
BIT8
) / BIT8;

1990 
scDes
->
u8ClockAccuøcyI¡egî
 = 
pD©a
[0] & (~(
BIT8
 | 
BIT7
));

1991 
pD©a
 += 1;

1994 
scDes
->
u8ClockAccuøcyExp⁄ít
 = (
pD©a
[0] & (
BIT8
 | 
BIT7
 | 
BIT6
)) / BIT6;

1998 
pD©a
 = 
GOSTSR_NULL
;

2000  
GOSTSR_SUCCESS
;

2003 
GOSTSR_S32
 
GosT§_Des¸ùt‹_T¨gëBackgroundGrid
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_TARBACGRID_S
 *
tbgDes
)

2005 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

2007 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
tbgDes
))

2009  
GOSTSR_FAILURE
;

2012 i‡(
GOS_PSISI_DESCRIPTOR_TARGET_BACKGROUND_GRID
 !
§cDes
->
Tag
)

2014  
GOSTSR_FAILURE
;

2017 
mem£t
(
tbgDes
, 0x00, (
GOS_DESC_TARBACGRID_S
));

2018 
pD©a
 = 
§cDes
->
D©a
;

2021 
tbgDes
->
u16H‹iz⁄èlSize
 = (
pD©a
[0]<<6) + (pData[1]>>2);

2022 
pD©a
 += 1;

2025 
tbgDes
->
u16VîtiˇlSize
 = ((
pD©a
[0] & (
BIT2
 | 
BIT1
))<<12Ë+ (pD©a[1]<<4Ë+ (pD©a[2] & (
BIT8
 | 
BIT7
 | 
BIT6
 | 
BIT5
)) / BIT5;

2026 
pD©a
 += 2;

2029 
tbgDes
->
u8Pña•e˘R©io
 = 
pD©a
[0] & (
BIT4
 | 
BIT3
 | 
BIT2
 | 
BIT1
);

2031 
pD©a
 = 
GOSTSR_NULL
;

2033  
GOSTSR_SUCCESS
;

2036 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Tîª°rülSy°em
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_TERDELIVSYS_S
 *
tsdes
)

2038 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

2040 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
tsdes
))

2042  
GOSTSR_FAILURE
;

2045 i‡(
GOS_PSISI_DESCRIPTOR_TERRESTRIAL_DELIVERY_SYSTEM
 !
§cDes
->
Tag
)

2047  
GOSTSR_FAILURE
;

2050 
mem£t
(
tsdes
, 0x00, (
GOS_DESC_TERDELIVSYS_S
));

2051 
pD©a
 = 
§cDes
->
D©a
;

2054 
tsdes
->
u32Cíåe_Fªq
 = (
pD©a
[0]<<24) + (pData[1]<<16) + (pData[2]<<8) +ÖData[3];

2055 
pD©a
 += 4;

2058 
tsdes
->
u8B™dWidth
 = (
pD©a
[0] & (
BIT8
 | 
BIT7
 | 
BIT6
)) / BIT6;

2061 
pD©a
 += 1;

2064 
tsdes
->
u8C⁄°ñœti⁄
 = (
pD©a
[0] & (
BIT8
 | 
BIT7
)) / BIT7;

2067 
tsdes
->
u8Hõørchy_Inf‹
 = (
pD©a
[0] & (
BIT6
 | 
BIT5
 | 
BIT4
)) / BIT4;

2070 
tsdes
->
u8Code_øã_HP_°ªam
 = 
pD©a
[0] & (
BIT3
 | 
BIT2
 | 
BIT1
);

2071 
pD©a
 += 1;

2074 
tsdes
->
u8Code_øã_LP_°ªam
 = (
pD©a
[0] & (
BIT8
 | 
BIT7
 | 
BIT6
)) / BIT6;

2077 
tsdes
->
u8Gu¨d_I¡îvÆ
 = (
pD©a
[0] & (
BIT5
 | 
BIT4
)) / BIT4;

2080 
tsdes
->
u8Tøns_Mode
 = (
pD©a
[0] & (
BIT3
 | 
BIT2
)) / BIT2;

2083 
tsdes
->
u8Othî_Fªq_Fœg
 = 
pD©a
[0] & 
BIT1
;

2085 
pD©a
 += 1;

2089 
pD©a
 = 
GOSTSR_NULL
;

2091  
GOSTSR_SUCCESS
;

2094 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Tñïh⁄e
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_TELEPHONE_S
 *
tDes
)

2096 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

2098 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
tDes
))

2100  
GOSTSR_FAILURE
;

2103 i‡(
GOS_PSISI_DESCRIPTOR_TELEPHONE
 !
§cDes
->
Tag
)

2105  
GOSTSR_FAILURE
;

2108 
mem£t
(
tDes
, 0x00, (
GOS_DESC_TELEPHONE_S
));

2109 
pD©a
 = 
§cDes
->
D©a
;

2114 
tDes
->
u8F‹egöAvaûabûôy
 = (
pD©a
[0] & 
BIT6
) / BIT6;

2117 
tDes
->
u8C⁄√˘Ty≥
 = 
pD©a
[0] & (
BIT5
 | 
BIT4
 | 
BIT3
 | 
BIT2
 | 
BIT1
);

2118 
pD©a
 += 1;

2123 
tDes
->
u8Cou¡ryPªfixLí
 = (
pD©a
[0] & (
BIT7
 | 
BIT6
)) / BIT6;

2126 
tDes
->
u8I¡î«ti⁄ÆAªaCodeLí
 = (
pD©a
[0] & (
BIT5
 | 
BIT4
 | 
BIT3
)) / BIT3;

2129 
tDes
->
u8O≥øt‹CodeLí
 = 
pD©a
[0] & (
BIT2
 | 
BIT1
);

2130 
pD©a
 += 1;

2135 
tDes
->
u8N©i⁄AªaCodeLí
 = (
pD©a
[0] & (
BIT7
 | 
BIT6
 | 
BIT5
)) / BIT5;

2138 
tDes
->
u8C‹eNumbîCodeLí
 = 
pD©a
[0] & (
BIT4
 | 
BIT3
 | 
BIT2
 | 
BIT1
);

2139 
pD©a
 += 1;

2142 
mem˝y
(
tDes
->
u8Cou¡ryPªfix
, 
pD©a
,ÅDes->
u8Cou¡ryPªfixLí
);

2143 
pD©a
 +
tDes
->
u8Cou¡ryPªfixLí
;

2146 
mem˝y
(
tDes
->
u8I¡î«ti⁄aAªaCode
, 
pD©a
,ÅDes->
u8I¡î«ti⁄ÆAªaCodeLí
);

2147 
pD©a
 +
tDes
->
u8I¡î«ti⁄ÆAªaCodeLí
;

2150 
mem˝y
(
tDes
->
u8O≥øt‹Code
, 
pD©a
,ÅDes->
u8O≥øt‹CodeLí
);

2151 
pD©a
 +
tDes
->
u8O≥øt‹CodeLí
;

2154 
mem˝y
(
tDes
->
u8I¡î«ti⁄aAªaCode
, 
pD©a
,ÅDes->
u8I¡î«ti⁄ÆAªaCodeLí
);

2155 
pD©a
 +
tDes
->
u8I¡î«ti⁄ÆAªaCodeLí
;

2158 
mem˝y
(
tDes
->
u8C‹eNumbîCode
, 
pD©a
,ÅDes->
u8C‹eNumbîCodeLí
);

2160 
pD©a
 = 
GOSTSR_NULL
;

2162  
GOSTSR_SUCCESS
;

2165 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Tñëex
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_TELETEXT_S
 *
tDes
)

2167 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

2168 
GOSTSR_U16
 
i
 = 0;

2170 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
tDes
))

2172  
GOSTSR_FAILURE
;

2175 i‡(
GOS_PSISI_DESCRIPTOR_TELETEXT
 !
§cDes
->
Tag
)

2177  
GOSTSR_FAILURE
;

2180 
mem£t
(
tDes
, 0x00, (
GOS_DESC_TELETEXT_S
));

2181 
pD©a
 = 
§cDes
->
D©a
;

2184 
tDes
->
u32TñëextNum
 = 
§cDes
->
u16Size
 / 5;

2187 
i
 = 0; i < 
tDes
->
u32TñëextNum
; i++)

2190 
tDes
->
a°TñëextInfo
[
i
].
u32Lag_Code
 = (
pD©a
[0]<<16) + (pData[1]<<8) +ÖData[2];

2192 
pD©a
 += 3;

2195 
tDes
->
a°TñëextInfo
[
i
].
u8Tñëext_Ty≥
 = (
pD©a
[0] & (
BIT8
 | 
BIT7
 | 
BIT6
 | 
BIT5
 | 
BIT4
)) / BIT4;

2198 
tDes
->
a°TñëextInfo
[
i
].
u8Tñëext_Magazöe_Numbî
 = 
pD©a
[0] & (
BIT3
 | 
BIT2
 | 
BIT1
);

2199 
pD©a
 += 1;

2202 
tDes
->
a°TñëextInfo
[
i
].
u8Tñëext_Page_Numbî
 = 
pD©a
[0];

2203 
pD©a
 += 1;

2206 
pD©a
 = 
GOSTSR_NULL
;

2208  
GOSTSR_SUCCESS
;

2211 
GOSTSR_S32
 
GosT§_Des¸ùt‹_TimeShi·edEvít
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_TMSHIFTEVT_S
 *
t£Des
)

2213 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

2215 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
t£Des
))

2217  
GOSTSR_FAILURE
;

2220 i‡(
GOS_PSISI_DESCRIPTOR_TIME_SHIFTED_EVENT
 !
§cDes
->
Tag
)

2222  
GOSTSR_FAILURE
;

2225 
mem£t
(
t£Des
, 0x00, (
GOS_DESC_TMSHIFTEVT_S
));

2226 
pD©a
 = 
§cDes
->
D©a
;

2229 
t£Des
->
u16Ref_Sîvi˚_Id
 = 
pD©a
[0]*256 +ÖData[1];

2230 
pD©a
 += 2;

2233 
t£Des
->
u16Ref_Evt_Id
 = 
pD©a
[0]*256 +ÖData[1];

2235 
pD©a
 = 
GOSTSR_NULL
;

2237  
GOSTSR_SUCCESS
;

2240 
GOSTSR_S32
 
GosT§_Des¸ùt‹_TimeShi·edSîvi˚
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_TIMESHIFTSERV_S
 *
tssDes
)

2242 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

2244 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
tssDes
))

2246  
GOSTSR_FAILURE
;

2249 i‡(
GOS_PSISI_DESCRIPTOR_TIME_SHIFTEDSERVICE
 !
§cDes
->
Tag
)

2251  
GOSTSR_FAILURE
;

2254 
mem£t
(
tssDes
, 0x00, (
GOS_DESC_TIMESHIFTSERV_S
));

2255 
pD©a
 = 
§cDes
->
D©a
;

2258 
tssDes
->
u16RefSîvi˚Id
 = 
pD©a
[0]*256 +ÖData[1];

2260 
pD©a
 = 
GOSTSR_NULL
;

2262  
GOSTSR_SUCCESS
;

2265 
GOSTSR_S32
 
GosT§_Des¸ùt‹_VideoSåóm
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_VIDEOSTREAM_S
 *
vsDes
)

2267 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

2269 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
vsDes
))

2271  
GOSTSR_FAILURE
;

2274 i‡(
GOS_PSISI_DESCRIPTOR_VIDEO_STREAM
 !
§cDes
->
Tag
)

2276  
GOSTSR_FAILURE
;

2279 
mem£t
(
vsDes
, 0x00, (
GOS_DESC_VIDEOSTREAM_S
));

2280 
pD©a
 = 
§cDes
->
D©a
;

2283 
vsDes
->
u8Mu…ùÀFømeR©eFœg
 = (
pD©a
[0] & 
BIT8
) / BIT8;

2286 
vsDes
->
u8FømeR©eCode
 = (
pD©a
[0] & (
BIT7
 | 
BIT6
 | 
BIT5
 | 
BIT4
)) / BIT4;

2289 
vsDes
->
u8MPEG2Fœg
 = (
pD©a
[0] & 
BIT3
) / BIT3;

2292 
vsDes
->
u8C⁄°øöP¨amëîFœg
 = (
pD©a
[0] & 
BIT2
) / BIT2;

2295 
vsDes
->
u8StûlPi˘uªFœg
 = 
pD©a
[0] & 
BIT1
;

2296 
pD©a
 += 1;

2298 i‡(
vsDes
->
u8MPEG2Fœg
 == 0x01)

2301 
vsDes
->
u8ProfûeAndLevñIndiˇti⁄
 = 
pD©a
[0];

2302 
pD©a
 += 1;

2305 
vsDes
->
u8ChromaF‹m©
 = (
pD©a
[0] & (
BIT8
 | 
BIT7
)) / BIT7;

2308 
vsDes
->
u8FømeR©eExãnsi⁄Fœg
 = (
pD©a
[0] & 
BIT6
) / BIT6;

2313 
pD©a
 = 
GOSTSR_NULL
;

2315  
GOSTSR_SUCCESS
;

2318 
GOSTSR_S32
 
GosT§_Des¸ùt‹_VideoWödow
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_VIDEOWINDOW_S
 *
vwDes
)

2320 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

2322 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
vwDes
))

2324  
GOSTSR_FAILURE
;

2327 i‡(
GOS_PSISI_DESCRIPTOR_VIDEO_WINDOW
 !
§cDes
->
Tag
)

2329  
GOSTSR_FAILURE
;

2332 
mem£t
(
vwDes
, 0x00, (
GOS_DESC_VIDEOWINDOW_S
));

2333 
pD©a
 = 
§cDes
->
D©a
;

2336 
vwDes
->
u16H‹iz⁄èlZOff£t
 = (
pD©a
[0]<<6) + (pData[1]>>2);

2337 
pD©a
 += 1;

2340 
vwDes
->
u16VîtiˇlOff£t
 = ((
pD©a
[0] & (
BIT2
 | 
BIT1
))<<12Ë+ (pD©a[1]<<4Ë+ (pD©a[2] & (
BIT8
 | 
BIT7
 | 
BIT6
 | 
BIT5
)) / BIT5;

2341 
pD©a
 += 2;

2344 
vwDes
->
u8WödowPri‹ôy
 = 
pD©a
[0] & (
BIT4
 | 
BIT3
 | 
BIT2
 | 
BIT1
);

2346 
pD©a
 = 
GOSTSR_NULL
;

2348  
GOSTSR_SUCCESS
;

2351 
GOSTSR_S32
 
GosT§_Des¸ùt‹_PDC
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_PDC_S
 *
pdcDes
)

2353 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

2354 
GOSTSR_U8
 
ãmpD©a
 = 0;

2356 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
pdcDes
))

2358  
GOSTSR_FAILURE
;

2361 i‡(
GOS_PSISI_DESCRIPTOR_PDC
 !
§cDes
->
Tag
)

2363  
GOSTSR_FAILURE
;

2366 
mem£t
(
pdcDes
, 0x00, (
GOS_DESC_PDC_S
));

2367 
pD©a
 = 
§cDes
->
D©a
;

2370 
ãmpD©a
 = (
pD©a
[0] & (
BIT8
 | 
BIT7
 | 
BIT6
 | 
BIT5
) ) / BIT5;

2373 
pdcDes
->
u32ProgømmeIdítifiˇti⁄
 = ((
pD©a
[0] & (
BIT4
 | 
BIT3
 | 
BIT2
 | 
BIT1
)) << 16) + (pData[1] << 8) +ÖData[2];

2374 
pD©a
 += 3;

2376 
pD©a
 = 
GOSTSR_NULL
;

2378  
GOSTSR_SUCCESS
;

2382 
GOSTSR_S32
 
GosT§_Des¸ùt‹_STD
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_STD_S
 *
°dDes
)

2384 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

2385 
GOSTSR_U8
 
ãmpD©a
 = 0;

2387 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
°dDes
))

2389  
GOSTSR_FAILURE
;

2392 i‡(
GOS_PSISI_DESCRIPTOR_STD
 !
§cDes
->
Tag
)

2394  
GOSTSR_FAILURE
;

2397 
mem£t
(
°dDes
, 0x00, (
GOS_DESC_STD_S
));

2398 
pD©a
 = 
§cDes
->
D©a
;

2401 
ãmpD©a
 = (
pD©a
[0] & (~
BIT1
)Ë/ 
BIT2
;

2404 
°dDes
->
u8RókVÆidFœg
 = 
pD©a
[0] & (
BIT1
);

2406 
pD©a
 += 1;

2408 
pD©a
 = 
GOSTSR_NULL
;

2410  
GOSTSR_SUCCESS
;

2413 
GOSTSR_S32
 
GosT§_Des¸ùt‹_IBP
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_IBP_S
 *
ibpDes
)

2415 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

2417 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
ibpDes
))

2419  
GOSTSR_FAILURE
;

2422 i‡(
GOS_PSISI_DESCRIPTOR_IBP
 !
§cDes
->
Tag
)

2424  
GOSTSR_FAILURE
;

2427 
mem£t
(
ibpDes
, 0x00, (
GOS_DESC_IBP_S
));

2428 
pD©a
 = 
§cDes
->
D©a
;

2431 
ibpDes
->
u8Clo£dG›Fœg
(
pD©a
[0] & (
BIT8
)) / BIT8;

2434 
ibpDes
->
u8IdítiˇlG›Fœg
(
pD©a
[0] & (
BIT7
)) / BIT7;

2437 
ibpDes
->
u16MaxG›Lígth
 = (
pD©a
[0] & ((~ (
BIT8
 | 
BIT7
)) << 8)) +ÖData[1];

2439 
pD©a
 += 2;

2441 
pD©a
 = 
GOSTSR_NULL
;

2443  
GOSTSR_SUCCESS
;

2446 
GOSTSR_S32
 
GosT§_Des¸ùt‹_DSNG
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_DSNG_S
 *
dgDes
)

2448 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

2449 
GOSTSR_U16
 
i
 = 0;

2451 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
dgDes
))

2453  
GOSTSR_FAILURE
;

2456 i‡(
GOS_PSISI_DESCRIPTOR_DSNG
 !
§cDes
->
Tag
)

2458  
GOSTSR_FAILURE
;

2461 
mem£t
(
dgDes
, 0x00, (
GOS_DESC_DSNG_S
));

2462 
pD©a
 = 
§cDes
->
D©a
;

2465 
dgDes
->
u16ByãLí
 = 
§cDes
->
u16Size
;

2467 
i
 = 0; i < 
dgDes
->
u16ByãLí
; i++)

2470 
dgDes
->
a°Byã
[
i
].
u8ByãD©a
 = 
pD©a
[0];

2474 
pD©a
 +
dgDes
->
u16ByãLí
;

2476 
pD©a
 = 
GOSTSR_NULL
;

2478  
GOSTSR_SUCCESS
;

2481 
GOSTSR_S32
 
GosT§_Des¸ùt‹_Tøn•‹tSåóm
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_TPSTREAM_S
 *
çsDes
)

2483 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

2484 
GOSTSR_U16
 
i
 = 0;

2486 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
çsDes
))

2488  
GOSTSR_FAILURE
;

2491 i‡(
GOS_PSISI_DESCRIPTOR_TRANSPORT_STREAM
 !
§cDes
->
Tag
)

2493  
GOSTSR_FAILURE
;

2496 
mem£t
(
çsDes
, 0x00, (
GOS_DESC_TPSTREAM_S
));

2497 
pD©a
 = 
§cDes
->
D©a
;

2500 
çsDes
->
u16ByãLí
 = 
§cDes
->
u16Size
;

2503 
i
 = 0; i < 
çsDes
->
u16ByãLí
; i++)

2506 
çsDes
->
a°Byã
[
i
].
u8ByãD©a
 = 
pD©a
[0];

2509 
pD©a
 +
çsDes
->
u16ByãLí
;

2511 
pD©a
 = 
GOSTSR_NULL
;

2513  
GOSTSR_SUCCESS
;

2516 
GOSTSR_S32
 
GosT§_Des¸ùt‹_VBI_D©a
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_VBIDATA_S
 *
vbiDes
)

2518 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

2519 
GOSTSR_U8
 
ãmpD©aI¡
 = 0;

2520 
GOSTSR_U8
 
ãmpD©aCh¨
[256] = {0};

2521 
GOSTSR_U16
 
i
 = 0;

2522 
GOSTSR_U16
 
j
 = 0;

2524 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
vbiDes
))

2526  
GOSTSR_FAILURE
;

2529 i‡(
GOS_PSISI_DESCRIPTOR_VBI_DATA
 !
§cDes
->
Tag
)

2531  
GOSTSR_FAILURE
;

2534 
mem£t
(
vbiDes
, 0x00, (
GOS_DESC_VBIDATA_S
));

2535 
pD©a
 = 
§cDes
->
D©a
;

2537 
vbiDes
->
u16VbiD©aLí

§cDes
->
u16Size
;

2539 
i
 = 0; i < 
vbiDes
->
u16VbiD©aLí
; i++)

2542 
vbiDes
->
a°D©aSîv
[
i
].
u8D©aSîvi˚Id

pD©a
[0];

2543 
pD©a
 += 1;

2546 
vbiDes
->
a°D©aSîv
[
i
].
u8D©aSîvDesLí
 = 
pD©a
[0];

2547 
pD©a
 += 1;

2549 i‡–
vbiDes
->
a°D©aSîv
[
i
].
u8D©aSîvi˚Id
 ==0x01 || \

2550 
vbiDes
->
a°D©aSîv
[
i
].
u8D©aSîvi˚Id
 ==0x02 || \

2551 
vbiDes
->
a°D©aSîv
[
i
].
u8D©aSîvi˚Id
 ==0x04 || \

2552 
vbiDes
->
a°D©aSîv
[
i
].
u8D©aSîvi˚Id
 ==0x05 || \

2553 
vbiDes
->
a°D©aSîv
[
i
].
u8D©aSîvi˚Id
 ==0x06 || \

2554 
vbiDes
->
a°D©aSîv
[
i
].
u8D©aSîvi˚Id
 ==0x07 )

2556 
j
 = 0; j < 
vbiDes
->
a°D©aSîv
[
i
].
u8D©aSîvDesLí
 ; j++)

2559 
ãmpD©aI¡
 = (
pD©a
[0] & (
BIT8
 | 
BIT7
)) / BIT7;

2562 
vbiDes
->
a°D©aSîv
[
i
].
a°SîvDes
[
j
].
u8FõldP¨ôy
 = (
pD©a
[0] & 
BIT6
) / BIT6;

2565 
vbiDes
->
a°D©aSîv
[
i
].
a°SîvDes
[
j
].
u8LöeOff£t
 = 
pD©a
[0] & (~(
BIT8
 | 
BIT7
 | 
BIT6
));

2571 
mem˝y
(
ãmpD©aCh¨
, 
pD©a
, 
vbiDes
->
a°D©aSîv
[
i
].
u8D©aSîvDesLí
);

2576 
pD©a
 += 1;

2578 
pD©a
 = 
GOSTSR_NULL
;

2580  
GOSTSR_SUCCESS
;

2583 
GOSTSR_S32
 
GosT§_Des¸ùt‹_VBI_Tñëext
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_VBITELETEXT_S
 *
vâDes
)

2585 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

2586 
GOSTSR_U16
 
i
 = 0;

2589 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
vâDes
))

2591  
GOSTSR_FAILURE
;

2594 i‡(
GOS_PSISI_DESCRIPTOR_VBI_TELETEXT
 !
§cDes
->
Tag
)

2596  
GOSTSR_FAILURE
;

2599 
mem£t
(
vâDes
, 0x00, (
GOS_DESC_VBITELETEXT_S
));

2600 
pD©a
 = 
§cDes
->
D©a
;

2603 
vâDes
->
u16VbiTñeTextLí

§cDes
->
u16Size
;

2605 
i
 = 0; i < 
vâDes
->
u16VbiTñeTextLí
; i++)

2608 
vâDes
->
a°TñeText
[
i
].
u32L™guageCode
 = (
pD©a
[0]<<16) + (pData[1]<<8) +ÖData[2];

2609 
pD©a
 += 3;

2612 
vâDes
->
a°TñeText
[
i
].
u8TñëextTy≥
 = (
pD©a
[0] & (~ (
BIT3
 | 
BIT2
 | 
BIT1
))Ë/ 
BIT4
;

2615 
vâDes
->
a°TñeText
[
i
].
u8TñëextMagNum
 = 
pD©a
[0] & (
BIT3
 | 
BIT2
 | 
BIT1
);

2616 
pD©a
 += 1;

2619 
vâDes
->
a°TñeText
[
i
].
u8TñëextPageNum
 = 
pD©a
[0];

2620 
pD©a
 += 1;

2623 
pD©a
 = 
GOSTSR_NULL
;

2625  
GOSTSR_SUCCESS
;

2628 
GOSTSR_S32
 
GosT§_Des¸ùt‹_P¨tülTønSåóm
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_PARTIAL_TRANSTREAM_S
 *
±sDes
)

2630 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

2631 
GOSTSR_U8
 
ãmpD©a
 = 0;

2633 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
±sDes
))

2635  
GOSTSR_FAILURE
;

2638 i‡(
GOS_PSISI_DESCRIPTOR_PARTIAL_TRANSPORT_STREAM
 !
§cDes
->
Tag
)

2640  
GOSTSR_FAILURE
;

2643 
mem£t
(
±sDes
, 0x00, (
GOS_DESC_PARTIAL_TRANSTREAM_S
));

2644 
pD©a
 = 
§cDes
->
D©a
;

2647 
ãmpD©a
 = (
pD©a
[0] & (
BIT8
 | 
BIT7
)) /BIT7;

2650 
±sDes
->
u32PókR©e
 = ((
pD©a
[0] & (~(
BIT8
 | 
BIT7
))) << 16) + (pData[1] << 8) +ÖData[2];

2651 
pD©a
 += 3;

2654 
ãmpD©a
 = (
pD©a
[0] & (
BIT8
 | 
BIT7
)) /BIT7;

2657 
±sDes
->
u32MöiSmoŸhR©e
 = ((
pD©a
[0] & (~(
BIT8
 | 
BIT7
))) << 16) + (pData[1] << 8) +ÖData[2];

2658 
pD©a
 += 3;

2661 
ãmpD©a
 = (
pD©a
[0] & (
BIT8
 | 
BIT7
)) /BIT7;

2664 
±sDes
->
u16MaxiOvîSmoŸhBuâe
 = ((
pD©a
[0] & (~(
BIT8
 | 
BIT7
))) << 8) +ÖData[1];

2666 
pD©a
 = 
GOSTSR_NULL
;

2668  
GOSTSR_SUCCESS
;

2671 
GOSTSR_S32
 
GosT§_Des¸ùt‹_AC3
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_AC3_S
 *
acDes
)

2673 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

2674 
GOSTSR_U16
 
u16ãmpLí
= 0;

2675 
GOSTSR_U8
 
ãmpD©a
 = 0;

2676 
GOSTSR_U8
 
i
 = 0;

2678 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
acDes
))

2680  
GOSTSR_FAILURE
;

2683 i‡(
GOS_PSISI_DESCRIPTOR_AC3
 !
§cDes
->
Tag
)

2685  
GOSTSR_FAILURE
;

2688 
mem£t
(
acDes
, 0x00, (
GOS_DESC_AC3_S
));

2689 
pD©a
 = 
§cDes
->
D©a
;

2691 
u16ãmpLí
 = 
§cDes
->
u16Size
;

2694 
acDes
->
u8AC3Ty≥Fœg
 = (
pD©a
[0] & 
BIT8
) /BIT8;

2697 
acDes
->
u8AC3Ty≥Fœg
 = (
pD©a
[0] & 
BIT7
) /BIT7;

2700 
acDes
->
u8AC3Ty≥Fœg
 = (
pD©a
[0] & 
BIT6
) /BIT6;

2703 
acDes
->
u8AC3Ty≥Fœg
 = (
pD©a
[0] & 
BIT5
) /BIT5;

2706 
ãmpD©a
 = 
pD©a
[0] & (
BIT4
 | 
BIT3
 | 
BIT2
 | 
BIT1
);

2707 
pD©a
 += 1;

2710 if(
acDes
->
u8AC3Ty≥Fœg
 == 0x01)

2712 
acDes
->
u8AC3Ty≥
 = 
pD©a
[0];

2713 
pD©a
 += 1;

2717 if(
acDes
->
u8BsidFœg
 == 0x01)

2719 
acDes
->
u8Bsid
 = 
pD©a
[0];

2720 
pD©a
 += 1;

2724 if(
acDes
->
u8MaöidFœg
 == 0x01)

2726 
acDes
->
u8Maöid
 = 
pD©a
[0];

2727 
pD©a
 += 1;

2731 if(
acDes
->
u8AsvcFœg
 == 0x01)

2733 
acDes
->
u8Asvc
 = 
pD©a
[0];

2734 
pD©a
 += 1;

2736 
i
 = 0; i < 
u16ãmpLí
; i++)

2739 
acDes
->
a°AddInfo
[
i
].
u32Addôi⁄ÆInfo
 = 
pD©a
[0] * 
u16ãmpLí
;

2743 
pD©a
 = 
GOSTSR_NULL
;

2745  
GOSTSR_SUCCESS
;

2748 
GOSTSR_S32
 
GosT§_Des¸ùt‹_AncûœryD©a
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_ANCILLARRYDATA_S
 *
™Des
)

2750 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

2752 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
™Des
))

2754  
GOSTSR_FAILURE
;

2757 i‡(
GOS_PSISI_DESCRIPTOR_ANCILLARY_DATA
 !
§cDes
->
Tag
)

2759  
GOSTSR_FAILURE
;

2762 
mem£t
(
™Des
, 0x00, (
GOS_DESC_ANCILLARRYDATA_S
));

2763 
pD©a
 = 
§cDes
->
D©a
;

2766 
™Des
->
u8AncûœryD©aIdítifõr
 = 
pD©a
[0];

2767 
pD©a
 += 1;

2769 
pD©a
 = 
GOSTSR_NULL
;

2771  
GOSTSR_SUCCESS
;

2774 
GOSTSR_S32
 
GosT§_Des¸ùt‹_CñlLi°
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_CELLLIST_S
 *
˛Des
)

2776 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

2777 
GOSTSR_U16
 
i
 = 0;

2778 
GOSTSR_U16
 
j
 = 0;

2780 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
˛Des
))

2782  
GOSTSR_FAILURE
;

2785 i‡(
GOS_PSISI_DESCRIPTOR_CELL_LIST
 !
§cDes
->
Tag
)

2787  
GOSTSR_FAILURE
;

2790 
mem£t
(
˛Des
, 0x00, (
GOS_DESC_CELLLIST_S
));

2791 
pD©a
 = 
§cDes
->
D©a
;

2793 
˛Des
->
u16CñlLi°Lí
 = 
§cDes
->
u16Size
;

2794 
i
 = 0; i < 
˛Des
->
u16CñlLi°Lí
; i++)

2797 
˛Des
->
a°CñlInfo
[
i
].
u16CñlId
 = (
pD©a
[0] << 8) +ÖData[1];

2798 
pD©a
 += 2;

2801 
˛Des
->
a°CñlInfo
[
i
].
u16CñlL©ôude
 = (
pD©a
[0] << 8) +ÖData[1];

2802 
pD©a
 += 2;

2805 
˛Des
->
a°CñlInfo
[
i
].
u16CñlL⁄gtôude
 = (
pD©a
[0] << 8) +ÖData[1];

2806 
pD©a
 += 2;

2809 
˛Des
->
a°CñlInfo
[
i
].
u16CñlExL©ôude
 = (
pD©a
[0] << 8Ë+ (pD©a[1] & (
BIT8
 | 
BIT7
 | 
BIT6
 | 
BIT5
) / BIT5);

2810 
pD©a
 += 1;

2813 
˛Des
->
a°CñlInfo
[
i
].
u16CñlExL⁄gtôude
 = ((
pD©a
[0] & (
BIT4
 | 
BIT3
 | 
BIT2
 | 
BIT1
)) << 8) +ÖData[1];

2814 
pD©a
 += 2;

2817 
˛Des
->
a°CñlInfo
[
i
].
u8SubCñlInfoLí
 = 
pD©a
[0] ;

2818 
pD©a
 += 1;

2820 
j
 = 0; j < 
˛Des
->
a°CñlInfo
[
i
].
u8SubCñlInfoLí
; j++)

2823 
˛Des
->
a°CñlInfo
[
i
].
a°SubCñlInfo
[
j
].
u8CñlIdExãnsi⁄
 = 
pD©a
[0];

2824 
pD©a
 += 1;

2827 
˛Des
->
a°CñlInfo
[
i
].
a°SubCñlInfo
[
j
].
u16SubCñlL©ôude
 = (
pD©a
[0] << 8) +ÖData[1];

2828 
pD©a
 += 2;

2831 
˛Des
->
a°CñlInfo
[
i
].
a°SubCñlInfo
[
j
].
u16SubCñlL⁄gtôude
 = (
pD©a
[0] << 8) +ÖData[1];

2832 
pD©a
 += 2;

2835 
˛Des
->
a°CñlInfo
[
i
].
a°SubCñlInfo
[
j
].
u16SubCñlExL©ôude
 = (
pD©a
[0] << 8Ë+ (pD©a[1] & (
BIT8
 | 
BIT7
 | 
BIT6
 | 
BIT5
) / BIT5);

2836 
pD©a
 += 1;

2839 
˛Des
->
a°CñlInfo
[
i
].
a°SubCñlInfo
[
j
].
u16SubCñlExL⁄gtôude
 = ((
pD©a
[0] & (
BIT4
 | 
BIT3
 | 
BIT2
 | 
BIT1
)) << 8) +ÖData[1];

2840 
pD©a
 += 2;

2844 
pD©a
 = 
GOSTSR_NULL
;

2846  
GOSTSR_SUCCESS
;

2849 
GOSTSR_S32
 
GosT§_Des¸ùt‹_CñlFªLök
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_CELLFRELINK_S
 *
cÊDes
)

2851 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

2852 
GOSTSR_U16
 
i
 = 0;

2853 
GOSTSR_U16
 
j
 = 0;

2855 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
cÊDes
))

2857  
GOSTSR_FAILURE
;

2860 i‡(
GOS_PSISI_DESCRIPTOR_CELL_FREQUENCY_LINK
 !
§cDes
->
Tag
)

2862  
GOSTSR_FAILURE
;

2865 
mem£t
(
cÊDes
, 0x00, (
GOS_DESC_CELLFRELINK_S
));

2866 
pD©a
 = 
§cDes
->
D©a
;

2868 
cÊDes
->
u16CñlFªLí
 = 
§cDes
->
u16Size
;

2869 
i
 = 0; i < 
cÊDes
->
u16CñlFªLí
; i++)

2872 
cÊDes
->
a°CñlFªInfo
[
i
].
u16CñlId
 = (
pD©a
[0] << 8) +ÖData[1];

2873 
pD©a
 += 2;

2876 
cÊDes
->
a°CñlFªInfo
[
i
].
u32Fªquícy
 =((
pD©a
[0] & 0xf0Ë/ 
BIT5
)*10000000 + (pData[0] & 0x0f)*1000000 + \

2877 ((
pD©a
[1] & 0xf0Ë/ 
BIT5
)*100000 + (pData[1] & 0x0f)*10000 + \

2878 ((
pD©a
[2] & 0xf0Ë/ 
BIT5
)*1000 + (pData[2] & 0x0f)*100 + \

2879 ((
pD©a
[3] & 0xf0Ë/ 
BIT5
)*10 + (pData[3] & 0x0f);

2880 
pD©a
 += 3;

2883 
cÊDes
->
a°CñlFªInfo
[
i
].
u8SubCñlFªInfoLí
 = 
pD©a
[0] ;

2884 
pD©a
 += 1;

2886 
j
 = 0; j < 
cÊDes
->
a°CñlFªInfo
[
i
].
u8SubCñlFªInfoLí
; j++)

2889 
cÊDes
->
a°CñlFªInfo
[
i
].
a°SubCñlFªInfo
[
j
].
u8CñlIdExãn
 = 
pD©a
[0];

2890 
pD©a
 += 1;

2893 
cÊDes
->
a°CñlFªInfo
[
i
].
a°SubCñlFªInfo
[
j
].
u32TønsFªquícy
 = ((
pD©a
[0] & 0xf0Ë/ 
BIT5
)*10000000 + (pData[0] & 0x0f)*1000000 + \

2894 ((
pD©a
[1] & 0xf0Ë/ 
BIT5
)*100000 + (pData[1] & 0x0f)*10000 + \

2895 ((
pD©a
[2] & 0xf0Ë/ 
BIT5
)*1000 + (pData[2] & 0x0f)*100 + \

2896 ((
pD©a
[3] & 0xf0Ë/ 
BIT5
)*10 + (pData[3] & 0x0f);

2897 
pD©a
 += 3;

2901 
pD©a
 = 
GOSTSR_NULL
;

2903  
GOSTSR_SUCCESS
;

2906 
GOSTSR_S32
 
GosT§_Des¸ùt‹_A¬oun˚Suµ‹t
(
GOS_PSISI_Des¸ùt‹_S
 *
§cDes
, 
GOS_DESC_ANNOUNCE_S
 *
™Des
)

2908 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

2909 
GOSTSR_U8
 
tmpD©a
 = 0;

2910 
GOSTSR_U16
 
i
 = 0;

2912 i‡((
GOSTSR_NULL
 =
§cDes
Ë|| (GOSTSR_NULL =
™Des
))

2914  
GOSTSR_FAILURE
;

2917 i‡(
GOS_PSISI_DESCRIPTOR_ANNOUNCEMENT_SUPPORT
 !
§cDes
->
Tag
)

2919  
GOSTSR_FAILURE
;

2922 
mem£t
(
™Des
, 0x00, (
GOS_DESC_ANNOUNCE_S
));

2923 
pD©a
 = 
§cDes
->
D©a
;

2925 
™Des
->
u16A¬oun˚Lí
 = 
§cDes
->
u16Size
;

2928 
™Des
->
u16AnSuµ‹tIndiˇt‹
 = (
pD©a
[0] << 8) +ÖData[1];

2929 
pD©a
 += 2;

2931 
i
 = 0; i < 
™Des
->
u16A¬oun˚Lí
; i++)

2934 
™Des
->
a°AddInfo
[
i
].
u8A¬oun˚Ty≥
 = (
pD©a
[0] & (
BIT8
 | 
BIT7
 |
BIT6
 | 
BIT5
)) / BIT5;

2937 
tmpD©a
 = (
pD©a
[0] & 
BIT4
) / BIT4;

2940 
™Des
->
a°AddInfo
[
i
].
u8Re„ªn˚Ty≥
 = 
pD©a
[0] & (
BIT3
 | 
BIT2
 | 
BIT1
);

2941 
pD©a
 += 1;

2943 i‡(
™Des
->
a°AddInfo
[
i
].
u8Re„ªn˚Ty≥
 == 0x01 \

2944 || 
™Des
->
a°AddInfo
[
i
].
u8Re„ªn˚Ty≥
 ==0x02 \

2945 || 
™Des
->
a°AddInfo
[
i
].
u8Re„ªn˚Ty≥
 ==0x03)

2948 
™Des
->
a°AddInfo
[
i
].
u8OrigöÆNëw‹kId
 = (
pD©a
[0] << 8) +ÖData[1];

2949 
pD©a
 += 2;

2952 
™Des
->
a°AddInfo
[
i
].
u8Tøn•‹tSåómId
 = (
pD©a
[0] << 8) +ÖData[1];

2953 
pD©a
 += 2;

2956 
™Des
->
a°AddInfo
[
i
].
u8Sîvi˚Id
 = (
pD©a
[0] << 8) +ÖData[1];

2957 
pD©a
 += 2;

2960 
™Des
->
a°AddInfo
[
i
].
u8Comp⁄ítTag
 = 
pD©a
[0];

2961 
pD©a
 += 1;

2965 
pD©a
 = 
GOSTSR_NULL
;

2967  
GOSTSR_SUCCESS
;

2970 #ifde‡
__˝lu•lus


2971 #i‡
__˝lu•lus


	@tscheck/src/GosTsr_Os.c

1 
	~"GosT§_Os.h
"

2 
	~<mqueue.h
>

3 
	~<î∫o.h
>

4 
	~<f˙é.h
>

5 
	~<sys/°©.h
>

7 
GOSTSR_S32
 
	gmsgId
 = -1;

9 
OS_Packë_Sem≠h‹e_t
 *
	$OS_Packë_Cª©eSem≠h‹e
(c⁄° 
GOSTSR_S32
 
InôülVÆue
)

11 
OS_Packë_Sem≠h‹e_t
 *
Sem≠h‹e_p
 = 
GOSTSR_NULL
;

13 
Sem≠h‹e_p
 = (
OS_Packë_Sem≠h‹e_t
 *)
	`OS_Packë_AŒocMem‹y
((OS_Packet_Semaphore_t));

15 i‡(
Sem≠h‹e_p
 !
GOSTSR_NULL
)

17 i‡(
	`£m_öô
(
Sem≠h‹e_p
, 0, 
InôülVÆue
))

19 
	`OS_Packë_FªeMem‹y
(
Sem≠h‹e_p
);

20  
GOSTSR_NULL
;

24  
Sem≠h‹e_p
;

25 
	}
}

27 
GOSTSR_BOOL
 
	$OS_Packë_DñëeSem≠h‹e
(
OS_Packë_Sem≠h‹e_t
 *
Sem≠h‹e_p
)

29 i‡(
Sem≠h‹e_p
 !
GOSTSR_NULL
)

31 
	`£m_de°roy
(
Sem≠h‹e_p
);

32 
	`OS_Packë_FªeMem‹y
(
Sem≠h‹e_p
);

36  
GOSTSR_FALSE
;

39  
GOSTSR_TRUE
;

40 
	}
}

42 
GOSTSR_BOOL
 
	$OS_Packë_Sig«lSem≠h‹e
(
OS_Packë_Sem≠h‹e_t
 *
Sem≠h‹e_p
)

44 i‡(
Sem≠h‹e_p
 !
GOSTSR_NULL
)

46 
	`£m_po°
(
Sem≠h‹e_p
);

47  
GOSTSR_TRUE
;

50  
GOSTSR_FALSE
;

51 
	}
}

53 
GOSTSR_BOOL
 
	$OS_Packë_WaôSem≠h‹e
(
OS_Packë_Sem≠h‹e_t
 *
Sem≠h‹e_p
)

55 i‡(
Sem≠h‹e_p
 !
GOSTSR_NULL
)

57  (
	`£m_waô
(
Sem≠h‹e_p
Ë=0Ë? 
GOSTSR_TRUE
 : 
GOSTSR_FALSE
;

60  
GOSTSR_FALSE
;

61 
	}
}

63 
GOSTSR_S32
 
	$PSISI_Msg_Inô
()

65 
msgId
=
	`msggë
((
key_t
)1234,
IPC_EXCL
);

66 if(
msgId
 < 0)

68 
msgId
 = 
	`msggë
((
key_t
)1234, 0666|
IPC_CREAT
);

71  
msgId
;

72 
	}
}

74 
GOSTSR_S32
 
	$PSISI_Msg_DeInô
()

76 
	`msg˘l
(
msgId
, 
IPC_RMID
, 0);

78  
GOSTSR_SUCCESS
;

79 
	}
}

81 
GOSTSR_S32
 
	$PSISI_Msg_ªcvMsg
(
TABLE_MSG
 *
msg
)

83 
GOSTSR_S32
 
ªtVÆ
 = 
GOSTSR_FAILURE
;

85 i‡(
NULL
 !
msg
)

87 
ªtVÆ
 = 
	`msgrcv
(
msgId
, (*)
msg
, (
TABLE_MSG
), 0, 0);

90  
ªtVÆ
;

91 
	}
}

93 
GOSTSR_S32
 
	$PSISI_Msg_£ndMsg
(
TABLE_MSG
 *
msg
)

95 
GOSTSR_S32
 
ªtVÆ
 = 
GOSTSR_FAILURE
;

97 i‡(
msg
 !
NULL
)

99 
ªtVÆ
 = 
	`msg¢d
(
msgId
, (*)
msg
, (
TABLE_MSG
), 
IPC_NOWAIT
);

102  
ªtVÆ
;

103 
	}
}

105 
ölöe
 
	$U16_to_U8
(
GOSTSR_U8
 **
q_±r
, 
GOSTSR_S32
 
vÆ
)

107 
GOSTSR_U8
 *
q
;

108 
q
 = *
q_±r
;

109 *
q
++ = 
vÆ
 >> 8;

110 *
q
++ = 
vÆ
;

111 *
q_±r
 = 
q
;

112 
	}
}

115 
	$Så16_to_Så8
(
GOSTSR_U8
 **
q_±r
, c⁄° GOSTSR_U8 *
°r
)

117 
GOSTSR_U8
 *
q
;

118 
GOSTSR_S32
 
Àn
;

120 
q
 = *
q_±r
;

121 i‡(!
°r
)

122 
Àn
 = 0;

124 
Àn
 = 
	`°æí
((*)
°r
);

125 *
q
++ = 
Àn
;

126 
	`mem˝y
(
q
, 
°r
, 
Àn
);

127 
q
 +
Àn
;

128 *
q_±r
 = 
q
;

129 
	}
}

	@tscheck/src/TsErrorCheck_Api.c

1 
	~"GosT§_Os.h
"

2 
	~"GosT§_Crc.h
"

3 
	~"GosT§_A«lysisD©a.h
"

4 
	~"GosT§_Des¸ùt‹.h
"

6 
	~"TsEº‹Check_Api.h
"

7 
	~"TsEº‹Check_Log.h
"

8 
	~"TsEº‹Check_O√Levñ.h
"

9 
	~"TsEº‹Check_TwoLevñ.h
"

10 
	~"TsEº‹Check_ThªeLevñ.h
"

12 
	~"ts_b™d.h
"

14 
GOSTSR_U8
 
	g°©icTsRegi°îIndex
 = 0;

16 
OS_Packë_Sem≠h‹e_t
* 
	g£m_Api_Ac˚ss
[
TSERROR_CHANNELID_MAX
];

17 
±hªad_t
 
	g±hªadM©chH™dÀ
[
TSERROR_CHANNELID_MAX
];

18 
TSERROR_API_PARAM_S
 
	g°Api_P¨am
[
TSERROR_CHANNELID_MAX
];

20 
GOSTSR_S32
 
	$TsEº‹Check_Api_£tCheckPid
(
GOSTSR_U8
 
ch™ID
,
SEARCH_INFO_S
 *
p°ProgInfo
)

22 if((
GOSTSR_NULL
 =
p°ProgInfo
Ë|| (
ch™ID
 >
TSERROR_CHANNELID_MAX
))

24  
GOSTSR_FAILURE
;

26 if(
p°ProgInfo
->
u16NbProg
 > 0)

28 
	`TsEº‹Check_Log_SëNbProg
(
ch™ID
,
p°ProgInfo
->
u16NbProg
);

31 #i‡!
STATIC_SEARCH_USE


32 
	`tsb™d_£rvi˚_£t_¥ogöfo
(
ch™ID
,
p°ProgInfo
);

35 
	`TsEº‹Check_O√Levñ_£tPid
(
ch™ID
,
p°ProgInfo
);

36 
	`TsEº‹Check_TwoLevñ_£tPid
(
ch™ID
,
p°ProgInfo
);

37 
	`TsEº‹Check_ThªeLevñ_£tPid
(
ch™ID
,
p°ProgInfo
);

40 
°Api_P¨am
[
ch™ID
].
bisM©ched
 = 
GOSTSR_TRUE
;

42  
GOSTSR_SUCCESS
;

43 
	}
}

46 *
	$TsEº‹Check_M©chTimeOut_Task0
(*
¨gc
)

50 if(!
°Api_P¨am
[0].
°SórchUpd©eInfo
.
bUpd©eFœg
)

52 
	`u¶ìp
(200 * 1000);

56 
	`¶ìp
(10);

58 
	`OS_Packë_WaôSem≠h‹e
(
£m_Api_Ac˚ss
[0]);

59 
°Api_P¨am
[0].
bSórchFœg
 = 
GOSTSR_TRUE
;

60 
	`OS_Packë_Sig«lSem≠h‹e
(
£m_Api_Ac˚ss
[0]);

62  
GOSTSR_NULL
;

63 
	}
}

65 *
	$TsEº‹Check_M©chTimeOut_Task1
(*
¨gc
)

69 if(!
°Api_P¨am
[1].
°SórchUpd©eInfo
.
bUpd©eFœg
)

71 
	`u¶ìp
(200 * 1000);

75 
	`¶ìp
(10);

77 
	`OS_Packë_WaôSem≠h‹e
(
£m_Api_Ac˚ss
[1]);

78 
°Api_P¨am
[1].
bSórchFœg
 = 
GOSTSR_TRUE
;

79 
	`OS_Packë_Sig«lSem≠h‹e
(
£m_Api_Ac˚ss
[1]);

81  
GOSTSR_NULL
;

82 
	}
}

84 
GOSTSR_U8
 
	$TsEº‹Check_Api_gëSåómTy≥
(
GOSTSR_U32
 
u32EsTy≥
)

86 
GOSTSR_U8
 
u8SåómTy≥
 =
PACKET_ESTYPE_MAX
;

87 
u32EsTy≥
)

89 
STREAM_TYPE_VIDEO_MPEG2
:

90 
STREAM_TYPE_VIDEO_MPEG4
:

91 
STREAM_TYPE_VIDEO_H264
:

92 
STREAM_TYPE_VIDEO_DIRAC
:

93 
u8SåómTy≥
 = 
PACKET_ESTYPE_VIDEO
;

95 
STREAM_TYPE_AUDIO_MPEG1
:

96 
STREAM_TYPE_AUDIO_MPEG2
:

97 
STREAM_TYPE_AUDIO_AAC
:

98 
STREAM_TYPE_AUDIO_AC3
:

99 
u8SåómTy≥
 = 
PACKET_ESTYPE_AUDIO
;

102 
u8SåómTy≥
 = 
PACKET_ESTYPE_PRIVATE
;

105  
u8SåómTy≥
;

106 
	}
}

108 
GOSTSR_S32
 
	$TsEº‹Check_Api_P¨£P©
(
GOSTSR_U8
 
ch™ID
,
GOSTSR_PSISI_PAT_S
 *
∑tInfo
)

110 
GOSTSR_S32
 
i
 = 0;

111 
GOSTSR_U32
 
ödex
 = 0;

113 if((
ch™ID
 >
TSERROR_CHANNELID_MAX
Ë|| (
GOSTSR_NULL
 =
∑tInfo
Ë|| (∑tInfo->
u8Vîsi⁄
 =
°Api_P¨am
[ch™ID].
°SórchUpd©eInfo
.
u8P©Vîsi⁄
))

115  
GOSTSR_FAILURE
;

119 
SEARCH_INFO_S
 *
p°SórchInfo
 = &
°Api_P¨am
[
ch™ID
].
°SórchUpd©eInfo
.
°SórchInfo
;

120 
°Api_P¨am
[
ch™ID
].
°SórchUpd©eInfo
.
u8P©Vîsi⁄
 = 
∑tInfo
->
u8Vîsi⁄
;

121 
°Api_P¨am
[
ch™ID
].
°SórchUpd©eInfo
.
bUpd©eFœg
 = 
GOSTSR_TRUE
;

123 
∑tInfo
->
u16NbEÀmíts
 = (∑tInfo->u16NbEÀmít†> 
SEARCH_PROG_NUM_MAX
 ? SEARCH_PROG_NUM_MAX:ÖatInfo->u16NbElements);

124 
i
 = 0; i < 
∑tInfo
->
u16NbEÀmíts
; i++)

126 if((
NIT_PID
 =
∑tInfo
->
a°EÀmít
[
i
].
u16Pid
) || (patInfo->astElement[i].u16Pid == 0))

130 
p°SórchInfo
->
°ProgInfo
[
ödex
++].
PmtPid
 = 
∑tInfo
->
a°EÀmít
[
i
].
u16Pid
;

133 
p°SórchInfo
->
u16NbProg
 = 
ödex
;

136  
GOSTSR_SUCCESS
;

137 
	}
}

139 
GOSTSR_S32
 
	$TsEº‹Check_Api_P¨£Pmt
(
GOSTSR_U8
 
ch™ID
,
GOSTSR_U16
 
Pmt_pid
, 
GOSTSR_PSISI_PMT_S
 *
pmtInfo
)

141 
GOSTSR_S32
 
i
 = 0, 
j
 = 0;

143 if((
ch™ID
 >
TSERROR_CHANNELID_MAX
Ë|| (
GOSTSR_NULL
 =
pmtInfo
Ë|| (!
°Api_P¨am
[ch™ID].
°SórchUpd©eInfo
.
bUpd©eFœg
))

145  
GOSTSR_FAILURE
;

148 
SEARCH_INFO_S
 *
p°SórchInfo
 = &
°Api_P¨am
[
ch™ID
].
°SórchUpd©eInfo
.
°SórchInfo
;

149 
i
 = 0; i < 
p°SórchInfo
->
u16NbProg
; i++)

152 if((
p°SórchInfo
->
°ProgInfo
[
i
].
PmtPid
 =
Pmt_pid
Ë&& (p°SórchInfo->°ProgInfo[i].
bU£d
))

156 if((
p°SórchInfo
->
°ProgInfo
[
i
].
PmtPid
 =
Pmt_pid
Ë&& (!p°SórchInfo->°ProgInfo[i].
bU£d
))

159 
p°SórchInfo
->
°ProgInfo
[
i
].
°£rvi˚öfo
.
£rvi˚ID
 = 
pmtInfo
->
u16ProgømNumbî
;

161 
p°SórchInfo
->
°ProgInfo
[
i
].
bU£d
 = 
GOSTSR_TRUE
;

162 
p°SórchInfo
->
°ProgInfo
[
i
].
P¸Pid
 = 
pmtInfo
->
u16P¸Pid
;

163 
pmtInfo
->
u16NbEÀmíts
 = (pmtInfo->u16NbEÀmít†> 
EACH_PROG_PES_MAX
 ? EACH_PROG_PES_MAX :ÖmtInfo->u16NbElements);

164 
p°SórchInfo
->
°ProgInfo
[
i
].
u8NbPes
 = 
pmtInfo
->
u16NbEÀmíts
;

165 
j
 = 0; j < 
pmtInfo
->
u16NbEÀmíts
; j++)

168 if(
PACKET_ESTYPE_VIDEO
 =
	`TsEº‹Check_Api_gëSåómTy≥
(
pmtInfo
->
a°EÀmít
[
j
].
eTy≥
))

170 
p°SórchInfo
->
°ProgInfo
[
i
].
°£rvi˚öfo
.
video_pid
 = 
pmtInfo
->
a°EÀmít
[
j
].
u16Pid
;

174 
audio_num
 = 
p°SórchInfo
->
°ProgInfo
[
i
].
°£rvi˚öfo
.
u8Nbaudio
;

175 
p°SórchInfo
->
°ProgInfo
[
i
].
°£rvi˚öfo
.
u8Nbaudio
++;

176 
p°SórchInfo
->
°ProgInfo
[
i
].
°£rvi˚öfo
.
audio_pid
[
audio_num
] = 
pmtInfo
->
a°EÀmít
[
j
].
u16Pid
;

179 
p°SórchInfo
->
°ProgInfo
[
i
].
PesPid
[
j
] = 
pmtInfo
->
a°EÀmít
[j].
u16Pid
;

181 
°Api_P¨am
[
ch™ID
].
u16SórchCou¡
++;

183 if(
°Api_P¨am
[
ch™ID
].
u16SórchCou¡
 >
p°SórchInfo
->
u16NbProg
)

185 
	`OS_Packë_WaôSem≠h‹e
(
£m_Api_Ac˚ss
[
ch™ID
]);

186 
°Api_P¨am
[
ch™ID
].
bSórchFœg
 = 
GOSTSR_TRUE
;

187 
	`OS_Packë_Sig«lSem≠h‹e
(
£m_Api_Ac˚ss
[
ch™ID
]);

192 if(
°Api_P¨am
[
ch™ID
].
bSórchFœg
)

194 
	`TsEº‹Check_Api_£tCheckPid
(
ch™ID
,
p°SórchInfo
);

195 
	`¥ötf
("11111111111111111111111111\n");

197 
	`OS_Packë_WaôSem≠h‹e
(
£m_Api_Ac˚ss
[
ch™ID
]);

198 
°Api_P¨am
[
ch™ID
].
bSórchFœg
 = 
GOSTSR_FALSE
;

199 
	`OS_Packë_Sig«lSem≠h‹e
(
£m_Api_Ac˚ss
[
ch™ID
]);

201 
°Api_P¨am
[
ch™ID
].
u16SórchCou¡
 = 0;

202 
°Api_P¨am
[
ch™ID
].
°SórchUpd©eInfo
.
bUpd©eFœg
 = 
GOSTSR_FALSE
;

203 
	`mem£t
(
p°SórchInfo
, 0 ,(
SEARCH_INFO_S
));

205  
GOSTSR_SUCCESS
;

206 
	}
}

208 
GOSTSR_S32
 
	$TsEº‹Check_Api_P¨£C©
(
GOSTSR_U8
 
ch™ID
,
GOSTSR_PSISI_CAT_S
 *
ˇtInfo
)

210 
GOSTSR_S32
 
i
 = 0;

211 
GOSTSR_U8
 
ödex
 = 0;

212 
GOS_DESC_CA_S
 
ˇDesInfo
;

214 if((
ch™ID
 >
TSERROR_CHANNELID_MAX
Ë|| (
GOSTSR_NULL
 =
ˇtInfo
Ë|| (!
°Api_P¨am
[ch™ID].
°SórchUpd©eInfo
.
bUpd©eFœg
))

216  
GOSTSR_FAILURE
;

219 
SEARCH_INFO_S
 *
p°SórchInfo
 = &
°Api_P¨am
[
ch™ID
].
°SórchUpd©eInfo
.
°SórchInfo
;

220 
ˇtInfo
->
u16NbDes¸ùt‹s
 = (ˇtInfo->u16NbDes¸ùt‹†> 
SEARCH_CA_NUM_MAX
 ? SEARCH_CA_NUM_MAX : catInfo->u16NbDescriptors);

221 
i
 = 0; i < 
ˇtInfo
->
u16NbDes¸ùt‹s
; i++)

223 i‡(
GOSTSR_SUCCESS
 =
	`GosT§_Des¸ùt‹_CA
(&
ˇtInfo
->
a°Des¸ùt‹
[
i
], &
ˇDesInfo
))

225 if(
ödex
 < 
SEARCH_CA_NUM_MAX
)

227 
p°SórchInfo
->
°CaInfo
[
ödex
++].
CaPid
 = 
ˇDesInfo
.
u16CaPId
;

231 
p°SórchInfo
->
u16NbCa
 = 
ödex
;

233  
GOSTSR_SUCCESS
;

234 
	}
}

237 
GOSTSR_S32
 
	$TsEº‹Check_Api_P¨£Sdt
(
GOSTSR_U8
 
ch™ID
,*
£rvi˚«me
, 
GOSTSR_U16
 
£rvi˚ID
)

239 
GOSTSR_S32
 
i
 = 0;

241 if((
ch™ID
 >
TSERROR_CHANNELID_MAX
Ë|| (
GOSTSR_NULL
 =
£rvi˚«me
Ë|| (!
°Api_P¨am
[ch™ID].
°SórchUpd©eInfo
.
bUpd©eFœg
))

243  
GOSTSR_FAILURE
;

246 
SEARCH_INFO_S
 *
p°SórchInfo
 = &
°Api_P¨am
[
ch™ID
].
°SórchUpd©eInfo
.
°SórchInfo
;

247 
i
 = 0; i < 
p°SórchInfo
->
u16NbProg
; i++)

249 if(
£rvi˚ID
 =
p°SórchInfo
->
°ProgInfo
[
i
].
°£rvi˚öfo
.serviceID)

251 
	`°r˝y
(
p°SórchInfo
->
°ProgInfo
[
i
].
°£rvi˚öfo
.
£rvi˚Name
, 
£rvi˚«me
);

252 
	`¥ötf
("-------------£rvi˚ID:%#x-------£rvi˚Name:%s\n", 
£rvi˚ID
, 
£rvi˚«me
);

256  
GOSTSR_SUCCESS
;

257 
	}
}

260 
	$TsEº‹Check_Api_CÆlBack
(
GOSTSR_U8
 
ch™ID
,
TS_SECTION_INFO
 *
tsSe˘i⁄Info
)

262 i‡((
GOSTSR_NULL
 =
tsSe˘i⁄Info
->
£˘i⁄D©a
Ë|| (GOSTSR_NULL =tsSe˘i⁄InfoË|| (
ch™ID
 >
TSERROR_CHANNELID_MAX
))

267 
tsSe˘i⁄Info
->
èbÀID
)

269 
PAT_TABLE_ID
:

271 
GOSTSR_PSISI_PAT_S
 
∑tInfo
;

272 
	`mem£t
(&
∑tInfo
,0,(
GOSTSR_PSISI_PAT_S
));

273 
	`GosT§_A«lysisD©a_PAT
(
tsSe˘i⁄Info
, &
∑tInfo
);

274 
	`TsEº‹Check_Api_P¨£P©
(
ch™ID
,&
∑tInfo
);

275 
	`GosT§_A«lysisD©a_PAT_Fªe
(&
∑tInfo
);

279 
CAT_TABLE_ID
:

281 
GOSTSR_PSISI_CAT_S
 
ˇtInfo
;

282 
	`mem£t
(&
ˇtInfo
,0,(
GOSTSR_PSISI_CAT_S
));

283 
	`GosT§_A«lysisD©a_CAT
(
tsSe˘i⁄Info
, &
ˇtInfo
);

284 
	`TsEº‹Check_Api_P¨£C©
(
ch™ID
,&
ˇtInfo
);

285 
	`GosT§_A«lysisD©a_CAT_Fªe
(&
ˇtInfo
);

289 
PMT_TABLE_ID
:

291 
GOSTSR_PSISI_PMT_S
 
pmtInfo
;

292 
	`mem£t
(&
pmtInfo
,0,(
GOSTSR_PSISI_PMT_S
));

293 
	`GosT§_A«lysisD©a_PMT
(
tsSe˘i⁄Info
, &
pmtInfo
);

294 
	`TsEº‹Check_Api_P¨£Pmt
(
ch™ID
,
tsSe˘i⁄Info
->
PID
,&
pmtInfo
);

295 
	`GosT§_A«lysisD©a_PMT_Fªe
(&
pmtInfo
);

301 
SDT_TABLE_ID_ACTUAL
:

302 
SDT_TABLE_ID_OTEHR
:

304 
£rvi˚«me
[256] = {0};

305 
GOSTSR_U16
 
£rvi˚ID
 = 0;

306 
	`GosT§_A«lysisD©a_gëSîvi˚Name
(
£rvi˚«me
, &
£rvi˚ID
, 
tsSe˘i⁄Info
);

307 
	`TsEº‹Check_Api_P¨£Sdt
(
ch™ID
, 
£rvi˚«me
, 
£rvi˚ID
);

315 
	}
}

317 
GOSTSR_S32
 
	$TsEº‹Check_Api_A«lysisSync
(
GOSTSR_U8
 
ch™ID
,
GOSTSR_BOOL
 *
pbSyncisOk
,
GOSTSR_U32
 
u32ByãPos
,GOSTSR_U8 *
pD©a
, GOSTSR_U32 
u32D©aLí
)

319 i‡((
GOSTSR_NULL
 =
pD©a
Ë|| (
pbSyncisOk
 =GOSTSR_NULLË|| (
ch™ID
 >
TSERROR_CHANNELID_MAX
))

321  
GOSTSR_FAILURE
;

325 if(!
°Api_P¨am
[
ch™ID
].
bSyncisOk
)

327 if(
pD©a
[0] =
SYNC_BYTE
)

329 
°Api_P¨am
[
ch™ID
].
u8SyncNum
++;

330 if(
°Api_P¨am
[
ch™ID
].
u8SyncNum
 == 5)

332 
°Api_P¨am
[
ch™ID
].
bSyncisOk
 = 
GOSTSR_TRUE
;

333 
°Api_P¨am
[
ch™ID
].
u8SyncNum
 = 0;

334 *
pbSyncisOk
 = 
GOSTSR_FALSE
;

337 if(
°Api_P¨am
[
ch™ID
].
bSyncisLoss
)

339 #i‡
TSERROR_CHECK


340 #i‡
TSERROR_ONE_LEVEL


341 
	`TsEº‹Check_O√Levñ_SyncLossEº‹
(
ch™ID
,
°Api_P¨am
[ch™ID].
bisM©ched
,
u32ByãPos
);

344 
°Api_P¨am
[
ch™ID
].
bSyncisLoss
 = 
GOSTSR_FALSE
;

351 if(
°Api_P¨am
[
ch™ID
].
bSyncisLoss
)

353 #i‡
TSERROR_CHECK


354 #i‡
TSERROR_ONE_LEVEL


356 
	`TsEº‹Check_O√Levñ_SyncByãEº‹
(
ch™ID
,
°Api_P¨am
[ch™ID].
bisM©ched
,
u32ByãPos
);

360 
°Api_P¨am
[
ch™ID
].
bSyncisOk
 = 
GOSTSR_FALSE
;

361 
°Api_P¨am
[
ch™ID
].
u8SyncNum
 = 0;

362 *
pbSyncisOk
 = 
GOSTSR_FALSE
;

368 if(
pD©a
[0] =
SYNC_BYTE
)

370 *
pbSyncisOk
 = 
GOSTSR_TRUE
;

374 
°Api_P¨am
[
ch™ID
].
bSyncisLoss
 = 
GOSTSR_TRUE
;

375 
°Api_P¨am
[
ch™ID
].
bSyncisOk
 = 
GOSTSR_FALSE
;

376 
°Api_P¨am
[
ch™ID
].
u8SyncNum
 = 0;

377 *
pbSyncisOk
 = 
GOSTSR_FALSE
;

380  
GOSTSR_SUCCESS
;

381 
	}
}

383 
GOSTSR_S32
 
	$TsEº‹Check_Api_A«lysisPackë
(
GOSTSR_U8
 
ch™ID
,
GOSTSR_BOOL
 
bC¨ryFœg
,
GOSTSR_U32
 
u32ByãPos
,GOSTSR_U8 *
pD©a
, GOSTSR_U32 
u32D©aLí
)

385 
GOSTSR_U32
 
°¨tTime
 = 0;

386 
GOSTSR_U32
 
ídTime
 = 0;

387 
TS_HEAD_INFO
 
tsHódInfo
;

388 
TS_ADAPT_INFO
 
ad≠tInfo
;

389 
TS_PES_INFO
 
≥sInfo
;

391 i‡((
ch™ID
 >
TSERROR_CHANNELID_MAX
Ë|| (
GOSTSR_NULL
 =
pD©a
))

393  
GOSTSR_FAILURE
;

395 
	`mem£t
(&
tsHódInfo
,0x00,(
TS_HEAD_INFO
));

396 
	`mem£t
(&
ad≠tInfo
,0x00,(
TS_ADAPT_INFO
));

397 
	`mem£t
(&
≥sInfo
,0x00,(
TS_PES_INFO
));

399 #i‡
TSBAND_BANDWIDTH


400 
	`tsb™d_°©i°ics_tŸÆ∑ckë
(
ch™ID
);

401 
	`tsb™d_£t_bôøã
(
ch™ID
, 
	`TsEº‹Check_TwoLevñ_gëAvTøn•‹tR©e
(chanID));

404 #i‡
TSERROR_CHECK


405 if(
	`TsEº‹Check_TwoLevñ_gëAvTøn•‹tR©e
(
ch™ID
) != 0)

407 
°¨tTime
 = 
	`TsEº‹Check_TwoLevñ_gëTimeUs_byByãPos
(
ch™ID
,
u32ByãPos
-
u32D©aLí
);

408 
ídTime
 = 
	`TsEº‹Check_TwoLevñ_gëTimeUs_byByãPos
(
ch™ID
,
u32ByãPos
);

412 
tsHódInfo
.
°Eº‹Info
.
ch™ID
 = chanID;

413 
tsHódInfo
.
°Eº‹Info
.
bisM©ched
 = 
°Api_P¨am
[
ch™ID
].bisMatched;

414 
tsHódInfo
.
°Eº‹Info
.
byãPos
 = 
u32ByãPos
-
u32D©aLí
;

415 
tsHódInfo
.
°Eº‹Info
.
bC¨ryFœg
 = bCarryFlag;

416 
tsHódInfo
.
°Eº‹Info
.
°¨tTime
 = startTime;

417 
tsHódInfo
.
°Eº‹Info
.
ídTime
 =ÉndTime;

418 if(
GOSTSR_FAILURE
 =
	`GosT§_A«lysisD©a_TSHódInfo
((*)
pD©a
, &
tsHódInfo
))

420  
GOSTSR_FAILURE
;

423 if(
GOSTSR_FAILURE
 =
	`GosT§_A«lysisD©a_Ad≠èti⁄Info
(&
tsHódInfo
, (*)(&
pD©a
[
TS_HEAD_LENGTH
]), &
ad≠tInfo
))

425  
GOSTSR_FAILURE
;

428 #i‡
TSERROR_ANALYSIS_TABLE


429 i‡(
GOSTSR_FAILURE
 =
	`GosT§_A«lysisD©a_PSI
((*)
pD©a
, &
tsHódInfo
))

431 i‡(
GOSTSR_FAILURE
 =
	`GosT§_A«lysisD©a_SI
((*)
pD©a
, &
tsHódInfo
))

433 
	`GosT§_A«lysisD©a_PESInfo
(&
tsHódInfo
,(*)
pD©a
, &
≥sInfo
);

437  
GOSTSR_SUCCESS
;

438 
	}
}

440 
GOSTSR_S32
 
	$TsEº‹Check_Api_TsM⁄ô‹
(
GOSTSR_U8
 
ch™ID
,GOSTSR_U8 *
pD©a
, 
GOSTSR_U32
 
u32D©aLí
)

442 
GOSTSR_U32
 
u32PackëLí
 = 0;

443 
GOSTSR_S32
 
s32Rë
 = 
GOSTSR_FAILURE
,
i
 = 0;

444 
GOSTSR_BOOL
 
bC¨ryFœg
 = 
GOSTSR_FALSE
;

445 
GOSTSR_BOOL
 
bSyncisOk
 = 
GOSTSR_FALSE
;

446 
GOSTSR_U8
 *
pTempD©a
 = 
pD©a
;

448 if((
pD©a
 =
GOSTSR_NULL
Ë|| (
ch™ID
 >
TSERROR_CHANNELID_MAX
))

450 
	`¥ötf
("start monitor ofÖData is NULL\n");

451  
GOSTSR_FAILURE
;

455 if(!
°Api_P¨am
[
ch™ID
].
bPackëTy≥
)

457 if((
	`GosT§_A«lysisD©a_PackëTy≥
(&
u32PackëLí
,
u32D©aLí
,
pD©a
Ë!
GOSTSR_SUCCESS
) )

459 
	`TS_DEBUG_LOG
("GosTsr_AnalysisData_PacketType Failed!");

460  
GOSTSR_FAILURE
;

463 i‡((
TS_LENGTH_188
 =
u32PackëLí
Ë|| (
TS_LENGTH_204
 == u32PacketLen))

465 
°Api_P¨am
[
ch™ID
].
bPackëTy≥
 = 
GOSTSR_TRUE
;

466 
°Api_P¨am
[
ch™ID
].
u32PackëLí
 = u32PacketLen;

470 
u32PackëLí
 = 
°Api_P¨am
[
ch™ID
].u32PacketLen;

471 if((
TS_LENGTH_188
 =
u32PackëLí
Ë|| (
TS_LENGTH_204
 == u32PacketLen))

473 
i
 = 0; i < 
u32D©aLí
 / 
u32PackëLí
; i++)

476 if((
°Api_P¨am
[
ch™ID
].
u32Api_ByãPos
 + 
u32PackëLí
Ë> 
TSERROR_INVALID_U32
)

478 
bC¨ryFœg
 = 
GOSTSR_TRUE
;

479 
°Api_P¨am
[
ch™ID
].
u32Api_ByãPos
 = 
u32PackëLí
 -(
TSERROR_INVALID_U32
 - stApi_Param[chanID].u32Api_BytePos);

483 
bC¨ryFœg
 = 
GOSTSR_FALSE
;

484 
°Api_P¨am
[
ch™ID
].
u32Api_ByãPos
 +
u32PackëLí
;

488 
s32Rë
 = 
	`TsEº‹Check_Api_A«lysisSync
(
ch™ID
, &
bSyncisOk
, 
°Api_P¨am
[ch™ID].
u32Api_ByãPos
, &
pTempD©a
[
i
*
u32PackëLí
], u32PacketLen);

489 if((
s32Rë
 !
GOSTSR_SUCCESS
Ë|| (!
bSyncisOk
))

494 #i‡
TSERROR_ANALYSIS_PACKET


496 
s32Rë
 = 
	`TsEº‹Check_Api_A«lysisPackë
(
ch™ID
, 
bC¨ryFœg
, 
°Api_P¨am
[ch™ID].
u32Api_ByãPos
, &
pTempD©a
[
i
*
u32PackëLí
], u32PacketLen);

497 if(
s32Rë
 !
GOSTSR_SUCCESS
)

499 
	`TS_DEBUG_LOG
("TsErrorCheck_Api_AnalysisPacket");

507  
GOSTSR_SUCCESS
;

508 
	}
}

510 
GOSTSR_S32
 
	$TsEº‹Check_Api_Inô
()

512 
°©icTsRegi°îIndex
 = 0;

513 
	`mem£t
(&
°Api_P¨am
, 0x00, (
TSERROR_API_PARAM_S
Ë* 
TSERROR_CHANNELID_MAX
);

514 
°Api_P¨am
[0].
°SórchUpd©eInfo
.
u8P©Vîsi⁄
 = 0xff;

515 
°Api_P¨am
[1].
°SórchUpd©eInfo
.
u8P©Vîsi⁄
 = 0xff;

517 
	`GosT§_A«lysisD©a_TsEnvInô
();

518 
	`GosT§_A«lysisD©a_CRCInô
();

519 
	`GosT§_A«lysisD©a_Regi°îCÆlBack
(
TsEº‹Check_Api_CÆlBack
,&
°©icTsRegi°îIndex
);

521 
	`TsEº‹Check_Log_Inô
();

522 
	`TsEº‹Check_O√Levñ_Inô
();

523 
	`TsEº‹Check_TwoLevñ_Inô
();

524 
	`TsEº‹Check_ThªeLevñ_Inô
();

526 i‡(!
£m_Api_Ac˚ss
[0])

528 
£m_Api_Ac˚ss
[0] = 
	`OS_Packë_Cª©eSem≠h‹e
(1);

530 i‡(!
£m_Api_Ac˚ss
[1])

532 
£m_Api_Ac˚ss
[1] = 
	`OS_Packë_Cª©eSem≠h‹e
(1);

535 
	`±hªad_¸óã
(&
±hªadM©chH™dÀ
[0],
GOSTSR_NULL
,
TsEº‹Check_M©chTimeOut_Task0
, GOSTSR_NULL);

536 
	`±hªad_¸óã
(&
±hªadM©chH™dÀ
[1],
GOSTSR_NULL
,
TsEº‹Check_M©chTimeOut_Task1
, GOSTSR_NULL);

538  
GOSTSR_SUCCESS
;

539 
	}
}

541 
GOSTSR_S32
 
	$TsEº‹Check_Api_DeInô
()

543 
°©icTsRegi°îIndex
 = 0;

544 
	`mem£t
(&
°Api_P¨am
, 0x00, (
TSERROR_API_PARAM_S
Ë* 
TSERROR_CHANNELID_MAX
);

545 
°Api_P¨am
[0].
°SórchUpd©eInfo
.
u8P©Vîsi⁄
 = 0xff;

546 
°Api_P¨am
[1].
°SórchUpd©eInfo
.
u8P©Vîsi⁄
 = 0xff;

548 
	`GosT§_A«lysisD©a_TsEnvDeInô
();

549 
	`GosT§_A«lysisD©a_UnRegi°îCÆlBack
(
°©icTsRegi°îIndex
);

551 
	`TsEº‹Check_Log_DeInô
();

552 
	`TsEº‹Check_O√Levñ_DeInô
();

553 
	`TsEº‹Check_TwoLevñ_DeInô
();

554 
	`TsEº‹Check_ThªeLevñ_DeInô
();

556 i‡(
±hªadM©chH™dÀ
[0])

558 i‡(!
	`±hªad_joö
(
±hªadM©chH™dÀ
[0], 
GOSTSR_NULL
))

560 
	`±hªad_ˇn˚l
(
±hªadM©chH™dÀ
[0]);

563 i‡(
±hªadM©chH™dÀ
[1])

565 i‡(!
	`±hªad_joö
(
±hªadM©chH™dÀ
[1], 
GOSTSR_NULL
))

567 
	`±hªad_ˇn˚l
(
±hªadM©chH™dÀ
[1]);

570 
	`OS_Packë_DñëeSem≠h‹e
(
£m_Api_Ac˚ss
[0]);

571 
£m_Api_Ac˚ss
[0] = 
GOSTSR_NULL
;

572 
	`OS_Packë_DñëeSem≠h‹e
(
£m_Api_Ac˚ss
[1]);

573 
£m_Api_Ac˚ss
[1] = 
GOSTSR_NULL
;

575  
GOSTSR_SUCCESS
;

576 
	}
}

578 
GOSTSR_S32
 
	$TsEº‹Check_Api_ReInô
(
GOSTSR_U8
 
ch™ID
)

580 if(
ch™ID
 >
TSERROR_CHANNELID_MAX
)

582  
GOSTSR_FAILURE
;

585 
	`OS_Packë_WaôSem≠h‹e
(
£m_Api_Ac˚ss
[
ch™ID
]);

586 
	`mem£t
(&
°Api_P¨am
[
ch™ID
], 0x00, (
TSERROR_API_PARAM_S
));

587 
°Api_P¨am
[
ch™ID
].
°SórchUpd©eInfo
.
u8P©Vîsi⁄
 = 0xff;

588 
	`OS_Packë_Sig«lSem≠h‹e
(
£m_Api_Ac˚ss
[
ch™ID
]);

590 
	`GosT§_A«lysisD©a_TsEnvReInô
(
ch™ID
);

592 
	`TsEº‹Check_Log_ReInô
(
ch™ID
);

593 
	`TsEº‹Check_O√Levñ_ReInô
(
ch™ID
);

594 
	`TsEº‹Check_TwoLevñ_ReInô
(
ch™ID
);

595 
	`TsEº‹Check_ThªeLevñ_ReInô
(
ch™ID
);

597  
GOSTSR_SUCCESS
;

598 
	}
}

	@tscheck/src/TsErrorCheck_Log.c

1 
	~"TsEº‹Check_Log.h
"

3 
	~"TsEº‹Check_O√Levñ.h
"

4 
	~"TsEº‹Check_TwoLevñ.h
"

5 
	~"TsEº‹Check_ThªeLevñ.h
"

8 
	#CHANID0_LOGERROR_PATH
 "TR101290_Eº‹Log_Ch™ID0.txt"

	)

9 
	#CHANID1_LOGERROR_PATH
 "TR101290_Eº‹Log_Ch™ID1.txt"

	)

12 
GOSTSR_U32
 
	gu32Eº‹Levñ
[
TSERROR_CHANNELID_MAX
];

13 
GOSTSR_U32
 
	gu32Eº‹Ty≥
[
TSERROR_CHANNELID_MAX
];

16 
GOSTSR_U32
 
	gu32LogNbProg
[
TSERROR_CHANNELID_MAX
] = {0};

19 
GOSTSR_S32
 
	$TsEº‹Check_Log_ReInô
(
GOSTSR_U8
 
ch™ID
)

22 
GOSTSR_U32
 
⁄eEº‹_Levñ
 = (1 << 5 |1<< 4 | 1 << 3 | 1 << 2 | 1 << 1 | 1 << 0);

25 
GOSTSR_U32
 
twoEº‹_Levñ
 = (1 << 5 |1<< 4 | 0 << 3 | 1 << 2 | 1 << 1 | 1 << 0) << 6;

29 
GOSTSR_U32
 
thªeEº‹_Levñ
 = (1 << 11 |1<< 10 | 1 << 9 | 1 << 8 | 1 << 7 | 1 << 6 |1 << 5 |1<< 4 | 1 << 3 | 1 << 2 | 1 << 1 | 1 << 0) << 12;

31 
u32Eº‹Ty≥
[
ch™ID
] = (0x01 | 0x02 | 0x04);

32 
u32Eº‹Levñ
[
ch™ID
] = (
⁄eEº‹_Levñ
 | 
twoEº‹_Levñ
 | 
thªeEº‹_Levñ
);

34 if(
ch™ID
 == 0)

35 
	`ªmove
(
CHANID0_LOGERROR_PATH
);

37 
	`ªmove
(
CHANID1_LOGERROR_PATH
);

39 
u32LogNbProg
[
ch™ID
] = 0;

41  
GOSTSR_SUCCESS
;

42 
	}
}

44 
GOSTSR_S32
 
	$TsEº‹Check_Log_Inô
()

47 
GOSTSR_U32
 
⁄eEº‹_Levñ
 = (1 << 5 |1<< 4 | 1 << 3 | 1 << 2 | 1 << 1 | 1 << 0);

50 
GOSTSR_U32
 
twoEº‹_Levñ
 = (1 << 5 |1<< 4 | 1 << 3 | 1 << 2 | 1 << 1 | 1 << 0) << 6;

54 
GOSTSR_U32
 
thªeEº‹_Levñ
 = (1 << 11 |1<< 10 | 1 << 9 | 1 << 8 | 1 << 7 | 1 << 6 |1 << 5 |1<< 4 | 1 << 3 | 1 << 2 | 1 << 1 | 1 << 0) << 12;

56 
u32Eº‹Ty≥
[0] = (0x01 | 0x02 | 0x04);

57 
u32Eº‹Levñ
[0] = (
⁄eEº‹_Levñ
 | 
twoEº‹_Levñ
 | 
thªeEº‹_Levñ
);

58 
u32Eº‹Ty≥
[1] = (0x01 | 0x02 | 0x04);

59 
u32Eº‹Levñ
[1] = (
⁄eEº‹_Levñ
 | 
twoEº‹_Levñ
 | 
thªeEº‹_Levñ
);

60 
	`ªmove
(
CHANID0_LOGERROR_PATH
);

61 
	`ªmove
(
CHANID1_LOGERROR_PATH
);

63 
	`mem£t
(
u32LogNbProg
,0,(
GOSTSR_U32
Ë*
TSERROR_CHANNELID_MAX
);

65  
GOSTSR_SUCCESS
;

66 
	}
}

68 
GOSTSR_S32
 
	$TsEº‹Check_Log_DeInô
()

71 
GOSTSR_U32
 
⁄eEº‹_Levñ
 = (1 << 5 |1<< 4 | 1 << 3 | 1 << 2 | 1 << 1 | 1 << 0);

74 
GOSTSR_U32
 
twoEº‹_Levñ
 = (1 << 5 |1<< 4 | 0 << 3 | 1 << 2 | 1 << 1 | 1 << 0) << 6;

78 
GOSTSR_U32
 
thªeEº‹_Levñ
 = (1 << 11 |1<< 10 | 1 << 9 | 1 << 8 | 1 << 7 | 1 << 6 |1 << 5 |1<< 4 | 1 << 3 | 1 << 2 | 1 << 1 | 1 << 0) << 12;

80 
u32Eº‹Ty≥
[0] = (0x01 | 0x02 | 0x04);

81 
u32Eº‹Levñ
[0] = (
⁄eEº‹_Levñ
 | 
twoEº‹_Levñ
 | 
thªeEº‹_Levñ
);

82 
u32Eº‹Ty≥
[1] = (0x01 | 0x02 | 0x04);

83 
u32Eº‹Levñ
[1] = (
⁄eEº‹_Levñ
 | 
twoEº‹_Levñ
 | 
thªeEº‹_Levñ
);

84 
	`ªmove
(
CHANID0_LOGERROR_PATH
);

85 
	`ªmove
(
CHANID1_LOGERROR_PATH
);

86 
	`mem£t
(
u32LogNbProg
,0,(
GOSTSR_U32
Ë*
TSERROR_CHANNELID_MAX
);

87  
GOSTSR_SUCCESS
;

88 
	}
}

90 
GOSTSR_S32
 
	$TsEº‹Check_Log_SëNbProg
(
GOSTSR_U8
 
ch™ID
,
GOSTSR_U32
 
NbProg
)

92 if((
ch™ID
 >
TSERROR_CHANNELID_MAX
))

94  
GOSTSR_FAILURE
;

96 
u32LogNbProg
[
ch™ID
] = 
NbProg
;

98  
GOSTSR_SUCCESS
;

99 
	}
}

101 
GOSTSR_S32
 
	$TsEº‹Check_Log_SëEº‹Ty≥
(
GOSTSR_U8
 
ch™ID
,
GOSTSR_U32
 
îr‹Ty≥
)

103 if((
ch™ID
 >
TSERROR_CHANNELID_MAX
))

105  
GOSTSR_FAILURE
;

107 
u32Eº‹Ty≥
[
ch™ID
] = 
îr‹Ty≥
;

109  
GOSTSR_SUCCESS
;

110 
	}
}

112 
GOSTSR_S32
 
	$TsEº‹Check_Log_SëEº‹Levñ
(
GOSTSR_U8
 
ch™ID
,
GOSTSR_U32
 
îr‹Levñ
)

114 if((
ch™ID
 >
TSERROR_CHANNELID_MAX
))

116  
GOSTSR_FAILURE
;

118 
u32Eº‹Levñ
[
ch™ID
] = 
îr‹Levñ
;

120  
GOSTSR_SUCCESS
;

121 
	}
}

123 
GOSTSR_S32
 
	$TsEº‹Check_Log_Debug
(
GOSTSR_U8
 
ch™ID
,
GOSTSR_U32
 
îr‹Ty≥
, GOSTSR_U32 
îr‹Levñ
,GOSTSR_U32 
byãPos
,GOSTSR_U8 *
pPriv©e
,c⁄° GOSTSR_U8 *
pF‹m©
)

125 
°rEº‹
[256] = {0};

128 if((
ch™ID
 >
TSERROR_CHANNELID_MAX
Ë|| (!(
îr‹Ty≥
 & 
u32Eº‹Ty≥
[ch™ID])Ë|| (!(
îr‹Levñ
 & 
u32Eº‹Levñ
[chanID])))

130  
GOSTSR_FAILURE
;

133 
îr‹Levñ
 & 
u32Eº‹Levñ
[
ch™ID
])

135 
TR101290_ONE_ERROR_SYNCLOSS
:

137 
	`°r˝y
(
°rEº‹
, "[1] SyncLoss_Error");

140 
TR101290_ONE_ERROR_SYNCBYTE
:

142 
	`°r˝y
(
°rEº‹
, "[1] SyncByte_Error");

145 
TR101290_ONE_ERROR_PAT
:

147 
	`°r˝y
(
°rEº‹
, "[1] Pat_Error");

150 
TR101290_ONE_ERROR_PMT
:

152 
	`°r˝y
(
°rEº‹
, "[1] Pmt_Error");

155 
TR101290_ONE_ERROR_CONTINUTYCOUNT
:

157 
	`°r˝y
(
°rEº‹
, "[1] ContinutyCount_Error");

160 
TR101290_ONE_ERROR_PID
:

162 
	`°r˝y
(
°rEº‹
, "[1] PmtPid_Error");

165 
TR101290_TWO_ERROR_TRANSPORT
:

167 
	`°r˝y
(
°rEº‹
, "[2] Transport_Error");

170 
TR101290_TWO_ERROR_CRC
:

172 
	`°r˝y
(
°rEº‹
, "[2] Crc_Error");

175 
TR101290_TWO_ERROR_PCRDISCONT
:

177 
	`°r˝y
(
°rEº‹
, "[2] PcrDiscont_Error");

180 
TR101290_TWO_ERROR_ACCURACY
:

182 
GOSTSR_U32
 *
u32P¸VÆueDiff_Ns
 = (GOSTSR_U32 *)
pPriv©e
;

183 
°rEº‹Temp
[256] = {0};

184 
	`°r˝y
(
°rEº‹Temp
, "PcrAccuracy_Error");

185 
	`•rötf
(
°rEº‹
,"%s\àtime:%d",
°rEº‹Temp
,*
u32P¸VÆueDiff_Ns
);

188 
TR101290_TWO_ERROR_PTS
:

190 
	`°r˝y
(
°rEº‹
, "[2] Pts_Error");

193 
TR101290_TWO_ERROR_CAT
:

195 
	`°r˝y
(
°rEº‹
, "[2] Cat_Error");

198 
TR101290_THREE_ERROR_NITACTUAL
:

200 
	`°r˝y
(
°rEº‹
, "[3] NitActual_Error");

203 
TR101290_THREE_ERROR_NITOTHER
:

205 
	`°r˝y
(
°rEº‹
, "[3] NitOther_Error");

208 
TR101290_THREE_ERROR_SIREPETITION
:

210 
	`°r˝y
(
°rEº‹
, "[3] SiRepetition_Error");

213 
TR101290_THREE_ERROR_UNREFERENCEPID
:

215 
	`°r˝y
(
°rEº‹
, "[3] UndeferencePid_Error");

218 
TR101290_THREE_ERROR_SDTACTUAL
:

220 
	`°r˝y
(
°rEº‹
, "[3] NitActual_Error");

223 
TR101290_THREE_ERROR_SDTOTHER
:

225 
	`°r˝y
(
°rEº‹
, "[3] SdtOther_Error");

228 
TR101290_THREE_ERROR_EITACTUAL
:

230 
	`°r˝y
(
°rEº‹
, "[3] EitActual_Error");

233 
TR101290_THREE_ERROR_EITOTHER
:

235 
	`°r˝y
(
°rEº‹
, "[3] EitOther_Error");

238 
TR101290_THREE_ERROR_EITPF
:

240 
	`°r˝y
(
°rEº‹
, "[3] EitPF_Error");

243 
TR101290_THREE_ERROR_RST
:

245 
	`°r˝y
(
°rEº‹
, "[3] Rst_Error");

248 
TR101290_THREE_ERROR_TDT
:

250 
	`°r˝y
(
°rEº‹
, "[3] Tdt_Error");

254 
	`°r˝y
(
°rEº‹
, "NULL");

257 if(
	`°rcmp
(
°rEº‹
,"NULL") != 0)

259 #i‡
TSERROR_LOG_DEBUG


260 
	`PRINT_DEBUG
(
°rEº‹
,
byãPos
);

262 #i‡
TSERROR_LOG_EXPORT


263 if(
ch™ID
 == 0)

265 
	`•rötf
(
°rEº‹Log
, "[%04d] %-30s\tByãPo†%-20d\tPkà%d \n",
u32Eº‹Num
[0],
°rEº‹
,
byãPos
,bytePos/188);

266 
	`TsEº‹Check_Log_Exp‹tLog
(
CHANID0_LOGERROR_PATH
, 
°rEº‹Log
, 
	`°æí
(strErrorLog));

267 
u32Eº‹Num
[0]++;

269 if(
ch™ID
 == 1)

271 
	`•rötf
(
°rEº‹Log
, "[%04d] %-30s\tByãPo†%-20d\tPkà%d \n",
u32Eº‹Num
[1],
°rEº‹
,
byãPos
,bytePos/188);

272 
	`TsEº‹Check_Log_Exp‹tLog
(
CHANID1_LOGERROR_PATH
, 
°rEº‹Log
, 
	`°æí
(strErrorLog));

273 
u32Eº‹Num
[1]++;

278  
GOSTSR_SUCCESS
;

279 
	}
}

281 
GOSTSR_S32
 
	$TS_ERROR_LOG
(
GOSTSR_U8
 
ch™ID
,
GOSTSR_U32
 
îr‹Ty≥
, GOSTSR_U32 
îr‹Levñ
,GOSTSR_U32 
byãPos
,*
pPriv©e
,c⁄° GOSTSR_U8 *
pF‹m©
)

283  
	`TsEº‹Check_Log_Debug
(
ch™ID
,
îr‹Ty≥
,
îr‹Levñ
,
byãPos
,
pPriv©e
,
pF‹m©
);

284 
	}
}

286 
GOSTSR_S32
 
	$TS_DEBUG_LOG
(*
°r
)

288  
	`ERROR_DEBUG
(
°r
);

289 
	}
}

291 
GOSTSR_S32
 
	$TsEº‹Check_Log_Exp‹tLog
(*
pP©hName
,
GOSTSR_U8
 *
pD©a
, 
GOSTSR_U32
 
u32D©aLí
)

293 
FILE
 *
Â_w
 = 
GOSTSR_NULL
;

294 
GOSTSR_S32
 
ªtNum
 = 0;

296 
Â_w
 = 
	`f›í
(
pP©hName
, "ab+") ;

297 if(
Â_w
=
GOSTSR_NULL
)

299 
Â_w
 = 
	`f›í
(
pP©hName
, "wb+");

300 if(
Â_w
 =
GOSTSR_NULL
)

302 
	`¥ötf
("\nfopen failed\n");

303  
GOSTSR_FAILURE
;

307 
ªtNum
 = 
	`fwrôe
(
pD©a
, 
u32D©aLí
, 1, 
Â_w
);

308 i‡(1 !
ªtNum
)

310 
	`¥ötf
("\nfwrite failed\n");

311  
GOSTSR_FAILURE
;

313 
	`f˛o£
(
Â_w
);

315 
u8Cmd
[256] = {0};

316 
	`•rötf
(
u8Cmd
, "chmod 777 %s",
pP©hName
);

317 
	`sy°em
(
u8Cmd
);

319  
GOSTSR_SUCCESS
;

320 
	}
}

323 
GOSTSR_S32
 
	$TsEº‹Check_Log_O√Levñ_PrötInfo
(
GOSTSR_U8
 
ch™ID
)

325 
TSERROR_ONELEVEL_RECORD
 
°AµO√Levñ
;

326 
	`mem£t
(&
°AµO√Levñ
,0,(
TSERROR_ONELEVEL_RECORD
));

330 
	`¥ötf
("AvTøn•‹tR©ê%f\n",(
GOSTSR_F32
)
	`TsEº‹Check_TwoLevñ_gëAvTøn•‹tR©e
(
ch™ID
) / 1000000);

331 
	`¥ötf
("_________O√ Levñ Eº‹_________⁄eSize:%d\n",(
TSERROR_ONELEVEL_RECORD
));

332 if(
	`TsEº‹Check_O√Levñ_GëEº‹Info
(
ch™ID
,&
°AµO√Levñ
Ë=
GOSTSR_SUCCESS
)

335 
	`¥ötf
("SyncLossEº‹ = %d\n",
°AµO√Levñ
.
tsSyncLossEº‹
);

336 
	`¥ötf
("SyncByãEº‹ = %d\n",
°AµO√Levñ
.
tsSyncByãEº‹
);

337 
	`¥ötf
("C⁄töuôyCou¡îEº‹ = %d\n",
°AµO√Levñ
.
tsC⁄töuôyCou¡îEº‹
);

339 
	`¥ötf
("P©Eº‹Eº‹ = %d\n",
°AµO√Levñ
.
tsP©Eº‹
.
tŸÆ_îr‹
);

344 
	`¥ötf
("PmtEº‹Eº‹ = %d\n",
°AµO√Levñ
.
tsPmtEº‹
.
tŸÆ_îr‹
);

349 
	`¥ötf
("PIDMissEº‹ = %d\n",
°AµO√Levñ
.
tsPIDMissEº‹
);

354  
GOSTSR_SUCCESS
;

355 
	}
}

357 
GOSTSR_S32
 
	$TsEº‹Check_Log_TwoLevñ_PrötInfo
(
GOSTSR_U8
 
ch™ID
)

359 
TSERROR_TWOLEVEL_S
 
°AµTwoLevñ
;

360 
	`mem£t
(&
°AµTwoLevñ
,0,(
TSERROR_TWOLEVEL_S
));

361 
	`¥ötf
("\n_________TwÿLevñ Eº‹_________twoSize:%d\n",(
TSERROR_TWOLEVEL_S
));

362 if(
	`TsEº‹Check_TwoLevñ_gëTwoLevñEº‹
(
ch™ID
,&
°AµTwoLevñ
Ë=
GOSTSR_SUCCESS
)

365 
	`¥ötf
("Tøn•‹tEº‹ = %d\n",
°AµTwoLevñ
.
u32TSå™smissi⁄Eº‹Cou¡
);

366 
	`¥ötf
("CrcError = %d\n",

367 
°AµTwoLevñ
.
°CrcEº‹Info
.
tŸÆCrcEº‹Cou¡
);

369 
	`¥ötf
("( PAT=%d__PMT=%d__CAT=%d__NIT=%d__BAT=%d__SDT=%d__EIT=%d )\n",

370 
°AµTwoLevñ
.
°CrcEº‹Info
.
∑tCrcEº‹Cou¡
,°AµTwoLevñ.°CrcEº‹Info.
pmCr˘Eº‹Cou¡
,

371 
°AµTwoLevñ
.
°CrcEº‹Info
.
ˇtCrcEº‹Cou¡
,°AµTwoLevñ.°CrcEº‹Info.
nôCrcEº‹Cou¡
,

372 
°AµTwoLevñ
.
°CrcEº‹Info
.
b©CrcEº‹Cou¡
,°AµTwoLevñ.°CrcEº‹Info.
sdtCrcEº‹Cou¡
,

373 
°AµTwoLevñ
.
°CrcEº‹Info
.
eôCrcEº‹Cou¡
);

375 
	`¥ötf
("P¸DisEº‹ = %d\n",
°AµTwoLevñ
.
u32P¸DisEº‹Cou¡
);

376 
	`¥ötf
("P¸JôEº‹ = %d\n",
°AµTwoLevñ
.
u32P¸JôEº‹Cou¡
);

377 
	`¥ötf
("PtsEº‹ = %d\n",
°AµTwoLevñ
.
u32PtsEº‹Cou¡
);

378 
	`¥ötf
("CatError = %d\n",

379 
°AµTwoLevñ
.
°C©Eº‹Info
.
tŸÆC©Eº‹Cou¡
);

386  
GOSTSR_SUCCESS
;

387 
	}
}

389 
GOSTSR_S32
 
	$TsEº‹Check_Log_ThªeLevñ_PrötInfo
(
GOSTSR_U8
 
ch™ID
)

391 
TsThªeLevñEº‹Check_Info
 
°AµThªeLevñ
;

392 
	`mem£t
(&
°AµThªeLevñ
,0,(
TsThªeLevñEº‹Check_Info
));

393 
	`¥ötf
("\n________ThªêLevñ Eº‹________thªeSize:%d\n",(
TsThªeLevñEº‹Check_Info
));

394 if(
	`TsEº‹Check_ThªeLevñ_GëEº‹Info
(
ch™ID
,&
°AµThªeLevñ
Ë=
GOSTSR_SUCCESS
)

397 
	`¥ötf
("nôEº‹ = %d \n",
°AµThªeLevñ
.
nôEº‹Info
.
tŸÆEº‹
);

400 
	`¥ötf
("°AµThªeLevñ.nôEº‹Info.èbÀIDEº‹ = %d \n",
°AµThªeLevñ
.
nôEº‹Info
.
èbÀIDEº‹
);

401 
	`¥ötf
("°AµThªeLevñ.nôEº‹Info.a˘uÆOvîTimeEº‹ = %d \n",
°AµThªeLevñ
.
nôEº‹Info
.
a˘uÆOvîTimeEº‹
);

402 
	`¥ötf
("°AµThªeLevñ.nôEº‹Info.a˘uÆLimôTimeEº‹ = %d \n",
°AµThªeLevñ
.
nôEº‹Info
.
a˘uÆLimôTimeEº‹
);

403 
	`¥ötf
("°AµThªeLevñ.nôEº‹Info.ŸhîOvîTimeEº‹ = %d \n",
°AµThªeLevñ
.
nôEº‹Info
.
ŸhîOvîTimeEº‹
);

404 
	`¥ötf
("°AµThªeLevñ.nôEº‹Info.ŸhîLimôTimeEº‹ = %d \n\n",
°AµThªeLevñ
.
nôEº‹Info
.
ŸhîLimôTimeEº‹
);

406 
	`¥ötf
("siRïëôi⁄R©eEº‹ = %d \n",
°AµThªeLevñ
.
siRïëôi⁄R©eEº‹Info
.
tŸÆEº‹
);

408 
	`¥ötf
("°AµThªeLevñ.siRïëôi⁄R©eEº‹Info.siSe˘i⁄LimôTimeEº‹ = %d \n",
°AµThªeLevñ
.
siRïëôi⁄R©eEº‹Info
.
siSe˘i⁄LimôTimeEº‹
);

409 
	`¥ötf
("°AµThªeLevñ.siRïëôi⁄R©eEº‹Info.nôOvîTimeEº‹ = %d \n",
°AµThªeLevñ
.
siRïëôi⁄R©eEº‹Info
.
nôOvîTimeEº‹
);

410 
	`¥ötf
("°AµThªeLevñ.siRïëôi⁄R©eEº‹Info.b©OvîTimeEº‹ = %d \n",
°AµThªeLevñ
.
siRïëôi⁄R©eEº‹Info
.
b©OvîTimeEº‹
);

411 
	`¥ötf
("°AµThªeLevñ.siRïëôi⁄R©eEº‹Info.sdtA˘uÆOvîTimeEº‹ = %d \n",
°AµThªeLevñ
.
siRïëôi⁄R©eEº‹Info
.
sdtA˘uÆOvîTimeEº‹
);

412 
	`¥ötf
("°AµThªeLevñ.siRïëôi⁄R©eEº‹Info.sdtOthîOvîTimeEº‹ = %d \n",
°AµThªeLevñ
.
siRïëôi⁄R©eEº‹Info
.
sdtOthîOvîTimeEº‹
);

413 
	`¥ötf
("°AµThªeLevñ.siRïëôi⁄R©eEº‹Info.eôA˘uÆOvîTimeEº‹ = %d \n",
°AµThªeLevñ
.
siRïëôi⁄R©eEº‹Info
.
eôA˘uÆOvîTimeEº‹
);

414 
	`¥ötf
("°AµThªeLevñ.siRïëôi⁄R©eEº‹Info.eôOthîOvîTimeEº‹ = %d \n",
°AµThªeLevñ
.
siRïëôi⁄R©eEº‹Info
.
eôOthîOvîTimeEº‹
);

415 
	`¥ötf
("°AµThªeLevñ.siRïëôi⁄R©eEº‹Info.eôA˘uÆScheduÀOvîTimeEº‹ = %d \n",
°AµThªeLevñ
.
siRïëôi⁄R©eEº‹Info
.
eôA˘uÆScheduÀOvîTimeEº‹
);

416 
	`¥ötf
("°AµThªeLevñ.siRïëôi⁄R©eEº‹Info.eôOthîScheduÀOvîTimeEº‹ = %d \n",
°AµThªeLevñ
.
siRïëôi⁄R©eEº‹Info
.
eôOthîScheduÀOvîTimeEº‹
);

417 
	`¥ötf
("°AµThªeLevñ.siRïëôi⁄R©eEº‹Info.tdtOvîTimeEº‹ = %d \n",
°AµThªeLevñ
.
siRïëôi⁄R©eEº‹Info
.
tdtOvîTimeEº‹
);

418 
	`¥ötf
("°AµThªeLevñ.siRïëôi⁄R©eEº‹Info.tŸOvîTimeEº‹ = %d \n",
°AµThªeLevñ
.
siRïëôi⁄R©eEº‹Info
.
tŸOvîTimeEº‹
);

420 
	`¥ötf
("buf„rEº‹ = %d \n",
°AµThªeLevñ
.
buf„rEº‹Info
.
tŸÆEº‹
);

422 
	`¥ötf
("°AµThªeLevñ.buf„rEº‹Info.TBBuf„rEº‹ = %d \n",
°AµThªeLevñ
.
buf„rEº‹Info
.
TBBuf„rEº‹
);

423 
	`¥ötf
("°AµThªeLevñ.buf„rEº‹Info.TBsysBuf„rEº‹ = %d \n",
°AµThªeLevñ
.
buf„rEº‹Info
.
TBsysBuf„rEº‹
);

424 
	`¥ötf
("°AµThªeLevñ.buf„rEº‹Info.MBBuf„rEº‹ = %d \n",
°AµThªeLevñ
.
buf„rEº‹Info
.
MBBuf„rEº‹
);

425 
	`¥ötf
("°AµThªeLevñ.buf„rEº‹Info.EBBuf„rEº‹ = %d \n",
°AµThªeLevñ
.
buf„rEº‹Info
.
EBBuf„rEº‹
);

426 
	`¥ötf
("°AµThªeLevñ.buf„rEº‹Info.BBuf„rEº‹ = %d \n",
°AµThªeLevñ
.
buf„rEº‹Info
.
BBuf„rEº‹
);

427 
	`¥ötf
("°AµThªeLevñ.buf„rEº‹Info.BsysBuf„rEº‹ = %d \n\n",
°AµThªeLevñ
.
buf„rEº‹Info
.
BsysBuf„rEº‹
);

429 
	`¥ötf
("uƒe„ªn˚dPidEº‹ = %d \n",
°AµThªeLevñ
.
uƒe„ªn˚dPidEº‹Info
.
tŸÆEº‹
);

430 
	`¥ötf
("sdtEº‹ = %d\n",
°AµThªeLevñ
.
sdtEº‹Info
.
tŸÆEº‹
);

433 
	`¥ötf
("°AµThªeLevñ.sdtEº‹Info.èbÀIDEº‹ = %d\n",
°AµThªeLevñ
.
sdtEº‹Info
.
èbÀIDEº‹
);

434 
	`¥ötf
("°AµThªeLevñ.sdtEº‹Info.a˘uÆOvîTimeEº‹ = %d\n",
°AµThªeLevñ
.
sdtEº‹Info
.
a˘uÆOvîTimeEº‹
);

435 
	`¥ötf
("°AµThªeLevñ.sdtEº‹Info.a˘uÆLimôTimeEº‹ = %d\n",
°AµThªeLevñ
.
sdtEº‹Info
.
a˘uÆLimôTimeEº‹
);

436 
	`¥ötf
("°AµThªeLevñ.sdtEº‹Info.ŸhîOvîTimeEº‹ = %d\n\n",
°AµThªeLevñ
.
sdtEº‹Info
.
ŸhîOvîTimeEº‹
);

439 
	`¥ötf
("eôEº‹ = %d\n",
°AµThªeLevñ
.
eôEº‹Info
.
tŸÆEº‹
);

441 
	`¥ötf
("°AµThªeLevñ.eôEº‹Info.èbÀIDEº‹ = %d\n",
°AµThªeLevñ
.
eôEº‹Info
.
èbÀIDEº‹
);

442 
	`¥ötf
("°AµThªeLevñ.eôEº‹Info.a˘uÆOvîTimeEº‹ = %d\n",
°AµThªeLevñ
.
eôEº‹Info
.
a˘uÆOvîTimeEº‹
);

443 
	`¥ötf
("°AµThªeLevñ.eôEº‹Info.a˘uÆLimtTimeEº‹ = %d\n",
°AµThªeLevñ
.
eôEº‹Info
.
a˘uÆLimtTimeEº‹
);

444 
	`¥ötf
("°AµThªeLevñ.eôEº‹Info.a˘uÆSec0OvîTimeEº‹ = %d\n",
°AµThªeLevñ
.
eôEº‹Info
.
a˘uÆSec0OvîTimeEº‹
);

445 
	`¥ötf
("°AµThªeLevñ.eôEº‹Info.a˘uÆSec1OvîTimeEº‹ = %d\n",
°AµThªeLevñ
.
eôEº‹Info
.
a˘uÆSec1OvîTimeEº‹
);

446 
	`¥ötf
("°AµThªeLevñ.eôEº‹Info.a˘uÆPFPaúEº‹ = %d\n",
°AµThªeLevñ
.
eôEº‹Info
.
a˘uÆPFPaúEº‹
);

447 
	`¥ötf
("°AµThªeLevñ.eôEº‹Info.ŸhîSec0OvîTimeEº‹ = %d\n",
°AµThªeLevñ
.
eôEº‹Info
.
ŸhîSec0OvîTimeEº‹
);

448 
	`¥ötf
("°AµThªeLevñ.eôEº‹Info.ŸhîSec1OvîTimeEº‹ = %d\n",
°AµThªeLevñ
.
eôEº‹Info
.
ŸhîSec1OvîTimeEº‹
);

449 
	`¥ötf
("°AµThªeLevñ.eôEº‹Info.ŸhîPFPaúEº‹ = %d\n\n",
°AµThªeLevñ
.
eôEº‹Info
.
ŸhîPFPaúEº‹
);

452 
	`¥ötf
("r°Eº‹ = %d\n",
°AµThªeLevñ
.
r°Eº‹Info
.
tŸÆEº‹
);

455 
	`¥ötf
("°AµThªeLevñ.r°Eº‹Info.èbÀIDEº‹ = %d\n",
°AµThªeLevñ
.
r°Eº‹Info
.
èbÀIDEº‹
);

456 
	`¥ötf
("°AµThªeLevñ.r°Eº‹Info.limtTimeEº‹ = %d\n\n",
°AµThªeLevñ
.
r°Eº‹Info
.
limtTimeEº‹
);

459 
	`¥ötf
("tdtEº‹ = %d\n",
°AµThªeLevñ
.
tdtEº‹Info
.
tŸÆEº‹
);

461 
	`¥ötf
("°AµThªeLevñ.tdtEº‹Info.ovîTimeEº‹ = %d\n",
°AµThªeLevñ
.
tdtEº‹Info
.
ovîTimeEº‹
);

462 
	`¥ötf
("°AµThªeLevñ.tdtEº‹Info.èbÀIDEº‹ = %d\n",
°AµThªeLevñ
.
tdtEº‹Info
.
èbÀIDEº‹
);

463 
	`¥ötf
("°AµThªeLevñ.tdtEº‹Info.limôTimeEº‹ = %d\n\n",
°AµThªeLevñ
.
tdtEº‹Info
.
limôTimeEº‹
);

465 
	`¥ötf
("em±yBuf„rEº‹ = %d\n",
°AµThªeLevñ
.
em±yBuf„rEº‹Info
.
tŸÆEº‹
);

467 
	`¥ötf
("°AµThªeLevñ.em±yBuf„rEº‹Info.TBBuf„rEm±yEº‹ = %d\n",
°AµThªeLevñ
.
em±yBuf„rEº‹Info
.
TBBuf„rEm±yEº‹
);

468 
	`¥ötf
("°AµThªeLevñ.em±yBuf„rEº‹Info.TBsysBuf„rEm±yEº‹ = %d\n",
°AµThªeLevñ
.
em±yBuf„rEº‹Info
.
TBsysBuf„rEm±yEº‹
);

469 
	`¥ötf
("°AµThªeLevñ.em±yBuf„rEº‹Info.MBBuf„rEm±yEº‹ = %d\n\n",
°AµThªeLevñ
.
em±yBuf„rEº‹Info
.
MBBuf„rEm±yEº‹
);

471 
	`¥ötf
("D©aDñayEº‹ = %d\n",
°AµThªeLevñ
.
d©aDñayEº‹Info
.
tŸÆEº‹
);

473 
	`¥ötf
("°AµThªeLevñ.d©aDñayEº‹Info.°ûlPicOvîTimeEº‹ = %d\n",
°AµThªeLevñ
.
d©aDñayEº‹Info
.
°ûlPicOvîTimeEº‹
);

474 
	`¥ötf
("°AµThªeLevñ.d©aDñayEº‹Info.gíîÆD©aOvîTimeEº‹ = %d\n\n",
°AµThªeLevñ
.
d©aDñayEº‹Info
.
gíîÆD©aOvîTimeEº‹
);

480 
	`¥ötf
("\n\n");

483  
GOSTSR_SUCCESS
;

484 
	}
}

486 
GOSTSR_S32
 
	$TsEº‹Check_Log_PrötInfo
(
GOSTSR_U8
 
ch™ID
)

490 if((
ch™ID
 >
TSERROR_CHANNELID_MAX
))

492  
GOSTSR_FAILURE
;

494 if((
u32LogNbProg
[
ch™ID
] > 0Ë&& (
	`TsEº‹Check_TwoLevñ_gëAvTøn•‹tR©e
(chanID) > 0))

496 
	`¥ötf
("ch™ID = %d------R©ê%d\n",
ch™ID
,
	`TsEº‹Check_TwoLevñ_gëAvTøn•‹tR©e
(chanID));

497 
	`TsEº‹Check_Log_O√Levñ_PrötInfo
(
ch™ID
);

498 
	`TsEº‹Check_Log_TwoLevñ_PrötInfo
(
ch™ID
);

499 
	`TsEº‹Check_Log_ThªeLevñ_PrötInfo
(
ch™ID
);

503 
	`¥ötf
("Log: ch™ID = %d---------->NÿProg Info(R©ê%d)\n",
ch™ID
,
	`TsEº‹Check_TwoLevñ_gëAvTøn•‹tR©e
(chanID));

505  
GOSTSR_SUCCESS
;

506 
	}
}

	@tscheck/src/TsErrorCheck_OneLevel.c

1 #ifde‡
__˝lu•lus


2 #i‡
__˝lu•lus


7 
	~"TsEº‹Check_O√Levñ.h
"

8 
	~"TsEº‹Check_TwoLevñ.h
"

9 
	~"TsEº‹Check_Log.h
"

11 
TSERROR_ONELEVEL_PARAM_S
 
°O√LevñP¨am
[
TSERROR_CHANNELID_MAX
];

13 
GOSTSR_U32
 
Gëts_S≥ed_Ms
(
GOSTSR_U8
 
ch™ID
)

15 if(
ch™ID
 >
TSERROR_CHANNELID_MAX
)

17  
GOSTSR_FAILURE
;

19  
TsEº‹Check_TwoLevñ_gëAvTøn•‹tR©e
(
ch™ID
);

22 
GOSTSR_U32
 
Gëts_TimeMs_byByãDiff
(
GOSTSR_U8
 
ch™ID
,GOSTSR_U32 
u32ByãDiff
)

24 
GOSTSR_U32
 
timeMs
 = 0;

25 
GOSTSR_F32
 
f32timeMs
 = 0;

26 
GOSTSR_U32
 
u32AvTøn•‹tR©e
 = 0;

28 if(
ch™ID
 >
TSERROR_CHANNELID_MAX
)

30  
GOSTSR_FAILURE
;

32 
u32AvTøn•‹tR©e
 = 
TsEº‹Check_TwoLevñ_gëAvTøn•‹tR©e
(
ch™ID
);

34 if(
u32AvTøn•‹tR©e
 > 0)

36 
f32timeMs
 = (1.0*
u32ByãDiff
 * 8 / 
u32AvTøn•‹tR©e
) *1000;

39 
timeMs
 = 
f32timeMs
;

41  
timeMs
;

44 
GOSTSR_S32
 
TsEº‹Check_O√Levñ_£tPmtPid
(
GOSTSR_U8
 
ch™ID
,
SEARCH_INFO_S
 *
°SórchInfo
)

46 
GOSTSR_S32
 
i
 = 0;

48 if((
°SórchInfo
 =
GOSTSR_NULL
Ë|| (
ch™ID
 >
TSERROR_CHANNELID_MAX
))

50  
GOSTSR_FAILURE
;

53 
PMTPID_TIMEOUT_INFO
 *
pPmtPidInfo
 = &
°O√LevñP¨am
[
ch™ID
].
pmtPid_timeout_öfo
;

54 
pPmtPidInfo
->
NbPmtInfo
 = (
°SórchInfo
->
u16NbProg
 > 
ONE_ERROR_PMT_MAX
? ONE_ERROR_PMT_MAX : stSearchInfo->u16NbProg);

55 
i
 = 0 ; i < 
°SórchInfo
->
u16NbProg
 ; i++)

57 
pPmtPidInfo
->
pmtInfo
[
i
].
pid
 = 
°SórchInfo
->
°ProgInfo
[i].
PmtPid
;

60  
GOSTSR_SUCCESS
;

63 
GOSTSR_S32
 
TsEº‹Check_O√Levñ_£tPesPid
(
GOSTSR_U8
 
ch™ID
,
SEARCH_INFO_S
 *
°SórchInfo
)

65 
GOSTSR_S32
 
i
 = 0, 
j
 =0, 
k
 = 0;

67 if((
°SórchInfo
 =
GOSTSR_NULL
Ë|| (
ch™ID
 >
TSERROR_CHANNELID_MAX
))

69  
GOSTSR_FAILURE
;

72 
PESPID_TIMEOUT_INFO
 *
pPesPidInfo
 = &
°O√LevñP¨am
[
ch™ID
].
≥sPid_timeout_öfo
;

73 
°SórchInfo
->
u16NbProg
 = (°SórchInfo->u16NbProg > 
SEARCH_PROG_NUM_MAX
 ? SEARCH_PROG_NUM_MAX : stSearchInfo->u16NbProg);

74 
i
 = 0; i < 
°SórchInfo
->
u16NbProg
;i++)

76 
j
 =0; j < 
°SórchInfo
->
°ProgInfo
[
i
].
u8NbPes
; j++)

78 if(
k
 < 
ONE_ERROR_PES_MAX
)

80 
pPesPidInfo
->
≥sInfo
[
k
++].
pid
 = 
°SórchInfo
->
°ProgInfo
[
i
].
PesPid
[
j
];

84 
pPesPidInfo
->
NbPesInfo
 = 
k
;

86  
GOSTSR_SUCCESS
;

89 
GOSTSR_BOOL
 
TsEº‹Check_O√Levñ_checkisPesPid
(
GOSTSR_U8
 
ch™ID
,
GOSTSR_U16
 
Pid
,
GOSTSR_U32
 *
ödex
)

91 
GOSTSR_S32
 
i
 = 0;

93 if((
GOSTSR_NULL
 =
ödex
Ë|| (
ch™ID
 >
TSERROR_CHANNELID_MAX
))

95  
GOSTSR_FALSE
;

98 
PESPID_TIMEOUT_INFO
 *
pPesPidInfo
 = &
°O√LevñP¨am
[
ch™ID
].
≥sPid_timeout_öfo
;

99 
i
 = 0; i < 
pPesPidInfo
->
NbPesInfo
; i++)

101 if(
pPesPidInfo
->
≥sInfo
[
i
].
pid
 =
Pid
)

103 *
ödex
 = 
i
;

104  
GOSTSR_TRUE
;

107  
GOSTSR_FALSE
;

109 
GOSTSR_BOOL
 
TsEº‹Check_O√Levñ_checkisPmtPid
(
GOSTSR_U8
 
ch™ID
,
GOSTSR_U16
 
Pid
,
GOSTSR_U32
 *
ödex
)

111 
GOSTSR_S32
 
i
 = 0;

112 if((
GOSTSR_NULL
 =
ödex
Ë|| (
ch™ID
 >
TSERROR_CHANNELID_MAX
))

114  
GOSTSR_NULL
;

117 
PMTPID_TIMEOUT_INFO
 *
pPmtPidInfo
 = &
°O√LevñP¨am
[
ch™ID
].
pmtPid_timeout_öfo
;

118 
i
 = 0; i < 
pPmtPidInfo
->
NbPmtInfo
; i++)

120 if(
pPmtPidInfo
->
pmtInfo
[
i
].
pid
 =
Pid
)

122 *
ödex
 = 
i
;

123  
GOSTSR_TRUE
;

126  
GOSTSR_FALSE
;

133 
GOSTSR_S32
 
TsEº‹Check_O√Levñ_SyncLossEº‹
(
GOSTSR_U8
 
ch™ID
,
GOSTSR_BOOL
 
bisM©ched
,
GOSTSR_U32
 
tmpSyncOff£t
)

135 if((!
bisM©ched
Ë|| (
ch™ID
 >
TSERROR_CHANNELID_MAX
))

137  
GOSTSR_FAILURE
;

140 
°O√LevñP¨am
[
ch™ID
].
⁄eLevñEº‹_ªc‹d
.
tsSyncLossEº‹
++;

141 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_ONE
,
TR101290_ONE_ERROR_SYNCLOSS
,
tmpSyncOff£t
,
GOSTSR_NULL
,GOSTSR_NULL);

142  
GOSTSR_SUCCESS
;

146 
GOSTSR_S32
 
TsEº‹Check_O√Levñ_SyncByãEº‹
(
GOSTSR_U8
 
ch™ID
,
GOSTSR_BOOL
 
bisM©ched
,
GOSTSR_U32
 
tmpSyncOff£t
)

148 if((!
bisM©ched
Ë|| (
ch™ID
 >
TSERROR_CHANNELID_MAX
))

150  
GOSTSR_FAILURE
;

152 
°O√LevñP¨am
[
ch™ID
].
⁄eLevñEº‹_ªc‹d
.
tsSyncByãEº‹
++;

153 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_ONE
,
TR101290_ONE_ERROR_SYNCBYTE
,
tmpSyncOff£t
,
GOSTSR_NULL
,GOSTSR_NULL);

154  
GOSTSR_SUCCESS
;

157 
GOSTSR_S32
 
TsEº‹Check_O√Levñ_C⁄töuôyCou¡îEº‹
(
TR101290_ERROR_S
 *
p°Eº‹Info
,
GOSTSR_U32
 
pid
,
GOSTSR_U8
 
C⁄töuôy
,GOSTSR_U8 
ad≠ãr_c⁄åﬁ
,GOSTSR_U8 
disC⁄töuôyIndiˇt‹
)

159 
GOSTSR_S32
 
i
 = 0, 
j
 = 0;

160 
GOSTSR_BOOL
 
bRïót
 = 
GOSTSR_FALSE
;

161 
GOSTSR_U8
 
ch™ID
 = 0;

162 
GOSTSR_U32
 
ödex
 = 0;

164 if((
p°Eº‹Info
 =
GOSTSR_NULL
Ë|| (!p°Eº‹Info->
bisM©ched
Ë|| (
pid
 =0x1fffË|| (0xf‡=pidË|| (p°Eº‹Info->
ch™ID
 >
TSERROR_CHANNELID_MAX
))

166  
GOSTSR_FAILURE
;

168 
ch™ID
 = 
p°Eº‹Info
->chanID;

170 if(!
TsEº‹Check_O√Levñ_checkisPesPid
(
ch™ID
,
pid
,&
ödex
))

172  
GOSTSR_FAILURE
;

176 
i
 = 0; i < 
PID_NUMBER_MAX
; i++)

178 if((
°O√LevñP¨am
[
ch™ID
].
°C⁄töutyCou¡
[
i
].
pid
 =pidË&& (°O√LevñP¨am[ch™ID].°C⁄töutyCou¡[i].
bU£d
))

183 if(
i
 =
PID_NUMBER_MAX
)

185 
j
 = 0; j < 
PID_NUMBER_MAX
; j++)

187 if(!
°O√LevñP¨am
[
ch™ID
].
°C⁄töutyCou¡
[
j
].
bU£d
)

189 
°O√LevñP¨am
[
ch™ID
].
°C⁄töutyCou¡
[
j
].
bU£d
 = 
GOSTSR_TRUE
;

190 
°O√LevñP¨am
[
ch™ID
].
°C⁄töutyCou¡
[
j
].
pid
 =Öid;

191 
°O√LevñP¨am
[
ch™ID
].
°C⁄töutyCou¡
[
j
].
c⁄töutycou¡
 = 
C⁄töuôy
;

192 
°O√LevñP¨am
[
ch™ID
].
°C⁄töutyCou¡
[
j
].
¥edisC⁄töuôyIndiˇt‹

disC⁄töuôyIndiˇt‹
;

196  
GOSTSR_FAILURE
;

199 if((
°O√LevñP¨am
[
ch™ID
].
°C⁄töutyCou¡
[
i
].
c⁄töutycou¡
 =
C⁄töuôy
) && (Continuity!=0))

201 
bRïót
 = 
GOSTSR_TRUE
;

204 if(
C⁄töuôy
 != 0)

206 if(
ad≠ãr_c⁄åﬁ
 == 0)

208 if(
°O√LevñP¨am
[
ch™ID
].
°C⁄töutyCou¡
[
i
].
c⁄töutycou¡
 !
C⁄töuôy
)

214 if(
ad≠ãr_c⁄åﬁ
 == 1)

216 if(
°O√LevñP¨am
[
ch™ID
].
°C⁄töutyCou¡
[
i
].
c⁄töutycou¡
 !
C⁄töuôy
 - 1)

218 
°O√LevñP¨am
[
ch™ID
].
⁄eLevñEº‹_ªc‹d
.
tsC⁄töuôyCou¡îEº‹
++;

222 if(
ad≠ãr_c⁄åﬁ
 == 2)

224 if(
disC⁄töuôyIndiˇt‹
 == 1)

226 if(
°O√LevñP¨am
[
ch™ID
].
°C⁄töutyCou¡
[
i
].
c⁄töutycou¡
+1 =
C⁄töuôy
)

228 
°O√LevñP¨am
[
ch™ID
].
⁄eLevñEº‹_ªc‹d
.
tsC⁄töuôyCou¡îEº‹
++;

236 if(
°O√LevñP¨am
[
ch™ID
].
°C⁄töutyCou¡
[
i
].
c⁄töutycou¡
 !
C⁄töuôy
)

238 
°O√LevñP¨am
[
ch™ID
].
⁄eLevñEº‹_ªc‹d
.
tsC⁄töuôyCou¡îEº‹
++;

243 if(
ad≠ãr_c⁄åﬁ
 == 3)

245 if(
disC⁄töuôyIndiˇt‹
 == 0)

247 if(
°O√LevñP¨am
[
ch™ID
].
°C⁄töutyCou¡
[
i
].
¥edisC⁄töuôyIndiˇt‹
 == 0)

249 if(
°O√LevñP¨am
[
ch™ID
].
°C⁄töutyCou¡
[
i
].
c⁄töutycou¡
 !
C⁄töuôy
 -1)

251 
°O√LevñP¨am
[
ch™ID
].
⁄eLevñEº‹_ªc‹d
.
tsC⁄töuôyCou¡îEº‹
++;

261 if(
ad≠ãr_c⁄åﬁ
 == 0)

263 if(
°O√LevñP¨am
[
ch™ID
].
°C⁄töutyCou¡
[
i
].
c⁄töutycou¡
 !
C⁄töuôy
)

269 if(
ad≠ãr_c⁄åﬁ
 == 1)

271 if(
°O√LevñP¨am
[
ch™ID
].
°C⁄töutyCou¡
[
i
].
c⁄töutycou¡
 != 0xf)

273 
°O√LevñP¨am
[
ch™ID
].
⁄eLevñEº‹_ªc‹d
.
tsC⁄töuôyCou¡îEº‹
++;

277 if(
ad≠ãr_c⁄åﬁ
 == 2)

279 if(
disC⁄töuôyIndiˇt‹
 == 1)

281 if(
°O√LevñP¨am
[
ch™ID
].
°C⁄töutyCou¡
[
i
].
c⁄töutycou¡
+1 =
C⁄töuôy
)

283 
°O√LevñP¨am
[
ch™ID
].
⁄eLevñEº‹_ªc‹d
.
tsC⁄töuôyCou¡îEº‹
++;

289 if(
°O√LevñP¨am
[
ch™ID
].
°C⁄töutyCou¡
[
i
].
c⁄töutycou¡
 !
C⁄töuôy
)

291 
°O√LevñP¨am
[
ch™ID
].
⁄eLevñEº‹_ªc‹d
.
tsC⁄töuôyCou¡îEº‹
++;

296 if(
ad≠ãr_c⁄åﬁ
 == 3)

298 if(
disC⁄töuôyIndiˇt‹
 == 0)

300 if(
°O√LevñP¨am
[
ch™ID
].
°C⁄töutyCou¡
[
i
].
¥edisC⁄töuôyIndiˇt‹
 == 0)

302 if(
°O√LevñP¨am
[
ch™ID
].
°C⁄töutyCou¡
[
i
].
c⁄töutycou¡
 != 0xf)

304 
°O√LevñP¨am
[
ch™ID
].
⁄eLevñEº‹_ªc‹d
.
tsC⁄töuôyCou¡îEº‹
++;

311 if(((
ad≠ãr_c⁄åﬁ
 =1Ë|| (ad≠ãr_c⁄åﬁ =3)Ë&& (
disC⁄töuôyIndiˇt‹
 == 0))

313 
°O√LevñP¨am
[
ch™ID
].
°C⁄töutyCou¡
[
i
].
c⁄töutycou¡
 = 
C⁄töuôy
;

320 
°O√LevñP¨am
[
ch™ID
].
°C⁄töutyCou¡
[
i
].
¥edisC⁄töuôyIndiˇt‹

disC⁄töuôyIndiˇt‹
;

322  
GOSTSR_FAILURE
;

326 
GOSTSR_S32
 
TsEº‹Check_O√Levñ_P©Eº‹
(
TR101290_ERROR_S
 *
p°Eº‹Info
,
GOSTSR_U32
 
pid
,GOSTSR_U32 
èbÀId
,
GOSTSR_U8
 
s¸ambÀ_c⁄åﬁ
)

328 
GOSTSR_U32
 
u32byãPosDiff
 = 0;

329 
GOSTSR_U8
 
ch™ID
 = 0;

331 if((
p°Eº‹Info
 =
GOSTSR_NULL
Ë|| (!p°Eº‹Info->
bisM©ched
Ë|| (
pid
 !
PAT_PID
Ë|| (p°Eº‹Info->
ch™ID
 >
TSERROR_CHANNELID_MAX
))

333  
GOSTSR_FAILURE
;

335 
ch™ID
 = 
p°Eº‹Info
->chanID;

337 if(
°O√LevñP¨am
[
ch™ID
].
u32ByãPos_P©Bak
 != 0)

339 if(
p°Eº‹Info
->
bC¨ryFœg
)

341 
u32byãPosDiff
 = 
ONELEVEL_BYTEPOS_MAX
+
p°Eº‹Info
->
byãPos
 -
°O√LevñP¨am
[
ch™ID
].
u32ByãPos_P©Bak
;

345 if(
p°Eº‹Info
->
byãPos
 >
°O√LevñP¨am
[
ch™ID
].
u32ByãPos_P©Bak
)

347 
u32byãPosDiff
 = 
p°Eº‹Info
->
byãPos
 -
°O√LevñP¨am
[
ch™ID
].
u32ByãPos_P©Bak
;

351 
u32byãPosDiff
 = 
°O√LevñP¨am
[
ch™ID
].
u32ByãPos_P©Bak
 - 
p°Eº‹Info
->
byãPos
;

355 
°O√LevñP¨am
[
ch™ID
].
u32ByãPos_P©Bak
 = 
p°Eº‹Info
->
byãPos
;

357 if(
Gëts_S≥ed_Ms
(
ch™ID
) > 0)

359 if(
Gëts_TimeMs_byByãDiff
(
ch™ID
,
u32byãPosDiff
) > 500)

361 
°O√LevñP¨am
[
ch™ID
].
⁄eLevñEº‹_ªc‹d
.
tsP©Eº‹
.
timeout_îr‹
++;

362 
°O√LevñP¨am
[
ch™ID
].
⁄eLevñEº‹_ªc‹d
.
tsP©Eº‹
.
tŸÆ_îr‹
++;

363 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_ONE
,
TR101290_ONE_ERROR_PAT
,
p°Eº‹Info
->
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

364  
GOSTSR_SUCCESS
;

371 
°O√LevñP¨am
[
ch™ID
].
u32ByãPos_P©Bak
 = 
p°Eº‹Info
->
byãPos
;

374 if(
pid
 =
PAT_PID
)

376 if(
èbÀId
 !
PAT_TABLE_ID
)

378 
°O√LevñP¨am
[
ch™ID
].
⁄eLevñEº‹_ªc‹d
.
tsP©Eº‹
.
èbÀid_îr‹
++;

379 
°O√LevñP¨am
[
ch™ID
].
⁄eLevñEº‹_ªc‹d
.
tsP©Eº‹
.
tŸÆ_îr‹
++;

380 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_ONE
,
TR101290_ONE_ERROR_PAT
,
p°Eº‹Info
->
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

382 if(
s¸ambÀ_c⁄åﬁ
 != 0)

384 
°O√LevñP¨am
[
ch™ID
].
⁄eLevñEº‹_ªc‹d
.
tsP©Eº‹
.
s¸ambÀ_îr‹
++;

385 
°O√LevñP¨am
[
ch™ID
].
⁄eLevñEº‹_ªc‹d
.
tsP©Eº‹
.
tŸÆ_îr‹
++;

386 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_ONE
,
TR101290_ONE_ERROR_PAT
,
p°Eº‹Info
->
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

390  
GOSTSR_SUCCESS
;

394 
GOSTSR_S32
 
TsEº‹Check_O√Levñ_PmtEº‹
(
TR101290_ERROR_S
 *
p°Eº‹Info
,
GOSTSR_U16
 
pid
,
GOSTSR_U8
 
s¸ambÀ_c⁄åﬁ
)

396 
GOSTSR_S32
 
i
 = 0;

397 
GOSTSR_U32
 
ödex
 = 0;

398 
GOSTSR_U32
 
u32ByãPosDiff
= 0;

399 
GOSTSR_U8
 
ch™ID
 = 0;

400 
PMTPID_TIMEOUT_INFO
 *
pPmtPidInfo
 = 
GOSTSR_NULL
;

402 if((
p°Eº‹Info
 =
GOSTSR_NULL
Ë|| (!p°Eº‹Info->
bisM©ched
Ë|| (p°Eº‹Info->
ch™ID
 >
TSERROR_CHANNELID_MAX
))

404  
GOSTSR_FAILURE
;

406 
ch™ID
 = 
p°Eº‹Info
->chanID;

407 
pPmtPidInfo
 = &
°O√LevñP¨am
[
ch™ID
].
pmtPid_timeout_öfo
;

410 if(!
TsEº‹Check_O√Levñ_checkisPmtPid
(
p°Eº‹Info
->
ch™ID
,
pid
,&
ödex
))

412  
GOSTSR_FAILURE
;

415 if(
s¸ambÀ_c⁄åﬁ
 != 0)

417 
°O√LevñP¨am
[
ch™ID
].
⁄eLevñEº‹_ªc‹d
.
tsPmtEº‹
.
s¸ambÀ_îr‹
++;

418 
°O√LevñP¨am
[
ch™ID
].
⁄eLevñEº‹_ªc‹d
.
tsPmtEº‹
.
tŸÆ_îr‹
++;

419 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_ONE
,
TR101290_ONE_ERROR_PMT
,
p°Eº‹Info
->
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

422 if(
pPmtPidInfo
->
pmtInfo
[
ödex
].
byãPos
 != 0)

424 if(
p°Eº‹Info
->
bC¨ryFœg
)

426 
u32ByãPosDiff
 = 
ONELEVEL_BYTEPOS_MAX
+
p°Eº‹Info
->
byãPos
 -
pPmtPidInfo
->
pmtInfo
[
i
].bytePos;

430 if(
p°Eº‹Info
->
byãPos
 >
pPmtPidInfo
->
pmtInfo
[
i
].bytePos)

432 
u32ByãPosDiff
 = 
p°Eº‹Info
->
byãPos
 -
pPmtPidInfo
->
pmtInfo
[
i
].bytePos;

436 
u32ByãPosDiff
 = 
pPmtPidInfo
->
pmtInfo
[
i
].
byãPos
 - 
p°Eº‹Info
->bytePos;

440 
pPmtPidInfo
->
pmtInfo
[
i
].
byãPos
 = 
p°Eº‹Info
->bytePos;

443 if(
Gëts_S≥ed_Ms
(
ch™ID
) > 0)

445 if(
Gëts_TimeMs_byByãDiff
(
ch™ID
,
u32ByãPosDiff
) > 500)

448 
°O√LevñP¨am
[
ch™ID
].
⁄eLevñEº‹_ªc‹d
.
tsPmtEº‹
.
timeout_îr‹
 ++;

449 
°O√LevñP¨am
[
ch™ID
].
⁄eLevñEº‹_ªc‹d
.
tsPmtEº‹
.
tŸÆ_îr‹
 ++;

450 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_ONE
,
TR101290_ONE_ERROR_PMT
,
p°Eº‹Info
->
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

456 
pPmtPidInfo
->
pmtInfo
[
ödex
].
byãPos
 = 
p°Eº‹Info
->bytePos;

459  
GOSTSR_FAILURE
;

463 
GOSTSR_S32
 
TsEº‹Check_O√Levñ_pidMissEº‹
(
TR101290_ERROR_S
 *
p°Eº‹Info
,
GOSTSR_U16
 
pid
)

465 
GOSTSR_U32
 
u32ByãPosDiff
 = 0;

466 
GOSTSR_U32
 
ödex
 = 0;

467 
GOSTSR_U8
 
ch™ID
 = 0;

468 
PESPID_TIMEOUT_INFO
 *
pPesPidInfo
 = 
GOSTSR_NULL
;

470 if((
p°Eº‹Info
 =
GOSTSR_NULL
Ë||(!p°Eº‹Info->
bisM©ched
Ë|| (p°Eº‹Info->
ch™ID
 >
TSERROR_CHANNELID_MAX
))

472  
GOSTSR_FAILURE
;

475 
ch™ID
 = 
p°Eº‹Info
->chanID;

476 
pPesPidInfo
 = &
°O√LevñP¨am
[
ch™ID
].
≥sPid_timeout_öfo
;

478 if(!
TsEº‹Check_O√Levñ_checkisPesPid
(
p°Eº‹Info
->
ch™ID
,
pid
,&
ödex
))

480  
GOSTSR_FAILURE
;

483 if(
pPesPidInfo
->
≥sInfo
[
ödex
].
byãPos
 != 0)

485 if(
p°Eº‹Info
->
bC¨ryFœg
)

487 
u32ByãPosDiff
 = 
ONELEVEL_BYTEPOS_MAX
+
p°Eº‹Info
->
byãPos
 -
pPesPidInfo
->
≥sInfo
[
ödex
].bytePos;

491 if(
p°Eº‹Info
->
byãPos
 >
pPesPidInfo
->
≥sInfo
[
ödex
].bytePos)

493 
u32ByãPosDiff
 = 
p°Eº‹Info
->
byãPos
 -
pPesPidInfo
->
≥sInfo
[
ödex
].bytePos;

497 
u32ByãPosDiff
 = 
pPesPidInfo
->
≥sInfo
[
ödex
].
byãPos
 - 
p°Eº‹Info
->bytePos;

501 
pPesPidInfo
->
≥sInfo
[
ödex
].
byãPos
 = 
p°Eº‹Info
->bytePos;

503 if(
Gëts_S≥ed_Ms
(
ch™ID
) > 0)

505 if(
Gëts_TimeMs_byByãDiff
(
ch™ID
,
u32ByãPosDiff
) > 5000)

507 
°O√LevñP¨am
[
ch™ID
].
⁄eLevñEº‹_ªc‹d
.
tsPIDMissEº‹
++;

508 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_ONE
,
TR101290_ONE_ERROR_PID
,
p°Eº‹Info
->
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

509  
GOSTSR_SUCCESS
;

515 
pPesPidInfo
->
≥sInfo
[
ödex
].
ªcvFœg
 = 
GOSTSR_TRUE
;

516 
pPesPidInfo
->
≥sInfo
[
ödex
].
byãPos
 = 
p°Eº‹Info
->bytePos;

517  
GOSTSR_FAILURE
;

520  
GOSTSR_FAILURE
;

523 
GOSTSR_S32
 
TsEº‹Check_O√Levñ_pidMissNŸRóch
(
GOSTSR_U8
 
ch™ID
)

525 
GOSTSR_S32
 
i
 = 0;

527 if(
ch™ID
 >
TSERROR_CHANNELID_MAX
)

529  
GOSTSR_FAILURE
;

532 
PESPID_TIMEOUT_INFO
 *
pPesPidInfo
 = &
°O√LevñP¨am
[
ch™ID
].
≥sPid_timeout_öfo
;

534 
i
 = 0 ; i < 
pPesPidInfo
->
NbPesInfo
;i++)

536 if(!
pPesPidInfo
->
≥sInfo
[
i
].
ªcvFœg
)

538 
°O√LevñP¨am
[
ch™ID
].
⁄eLevñEº‹_ªc‹d
.
tsPIDMissEº‹
++;

539 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_ONE
,
TR101290_ONE_ERROR_PID
,0,
GOSTSR_NULL
,GOSTSR_NULL);

542  
GOSTSR_SUCCESS
;

545 
GOSTSR_S32
 
TsEº‹Check_O√Levñ_£tPid
(
GOSTSR_U8
 
ch™ID
,
SEARCH_INFO_S
 *
°SórchInfo
)

547 if((
ch™ID
 >
TSERROR_CHANNELID_MAX
Ë|| (
GOSTSR_NULL
 =
°SórchInfo
))

549 
¥ötf
("data is NULL \n");

550  
GOSTSR_FAILURE
;

552 
TsEº‹Check_O√Levñ_£tPmtPid
(
ch™ID
,
°SórchInfo
);

553 
TsEº‹Check_O√Levñ_£tPesPid
(
ch™ID
,
°SórchInfo
);

554  
GOSTSR_SUCCESS
;

557 
GOSTSR_S32
 
TsEº‹Check_O√Levñ_GëEº‹Info
(
GOSTSR_U8
 
ch™ID
,
TSERROR_ONELEVEL_RECORD
 *
⁄eLevñEº‹Info
)

559 if((
⁄eLevñEº‹Info
 =
GOSTSR_NULL
Ë|| (
ch™ID
 >
TSERROR_CHANNELID_MAX
))

561  
GOSTSR_FAILURE
;

564 
mem˝y
(
⁄eLevñEº‹Info
,&
°O√LevñP¨am
[
ch™ID
].
⁄eLevñEº‹_ªc‹d
,(
TSERROR_ONELEVEL_RECORD
));

566  
GOSTSR_SUCCESS
;

569 
GOSTSR_S32
 
TsEº‹Check_O√Levñ_Inô
()

571 
GOSTSR_S32
 
i
 = 0, 
j
 = 0;

573 
mem£t
(&
°O√LevñP¨am
, 0x00, (
TSERROR_ONELEVEL_PARAM_S
Ë* 
TSERROR_CHANNELID_MAX
);

575 
i
 = 0; i < 
TSERROR_CHANNELID_MAX
; i++)

577 
j
 = 0; j < 
ONE_ERROR_PMT_MAX
; j++)

579 
°O√LevñP¨am
[
i
].
pmtPid_timeout_öfo
.
pmtInfo
[
j
].
pid
 = 0xffff;

580 
°O√LevñP¨am
[
i
].
pmtPid_timeout_öfo
.
pmtInfo
[
j
].
ªcvFœg
 = 
GOSTSR_FALSE
;

582 
j
 = 0; j < 
ONE_ERROR_PES_MAX
; j++)

584 
°O√LevñP¨am
[
i
].
≥sPid_timeout_öfo
.
≥sInfo
[
j
].
pid
 = 0xffff;

585 
°O√LevñP¨am
[
i
].
≥sPid_timeout_öfo
.
≥sInfo
[
j
].
ªcvFœg
 = 
GOSTSR_FALSE
;

587 
j
 = 0; j < 
PID_NUMBER_MAX
; j++)

589 
°O√LevñP¨am
[
i
].
°C⁄töutyCou¡
[
j
].
bU£d
 = 
GOSTSR_FALSE
;

590 
°O√LevñP¨am
[
i
].
°C⁄töutyCou¡
[
j
].
pid
 = 0xffff;

594  
GOSTSR_SUCCESS
;

597 
GOSTSR_S32
 
TsEº‹Check_O√Levñ_DeInô
()

599 
GOSTSR_S32
 
i
 = 0, 
j
 = 0;

601 
mem£t
(&
°O√LevñP¨am
, 0x00, (
TSERROR_ONELEVEL_PARAM_S
Ë* 
TSERROR_CHANNELID_MAX
);

603 
i
 = 0; i < 
TSERROR_CHANNELID_MAX
; i++)

605 
j
 = 0; j < 
ONE_ERROR_PMT_MAX
; j++)

607 
°O√LevñP¨am
[
i
].
pmtPid_timeout_öfo
.
pmtInfo
[
j
].
pid
 = 0xffff;

608 
°O√LevñP¨am
[
i
].
pmtPid_timeout_öfo
.
pmtInfo
[
j
].
ªcvFœg
 = 
GOSTSR_FALSE
;

610 
j
 = 0; j < 
ONE_ERROR_PES_MAX
; j++)

612 
°O√LevñP¨am
[
i
].
≥sPid_timeout_öfo
.
≥sInfo
[
j
].
pid
 = 0xffff;

613 
°O√LevñP¨am
[
i
].
≥sPid_timeout_öfo
.
≥sInfo
[
j
].
ªcvFœg
 = 
GOSTSR_FALSE
;

615 
j
 = 0; j < 
PID_NUMBER_MAX
; j++)

617 
°O√LevñP¨am
[
i
].
°C⁄töutyCou¡
[
j
].
bU£d
 = 
GOSTSR_FALSE
;

618 
°O√LevñP¨am
[
i
].
°C⁄töutyCou¡
[
j
].
pid
 = 0xffff;

621  
GOSTSR_SUCCESS
;

624 
GOSTSR_S32
 
TsEº‹Check_O√Levñ_ReInô
(
GOSTSR_U8
 
ch™ID
)

626 
GOSTSR_S32
 
j
 = 0;

628 if(
ch™ID
 >
TSERROR_CHANNELID_MAX
)

630  
GOSTSR_FAILURE
;

632 
mem£t
(&
°O√LevñP¨am
[
ch™ID
], 0x00, (
TSERROR_ONELEVEL_PARAM_S
));

634 
j
 = 0; j < 
ONE_ERROR_PMT_MAX
; j++)

636 
°O√LevñP¨am
[
ch™ID
].
pmtPid_timeout_öfo
.
pmtInfo
[
j
].
pid
 = 0xffff;

637 
°O√LevñP¨am
[
ch™ID
].
pmtPid_timeout_öfo
.
pmtInfo
[
j
].
ªcvFœg
 = 
GOSTSR_FALSE
;

639 
j
 = 0; j < 
ONE_ERROR_PES_MAX
; j++)

641 
°O√LevñP¨am
[
ch™ID
].
≥sPid_timeout_öfo
.
≥sInfo
[
j
].
pid
 = 0xffff;

642 
°O√LevñP¨am
[
ch™ID
].
≥sPid_timeout_öfo
.
≥sInfo
[
j
].
ªcvFœg
 = 
GOSTSR_FALSE
;

644 
j
 = 0; j < 
PID_NUMBER_MAX
; j++)

646 
°O√LevñP¨am
[
ch™ID
].
°C⁄töutyCou¡
[
j
].
bU£d
 = 
GOSTSR_FALSE
;

647 
°O√LevñP¨am
[
ch™ID
].
°C⁄töutyCou¡
[
j
].
pid
 = 0xffff;

650  
GOSTSR_SUCCESS
;

653 #ifde‡
__˝lu•lus


654 #i‡
__˝lu•lus


	@tscheck/src/TsErrorCheck_ThreeLevel.c

1 #ifde‡
__˝lu•lus


2 #i‡
__˝lu•lus


6 
	~"TsEº‹Check_TwoLevñ.h
"

7 
	~"TsEº‹Check_ThªeLevñ.h
"

8 
	~"TsEº‹Check_Log.h
"

10 
TSERROR_THREELEVEL_PARAM_S
 
°ThªeLevñP¨am
[
TSERROR_CHANNELID_MAX
];

13 
GOSTSR_S32
 
TsCheck_NôSe˘i⁄sTimeEº‹
(
TS_SECTION_INFO
 *
£˘i⁄Info
);

16 
GOSTSR_S32
 
TsCheck_SiSe˘i⁄Rïëôi⁄R©eEº‹
(
TS_SECTION_INFO
 *
£˘i⁄Info
);

19 
GOSTSR_S32
 
TsCheck_Buf„rEº‹
(
GOSTSR_U8
 *
d©a
, 
GOSTSR_U16
 
d©aLí
, 
GOSTSR_U32
 
time
);

22 
GOSTSR_S32
 
TsCheck_Uƒe„ªn˚dPidEº‹
(
TS_HEAD_INFO
 *
tsHódInfo
);

25 
GOSTSR_S32
 
TsCheck_SdtA˘uÆSe˘i⁄sTimeEº‹
(
TS_SECTION_INFO
 *
£˘i⁄Info
);

26 
GOSTSR_S32
 
TsCheck_SdtOthîSe˘i⁄sTimeEº‹
(
TS_SECTION_INFO
 *
£˘i⁄Info
);

29 
GOSTSR_S32
 
TsCheck_EôA˘uÆSe˘i⁄sTimeEº‹
(
TS_SECTION_INFO
 *
£˘i⁄Info
);

30 
GOSTSR_S32
 
TsCheck_EôOthîSe˘i⁄sTimeEº‹
(
TS_SECTION_INFO
 *
£˘i⁄Info
);

33 
GOSTSR_S32
 
TsCheck_R°Se˘i⁄sTimeEº‹
(
TS_SECTION_INFO
 *
£˘i⁄Info
);

36 
GOSTSR_S32
 
TsCheck_TdtSe˘i⁄sTimeEº‹
(
TS_SECTION_INFO
 *
£˘i⁄Info
);

39 
GOSTSR_S32
 
TsCheck_Em±yBuf„rEº‹
(
GOSTSR_U8
 *
d©a
, 
GOSTSR_U16
 
d©aLí
, 
GOSTSR_U32
 
time
);

42 
GOSTSR_S32
 
TsCheck_D©aDñayEº‹
(
GOSTSR_U8
 *
d©a
, 
GOSTSR_U16
 
d©aLí
, 
GOSTSR_U32
 
time
);

44 
GOSTSR_S32
 
TsCheck_GëCuºítSe˘i⁄Info
(
TS_SECTION_INFO
 *
£˘i⁄Info
, 
GOSTSR_U8
 *
£˘i⁄Num
, GOSTSR_U8 *
œ°Se˘i⁄Num
)

46 
GOSTSR_U8
 *
pD©a
 = 
GOSTSR_NULL
;

48 i‡((
GOSTSR_NULL
 =
£˘i⁄Info
Ë|| (GOSTSR_NULL =£˘i⁄Info->
£˘i⁄D©a
Ë|| (GOSTSR_NULL =
£˘i⁄Num
Ë|| (GOSTSR_NULL =
œ°Se˘i⁄Num
))

50  
GOSTSR_SUCCESS
;

53 
pD©a
 = 
£˘i⁄Info
->
£˘i⁄D©a
;

55 
pD©a
 += 6;

58 *
£˘i⁄Num
 = 
pD©a
[0];

59 
pD©a
 += 1;

62 *
œ°Se˘i⁄Num
 = 
pD©a
[0];

64  
GOSTSR_SUCCESS
;

67 
GOSTSR_S32
 
TsCheck_TabÀOvîTime
(
TS_SECTION_INFO
 *
£˘i⁄Info
, 
SiRïëR©eSe˘i⁄s_Info
 *
£˘i⁄Info_Pª
, 
GOSTSR_U32
 
ovîTime
)

69 
GOSTSR_U8
 
£˘i⁄Num
 = 0;

70 
GOSTSR_U8
 
œ°Se˘i⁄Num
 = 0;

71 
GOSTSR_U32
 
timeOff£t
 = 0;

72 
GOSTSR_S32
 
ªtVÆ
 = 
GOSTSR_FAILURE
;

73 
GOSTSR_U8
 
maxNumbî
 = 0;

74 
GOSTSR_U8
 
ch™ID
 = 
£˘i⁄Info
->
°Eº‹Info
.chanID;

76 i‡((
GOSTSR_NULL
 =
£˘i⁄Info
Ë|| (GOSTSR_NULL =
£˘i⁄Info_Pª
Ë|| (
ch™ID
 >
TSERROR_CHANNELID_MAX
))

78  
GOSTSR_FAILURE
;

81 i‡(
GOSTSR_SUCCESS
 !
TsCheck_GëCuºítSe˘i⁄Info
(
£˘i⁄Info
, &
£˘i⁄Num
, &
œ°Se˘i⁄Num
))

83  
GOSTSR_FAILURE
;

86 i‡(
œ°Se˘i⁄Num
 == 0)

88  
GOSTSR_FAILURE
;

91 i‡(
£˘i⁄Info_Pª
->
numbî
 == 0)

93 
£˘i⁄Info_Pª
->
°¨tTime
 = 
£˘i⁄Info
->
°Eº‹Info
.startTime;

94 
£˘i⁄Info_Pª
->
œ°Se˘i⁄Num
 =ÜastSectionNum;

97 i‡(
£˘i⁄Info_Pª
->
£˘i⁄Fœg
[
£˘i⁄Num
] == 0x01)

99  
GOSTSR_FAILURE
;

103 
£˘i⁄Info_Pª
->
£˘i⁄Fœg
[
£˘i⁄Num
] = 0x01;

104 
£˘i⁄Info_Pª
->
numbî
++;

107 i‡((
£˘i⁄Info
->
èbÀID
 =
EIT_TABLE_ID_ACTUAL_SHEDULE
Ë|| (£˘i⁄Info->èbÀID =
EIT_TABLE_ID_OTHER_SHEDULE
))

109 
maxNumbî
 = 
£˘i⁄Info_Pª
->
œ°Se˘i⁄Num
 / 8;

113 
maxNumbî
 = 
£˘i⁄Info_Pª
->
œ°Se˘i⁄Num
;

116 i‡(
£˘i⁄Info_Pª
->
numbî
 > 
maxNumbî
)

118 if(
£˘i⁄Info
->
°Eº‹Info
.
bC¨ryFœg
)

120 
timeOff£t
 = 0xffffffff+
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 - 
£˘i⁄Info_Pª
->startTime;

124 if(
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 >
£˘i⁄Info_Pª
->startTime)

126 
timeOff£t
 = 
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 - 
£˘i⁄Info_Pª
->startTime;

130 
timeOff£t
 = 
£˘i⁄Info_Pª
->
°¨tTime
 - 
£˘i⁄Info
->
°Eº‹Info
.startTime;

134 i‡(
timeOff£t
 <= 25000)

136 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
siRïëôi⁄R©eEº‹Info
.
siSe˘i⁄LimôTimeEº‹
++;

137 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
siRïëôi⁄R©eEº‹Info
.
tŸÆEº‹
++;

138 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_SIREPETITION
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

141 i‡(
timeOff£t
 > 
ovîTime
)

143 
ªtVÆ
 = 
GOSTSR_SUCCESS
;

146 
£˘i⁄Info_Pª
->
°¨tTime
 = 0;

147 
£˘i⁄Info_Pª
->
œ°Se˘i⁄Num
 = 0;

148 
£˘i⁄Info_Pª
->
numbî
 = 0;

149 
mem£t
(
£˘i⁄Info_Pª
->
£˘i⁄Fœg
,0,(sectionInfo_Pre->sectionFlag));

152  
ªtVÆ
;

155 
GOSTSR_S32
 
TsCheck_NôSe˘i⁄sTimeEº‹
(
TS_SECTION_INFO
 *
£˘i⁄Info
)

157 
GOSTSR_U32
 
timeOff£t
 = 0;

158 
GOSTSR_U8
 
ch™ID
 = 
£˘i⁄Info
->
°Eº‹Info
.chanID;

160 i‡((
GOSTSR_NULL
 =
£˘i⁄Info
Ë|| (
NIT_PID
 !£˘i⁄Info->
PID
Ë|| (GOSTSR_NULL =£˘i⁄Info->
£˘i⁄D©a
Ë|| (
ch™ID
 >
TSERROR_CHANNELID_MAX
))

162  
GOSTSR_FAILURE
;

166 i‡((
NIT_TABLE_ID_ACTUAL
 !
£˘i⁄Info
->
èbÀID
Ë&& (
NIT_TABLE_ID_OTHER
 !£˘i⁄Info->èbÀIDË&& (
SI_TABLE_ID
 != sectionInfo->tableID))

168 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
nôEº‹Info
.
èbÀIDEº‹
++;

169 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
nôEº‹Info
.
tŸÆEº‹
++;

170 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_NITACTUAL
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

174 i‡(
NIT_TABLE_ID_ACTUAL
 =
£˘i⁄Info
->
èbÀID
)

176 i‡(
°ThªeLevñP¨am
[
ch™ID
].
nôA˘uÆPªTime
 != 0)

178 if(
£˘i⁄Info
->
°Eº‹Info
.
bC¨ryFœg
)

180 
timeOff£t
 = 0xffffffff+
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 - 
°ThªeLevñP¨am
[
ch™ID
].
nôA˘uÆPªTime
;

184 if(
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 >
°ThªeLevñP¨am
[
ch™ID
].
nôA˘uÆPªTime
)

186 
timeOff£t
 = 
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 - 
°ThªeLevñP¨am
[
ch™ID
].
nôA˘uÆPªTime
;

190 
timeOff£t
 = 
°ThªeLevñP¨am
[
ch™ID
].
nôA˘uÆPªTime
 - 
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
;

195 i‡(
timeOff£t
 > 10000000)

197 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
nôEº‹Info
.
a˘uÆOvîTimeEº‹
++;

198 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
nôEº‹Info
.
tŸÆEº‹
++;

199 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_NITACTUAL
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

202 i‡(
timeOff£t
 <= 25000)

204 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
nôEº‹Info
.
a˘uÆLimôTimeEº‹
++;

205 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
nôEº‹Info
.
tŸÆEº‹
++;

206 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_NITACTUAL
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

211 i‡(
NIT_TABLE_ID_OTHER
 =
£˘i⁄Info
->
èbÀID
)

213 i‡(
°ThªeLevñP¨am
[
ch™ID
].
nôOthîPªTime
 != 0)

215 if(
£˘i⁄Info
->
°Eº‹Info
.
bC¨ryFœg
)

217 
timeOff£t
 = 0xffffffff+
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 - 
°ThªeLevñP¨am
[
ch™ID
].
nôOthîPªTime
;

221 if(
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 >
°ThªeLevñP¨am
[
ch™ID
].
nôOthîPªTime
)

223 
timeOff£t
 = 
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 - 
°ThªeLevñP¨am
[
ch™ID
].
nôOthîPªTime
;

227 
timeOff£t
 = 
°ThªeLevñP¨am
[
ch™ID
].
nôOthîPªTime
 - 
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
;

232 i‡(
timeOff£t
 > 10000000)

234 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
nôEº‹Info
.
ŸhîOvîTimeEº‹
++;

235 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
nôEº‹Info
.
tŸÆEº‹
++;

236 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_NITOTHER
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

239 i‡(
timeOff£t
 <= 25000)

241 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
nôEº‹Info
.
ŸhîLimôTimeEº‹
++;

242 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
nôEº‹Info
.
tŸÆEº‹
++;

243 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_NITOTHER
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

247 
°ThªeLevñP¨am
[
ch™ID
].
nôOthîPªTime
 = 
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
;

249  
GOSTSR_SUCCESS
;

252 
GOSTSR_S32
 
TsCheck_SiSe˘i⁄Rïëôi⁄R©eEº‹
(
TS_SECTION_INFO
 *
£˘i⁄Info
)

254 
GOSTSR_U32
 
timeOff£t
 = 0;

255 
GOSTSR_U8
 
£˘i⁄Num
 = 0;

256 
GOSTSR_U8
 
œ°Se˘i⁄Num
 = 0;

257 
GOSTSR_U8
 
ch™ID
 = 
£˘i⁄Info
->
°Eº‹Info
.chanID;

259 i‡((
GOSTSR_NULL
 =
£˘i⁄Info
Ë|| (GOSTSR_NULL =£˘i⁄Info->
£˘i⁄D©a
Ë|| (£˘i⁄Info->
PID
 < 
SI_PID_MIN
) \

260 || (
£˘i⁄Info
->
PID
 > 
SI_PID_MAX
Ë|| (
ch™ID
 >
TSERROR_CHANNELID_MAX
))

262  
GOSTSR_FAILURE
;

265 
£˘i⁄Info
->
PID
)

267 
NIT_PID
:

268 i‡(
GOSTSR_SUCCESS
 =
TsCheck_GëCuºítSe˘i⁄Info
(
£˘i⁄Info
, &
£˘i⁄Num
, &
œ°Se˘i⁄Num
))

270 
GOSTSR_U32
 
nôTime
 = 0x00;

272 i‡(
NIT_TABLE_ID_ACTUAL
 =
£˘i⁄Info
->
èbÀID
)

274 i‡(
œ°Se˘i⁄Num
 == 0)

279 i‡(
°ThªeLevñP¨am
[
ch™ID
].
nôA˘uÆSe˘i⁄Info
.
numbî
 == 0)

281 i‡(
°ThªeLevñP¨am
[
ch™ID
].
nôOthîSe˘i⁄Info
.
numbî
 == 0)

283 
°ThªeLevñP¨am
[
ch™ID
].
nôA˘uÆSe˘i⁄Info
.
°¨tTime
 = 
£˘i⁄Info
->
°Eº‹Info
.startTime;

285 
°ThªeLevñP¨am
[
ch™ID
].
nôA˘uÆSe˘i⁄Info
.
œ°Se˘i⁄Num
 =ÜastSectionNum;

288 i‡(
°ThªeLevñP¨am
[
ch™ID
].
nôA˘uÆSe˘i⁄Info
.
£˘i⁄Fœg
[
£˘i⁄Num
] == 0x01)

294 
°ThªeLevñP¨am
[
ch™ID
].
nôA˘uÆSe˘i⁄Info
.
£˘i⁄Fœg
[
£˘i⁄Num
] = 0x01;

295 
°ThªeLevñP¨am
[
ch™ID
].
nôA˘uÆSe˘i⁄Info
.
numbî
++;

298 i‡(
NIT_TABLE_ID_OTHER
 =
£˘i⁄Info
->
èbÀID
)

300 i‡(
œ°Se˘i⁄Num
 == 0)

305 i‡(
°ThªeLevñP¨am
[
ch™ID
].
nôOthîSe˘i⁄Info
.
numbî
 == 0)

307 i‡(
°ThªeLevñP¨am
[
ch™ID
].
nôA˘uÆSe˘i⁄Info
.
numbî
 == 0)

309 
°ThªeLevñP¨am
[
ch™ID
].
nôOthîSe˘i⁄Info
.
°¨tTime
 = 
£˘i⁄Info
->
°Eº‹Info
.startTime;

311 
°ThªeLevñP¨am
[
ch™ID
].
nôOthîSe˘i⁄Info
.
œ°Se˘i⁄Num
 =ÜastSectionNum;

314 i‡(
°ThªeLevñP¨am
[
ch™ID
].
nôOthîSe˘i⁄Info
.
£˘i⁄Fœg
[
£˘i⁄Num
] == 0x01)

320 
°ThªeLevñP¨am
[
ch™ID
].
nôOthîSe˘i⁄Info
.
£˘i⁄Fœg
[
£˘i⁄Num
] = 0x01;

321 
°ThªeLevñP¨am
[
ch™ID
].
nôOthîSe˘i⁄Info
.
numbî
++;

326 i‡(((
°ThªeLevñP¨am
[
ch™ID
].
nôA˘uÆSe˘i⁄Info
.
numbî
 > stThªeLevñP¨am[ch™ID].nôA˘uÆSe˘i⁄Info.
œ°Se˘i⁄Num
Ë&& (°ThªeLevñP¨am[ch™ID].
nôOthîSe˘i⁄Info
.number > stThreeLevelParam[chanID].nitOtherSectionInfo.lastSectionNum)) ||

327 ((
°ThªeLevñP¨am
[
ch™ID
].
nôA˘uÆSe˘i⁄Info
.
numbî
 =0Ë&& (°ThªeLevñP¨am[ch™ID].
nôOthîSe˘i⁄Info
.numbî > stThªeLevñP¨am[ch™ID].nôOthîSe˘i⁄Info.
œ°Se˘i⁄Num
)) ||

328 ((
°ThªeLevñP¨am
[
ch™ID
].
nôA˘uÆSe˘i⁄Info
.
numbî
 > stThªeLevñP¨am[ch™ID].nôA˘uÆSe˘i⁄Info.
œ°Se˘i⁄Num
Ë&& (°ThªeLevñP¨am[ch™ID].
nôOthîSe˘i⁄Info
.number == 0)))

330 i‡(
°ThªeLevñP¨am
[
ch™ID
].
nôOthîSe˘i⁄Info
.
°¨tTime
 != 0)

332 
nôTime
 = 
°ThªeLevñP¨am
[
ch™ID
].
nôOthîSe˘i⁄Info
.
°¨tTime
;

336 
nôTime
 = 
°ThªeLevñP¨am
[
ch™ID
].
nôA˘uÆSe˘i⁄Info
.
°¨tTime
;

339 if(
£˘i⁄Info
->
°Eº‹Info
.
bC¨ryFœg
)

341 
timeOff£t
 = 0xffffffff+
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 - 
nôTime
;

345 if(
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 >
nôTime
)

347 
timeOff£t
 = 
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 - 
nôTime
;

351 
timeOff£t
 = 
nôTime
 - 
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
;

355 i‡(
timeOff£t
 <= 25000)

357 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
siRïëôi⁄R©eEº‹Info
.
siSe˘i⁄LimôTimeEº‹
++;

358 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
siRïëôi⁄R©eEº‹Info
.
tŸÆEº‹
++;

359 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_SIREPETITION
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

361 i‡(
timeOff£t
 >= 10000000)

363 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
siRïëôi⁄R©eEº‹Info
.
nôOvîTimeEº‹
++;

364 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
siRïëôi⁄R©eEº‹Info
.
tŸÆEº‹
++;

365 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_SIREPETITION
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

368 
mem£t
(&
°ThªeLevñP¨am
[
ch™ID
].
nôOthîSe˘i⁄Info
, 0x00, (
SiRïëR©eSe˘i⁄s_Info
));

369 
mem£t
(&
°ThªeLevñP¨am
[
ch™ID
].
nôA˘uÆSe˘i⁄Info
, 0x00, (
SiRïëR©eSe˘i⁄s_Info
));

374 
BAT_SDT_PID
:

375 i‡(
BAT_TABLE_ID
 =
£˘i⁄Info
->
èbÀID
)

378 i‡(
GOSTSR_SUCCESS
 =
TsCheck_TabÀOvîTime
(
£˘i⁄Info
, &
°ThªeLevñP¨am
[
ch™ID
].
b©Se˘i⁄Info
, 10000000))

380 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
siRïëôi⁄R©eEº‹Info
.
b©OvîTimeEº‹
++;

381 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
siRïëôi⁄R©eEº‹Info
.
tŸÆEº‹
++;

382 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_SIREPETITION
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

385 i‡(
SDT_TABLE_ID_ACTUAL
 =
£˘i⁄Info
->
èbÀID
)

388 i‡(
GOSTSR_SUCCESS
 =
TsCheck_TabÀOvîTime
(
£˘i⁄Info
, &
°ThªeLevñP¨am
[
ch™ID
].
sdtA˘uÆSe˘i⁄Info
, 2000000))

390 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
siRïëôi⁄R©eEº‹Info
.
sdtA˘uÆOvîTimeEº‹
++;

391 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
siRïëôi⁄R©eEº‹Info
.
tŸÆEº‹
++;

392 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_SIREPETITION
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

395 i‡(
SDT_TABLE_ID_OTEHR
 =
£˘i⁄Info
->
èbÀID
)

398 i‡(
GOSTSR_SUCCESS
 =
TsCheck_TabÀOvîTime
(
£˘i⁄Info
, &
°ThªeLevñP¨am
[
ch™ID
].
sdtOthîSe˘i⁄Info
, 10000000))

400 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
siRïëôi⁄R©eEº‹Info
.
sdtOthîOvîTimeEº‹
++;

401 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
siRïëôi⁄R©eEº‹Info
.
tŸÆEº‹
++;

402 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_SIREPETITION
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

407 
EIT_PID
:

408 i‡(
EIT_TABLE_ID_ACTUAL
 =
£˘i⁄Info
->
èbÀID
)

411 i‡(
GOSTSR_SUCCESS
 =
TsCheck_TabÀOvîTime
(
£˘i⁄Info
, &
°ThªeLevñP¨am
[
ch™ID
].
b©Se˘i⁄Info
, 2000000))

413 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
siRïëôi⁄R©eEº‹Info
.
eôA˘uÆOvîTimeEº‹
++;

414 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
siRïëôi⁄R©eEº‹Info
.
tŸÆEº‹
++;

415 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_SIREPETITION
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

418 i‡(
EIT_TABLE_ID_OTHER
 =
£˘i⁄Info
->
èbÀID
)

421 i‡(
GOSTSR_SUCCESS
 =
TsCheck_TabÀOvîTime
(
£˘i⁄Info
, &
°ThªeLevñP¨am
[
ch™ID
].
eôOthîSe˘i⁄Info
, 10000000))

423 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
siRïëôi⁄R©eEº‹Info
.
eôOthîOvîTimeEº‹
++;

424 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
siRïëôi⁄R©eEº‹Info
.
tŸÆEº‹
++;

425 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_SIREPETITION
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

428 i‡(
EIT_TABLE_ID_ACTUAL_SHEDULE
 =
£˘i⁄Info
->
èbÀID
)

431 i‡(
GOSTSR_SUCCESS
 =
TsCheck_TabÀOvîTime
(
£˘i⁄Info
, &
°ThªeLevñP¨am
[
ch™ID
].
eôA˘uÆScheduÀSe˘i⁄Info
, 10000000))

433 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
siRïëôi⁄R©eEº‹Info
.
eôA˘uÆScheduÀOvîTimeEº‹
++;

434 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
siRïëôi⁄R©eEº‹Info
.
tŸÆEº‹
++;

435 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_SIREPETITION
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

438 i‡(
EIT_TABLE_ID_OTHER_SHEDULE
 =
£˘i⁄Info
->
èbÀID
)

441 i‡(
GOSTSR_SUCCESS
 =
TsCheck_TabÀOvîTime
(
£˘i⁄Info
, &
°ThªeLevñP¨am
[
ch™ID
].
eôOthîScheduÀSe˘i⁄Info
, 30000000))

443 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
siRïëôi⁄R©eEº‹Info
.
eôOthîScheduÀOvîTimeEº‹
++;

444 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
siRïëôi⁄R©eEº‹Info
.
tŸÆEº‹
++;

445 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_SIREPETITION
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

450 
TDT_TOT_PID
:

451 i‡(
TDT_TABLE_ID
 =
£˘i⁄Info
->
èbÀID
)

454 i‡(
GOSTSR_SUCCESS
 =
TsCheck_TabÀOvîTime
(
£˘i⁄Info
, &
°ThªeLevñP¨am
[
ch™ID
].
tdtSe˘i⁄Info
, 30000000))

456 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
siRïëôi⁄R©eEº‹Info
.
tdtOvîTimeEº‹
++;

457 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
siRïëôi⁄R©eEº‹Info
.
tŸÆEº‹
++;

458 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_SIREPETITION
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

461 i‡(
TOT_TABLE_ID
 =
£˘i⁄Info
->
èbÀID
)

464 i‡(
GOSTSR_SUCCESS
 =
TsCheck_TabÀOvîTime
(
£˘i⁄Info
, &
°ThªeLevñP¨am
[
ch™ID
].
tŸSe˘i⁄Info
, 30000000))

466 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
siRïëôi⁄R©eEº‹Info
.
tŸOvîTimeEº‹
++;

467 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
siRïëôi⁄R©eEº‹Info
.
tŸÆEº‹
++;

468 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_SIREPETITION
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

477  
GOSTSR_SUCCESS
;

480 
GOSTSR_S32
 
TsCheck_Buf„rEº‹
(
GOSTSR_U8
 *
d©a
, 
GOSTSR_U16
 
d©aLí
, 
GOSTSR_U32
 
time
)

482 i‡((
GOSTSR_NULL
 =
d©a
Ë|| (
d©aLí
 == 0))

484  
GOSTSR_FAILURE
;

489  
GOSTSR_SUCCESS
;

492 
GOSTSR_S32
 
TsCheck_Uƒe„ªn˚dPidEº‹
(
TS_HEAD_INFO
 *
tsHódInfo
)

494 
GOSTSR_U16
 
ödex
 = 0x00;

495 
GOSTSR_U32
 
timeOff£t
 = 0;

496 
GOSTSR_S32
 
i
 = 0,
j
 = 0;

497 
GOSTSR_U8
 
ch™ID
 = 0;

499 if((
GOSTSR_NULL
 =
tsHódInfo
Ë|| (tsHódInfo->
°Eº‹Info
.
ch™ID
 >
TSERROR_CHANNELID_MAX
))

501  
GOSTSR_NULL
;

503 
ch™ID
 = 
tsHódInfo
->
°Eº‹Info
.chanID;

504 i‡((
tsHódInfo
->
ts_pid
 >= 0x20) && (tsHeadInfo->ts_pid != 0x1fff))

507 
i
 = 0; i < 
°ThªeLevñP¨am
[
ch™ID
].
°SórchInfo
.
u16NbProg
; i++)

509 if((
tsHódInfo
->
ts_pid
 =
°ThªeLevñP¨am
[
ch™ID
].
°SórchInfo
.
°ProgInfo
[
i
].
PmtPid
Ë|| (—sHódInfo->ts_pid =°ThªeLevñP¨am[ch™ID].°SórchInfo.°ProgInfo[i].
P¸Pid
)))

511  
GOSTSR_FAILURE
;

513 
j
 = 0; j < 
°ThªeLevñP¨am
[
ch™ID
].
°SórchInfo
.
°ProgInfo
[
i
].
u8NbPes
; j++)

515 if(
tsHódInfo
->
ts_pid
 =
°ThªeLevñP¨am
[
ch™ID
].
°SórchInfo
.
°ProgInfo
[
i
].
PesPid
[
j
])

517  
GOSTSR_FAILURE
;

523 
i
 = 0; i < 
°ThªeLevñP¨am
[
ch™ID
].
°SórchInfo
.
u16NbCa
; i++)

525 if(
tsHódInfo
->
ts_pid
 =
°ThªeLevñP¨am
[
ch™ID
].
°SórchInfo
.
°CaInfo
[
i
].
CaPid
)

527  
GOSTSR_FAILURE
;

532 
i
 = 0; i < 
MAX_UNREFERPID_NUM
; i++)

534 i‡((!
°ThªeLevñP¨am
[
ch™ID
].
uƒe„rPidInfo
[
i
].
Êag
Ë&& (°ThªeLevñP¨am[ch™ID].uƒe„rPidInfo[i].
pid
 !
tsHódInfo
->
ts_pid
 ))

538 if(
tsHódInfo
->
°Eº‹Info
.
bC¨ryFœg
)

540 
timeOff£t
 = 0xffffffff+
tsHódInfo
->
°Eº‹Info
.
°¨tTime
 - 
°ThªeLevñP¨am
[
ch™ID
].
uƒe„rPidInfo
[
i
].startTime;

544 if(
tsHódInfo
->
°Eº‹Info
.
°¨tTime
 >
°ThªeLevñP¨am
[
ch™ID
].
uƒe„rPidInfo
[
i
].startTime)

546 
timeOff£t
 = 
tsHódInfo
->
°Eº‹Info
.
°¨tTime
 - 
°ThªeLevñP¨am
[
ch™ID
].
uƒe„rPidInfo
[
i
].startTime;

550 
timeOff£t
 = 
°ThªeLevñP¨am
[
ch™ID
].
uƒe„rPidInfo
[
i
].
°¨tTime
 - 
tsHódInfo
->
°Eº‹Info
.startTime;

555 i‡(
timeOff£t
 > 500000)

557 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
uƒe„ªn˚dPidEº‹Info
.
tŸÆEº‹
++;

558 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_UNREFERENCEPID
,
tsHódInfo
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

560 
°ThªeLevñP¨am
[
ch™ID
].
uƒe„rPidInfo
[
i
].
°¨tTime
 = 
tsHódInfo
->
°Eº‹Info
.startTime;

561  
GOSTSR_SUCCESS
;

564 if(
i
 =
MAX_UNREFERPID_NUM
)

567 
ödex
 = 0; index < 
MAX_UNREFERPID_NUM
; index++)

569 i‡(!
°ThªeLevñP¨am
[
ch™ID
].
uƒe„rPidInfo
[
ödex
].
Êag
)

575 i‡(
ödex
 !
MAX_UNREFERPID_NUM
)

577 
°ThªeLevñP¨am
[
ch™ID
].
uƒe„rPidInfo
[
ödex
].
Êag
 = 0x01;

578 
°ThªeLevñP¨am
[
ch™ID
].
uƒe„rPidInfo
[
ödex
].
pid
 = 
tsHódInfo
->
ts_pid
 ;

579 
°ThªeLevñP¨am
[
ch™ID
].
uƒe„rPidInfo
[
ödex
].
°¨tTime
 = 
tsHódInfo
->
°Eº‹Info
.startTime;

584  
GOSTSR_FAILURE
;

587 
GOSTSR_S32
 
TsCheck_SdtA˘uÆSe˘i⁄sTimeEº‹
(
TS_SECTION_INFO
 *
£˘i⁄Info
)

589 
GOSTSR_U32
 
timeOff£t
 = 0;

590 
GOSTSR_U8
 
ch™ID
 = 
£˘i⁄Info
->
°Eº‹Info
.chanID;

592 i‡((
GOSTSR_NULL
 =
£˘i⁄Info
Ë||(
BAT_SDT_PID
 !£˘i⁄Info->
PID
Ë|| (GOSTSR_NULL =£˘i⁄Info->
£˘i⁄D©a
) \

593 || (
£˘i⁄Info
->
°Eº‹Info
.
ch™ID
 >
TSERROR_CHANNELID_MAX
))

595  
GOSTSR_FAILURE
;

598 i‡((
SDT_TABLE_ID_ACTUAL
 !
£˘i⁄Info
->
èbÀID
Ë&& (
SDT_TABLE_ID_OTEHR
 != sectionInfo->tableID) && \

599 (
BAT_TABLE_ID
 !
£˘i⁄Info
->
èbÀID
Ë&& (
SI_TABLE_ID
 != sectionInfo->tableID))

601 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
sdtEº‹Info
.
èbÀIDEº‹
++;

602 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
sdtEº‹Info
.
tŸÆEº‹
++;

603 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_SDTACTUAL
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

606 i‡(
SDT_TABLE_ID_ACTUAL
 =
£˘i⁄Info
->
èbÀID
)

609 i‡(
°ThªeLevñP¨am
[
ch™ID
].
sdtA˘uÆPªTime
 != 0)

611 if(
£˘i⁄Info
->
°Eº‹Info
.
bC¨ryFœg
)

613 
timeOff£t
 = 0xffffffff+
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 - 
°ThªeLevñP¨am
[
ch™ID
].
sdtA˘uÆPªTime
;

617 if(
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 >
°ThªeLevñP¨am
[
ch™ID
].
sdtA˘uÆPªTime
)

619 
timeOff£t
 = 
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 - 
°ThªeLevñP¨am
[
ch™ID
].
sdtA˘uÆPªTime
;

623 
timeOff£t
 = 
°ThªeLevñP¨am
[
ch™ID
].
sdtA˘uÆPªTime
 - 
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
;

628 i‡(
timeOff£t
 >= 2000000)

630 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
sdtEº‹Info
.
a˘uÆOvîTimeEº‹
++;

631 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
sdtEº‹Info
.
tŸÆEº‹
++;

632 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_SDTACTUAL
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

635 i‡(
timeOff£t
 <= 25000)

637 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
sdtEº‹Info
.
a˘uÆLimôTimeEº‹
++;

638 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
sdtEº‹Info
.
tŸÆEº‹
++;

639 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_SDTACTUAL
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

643 
°ThªeLevñP¨am
[
ch™ID
].
sdtA˘uÆPªTime
 = 
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
;

646  
GOSTSR_SUCCESS
;

649 
GOSTSR_S32
 
TsCheck_SdtOthîSe˘i⁄sTimeEº‹
(
TS_SECTION_INFO
 *
£˘i⁄Info
)

651 
GOSTSR_U32
 
timeOff£t
 = 0;

652 
GOSTSR_U8
 
£˘i⁄Num
 = 0;

653 
GOSTSR_U8
 
œ°Se˘i⁄Num
 = 0;

654 
GOSTSR_U8
 
ch™ID
 = 0;

656 i‡((
GOSTSR_NULL
 =
£˘i⁄Info
Ë||(
BAT_SDT_PID
 !£˘i⁄Info->
PID
Ë|| (GOSTSR_NULL =£˘i⁄Info->
£˘i⁄D©a
) \

657 || (
£˘i⁄Info
->
°Eº‹Info
.
ch™ID
 >
TSERROR_CHANNELID_MAX
))

659  
GOSTSR_FAILURE
;

661 
ch™ID
 = 
£˘i⁄Info
->
°Eº‹Info
.chanID;

662 i‡(
SDT_TABLE_ID_OTEHR
 =
£˘i⁄Info
->
èbÀID
)

665 i‡(
GOSTSR_SUCCESS
 =
TsCheck_GëCuºítSe˘i⁄Info
(
£˘i⁄Info
, &
£˘i⁄Num
, &
œ°Se˘i⁄Num
))

668 i‡(
°ThªeLevñP¨am
[
ch™ID
].
sdtOthîPªTime
[
£˘i⁄Num
] != 0)

670 if(
£˘i⁄Info
->
°Eº‹Info
.
bC¨ryFœg
)

672 
timeOff£t
 = 0xffffffff+
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 - 
°ThªeLevñP¨am
[
ch™ID
].
sdtOthîPªTime
[
£˘i⁄Num
];

676 if(
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 >
°ThªeLevñP¨am
[
ch™ID
].
sdtOthîPªTime
[
£˘i⁄Num
])

678 
timeOff£t
 = 
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 - 
°ThªeLevñP¨am
[
ch™ID
].
sdtOthîPªTime
[
£˘i⁄Num
];

682 
timeOff£t
 = 
°ThªeLevñP¨am
[
ch™ID
].
sdtOthîPªTime
[
£˘i⁄Num
] - 
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
;

687 i‡(
timeOff£t
 > 10000000)

689 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
sdtEº‹Info
.
ŸhîOvîTimeEº‹
++;

690 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
sdtEº‹Info
.
tŸÆEº‹
++;

691 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_SDTOTHER
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

695 
°ThªeLevñP¨am
[
ch™ID
].
sdtOthîPªTime
[
£˘i⁄Num
] = 
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
;

699  
GOSTSR_SUCCESS
;

702 
GOSTSR_S32
 
TsCheck_EôA˘uÆSe˘i⁄sTimeEº‹
(
TS_SECTION_INFO
 *
£˘i⁄Info
)

704 
GOSTSR_U32
 
timeOff£t
 = 0;

705 
GOSTSR_U8
 
£˘i⁄Num
 = 0;

706 
GOSTSR_U8
 
œ°Se˘i⁄Num
 = 0;

707 
GOSTSR_U8
 
ch™ID
 = 0;

709 i‡((
GOSTSR_NULL
 =
£˘i⁄Info
Ë||(
EIT_PID
 !£˘i⁄Info->
PID
Ë|| (GOSTSR_NULL =£˘i⁄Info->
£˘i⁄D©a
) \

710 || (
£˘i⁄Info
->
°Eº‹Info
.
ch™ID
 >
TSERROR_CHANNELID_MAX
))

712  
GOSTSR_FAILURE
;

714 
ch™ID
 = 
£˘i⁄Info
->
°Eº‹Info
.chanID;

716 i‡((
£˘i⁄Info
->
èbÀID
 < 0x4E) || ((sectionInfo->tableID > 0x6f) && (sectionInfo->tableID != 0x72)))

718 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
èbÀIDEº‹
++;

719 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
tŸÆEº‹
++;

720 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_EITACTUAL
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

723 i‡(
EIT_TABLE_ID_ACTUAL
 =
£˘i⁄Info
->
èbÀID
)

726 i‡(
°ThªeLevñP¨am
[
ch™ID
].
eôA˘uÆPªTime
 != 0)

728 if(
£˘i⁄Info
->
°Eº‹Info
.
bC¨ryFœg
)

730 
timeOff£t
 = 0xffffffff+
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 - 
°ThªeLevñP¨am
[
ch™ID
].
eôA˘uÆPªTime
;

734 if(
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 >
°ThªeLevñP¨am
[
ch™ID
].
eôA˘uÆPªTime
)

736 
timeOff£t
 = 
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 - 
°ThªeLevñP¨am
[
ch™ID
].
eôA˘uÆPªTime
;

740 
timeOff£t
 = 
°ThªeLevñP¨am
[
ch™ID
].
eôA˘uÆPªTime
 - 
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
;

745 i‡(
timeOff£t
 > 2000000)

747 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
a˘uÆOvîTimeEº‹
++;

748 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
tŸÆEº‹
++;

749 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_EITACTUAL
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

752 i‡(
timeOff£t
 <= 25000)

754 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
a˘uÆLimtTimeEº‹
++;

755 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
tŸÆEº‹
++;

756 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_EITACTUAL
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

759 
°ThªeLevñP¨am
[
ch™ID
].
eôA˘uÆPªTime
 = 
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
;

761 i‡(
GOSTSR_SUCCESS
 =
TsCheck_GëCuºítSe˘i⁄Info
(
£˘i⁄Info
, &
£˘i⁄Num
, &
œ°Se˘i⁄Num
))

764 i‡(
£˘i⁄Num
 == 0)

766 i‡(
°ThªeLevñP¨am
[
ch™ID
].
eôA˘uÆSec0PªTime
 != 0)

768 if(
£˘i⁄Info
->
°Eº‹Info
.
bC¨ryFœg
)

770 
timeOff£t
 = 0xffffffff+
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 - 
°ThªeLevñP¨am
[
ch™ID
].
eôA˘uÆSec0PªTime
;

774 if(
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 >
°ThªeLevñP¨am
[
ch™ID
].
eôA˘uÆSec0PªTime
)

776 
timeOff£t
 = 
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 - 
°ThªeLevñP¨am
[
ch™ID
].
eôA˘uÆSec0PªTime
;

780 
timeOff£t
 = 
°ThªeLevñP¨am
[
ch™ID
].
eôA˘uÆSec0PªTime
 - 
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
;

785 i‡(
timeOff£t
 > 2000000)

787 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
a˘uÆSec0OvîTimeEº‹
++;

788 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
tŸÆEº‹
++;

789 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_EITACTUAL
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

794 i‡(
°ThªeLevñP¨am
[
ch™ID
].
eôA˘uÆPaúFœg
 != 3)

796 
°ThªeLevñP¨am
[
ch™ID
].
eôA˘uÆPaúFœg
++;

797 i‡(
°ThªeLevñP¨am
[
ch™ID
].
eôA˘uÆPaúFœg
 == 2)

799 
°ThªeLevñP¨am
[
ch™ID
].
eôA˘uÆPaúFœg
 = 1;

800 i‡(
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
a˘uÆPFPaúEº‹
 == 0)

802 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
a˘uÆPFPaúEº‹
 = 1;

803 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
tŸÆEº‹
++;

804 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_EITPF
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

810 i‡(
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
a˘uÆPFPaúEº‹
 == 1)

812 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
a˘uÆPFPaúEº‹
 = 0;

813 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
tŸÆEº‹
--;

814 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_EITPF
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

818 
°ThªeLevñP¨am
[
ch™ID
].
eôA˘uÆSec0PªTime
 = 
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
;

821 i‡(
£˘i⁄Num
 == 1)

823 i‡(
°ThªeLevñP¨am
[
ch™ID
].
eôA˘uÆSec1PªTime
 != 0)

825 if(
£˘i⁄Info
->
°Eº‹Info
.
bC¨ryFœg
)

827 
timeOff£t
 = 0xffffffff+
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 - 
°ThªeLevñP¨am
[
ch™ID
].
eôA˘uÆSec1PªTime
;

831 if(
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 >
°ThªeLevñP¨am
[
ch™ID
].
eôA˘uÆSec1PªTime
)

833 
timeOff£t
 = 
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 - 
°ThªeLevñP¨am
[
ch™ID
].
eôA˘uÆSec1PªTime
;

837 
timeOff£t
 = 
°ThªeLevñP¨am
[
ch™ID
].
eôA˘uÆSec1PªTime
 - 
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
;

842 i‡(
timeOff£t
 >= 2000000)

844 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
a˘uÆSec1OvîTimeEº‹
++;

845 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
tŸÆEº‹
++;

846 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_NITACTUAL
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

851 i‡(
°ThªeLevñP¨am
[
ch™ID
].
eôA˘uÆPaúFœg
 != 3)

853 
°ThªeLevñP¨am
[
ch™ID
].
eôA˘uÆPaúFœg
 += 2;

854 i‡(
°ThªeLevñP¨am
[
ch™ID
].
eôA˘uÆPaúFœg
 == 4)

856 
°ThªeLevñP¨am
[
ch™ID
].
eôA˘uÆPaúFœg
 = 1;

857 i‡(
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
a˘uÆPFPaúEº‹
 == 0)

859 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
a˘uÆPFPaúEº‹
 = 1;

860 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
tŸÆEº‹
++;

861 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_EITACTUAL
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

867 i‡(
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
a˘uÆPFPaúEº‹
 == 1)

869 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
a˘uÆPFPaúEº‹
 = 0;

870 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
tŸÆEº‹
--;

871 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_NITACTUAL
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

875 
°ThªeLevñP¨am
[
ch™ID
].
eôA˘uÆSec1PªTime
 = 
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
;

880  
GOSTSR_SUCCESS
;

883 
GOSTSR_S32
 
TsCheck_EôOthîSe˘i⁄sTimeEº‹
(
TS_SECTION_INFO
 *
£˘i⁄Info
)

885 
GOSTSR_U32
 
timeOff£t
 = 0;

886 
GOSTSR_U8
 
£˘i⁄Num
 = 0;

887 
GOSTSR_U8
 
œ°Se˘i⁄Num
 = 0;

888 
GOSTSR_U8
 
ch™ID
 = 0;

890 i‡((
GOSTSR_NULL
 =
£˘i⁄Info
Ë||(
EIT_PID
 !£˘i⁄Info->
PID
Ë|| (GOSTSR_NULL =£˘i⁄Info->
£˘i⁄D©a
) \

891 || (
£˘i⁄Info
->
°Eº‹Info
.
ch™ID
 >
TSERROR_CHANNELID_MAX
))

893  
GOSTSR_FAILURE
;

895 
ch™ID
 = 
£˘i⁄Info
->
°Eº‹Info
.chanID;

896 i‡(
EIT_TABLE_ID_OTHER
 =
£˘i⁄Info
->
èbÀID
)

898 i‡(
GOSTSR_SUCCESS
 =
TsCheck_GëCuºítSe˘i⁄Info
(
£˘i⁄Info
, &
£˘i⁄Num
, &
œ°Se˘i⁄Num
))

901 i‡(
£˘i⁄Num
 == 0)

903 i‡(
°ThªeLevñP¨am
[
ch™ID
].
eôOthîSec0PªTime
 != 0)

905 if(
£˘i⁄Info
->
°Eº‹Info
.
bC¨ryFœg
)

907 
timeOff£t
 = 0xffffffff+
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 - 
°ThªeLevñP¨am
[
ch™ID
].
eôOthîSec0PªTime
;

911 if(
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 >
°ThªeLevñP¨am
[
ch™ID
].
eôOthîSec0PªTime
)

913 
timeOff£t
 = 
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 - 
°ThªeLevñP¨am
[
ch™ID
].
eôOthîSec0PªTime
;

917 
timeOff£t
 = 
°ThªeLevñP¨am
[
ch™ID
].
eôOthîSec0PªTime
 - 
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
;

922 i‡(
timeOff£t
 >= 10000000)

924 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
ŸhîSec0OvîTimeEº‹
++;

925 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
tŸÆEº‹
++;

926 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_EITOTHER
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

931 i‡(
°ThªeLevñP¨am
[
ch™ID
].
eôOthîPaúFœg
 != 3)

933 
°ThªeLevñP¨am
[
ch™ID
].
eôOthîPaúFœg
++;

934 i‡(
°ThªeLevñP¨am
[
ch™ID
].
eôOthîPaúFœg
 == 2)

936 
°ThªeLevñP¨am
[
ch™ID
].
eôOthîPaúFœg
 = 1;

937 i‡(
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
ŸhîPFPaúEº‹
 == 0)

939 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
ŸhîPFPaúEº‹
 = 1;

940 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
tŸÆEº‹
++;

941 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_EITOTHER
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

947 i‡(
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
ŸhîPFPaúEº‹
 == 1)

949 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
ŸhîPFPaúEº‹
 = 0;

950 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
tŸÆEº‹
--;

951 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_EITOTHER
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

955 
°ThªeLevñP¨am
[
ch™ID
].
eôOthîSec0PªTime
 = 
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
;

958 i‡(
£˘i⁄Num
 == 1)

960 i‡(
°ThªeLevñP¨am
[
ch™ID
].
eôOthîSec1PªTime
 != 0)

962 if(
£˘i⁄Info
->
°Eº‹Info
.
bC¨ryFœg
)

964 
timeOff£t
 = 0xffffffff+
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 - 
°ThªeLevñP¨am
[
ch™ID
].
eôOthîSec1PªTime
;

968 if(
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 >
°ThªeLevñP¨am
[
ch™ID
].
eôOthîSec1PªTime
)

970 
timeOff£t
 = 
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 - 
°ThªeLevñP¨am
[
ch™ID
].
eôOthîSec1PªTime
;

974 
timeOff£t
 = 
°ThªeLevñP¨am
[
ch™ID
].
eôOthîSec1PªTime
 - 
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
;

979 i‡(
timeOff£t
 >= 10000000)

981 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
ŸhîSec1OvîTimeEº‹
++;

982 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
tŸÆEº‹
++;

983 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_EITOTHER
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

988 i‡(
°ThªeLevñP¨am
[
ch™ID
].
eôOthîPaúFœg
 != 3)

990 
°ThªeLevñP¨am
[
ch™ID
].
eôOthîPaúFœg
 += 2;

991 i‡(
°ThªeLevñP¨am
[
ch™ID
].
eôOthîPaúFœg
 == 4)

993 
°ThªeLevñP¨am
[
ch™ID
].
eôOthîPaúFœg
 = 1;

994 i‡(
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
ŸhîPFPaúEº‹
 == 0)

996 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
ŸhîPFPaúEº‹
 = 1;

997 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
tŸÆEº‹
++;

998 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_EITOTHER
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

1004 i‡(
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
ŸhîPFPaúEº‹
 == 1)

1006 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
ŸhîPFPaúEº‹
 = 0;

1007 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
eôEº‹Info
.
tŸÆEº‹
--;

1008 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_EITOTHER
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

1012 
°ThªeLevñP¨am
[
ch™ID
].
eôOthîSec1PªTime
 = 
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
;

1017  
GOSTSR_SUCCESS
;

1020 
GOSTSR_S32
 
TsCheck_R°Se˘i⁄sTimeEº‹
(
TS_SECTION_INFO
 *
£˘i⁄Info
)

1022 
GOSTSR_U32
 
timeOff£t
 = 0;

1023 
GOSTSR_U8
 
ch™ID
 = 0;

1025 i‡((
GOSTSR_NULL
 =
£˘i⁄Info
Ë||(
RST_PID
 !£˘i⁄Info->
PID
Ë|| (GOSTSR_NULL =£˘i⁄Info->
£˘i⁄D©a
) \

1026 || (
£˘i⁄Info
->
°Eº‹Info
.
ch™ID
 >
TSERROR_CHANNELID_MAX
))

1028  
GOSTSR_FAILURE
;

1030 
ch™ID
 = 
£˘i⁄Info
->
°Eº‹Info
.chanID;

1032 i‡((
RST_TABLE_ID
 !
£˘i⁄Info
->
èbÀID
Ë&& (
SI_TABLE_ID
 != sectionInfo->tableID))

1034 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
r°Eº‹Info
.
èbÀIDEº‹
++;

1035 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
r°Eº‹Info
.
tŸÆEº‹
++;

1036 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_RST
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

1038 i‡(
RST_TABLE_ID
 =
£˘i⁄Info
->
èbÀID
)

1040 i‡(
°ThªeLevñP¨am
[
ch™ID
].
r°Se˘i⁄PªTime
 != 0)

1042 if(
£˘i⁄Info
->
°Eº‹Info
.
bC¨ryFœg
)

1044 
timeOff£t
 = 0xffffffff+
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 - 
°ThªeLevñP¨am
[
ch™ID
].
r°Se˘i⁄PªTime
;

1048 if(
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 >
°ThªeLevñP¨am
[
ch™ID
].
r°Se˘i⁄PªTime
)

1050 
timeOff£t
 = 
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 - 
°ThªeLevñP¨am
[
ch™ID
].
r°Se˘i⁄PªTime
;

1054 
timeOff£t
 = 
°ThªeLevñP¨am
[
ch™ID
].
r°Se˘i⁄PªTime
 - 
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
;

1059 i‡(
timeOff£t
 <= 25000)

1061 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
r°Eº‹Info
.
limtTimeEº‹
++;

1062 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
r°Eº‹Info
.
tŸÆEº‹
++;

1063 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_RST
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

1067 
°ThªeLevñP¨am
[
ch™ID
].
r°Se˘i⁄PªTime
 = 
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
;

1070  
GOSTSR_SUCCESS
;

1073 
GOSTSR_S32
 
TsCheck_TdtSe˘i⁄sTimeEº‹
(
TS_SECTION_INFO
 *
£˘i⁄Info
)

1075 
GOSTSR_U32
 
timeOff£t
 = 0;

1076 
GOSTSR_U8
 
ch™ID
 = 0;

1078 i‡((
GOSTSR_NULL
 =
£˘i⁄Info
Ë||(
TDT_TOT_PID
 !£˘i⁄Info->
PID
Ë|| (GOSTSR_NULL =£˘i⁄Info->
£˘i⁄D©a
) \

1079 || (
£˘i⁄Info
->
°Eº‹Info
.
ch™ID
 >
TSERROR_CHANNELID_MAX
))

1081  
GOSTSR_FAILURE
;

1083 
ch™ID
 = 
£˘i⁄Info
->
°Eº‹Info
.chanID;

1085 i‡((
TDT_TABLE_ID
 !
£˘i⁄Info
->
èbÀID
Ë&& (
SI_TABLE_ID
 !£˘i⁄Info->èbÀIDË&& (
TOT_TABLE_ID
 != sectionInfo->tableID))

1087 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
tdtEº‹Info
.
èbÀIDEº‹
++;

1088 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
tdtEº‹Info
.
tŸÆEº‹
++;

1089 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_TDT
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

1091 i‡(
TDT_TABLE_ID
 =
£˘i⁄Info
->
èbÀID
)

1094 i‡(
°ThªeLevñP¨am
[
ch™ID
].
tdtSe˘i⁄PªTime
 != 0)

1096 if(
£˘i⁄Info
->
°Eº‹Info
.
bC¨ryFœg
)

1098 
timeOff£t
 = 0xffffffff+
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 - 
°ThªeLevñP¨am
[
ch™ID
].
tdtSe˘i⁄PªTime
;

1102 if(
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 >
°ThªeLevñP¨am
[
ch™ID
].
tdtSe˘i⁄PªTime
)

1104 
timeOff£t
 = 
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
 -
°ThªeLevñP¨am
[
ch™ID
].
tdtSe˘i⁄PªTime
;

1108 
timeOff£t
 = 
°ThªeLevñP¨am
[
ch™ID
].
tdtSe˘i⁄PªTime
 - 
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
;

1113 i‡(
timeOff£t
 >= 30000000)

1115 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
tdtEº‹Info
.
ovîTimeEº‹
++;

1116 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
tdtEº‹Info
.
tŸÆEº‹
++;

1117 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_TDT
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

1120 i‡(
timeOff£t
 <= 25000)

1122 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
tdtEº‹Info
.
limôTimeEº‹
++;

1123 
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
.
tdtEº‹Info
.
tŸÆEº‹
++;

1124 
TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_THREE
,
TR101290_THREE_ERROR_TDT
,
£˘i⁄Info
->
°Eº‹Info
.
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

1128 
°ThªeLevñP¨am
[
ch™ID
].
tdtSe˘i⁄PªTime
 = 
£˘i⁄Info
->
°Eº‹Info
.
°¨tTime
;

1131  
GOSTSR_SUCCESS
;

1134 
GOSTSR_S32
 
TsCheck_Em±yBuf„rEº‹
(
GOSTSR_U8
 *
d©a
, 
GOSTSR_U16
 
d©aLí
, 
GOSTSR_U32
 
time
)

1136 i‡((
GOSTSR_NULL
 =
d©a
Ë|| (
d©aLí
 == 0))

1138  
GOSTSR_FAILURE
;

1143  
GOSTSR_SUCCESS
;

1146 
GOSTSR_S32
 
TsCheck_D©aDñayEº‹
(
GOSTSR_U8
 *
d©a
, 
GOSTSR_U16
 
d©aLí
, 
GOSTSR_U32
 
time
)

1148 i‡((
GOSTSR_NULL
 =
d©a
Ë|| (
d©aLí
 == 0))

1150  
GOSTSR_FAILURE
;

1155  
GOSTSR_SUCCESS
;

1157 
GOSTSR_S32
 
TsEº‹Check_ThªeLevñ_£tPid
(
GOSTSR_U8
 
ch™ID
,
SEARCH_INFO_S
 *
p°ProgInfo
)

1159 i‡((
GOSTSR_NULL
 =
p°ProgInfo
Ë|| (
ch™ID
 >
TSERROR_CHANNELID_MAX
))

1161  
GOSTSR_FAILURE
;

1163 
mem£t
(&
°ThªeLevñP¨am
[
ch™ID
].
°SórchInfo
, 0x00, (
SEARCH_INFO_S
));

1164 
mem˝y
(&
°ThªeLevñP¨am
[
ch™ID
].
°SórchInfo
,
p°ProgInfo
,(
SEARCH_INFO_S
));

1166  
GOSTSR_SUCCESS
;

1168 
GOSTSR_S32
 
TsEº‹Check_ThªeLevñ_Uƒe„ªn˚dPidEº‹
(
TS_HEAD_INFO
 *
tsHódInfo
)

1170 if((
tsHódInfo
 =
GOSTSR_NULL
Ë|| (!tsHódInfo->
°Eº‹Info
.
bisM©ched
))

1172  
GOSTSR_FAILURE
;

1174  
TsCheck_Uƒe„ªn˚dPidEº‹
(
tsHódInfo
);

1176 
GOSTSR_S32
 
TsEº‹Check_ThªeLevñ_Se˘i⁄sTimeEº‹
(
TS_SECTION_INFO
 *
£˘i⁄Info
)

1178 if((
£˘i⁄Info
 =
GOSTSR_NULL
Ë|| (!£˘i⁄Info->
°Eº‹Info
.
bisM©ched
))

1180  
GOSTSR_FAILURE
;

1183 
TsCheck_NôSe˘i⁄sTimeEº‹
(
£˘i⁄Info
);

1184 
TsCheck_SiSe˘i⁄Rïëôi⁄R©eEº‹
(
£˘i⁄Info
);

1185 
TsCheck_SdtA˘uÆSe˘i⁄sTimeEº‹
(
£˘i⁄Info
);

1186 
TsCheck_SdtOthîSe˘i⁄sTimeEº‹
(
£˘i⁄Info
);

1187 
TsCheck_EôA˘uÆSe˘i⁄sTimeEº‹
(
£˘i⁄Info
);

1188 
TsCheck_EôOthîSe˘i⁄sTimeEº‹
(
£˘i⁄Info
);

1189 
TsCheck_R°Se˘i⁄sTimeEº‹
(
£˘i⁄Info
);

1190 
TsCheck_TdtSe˘i⁄sTimeEº‹
(
£˘i⁄Info
);

1192  
GOSTSR_SUCCESS
;

1195 
GOSTSR_S32
 
TsEº‹Check_ThªeLevñ_Buf„rEº‹
(
GOSTSR_U8
 *
d©a
, 
GOSTSR_U16
 
d©aLí
, 
GOSTSR_U32
 
time
)

1198 
TsCheck_Buf„rEº‹
(
d©a
, 
d©aLí
, 
time
);

1199 
TsCheck_Em±yBuf„rEº‹
(
d©a
, 
d©aLí
, 
time
);

1200 
TsCheck_D©aDñayEº‹
(
d©a
, 
d©aLí
, 
time
);

1202  
GOSTSR_SUCCESS
;

1205 
GOSTSR_S32
 
TsEº‹Check_ThªeLevñ_GëEº‹Info
(
GOSTSR_U8
 
ch™ID
,
TsThªeLevñEº‹Check_Info
 *
öfo
)

1207 i‡((
GOSTSR_NULL
 =
öfo
Ë|| (
ch™ID
 >
TSERROR_CHANNELID_MAX
))

1209  
GOSTSR_FAILURE
;

1212 
mem£t
(
öfo
, 0x00, (
TsThªeLevñEº‹Check_Info
));

1213 
mem˝y
(
öfo
, &
°ThªeLevñP¨am
[
ch™ID
].
îr‹Info
, (
TsThªeLevñEº‹Check_Info
));

1215  
GOSTSR_SUCCESS
;

1218 
GOSTSR_S32
 
TsEº‹Check_ThªeLevñ_Inô
()

1220 
mem£t
(&
°ThªeLevñP¨am
, 0x00, (
TSERROR_THREELEVEL_PARAM_S
Ë* 
TSERROR_CHANNELID_MAX
);

1222  
GOSTSR_SUCCESS
;

1225 
GOSTSR_S32
 
TsEº‹Check_ThªeLevñ_DeInô
()

1227 
mem£t
(&
°ThªeLevñP¨am
, 0x00, (
TSERROR_THREELEVEL_PARAM_S
Ë* 
TSERROR_CHANNELID_MAX
);

1229  
GOSTSR_SUCCESS
;

1232 
GOSTSR_S32
 
TsEº‹Check_ThªeLevñ_ReInô
(
GOSTSR_U8
 
ch™ID
)

1234 
mem£t
(&
°ThªeLevñP¨am
[
ch™ID
], 0x00, (
TSERROR_THREELEVEL_PARAM_S
));

1236  
GOSTSR_SUCCESS
;

1239 #ifde‡
__˝lu•lus


1240 #i‡
__˝lu•lus


	@tscheck/src/TsErrorCheck_TwoLevel.c

1 
	~"TsEº‹Check_TwoLevñ.h
"

2 
	~"TsEº‹Check_Log.h
"

3 
	~"GosT§_A«lysisD©a.h
"

5 
TSERROR_TWOLEVEL_PARAM_S
 
	g°TwoLevñP¨am
[
TSERROR_CHANNELID_MAX
];

8 
GOSTSR_BOOL
 
	$TsEº‹Check_TwoLevñ_gëE«bÀCheckFœg
(
GOSTSR_U8
 
ch™ID
)

10 if(
ch™ID
 >
TSERROR_CHANNELID_MAX
)

12  
GOSTSR_FAILURE
;

14  
°TwoLevñP¨am
[
ch™ID
].
bTsR©eisRecved
;

15 
	}
}

18 
GOSTSR_U32
 
	$TsEº‹Check_TwoLevñ_gëAvTøn•‹tR©e
(
GOSTSR_U8
 
ch™ID
)

20 
GOSTSR_U64
 
u64Tøn•‹tR©e_AŒ
 = 0;

21 
GOSTSR_U32
 
u32AvTøn•‹tR©e
 = 0;

22 
GOSTSR_U32
 
u32Tøn•‹tR©e_Max
 = 0;

23 
GOSTSR_U32
 
u32Tøn•‹tR©e_Mö
= 0;

24 
GOSTSR_U32
 
i
 = 0;

25 
GOSTSR_U16
 
u16Cou¡
 = 0;

26 
GOSTSR_U8
 
u8C¨ryBô
 = 0;

28 if(
ch™ID
 >
TSERROR_CHANNELID_MAX
)

30  
GOSTSR_FAILURE
;

32 
i
 = 0; i < 
PCRPID_NUM_MAX
; i++)

34 if((
°TwoLevñP¨am
[
ch™ID
].
°TsR©eInfo
[
i
].
u32Tøn•‹tR©e
 != 0) )

36 
u32Tøn•‹tR©e_Max
 = 
°TwoLevñP¨am
[
ch™ID
].
°TsR©eInfo
[
i
].
u32Tøn•‹tR©e
;

37 
u32Tøn•‹tR©e_Mö
 = 
u32Tøn•‹tR©e_Max
;

42 
i
 = 0; i < 
PCRPID_NUM_MAX
; i++)

44 if((
°TwoLevñP¨am
[
ch™ID
].
°TsR©eInfo
[
i
].
u32Tøn•‹tR©e
 =0Ë|| (°TwoLevñP¨am[ch™ID].°TsR©eInfo[i].
bFú°U£d
) )

47 if(
u32Tøn•‹tR©e_Max
 < 
°TwoLevñP¨am
[
ch™ID
].
°TsR©eInfo
[
i
].
u32Tøn•‹tR©e
)

49 
u32Tøn•‹tR©e_Max
 = 
°TwoLevñP¨am
[
ch™ID
].
°TsR©eInfo
[
i
].
u32Tøn•‹tR©e
;

51 if(
u32Tøn•‹tR©e_Mö
 > 
°TwoLevñP¨am
[
ch™ID
].
°TsR©eInfo
[
i
].
u32Tøn•‹tR©e
)

53 
u32Tøn•‹tR©e_Mö
 = 
°TwoLevñP¨am
[
ch™ID
].
°TsR©eInfo
[
i
].
u32Tøn•‹tR©e
;

56 if((
u64Tøn•‹tR©e_AŒ
+
°TwoLevñP¨am
[
ch™ID
].
°TsR©eInfo
[
i
].
u32Tøn•‹tR©e
Ë>
TSERROR_INVALID_U32
)

58 
u64Tøn•‹tR©e_AŒ
 = 
°TwoLevñP¨am
[
ch™ID
].
°TsR©eInfo
[
i
].
u32Tøn•‹tR©e
-(
TSERROR_INVALID_U32
-u64TransportRate_All);

59 
u8C¨ryBô
++;

63 
u64Tøn•‹tR©e_AŒ
 +
°TwoLevñP¨am
[
ch™ID
].
°TsR©eInfo
[
i
].
u32Tøn•‹tR©e
;

66 
u16Cou¡
++;

70 if(
u16Cou¡
 != 0)

73 if(
u16Cou¡
 > 2)

76 
u32AvTøn•‹tR©e
 = (
u8C¨ryBô
*
TSERROR_INVALID_U32
 + 
u64Tøn•‹tR©e_AŒ
-
u32Tøn•‹tR©e_Mö
-
u32Tøn•‹tR©e_Max
Ë/ (
u16Cou¡
-2);

81 
u32AvTøn•‹tR©e
 = (
u8C¨ryBô
*
TSERROR_INVALID_U32
 + 
u64Tøn•‹tR©e_AŒ
Ë/ (
u16Cou¡
);

85 if(
u32AvTøn•‹tR©e
 != 0)

87 
°TwoLevñP¨am
[
ch™ID
].
TsR©e_VÆid
 = 
u32AvTøn•‹tR©e
;

92  
°TwoLevñP¨am
[
ch™ID
].
TsR©e_VÆid
;

93 
	}
}

95 
GOSTSR_S32
 
	$TsEº‹Check_TwoLevñ_£tP¸Pid
(
GOSTSR_U8
 
ch™ID
,
SEARCH_INFO_S
 *
°SórchInfo
)

97 
GOSTSR_S32
 
i
 = 0,
k
 = 0, 
cou¡
 = 0;

99 if((
GOSTSR_NULL
 =
°SórchInfo
Ë|| (
ch™ID
 >
TSERROR_CHANNELID_MAX
))

101  
GOSTSR_FAILURE
;

104 
°SórchInfo
->
u16NbProg
 = (°SórchInfo->u16NbProg > 
SEARCH_PROG_NUM_MAX
 ? SEARCH_PROG_NUM_MAX : stSearchInfo->u16NbProg);

105 
i
 = 0; i < 
°SórchInfo
->
u16NbProg
;i++)

107 
k
 = 0; k < 
i
; k++)

109 if(
°TwoLevñP¨am
[
ch™ID
].
°P¸Info
[
k
].
u16P¸Pid
 =
°SórchInfo
->
°ProgInfo
[
i
].
P¸Pid
)

114 if(
k
 =
i
)

116 if(
cou¡
 < 
PCRPID_NUM_MAX
)

118 
°TwoLevñP¨am
[
ch™ID
].
°P¸Info
[
cou¡
].
u16P¸Pid
 = 
°SórchInfo
->
°ProgInfo
[
i
].
P¸Pid
;

119 
cou¡
++;

125  
GOSTSR_SUCCESS
;

126 
	}
}

128 
GOSTSR_S32
 
	$TsEº‹Check_TwoLevñ_£tPesPid
(
GOSTSR_U8
 
ch™ID
,
SEARCH_INFO_S
 *
°SórchInfo
)

130 
GOSTSR_S32
 
i
 = 0, 
j
 =0, 
k
 = 0;

132 if((
GOSTSR_NULL
 =
°SórchInfo
Ë|| (
ch™ID
 >
TSERROR_CHANNELID_MAX
))

134  
GOSTSR_FAILURE
;

137 
°SórchInfo
->
u16NbProg
 = (°SórchInfo->u16NbProg > 
SEARCH_PROG_NUM_MAX
 ? SEARCH_PROG_NUM_MAX : stSearchInfo->u16NbProg);

138 
i
 = 0; i < 
°SórchInfo
->
u16NbProg
;i++)

140 
j
 =0; j < 
°SórchInfo
->
°ProgInfo
[
i
].
u8NbPes
;j++)

142 if(
k
 < 
PESPID_NUM_MAX
)

144 
°TwoLevñP¨am
[
ch™ID
].
°PesInfo
[
k
++].
u16PesPid
 = 
°SórchInfo
->
°ProgInfo
[
i
].
PesPid
[
j
];

150  
GOSTSR_SUCCESS
;

151 
	}
}

153 
GOSTSR_BOOL
 
	$TwoLevñ_checkisP¸Pid
(
GOSTSR_U8
 
ch™ID
,
GOSTSR_U16
 
Pid
,
GOSTSR_U32
 *
ödex
)

155 
GOSTSR_S32
 
i
 = 0;

157 if((
GOSTSR_NULL
 =
ödex
Ë|| (
ch™ID
 >
TSERROR_CHANNELID_MAX
))

159  
GOSTSR_FALSE
;

161 
i
 = 0; i < 
PCRPID_NUM_MAX
; i++)

163 if(
Pid
 =
°TwoLevñP¨am
[
ch™ID
].
°P¸Info
[
i
].
u16P¸Pid
)

165 *
ödex
 = 
i
;

166  
GOSTSR_TRUE
;

170  
GOSTSR_FALSE
;

171 
	}
}

173 
GOSTSR_BOOL
 
	$TwoLevñ_checkisPesPid
(
GOSTSR_U8
 
ch™ID
,
GOSTSR_U16
 
Pid
,
GOSTSR_U32
 *
ödex
)

175 
GOSTSR_S32
 
i
 = 0;

177 if((
GOSTSR_NULL
 =
ödex
Ë|| (
ch™ID
 >
TSERROR_CHANNELID_MAX
))

179  
GOSTSR_FALSE
;

181 
i
 = 0; i < 
PESPID_NUM_MAX
; i++)

183 if(
Pid
 =
°TwoLevñP¨am
[
ch™ID
].
°PesInfo
[
i
].
u16PesPid
)

185 *
ödex
 = 
i
;

186  
GOSTSR_TRUE
;

190  
GOSTSR_FALSE
;

191 
	}
}

193 
GOSTSR_F32
 
	$TwoLevñ_gëTsR©eMs
(
GOSTSR_U8
 
ch™ID
)

195 
GOSTSR_F32
 
f32AvTøn•‹tR©e
 = 0.0;

197 if((!
°TwoLevñP¨am
[
ch™ID
].
bTsR©eisRecved
Ë|| (ch™ID >
TSERROR_CHANNELID_MAX
))

200 
f32AvTøn•‹tR©e
 = 1.0 * 
	`TsEº‹Check_TwoLevñ_gëAvTøn•‹tR©e
(
ch™ID
) / 1000;

202  
f32AvTøn•‹tR©e
;

203 
	}
}

204 
GOSTSR_F32
 
	$TwoLevñ_gëTsR©eUs
(
GOSTSR_U8
 
ch™ID
)

206 
GOSTSR_F32
 
f32AvTøn•‹tR©e
 = 0.0;

208 if((!
°TwoLevñP¨am
[
ch™ID
].
bTsR©eisRecved
Ë|| (ch™ID >
TSERROR_CHANNELID_MAX
))

211 
f32AvTøn•‹tR©e
 = 1.0 * 
	`TsEº‹Check_TwoLevñ_gëAvTøn•‹tR©e
(
ch™ID
) / 1000 / 1000;

213  
f32AvTøn•‹tR©e
;

214 
	}
}

216 
GOSTSR_S32
 
	$TsEº‹Check_TwoLevñ_£tPid
(
GOSTSR_U8
 
ch™ID
,
SEARCH_INFO_S
 *
°SórchInfo
)

218 if((
GOSTSR_NULL
 =
°SórchInfo
Ë|| (
ch™ID
 >
TSERROR_CHANNELID_MAX
))

220  
GOSTSR_FAILURE
;

222 
	`TsEº‹Check_TwoLevñ_£tP¸Pid
(
ch™ID
,
°SórchInfo
);

223 
	`TsEº‹Check_TwoLevñ_£tPesPid
(
ch™ID
,
°SórchInfo
);

224  
GOSTSR_SUCCESS
;

225 
	}
}

228 
GOSTSR_U32
 
	$TsEº‹Check_TwoLevñ_gëTimeUs_byByãPos
(
GOSTSR_U8
 
ch™ID
,
GOSTSR_U32
 
u32ByãPos
)

230 
GOSTSR_F32
 
f32TsR©eUs
= 0.0;

231 
GOSTSR_U32
 
u32TimeUsCur
 = 0;

233 if((!
°TwoLevñP¨am
[
ch™ID
].
bTsR©eisRecved
Ë|| (ch™ID >
TSERROR_CHANNELID_MAX
))

235  
u32TimeUsCur
;

238 
f32TsR©eUs
 = 
	`TwoLevñ_gëTsR©eUs
(
ch™ID
);

239 if(
f32TsR©eUs
 > 0.0)

241 
u32TimeUsCur
 = (1.0 * 
u32ByãPos
 * 8Ë/ 
f32TsR©eUs
;

244  
u32TimeUsCur
;

245 
	}
}

246 
GOSTSR_S32
 
	$TsEº‹Check_TwoLevñ_£tTøn•‹tR©e
(
TR101290_ERROR_S
 *
p°Eº‹Info
,
GOSTSR_U32
 
ödex
,
GOSTSR_U64
 
u64P¸_Ba£
, 
GOSTSR_U16
 
u64P¸_Ext
)

248 
GOSTSR_U32
 
u32PªPos
 = 0;

249 
GOSTSR_U32
 
u32CurPos
 = 0;

250 
GOSTSR_U32
 
u32AvTøn•‹tR©e
 = 0;

251 
GOSTSR_U64
 
u64PªP¸Ba£VÆue
 = 0;

252 
GOSTSR_U64
 
u64CurP¸Ba£VÆue
 = 0;

253 
GOSTSR_U16
 
u16PªP¸ExãnVÆue
 = 0;

254 
GOSTSR_U16
 
u16CurP¸ExãnVÆue
 = 0;

255 
GOSTSR_U8
 
ch™ID
 = 
p°Eº‹Info
->chanID;

257 if((
GOSTSR_NULL
 =
p°Eº‹Info
Ë|| (
ch™ID
 >
TSERROR_CHANNELID_MAX
))

259  
GOSTSR_FAILURE
;

261 if(
°TwoLevñP¨am
[
ch™ID
].
°TsR©eInfo
[
ödex
].
bFú°U£d
)

263 
°TwoLevñP¨am
[
ch™ID
].
°TsR©eInfo
[
ödex
].
bFú°U£d
 = 
GOSTSR_FALSE
;

264 
°TwoLevñP¨am
[
ch™ID
].
°TsR©eInfo
[
ödex
].
u32ByãPos

p°Eº‹Info
->
byãPos
;

265 
°TwoLevñP¨am
[
ch™ID
].
°TsR©eInfo
[
ödex
].
u64P¸Ba£
 = 
u64P¸_Ba£
;

266 
°TwoLevñP¨am
[
ch™ID
].
°TsR©eInfo
[
ödex
].
u16P¸Ext
 = 
u64P¸_Ext
;

267  
GOSTSR_FAILURE
;

270 
u32PªPos
 = 
°TwoLevñP¨am
[
ch™ID
].
°TsR©eInfo
[
ödex
].
u32ByãPos
;

271 
u64PªP¸Ba£VÆue
 = 
°TwoLevñP¨am
[
ch™ID
].
°TsR©eInfo
[
ödex
].
u64P¸Ba£
;

272 
u16PªP¸ExãnVÆue
 = 
°TwoLevñP¨am
[
ch™ID
].
°TsR©eInfo
[
ödex
].
u16P¸Ext
;

274 
u32CurPos
 = 
p°Eº‹Info
->
byãPos
;

275 
u64CurP¸Ba£VÆue
 = 
u64P¸_Ba£
;

276 
u16CurP¸ExãnVÆue
 = 
u64P¸_Ext
;

278 i‡(
u64CurP¸Ba£VÆue
 < 
u64PªP¸Ba£VÆue
)

280 if(
u32CurPos
 < 
u32PªPos
)

282 if((0x1ffffffffULL - 
u64PªP¸Ba£VÆue
 + 
u64CurP¸Ba£VÆue
)*300 + 
u16CurP¸ExãnVÆue
 - 
u16PªP¸ExãnVÆue
 > 0)

284 
u32AvTøn•‹tR©e
 = (
TWOLEVEL_BYTEPOS_MAX
 - 
u32PªPos
 + 
u32CurPos
)*8*27000000.0/((0x1ffffffffULL - 
u64PªP¸Ba£VÆue
 + 
u64CurP¸Ba£VÆue
)*300 + 
u16CurP¸ExãnVÆue
 - 
u16PªP¸ExãnVÆue
);

289 if((0x1ffffffffULL - 
u64PªP¸Ba£VÆue
 + 
u64CurP¸Ba£VÆue
)*300 + 
u16CurP¸ExãnVÆue
 - 
u16PªP¸ExãnVÆue
 > 0)

291 
u32AvTøn•‹tR©e
 = (
u32CurPos
 - 
u32PªPos
)*8*27000000.0/((0x1ffffffffULL - 
u64PªP¸Ba£VÆue
 + 
u64CurP¸Ba£VÆue
)*300 + 
u16CurP¸ExãnVÆue
 - 
u16PªP¸ExãnVÆue
);

297 if(
u32CurPos
 < 
u32PªPos
)

299 if((
u64CurP¸Ba£VÆue
 - 
u64PªP¸Ba£VÆue
)*300 + 
u16CurP¸ExãnVÆue
 - 
u16PªP¸ExãnVÆue
 > 0)

301 
u32AvTøn•‹tR©e
 = (
GOSTSR_U32
)((
TWOLEVEL_BYTEPOS_MAX
 - 
u32PªPos
 + 
u32CurPos
)*8*27000000.0/((
u64CurP¸Ba£VÆue
 - 
u64PªP¸Ba£VÆue
)*300 + 
u16CurP¸ExãnVÆue
 - 
u16PªP¸ExãnVÆue
));

306 if(((
u64CurP¸Ba£VÆue
 -
u64PªP¸Ba£VÆue
)*300 + 
u16CurP¸ExãnVÆue
 - 
u16PªP¸ExãnVÆue
) > 0)

308 
u32AvTøn•‹tR©e
 = (
u32CurPos
 - 
u32PªPos
)*8*27000000.0/((
u64CurP¸Ba£VÆue
 -
u64PªP¸Ba£VÆue
)*300 + 
u16CurP¸ExãnVÆue
 - 
u16PªP¸ExãnVÆue
);

313 i‡(((
°TwoLevñP¨am
[
ch™ID
].
°TsR©eInfo
[
ödex
].
u32Tøn•‹tR©e
 !0Ë&& (
	`abs
(°TwoLevñP¨am[ch™ID].°TsR©eInfo[ödex].u32Tøn•‹tR©ê- 
u32AvTøn•‹tR©e
) < 1000000))

314 || (
u32AvTøn•‹tR©e
 != 0))

316  
GOSTSR_FAILURE
;

320 i‡((
u32AvTøn•‹tR©e
 < 
TWOLEVEL_PCR_TSRATE_MIN
Ë|| (u32AvTøn•‹tR©ê> 
TWOLEVEL_PCR_TSRATE_MAX
))

322  
GOSTSR_FAILURE
;

325 
°TwoLevñP¨am
[
ch™ID
].
°TsR©eInfo
[
ödex
].
u32ByãPos
 = 
p°Eº‹Info
->
byãPos
;

326 
°TwoLevñP¨am
[
ch™ID
].
°TsR©eInfo
[
ödex
].
u64P¸Ba£
 = 
u64P¸_Ba£
;

327 
°TwoLevñP¨am
[
ch™ID
].
°TsR©eInfo
[
ödex
].
u16P¸Ext
 = 
u64P¸_Ext
;

328 
°TwoLevñP¨am
[
ch™ID
].
°TsR©eInfo
[
ödex
].
u32Tøn•‹tR©e
 = 
u32AvTøn•‹tR©e
;

329 
°TwoLevñP¨am
[
ch™ID
].
bTsR©eisRecved
 = 
GOSTSR_TRUE
;

332  
GOSTSR_SUCCESS
;

333 
	}
}

336 
GOSTSR_S32
 
	$TsEº‹Check_TwoLevñ_checkTøn•‹tEº‹
(
TR101290_ERROR_S
 *
p°Eº‹Info
,
GOSTSR_U8
 
u8Eº‹_ödiˇãr
)

338 
GOSTSR_U8
 
ch™ID
 = 0;

340 if((
p°Eº‹Info
 =
GOSTSR_NULL
Ë|| (!p°Eº‹Info->
bisM©ched
Ë|| (
u8Eº‹_ödiˇãr
 =0Ë|| (p°Eº‹Info->
ch™ID
 >
TSERROR_CHANNELID_MAX
))

342  
GOSTSR_FAILURE
;

344 if(
u8Eº‹_ödiˇãr
 == 1)

346 
ch™ID
 = 
p°Eº‹Info
->chanID;

347 
°TwoLevñP¨am
[
ch™ID
].
°TwoLevñ
.
u32TSå™smissi⁄Eº‹Cou¡
++;

350  
GOSTSR_SUCCESS
;

351 
	}
}

353 
GOSTSR_S32
 
	$TsEº‹Check_TwoLevñ_checkCrcEº‹
(
TR101290_ERROR_S
 *
p°Eº‹Info
,
GOSTSR_U8
 
u8TabÀID
,
GOSTSR_U32
 
u32TabÀCrc
,GOSTSR_U32 
u32CÆCrc
)

355 
GOSTSR_U8
 
ch™ID
 = 0;

356 
GOSTSR_U8
 
Êag
 = 0;

358 if((
p°Eº‹Info
 =
GOSTSR_NULL
Ë|| (
u32TabÀCrc
 =
u32CÆCrc
Ë|| (p°Eº‹Info->
ch™ID
 >
TSERROR_CHANNELID_MAX
))

360  
GOSTSR_FAILURE
;

362 
ch™ID
 = 
p°Eº‹Info
->chanID;

363 
u8TabÀID
)

365 
PAT_TABLE_ID
:

366 
°TwoLevñP¨am
[
ch™ID
].
°TwoLevñ
.
°CrcEº‹Info
.
∑tCrcEº‹Cou¡
++;

367 
°TwoLevñP¨am
[
ch™ID
].
°TwoLevñ
.
°CrcEº‹Info
.
tŸÆCrcEº‹Cou¡
++;

368 
Êag
 = 1;

370 
PMT_TABLE_ID
:

371 
°TwoLevñP¨am
[
ch™ID
].
°TwoLevñ
.
°CrcEº‹Info
.
pmCr˘Eº‹Cou¡
++;

372 
°TwoLevñP¨am
[
ch™ID
].
°TwoLevñ
.
°CrcEº‹Info
.
tŸÆCrcEº‹Cou¡
++;

373 
Êag
 = 1;

375 
CAT_TABLE_ID
:

376 
°TwoLevñP¨am
[
ch™ID
].
°TwoLevñ
.
°CrcEº‹Info
.
ˇtCrcEº‹Cou¡
++;

377 
°TwoLevñP¨am
[
ch™ID
].
°TwoLevñ
.
°CrcEº‹Info
.
tŸÆCrcEº‹Cou¡
++;

378 
Êag
 = 1;

380 
NIT_TABLE_ID_ACTUAL
:

381 
NIT_TABLE_ID_OTHER
:

382 
°TwoLevñP¨am
[
ch™ID
].
°TwoLevñ
.
°CrcEº‹Info
.
nôCrcEº‹Cou¡
++;

383 
°TwoLevñP¨am
[
ch™ID
].
°TwoLevñ
.
°CrcEº‹Info
.
tŸÆCrcEº‹Cou¡
++;

384 
Êag
 = 1;

386 
BAT_TABLE_ID
:

387 
°TwoLevñP¨am
[
ch™ID
].
°TwoLevñ
.
°CrcEº‹Info
.
b©CrcEº‹Cou¡
++;

388 
°TwoLevñP¨am
[
ch™ID
].
°TwoLevñ
.
°CrcEº‹Info
.
tŸÆCrcEº‹Cou¡
++;

389 
Êag
 = 1;

391 
SDT_TABLE_ID_ACTUAL
:

392 
SDT_TABLE_ID_OTEHR
:

393 
°TwoLevñP¨am
[
ch™ID
].
°TwoLevñ
.
°CrcEº‹Info
.
sdtCrcEº‹Cou¡
++;

394 
°TwoLevñP¨am
[
ch™ID
].
°TwoLevñ
.
°CrcEº‹Info
.
tŸÆCrcEº‹Cou¡
++;

395 
Êag
 = 1;

397 
EIT_TABLE_ID_ACTUAL
:

398 
EIT_TABLE_ID_ACTUAL_SHEDULE
:

399 
EIT_TABLE_ID_OTHER
:

400 
EIT_TABLE_ID_OTHER_SHEDULE
:

401 
°TwoLevñP¨am
[
ch™ID
].
°TwoLevñ
.
°CrcEº‹Info
.
eôCrcEº‹Cou¡
++;

402 
°TwoLevñP¨am
[
ch™ID
].
°TwoLevñ
.
°CrcEº‹Info
.
tŸÆCrcEº‹Cou¡
++;

403 
Êag
 = 1;

405 
TDT_TABLE_ID
:

406 
TOT_TABLE_ID
:

407 
RST_TABLE_ID
:

408 
SI_TABLE_ID
:

413 if(
Êag
 == 1)

414 
	`TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_TWO
,
TR101290_TWO_ERROR_CRC
,
p°Eº‹Info
->
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

415  
GOSTSR_SUCCESS
;

416 
	}
}

418 
GOSTSR_S32
 
	$TsEº‹Check_TwoLevñ_checkP¸Disc⁄tEº‹
(
TR101290_ERROR_S
 *
p°Eº‹Info
,
GOSTSR_U32
 
ödex
,
GOSTSR_U64
 
u64P¸_Ba£
, 
GOSTSR_U16
 
u16P¸_Ext
,
GOSTSR_BOOL
 *
bEº‹Fœg
)

420 
GOSTSR_U32
 
u32P¸VÆueNs_Diff
 = 0;

421 
GOSTSR_U32
 
u32P¸VÆueMs_Diff
 = 0;

422 
GOSTSR_U8
 
ch™ID
 = 0;

424 if((
p°Eº‹Info
 =
GOSTSR_NULL
Ë|| (
bEº‹Fœg
 =GOSTSR_NULLË|| (p°Eº‹Info->
ch™ID
 >
TSERROR_CHANNELID_MAX
))

426  
GOSTSR_FAILURE
;

428 
ch™ID
 = 
p°Eº‹Info
->chanID;

430 if(
°TwoLevñP¨am
[
ch™ID
].
°P¸Info
[
ödex
].
bFú°U£d
)

432 
°TwoLevñP¨am
[
ch™ID
].
°P¸Info
[
ödex
].
bFú°U£d
 = 
GOSTSR_FALSE
;

433 
°TwoLevñP¨am
[
ch™ID
].
°P¸Info
[
ödex
].
u64P¸Ba£
 = 
u64P¸_Ba£
;

434 
°TwoLevñP¨am
[
ch™ID
].
°P¸Info
[
ödex
].
u16P¸Ext
 = 
u16P¸_Ext
;

435 
°TwoLevñP¨am
[
ch™ID
].
°P¸Info
[
ödex
].
u32P¸VÆueNs
 = 
TSERROR_INVALID_U32
;

436 *
bEº‹Fœg
 = 
GOSTSR_FALSE
;

437  
GOSTSR_FAILURE
;

441 if(
u64P¸_Ba£
 >
°TwoLevñP¨am
[
ch™ID
].
°P¸Info
[
ödex
].
u64P¸Ba£
)

443 if(
u16P¸_Ext
 >
°TwoLevñP¨am
[
ch™ID
].
°P¸Info
[
ödex
].
u16P¸Ext
)

445 
u32P¸VÆueNs_Diff
 = ((
u64P¸_Ba£
-
°TwoLevñP¨am
[
ch™ID
].
°P¸Info
[
ödex
].
u64P¸Ba£
)*300+(
u16P¸_Ext
-°TwoLevñP¨am[ch™ID].°P¸Info[ödex].
u16P¸Ext
))*1000/27;

449 
u32P¸VÆueNs_Diff
 = ((
u64P¸_Ba£
-1-
°TwoLevñP¨am
[
ch™ID
].
°P¸Info
[
ödex
].
u64P¸Ba£
)*300+(0x1ff+
u16P¸_Ext
-°TwoLevñP¨am[ch™ID].°P¸Info[ödex].
u16P¸Ext
))*1000/27;

454 if(
u16P¸_Ext
 >
°TwoLevñP¨am
[
ch™ID
].
°P¸Info
[
ödex
].
u16P¸Ext
)

456 
u32P¸VÆueNs_Diff
 = ((0x1ffffffffULL - 
°TwoLevñP¨am
[
ch™ID
].
°P¸Info
[
ödex
].
u64P¸Ba£
+
u64P¸_Ba£
)*300+(
u16P¸_Ext
-°TwoLevñP¨am[ch™ID].°P¸Info[ödex].
u16P¸Ext
))*1000/27;

460 
u32P¸VÆueNs_Diff
 = ((0x1ffffffffULL - 
°TwoLevñP¨am
[
ch™ID
].
°P¸Info
[
ödex
].
u64P¸Ba£
+(
u64P¸_Ba£
-1))*300+(0x1ff+
u16P¸_Ext
-°TwoLevñP¨am[ch™ID].°P¸Info[ödex].
u16P¸Ext
))*1000/27;

464 
°TwoLevñP¨am
[
ch™ID
].
°P¸Info
[
ödex
].
u32P¸VÆueNs
 = 
u32P¸VÆueNs_Diff
;

465 
°TwoLevñP¨am
[
ch™ID
].
°P¸Info
[
ödex
].
u64P¸Ba£
 = 
u64P¸_Ba£
;

466 
°TwoLevñP¨am
[
ch™ID
].
°P¸Info
[
ödex
].
u16P¸Ext
 = 
u16P¸_Ext
;

469 
u32P¸VÆueMs_Diff
 = 
u32P¸VÆueNs_Diff
 / 1000 /1000;

470 if(
u32P¸VÆueMs_Diff
 > 40)

472 
°TwoLevñP¨am
[
ch™ID
].
°TwoLevñ
.
u32P¸DisEº‹Cou¡
++;

473 
	`TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_TWO
,
TR101290_TWO_ERROR_PCRDISCONT
,
p°Eº‹Info
->
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

474 *
bEº‹Fœg
 = 
GOSTSR_TRUE
;

478  
GOSTSR_SUCCESS
;

479 
	}
}

482 
GOSTSR_S32
 
	$TsEº‹Check_TwoLevñ_checkP¸AccuøcyEº‹
(
TR101290_ERROR_S
 *
p°Eº‹Info
,
GOSTSR_U32
 
ödex
,
GOSTSR_U64
 
u64P¸_Ba£
, 
GOSTSR_U16
 
u64P¸_Ext
)

484 
GOSTSR_U32
 
u32P¸VÆueP¸_Ns
 = 0;

485 
GOSTSR_U32
 
u32P¸VÆueBô_Ns
 = 0;

486 
GOSTSR_U32
 
u32P¸VÆueDiff_Ns
 = 0;

487 
GOSTSR_U32
 
u32byãOff£t
 = 0;

488 
GOSTSR_F32
 
f32TsR©eUs
 = 0.0;

489 
GOSTSR_U8
 
ch™ID
 = 0;

491 if((
p°Eº‹Info
 =
GOSTSR_NULL
Ë|| (p°Eº‹Info->
ch™ID
 >
TSERROR_CHANNELID_MAX
))

493  
GOSTSR_FAILURE
;

495 
ch™ID
 = 
p°Eº‹Info
->chanID;

496 if((
°TwoLevñP¨am
[
ch™ID
].
°P¸Info
[
ödex
].
u32ByãPos
 =0Ë|| (°TwoLevñP¨am[ch™ID].°P¸Info[ödex].
u32P¸VÆueNs
 =
TSERROR_INVALID_U32
))

498 
°TwoLevñP¨am
[
ch™ID
].
°P¸Info
[
ödex
].
u32ByãPos
 = 
p°Eº‹Info
->
byãPos
;

499  
GOSTSR_FAILURE
;

504 
u32P¸VÆueP¸_Ns
 =
°TwoLevñP¨am
[
ch™ID
].
°P¸Info
[
ödex
].
u32P¸VÆueNs
;

506 
f32TsR©eUs
 = 
	`TwoLevñ_gëTsR©eUs
(
ch™ID
);

507 if(
f32TsR©eUs
 == 0.0)

509  
GOSTSR_FAILURE
;

512 if(
p°Eº‹Info
->
bC¨ryFœg
)

514 
u32byãOff£t
 = 
TWOLEVEL_BYTEPOS_MAX
+
p°Eº‹Info
->
byãPos
 - 
°TwoLevñP¨am
[
ch™ID
].
°P¸Info
[
ödex
].
u32ByãPos
;

518 if(
p°Eº‹Info
->
byãPos
 >
°TwoLevñP¨am
[
ch™ID
].
°P¸Info
[
ödex
].
u32ByãPos
)

520 
u32byãOff£t
 = 
p°Eº‹Info
->
byãPos
 - 
°TwoLevñP¨am
[
ch™ID
].
°P¸Info
[
ödex
].
u32ByãPos
;

524 
u32byãOff£t
 = 
°TwoLevñP¨am
[
ch™ID
].
°P¸Info
[
ödex
].
u32ByãPos
 - 
p°Eº‹Info
->
byãPos
;

527 
°TwoLevñP¨am
[
ch™ID
].
°P¸Info
[
ödex
].
u32ByãPos
 = 
p°Eº‹Info
->
byãPos
;

529 
u32P¸VÆueBô_Ns
 = (
GOSTSR_U32
)(1.0*
u32byãOff£t
*8*1000/
f32TsR©eUs
);

531 if(
	`abs
(
u32P¸VÆueBô_Ns
 - 
u32P¸VÆueP¸_Ns
) > 500)

533 
°TwoLevñP¨am
[
ch™ID
].
°TwoLevñ
.
u32P¸JôEº‹Cou¡
++;

534 
u32P¸VÆueDiff_Ns
 = 
	`abs
(
u32P¸VÆueBô_Ns
 - 
u32P¸VÆueP¸_Ns
);

535 
	`TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_TWO
,
TR101290_TWO_ERROR_ACCURACY
,
p°Eº‹Info
->
byãPos
,(
GOSTSR_U8
 *)&
u32P¸VÆueDiff_Ns
,
GOSTSR_NULL
);

539  
GOSTSR_SUCCESS
;

540 
	}
}

542 
GOSTSR_S32
 
	$TsEº‹Check_TwoLevñ_checkP¸Eº‹
(
TR101290_ERROR_S
 *
p°Eº‹Info
,
GOSTSR_U16
 
u16P¸Pid
,
GOSTSR_U64
 
u64P¸_Ba£
, GOSTSR_U16 
u64P¸_Ext
, 
GOSTSR_BOOL
 
Êag
)

544 
GOSTSR_U32
 
ödex
 = 0;

545 
GOSTSR_BOOL
 
bEº‹Fœg
 = 
GOSTSR_FALSE
;

546 
GOSTSR_U8
 
ch™ID
 = 
p°Eº‹Info
->chanID;

548 if((
p°Eº‹Info
 =
GOSTSR_NULL
Ë|| (!p°Eº‹Info->
bisM©ched
 || (p°Eº‹Info->
ch™ID
 >
TSERROR_CHANNELID_MAX
)))

550  
GOSTSR_FAILURE
;

553 if(!
	`TwoLevñ_checkisP¸Pid
(
ch™ID
,
u16P¸Pid
, &
ödex
))

555  
GOSTSR_FAILURE
;

559 i‡(!
Êag
)

561 
°TwoLevñP¨am
[
ch™ID
].
°TsR©eInfo
[
ödex
].
bFú°U£d
 = 
GOSTSR_TRUE
;

562 
°TwoLevñP¨am
[
ch™ID
].
°TsR©eInfo
[
ödex
].
u32Tøn•‹tR©e
 = 0;

563 
°TwoLevñP¨am
[
ch™ID
].
°P¸Info
[
ödex
].
bFú°U£d
 = 
GOSTSR_TRUE
;

564 
°TwoLevñP¨am
[
ch™ID
].
°P¸Info
[
ödex
].
u32ByãPos
 = 0;

565  
GOSTSR_FAILURE
;

569 
	`TsEº‹Check_TwoLevñ_checkP¸Disc⁄tEº‹
(
p°Eº‹Info
,
ödex
,
u64P¸_Ba£
,
u64P¸_Ext
,&
bEº‹Fœg
);

572 
	`TsEº‹Check_TwoLevñ_checkP¸AccuøcyEº‹
(
p°Eº‹Info
,
ödex
,
u64P¸_Ba£
,
u64P¸_Ext
);

574 if(!
bEº‹Fœg
)

577 
°TwoLevñP¨am
[
ch™ID
].
°TsR©eInfo
[
ödex
].
u16P¸Pid
 = u16PcrPid;

578 
	`TsEº‹Check_TwoLevñ_£tTøn•‹tR©e
(
p°Eº‹Info
,
ödex
,
u64P¸_Ba£
,
u64P¸_Ext
);

581  
GOSTSR_SUCCESS
;

582 
	}
}

584 
GOSTSR_S32
 
	$TsEº‹Check_TwoLevñ_checkPtsEº‹
(
TR101290_ERROR_S
 *
p°Eº‹Info
,
GOSTSR_U16
 
u16PesPid
)

586 
GOSTSR_U32
 
u32PtsTime
 = 0;

587 
GOSTSR_F32
 
f32P¸MsR©e
 = 0;

588 
GOSTSR_U32
 
ödex
 = 0;

589 
GOSTSR_U32
 
u32byãOff£t
 = 0;

590 
GOSTSR_U8
 
ch™ID
 = 
p°Eº‹Info
->chanID;

592 if((
p°Eº‹Info
 =
GOSTSR_NULL
Ë|| (!p°Eº‹Info->
bisM©ched
Ë|| (!
°TwoLevñP¨am
[
ch™ID
].
bTsR©eisRecved
Ë|| (p°Eº‹Info->ch™ID >
TSERROR_CHANNELID_MAX
))

594  
GOSTSR_FAILURE
;

597 if(!
	`TwoLevñ_checkisPesPid
(
ch™ID
,
u16PesPid
, &
ödex
))

599  
GOSTSR_FAILURE
;

602 if((
°TwoLevñP¨am
[
ch™ID
].
°PesInfo
[
ödex
].
bFú°U£d
Ë|| (°TwoLevñP¨am[ch™ID].°PesInfo[ödex].
u32ByãPos
 == 0))

604 
°TwoLevñP¨am
[
ch™ID
].
°PesInfo
[
ödex
].
bFú°U£d
 = 
GOSTSR_FALSE
;

605 
°TwoLevñP¨am
[
ch™ID
].
°PesInfo
[
ödex
].
u32ByãPos
 = 
p°Eº‹Info
->
byãPos
;

606  
GOSTSR_FAILURE
;

609 
f32P¸MsR©e
 = 
	`TwoLevñ_gëTsR©eMs
(
ch™ID
);

610 if(
f32P¸MsR©e
 == 0.0)

612  
GOSTSR_FAILURE
;

615 if(
p°Eº‹Info
->
bC¨ryFœg
)

617 
u32byãOff£t
 = 
TWOLEVEL_BYTEPOS_MAX
+
p°Eº‹Info
->
byãPos
 - 
°TwoLevñP¨am
[
ch™ID
].
°PesInfo
[
ödex
].
u32ByãPos
;

621 if(
p°Eº‹Info
->
byãPos
 >
°TwoLevñP¨am
[
ch™ID
].
°PesInfo
[
ödex
].
u32ByãPos
)

623 
u32byãOff£t
 = 
p°Eº‹Info
->
byãPos
 - 
°TwoLevñP¨am
[
ch™ID
].
°PesInfo
[
ödex
].
u32ByãPos
;

627 
u32byãOff£t
 = 
°TwoLevñP¨am
[
ch™ID
].
°PesInfo
[
ödex
].
u32ByãPos
 - 
p°Eº‹Info
->
byãPos
;

630 
°TwoLevñP¨am
[
ch™ID
].
°PesInfo
[
ödex
].
u32ByãPos
 = 
p°Eº‹Info
->
byãPos
;

632 
u32PtsTime
 =(
GOSTSR_U32
)(1.0 * 
u32byãOff£t
 * 8 / 
f32P¸MsR©e
);

633 if(
u32PtsTime
 > 700)

635 
°TwoLevñP¨am
[
ch™ID
].
°TwoLevñ
.
u32PtsEº‹Cou¡
++;

636 
	`TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_TWO
,
TR101290_TWO_ERROR_PTS
,
p°Eº‹Info
->
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

637  
GOSTSR_SUCCESS
;

639  
GOSTSR_FAILURE
;

640 
	}
}

642 
GOSTSR_S32
 
	$TsEº‹Check_TwoLevñ_checkC©Eº‹
(
TR101290_ERROR_S
 *
p°Eº‹Info
,
GOSTSR_U16
 
u16Pid
, 
GOSTSR_U8
 
u8TabÀID
, GOSTSR_U8 
u8S¸ambÀ
)

644 
GOSTSR_U8
 
ch™ID
 = 0;

646 if((
p°Eº‹Info
 =
GOSTSR_NULL
Ë|| (!p°Eº‹Info->
bisM©ched
Ë|| (
u16Pid
 !
CAT_PID
Ë|| (p°Eº‹Info->
ch™ID
 >
TSERROR_CHANNELID_MAX
))

648  
GOSTSR_FAILURE
;

650 
ch™ID
 = 
p°Eº‹Info
->chanID;

651 if(
u8TabÀID
 !
CAT_TABLE_ID
)

653 
°TwoLevñP¨am
[
ch™ID
].
°TwoLevñ
.
°C©Eº‹Info
.
èbÀIDEº‹Cou¡
++;

654 
°TwoLevñP¨am
[
ch™ID
].
°TwoLevñ
.
°C©Eº‹Info
.
tŸÆC©Eº‹Cou¡
++;

655 
	`TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_TWO
,
TR101290_TWO_ERROR_CAT
,
p°Eº‹Info
->
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

658 if(
u8S¸ambÀ
 != 0)

660 
°TwoLevñP¨am
[
ch™ID
].
°TwoLevñ
.
°C©Eº‹Info
.
sˇmbÀEº‹Cou¡
++;

661 
°TwoLevñP¨am
[
ch™ID
].
°TwoLevñ
.
°C©Eº‹Info
.
tŸÆC©Eº‹Cou¡
++;

662 
	`TS_ERROR_LOG
(
ch™ID
,
TYPE_ERROR_TWO
,
TR101290_TWO_ERROR_CAT
,
p°Eº‹Info
->
byãPos
,
GOSTSR_NULL
,GOSTSR_NULL);

665  
GOSTSR_SUCCESS
;

666 
	}
}

668 
GOSTSR_S32
 
	$TsEº‹Check_TwoLevñ_gëTwoLevñEº‹
(
GOSTSR_U8
 
ch™ID
,
TSERROR_TWOLEVEL_S
 *
pTwoLevñ
)

670 if((
pTwoLevñ
 =
GOSTSR_NULL
Ë|| (
ch™ID
 >
TSERROR_CHANNELID_MAX
))

672  
GOSTSR_FAILURE
;

674 
	`mem˝y
(
pTwoLevñ
, &
°TwoLevñP¨am
[
ch™ID
].
°TwoLevñ
, (
TSERROR_TWOLEVEL_S
));

676  
GOSTSR_SUCCESS
;

677 
	}
}

679 
GOSTSR_S32
 
	$TsEº‹Check_TwoLevñ_Inô
()

681 
GOSTSR_S32
 
i
 = 0, 
j
 = 0;

683 
	`mem£t
(&
°TwoLevñP¨am
, 0x00, (
TSERROR_TWOLEVEL_PARAM_S
Ë* 
TSERROR_CHANNELID_MAX
);

685 
i
 = 0; i < 
TSERROR_CHANNELID_MAX
; i++)

687 
j
 = 0 ; j < 
PCRPID_NUM_MAX
; j++)

689 
°TwoLevñP¨am
[
i
].
°P¸Info
[
j
].
bFú°U£d
 = 
GOSTSR_TRUE
;

690 
°TwoLevñP¨am
[
i
].
°P¸Info
[
j
].
u16P¸Pid
 = 
TSERROR_INVALID_U16
;

692 
°TwoLevñP¨am
[
i
].
°TsR©eInfo
[
j
].
bFú°U£d
 = 
GOSTSR_TRUE
;

693 
°TwoLevñP¨am
[
i
].
°TsR©eInfo
[
j
].
u16P¸Pid
 = 
TSERROR_INVALID_U16
;

695 
j
 = 0 ; j < 
PESPID_NUM_MAX
; j++)

697 
°TwoLevñP¨am
[
i
].
°PesInfo
[
j
].
bFú°U£d
 = 
GOSTSR_TRUE
;

698 
°TwoLevñP¨am
[
i
].
°PesInfo
[
j
].
u16PesPid
 = 
TSERROR_INVALID_U16
;

700 
°TwoLevñP¨am
[
i
].
bTsR©eisRecved
 = 
GOSTSR_FALSE
;

703  
GOSTSR_SUCCESS
;

704 
	}
}

706 
GOSTSR_S32
 
	$TsEº‹Check_TwoLevñ_DeInô
()

708 
GOSTSR_S32
 
i
 = 0, 
j
 = 0;

710 
	`mem£t
(&
°TwoLevñP¨am
, 0x00, (
TSERROR_TWOLEVEL_PARAM_S
Ë* 
TSERROR_CHANNELID_MAX
);

712 
i
 = 0; i < 
TSERROR_CHANNELID_MAX
; i++)

714 
j
 = 0 ; j < 
PCRPID_NUM_MAX
; j++)

716 
°TwoLevñP¨am
[
i
].
°P¸Info
[
j
].
bFú°U£d
 = 
GOSTSR_TRUE
;

717 
°TwoLevñP¨am
[
i
].
°P¸Info
[
j
].
u16P¸Pid
 = 
TSERROR_INVALID_U16
;

719 
°TwoLevñP¨am
[
i
].
°TsR©eInfo
[
j
].
bFú°U£d
 = 
GOSTSR_TRUE
;

720 
°TwoLevñP¨am
[
i
].
°TsR©eInfo
[
j
].
u16P¸Pid
 = 
TSERROR_INVALID_U16
;

722 
j
 = 0 ; j < 
PESPID_NUM_MAX
; j++)

724 
°TwoLevñP¨am
[
i
].
°PesInfo
[
j
].
bFú°U£d
 = 
GOSTSR_TRUE
;

725 
°TwoLevñP¨am
[
i
].
°PesInfo
[
j
].
u16PesPid
 = 
TSERROR_INVALID_U16
;

727 
°TwoLevñP¨am
[
i
].
bTsR©eisRecved
 = 
GOSTSR_FALSE
;

729  
GOSTSR_SUCCESS
;

730 
	}
}

732 
GOSTSR_S32
 
	$TsEº‹Check_TwoLevñ_ReInô
(
GOSTSR_U8
 
ch™ID
)

734 
GOSTSR_S32
 
j
 = 0;

736 if((
ch™ID
 >
TSERROR_CHANNELID_MAX
))

738  
GOSTSR_FAILURE
;

740 
	`mem£t
(&
°TwoLevñP¨am
[
ch™ID
], 0x00, (
TSERROR_TWOLEVEL_PARAM_S
));

742 
j
 = 0 ; j < 
PCRPID_NUM_MAX
; j++)

744 
°TwoLevñP¨am
[
ch™ID
].
°P¸Info
[
j
].
bFú°U£d
 = 
GOSTSR_TRUE
;

745 
°TwoLevñP¨am
[
ch™ID
].
°P¸Info
[
j
].
u16P¸Pid
 = 
TSERROR_INVALID_U16
;

747 
°TwoLevñP¨am
[
ch™ID
].
°TsR©eInfo
[
j
].
bFú°U£d
 = 
GOSTSR_TRUE
;

748 
°TwoLevñP¨am
[
ch™ID
].
°TsR©eInfo
[
j
].
u16P¸Pid
 = 
TSERROR_INVALID_U16
;

750 
j
 = 0 ; j < 
PESPID_NUM_MAX
; j++)

752 
°TwoLevñP¨am
[
ch™ID
].
°PesInfo
[
j
].
bFú°U£d
 = 
GOSTSR_TRUE
;

753 
°TwoLevñP¨am
[
ch™ID
].
°PesInfo
[
j
].
u16PesPid
 = 
TSERROR_INVALID_U16
;

755 
°TwoLevñP¨am
[
ch™ID
].
bTsR©eisRecved
 = 
GOSTSR_FALSE
;

757  
GOSTSR_SUCCESS
;

758 
	}
}

	@
1
.
0
27
867
app/main.c
bandwidth/include/ts_band.h
bandwidth/src/ts_band.c
staticfile/include/staticfile.h
staticfile/include/staticsearch.h
staticfile/src/staticfile.c
staticfile/src/staticsearch.c
tscheck/include/GosTsr_AnalysisData.h
tscheck/include/GosTsr_Common.h
tscheck/include/GosTsr_Crc.h
tscheck/include/GosTsr_Descriptor.h
tscheck/include/GosTsr_Os.h
tscheck/include/TsErrorCheck_Api.h
tscheck/include/TsErrorCheck_Common.h
tscheck/include/TsErrorCheck_Log.h
tscheck/include/TsErrorCheck_OneLevel.h
tscheck/include/TsErrorCheck_ThreeLevel.h
tscheck/include/TsErrorCheck_TwoLevel.h
tscheck/src/GosTsr_AnalysisData.c
tscheck/src/GosTsr_Crc.c
tscheck/src/GosTsr_Descriptor.c
tscheck/src/GosTsr_Os.c
tscheck/src/TsErrorCheck_Api.c
tscheck/src/TsErrorCheck_Log.c
tscheck/src/TsErrorCheck_OneLevel.c
tscheck/src/TsErrorCheck_ThreeLevel.c
tscheck/src/TsErrorCheck_TwoLevel.c
